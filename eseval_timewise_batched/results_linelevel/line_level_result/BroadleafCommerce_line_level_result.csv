line,commit_id,count,line_level_label
* This class is being un-deprecated because we want the query for the customer to happen through Hibernate instead of,94c99119c3821c752b657fe9ca850d1b11fb15db,6,0
"* through raw JDBC, which is the case when <sec:jdbc-user-service /> is used. We need the query to go through Hibernate",94c99119c3821c752b657fe9ca850d1b11fb15db,6,0
* This class is being un-deprecated because we want the query for the customer to happen through Hibernate instead of,94c99119c3821c752b657fe9ca850d1b11fb15db,6,0
"* through raw JDBC, which is the case when <sec:jdbc-user-service /> is used. We need the query to go through Hibernate",94c99119c3821c752b657fe9ca850d1b11fb15db,6,0
protected boolean forcePasswordChange = false;,94c99119c3821c752b657fe9ca850d1b11fb15db,4,1
protected boolean forcePasswordChange = false;,94c99119c3821c752b657fe9ca850d1b11fb15db,4,1
* so that we are able to attach the necessary filters in certain circumstances.,94c99119c3821c752b657fe9ca850d1b11fb15db,3,0
Customer customer = customerService.readCustomerByUsername(username);,94c99119c3821c752b657fe9ca850d1b11fb15db,3,0
boolean roleUserFound = false;,94c99119c3821c752b657fe9ca850d1b11fb15db,3,0
public void setForcePasswordChange(boolean forcePasswordChange) {,94c99119c3821c752b657fe9ca850d1b11fb15db,3,1
public void setCustomerService(CustomerService customerService) {,94c99119c3821c752b657fe9ca850d1b11fb15db,3,1
* so that we are able to attach the necessary filters in certain circumstances.,94c99119c3821c752b657fe9ca850d1b11fb15db,3,0
Customer customer = customerService.readCustomerByUsername(username);,94c99119c3821c752b657fe9ca850d1b11fb15db,3,0
boolean roleUserFound = false;,94c99119c3821c752b657fe9ca850d1b11fb15db,3,0
* Copyright 2008-2013 the original author or authors.,94c99119c3821c752b657fe9ca850d1b11fb15db,3,1
public void setForcePasswordChange(boolean forcePasswordChange) {,94c99119c3821c752b657fe9ca850d1b11fb15db,3,1
public void setCustomerService(CustomerService customerService) {,94c99119c3821c752b657fe9ca850d1b11fb15db,3,1
"@Resource(name = ""blCustomerService"")",94c99119c3821c752b657fe9ca850d1b11fb15db,2,0
"@Resource(name = ""blRoleService"")",94c99119c3821c752b657fe9ca850d1b11fb15db,2,0
"return new User(username, customer.getPassword(), true, true, !customer.isPasswordChangeRequired(), true, grantedAuthorities);",94c99119c3821c752b657fe9ca850d1b11fb15db,2,0
"if (role.getRoleName().equals(""ROLE_USER"")) {",94c99119c3821c752b657fe9ca850d1b11fb15db,2,0
if (!roleUserFound) {,94c99119c3821c752b657fe9ca850d1b11fb15db,2,0
org.broadleafcommerce.profile.core.domain.Customer customer = customerService.readCustomerByUsername(username);,94c99119c3821c752b657fe9ca850d1b11fb15db,2,1
User returnUser = null;,94c99119c3821c752b657fe9ca850d1b11fb15db,2,1
boolean pwChangeRequired = customer.isPasswordChangeRequired();,94c99119c3821c752b657fe9ca850d1b11fb15db,2,1
if (pwChangeRequired) {,94c99119c3821c752b657fe9ca850d1b11fb15db,2,1
if (forcePasswordChange) {,94c99119c3821c752b657fe9ca850d1b11fb15db,2,1
"returnUser = new User(username, customer.getPassword(), true, true, !customer.isPasswordChangeRequired(), true, grantedAuthorities);",94c99119c3821c752b657fe9ca850d1b11fb15db,2,1
} else {,94c99119c3821c752b657fe9ca850d1b11fb15db,2,1
"returnUser = new User(username, customer.getPassword(), true, true, true, true, grantedAuthorities);",94c99119c3821c752b657fe9ca850d1b11fb15db,2,1
"@Resource(name = ""blCustomerService"")",94c99119c3821c752b657fe9ca850d1b11fb15db,2,0
"@Resource(name = ""blRoleService"")",94c99119c3821c752b657fe9ca850d1b11fb15db,2,0
"return new CustomerUserDetails(customer.getId(), username, customer.getPassword(), !customer.isDeactivated(), true, !customer.isPasswordChangeRequired(), true, grantedAuthorities);",94c99119c3821c752b657fe9ca850d1b11fb15db,2,0
"if (role.getRoleName().equals(""ROLE_USER"")) {",94c99119c3821c752b657fe9ca850d1b11fb15db,2,0
if (!roleUserFound) {,94c99119c3821c752b657fe9ca850d1b11fb15db,2,0
org.broadleafcommerce.profile.core.domain.Customer customer = customerService.readCustomerByUsername(username);,94c99119c3821c752b657fe9ca850d1b11fb15db,2,1
User returnUser = null;,94c99119c3821c752b657fe9ca850d1b11fb15db,2,1
boolean pwChangeRequired = customer.isPasswordChangeRequired();,94c99119c3821c752b657fe9ca850d1b11fb15db,2,1
if (pwChangeRequired) {,94c99119c3821c752b657fe9ca850d1b11fb15db,2,1
if (forcePasswordChange) {,94c99119c3821c752b657fe9ca850d1b11fb15db,2,1
"returnUser = new User(username, customer.getPassword(), true, true, !customer.isPasswordChangeRequired(), true, grantedAuthorities);",94c99119c3821c752b657fe9ca850d1b11fb15db,2,1
} else {,94c99119c3821c752b657fe9ca850d1b11fb15db,2,1
"returnUser = new User(username, customer.getPassword(), true, true, true, true, grantedAuthorities);",94c99119c3821c752b657fe9ca850d1b11fb15db,2,1
"@ConditionalOnProperty(value = ""use.customer.state.filter"", matchIfMissing = true)",94c99119c3821c752b657fe9ca850d1b11fb15db,2,0
import org.broadleafcommerce.profile.core.domain.Customer;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
import org.springframework.security.core.authority.SimpleGrantedAuthority;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
import javax.annotation.Resource;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
*,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
* @author Andre Azzolini (apazzolini),94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
roleUserFound = true;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
},94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
import org.springframework.security.core.authority.GrantedAuthorityImpl;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
import javax.annotation.Resource;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
@Deprecated,94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
this.forcePasswordChange = forcePasswordChange;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
},94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
return returnUser;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
this.customerService = customerService;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
* #%L,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
* BroadleafCommerce Profile,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
* %%,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
* Copyright (C) 2009 - 2013 Broadleaf Commerce,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
*,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
*       http://www.apache.org/licenses/LICENSE-2.0,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
* #L%,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
import org.broadleafcommerce.profile.core.domain.Customer;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
import org.springframework.security.core.authority.SimpleGrantedAuthority;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
import javax.annotation.Resource;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
* @author Andre Azzolini (apazzolini),94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
* @author Phillip Verheyden (phillipuniverse),94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
roleUserFound = true;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
},94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
*,94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
*        http://www.apache.org/licenses/LICENSE-2.0,94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
import org.springframework.security.core.authority.GrantedAuthorityImpl;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
import org.springframework.security.core.userdetails.User;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
import javax.annotation.Resource;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
@Deprecated,94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
this.forcePasswordChange = forcePasswordChange;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
},94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
return returnUser;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
this.customerService = customerService;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
import org.broadleafcommerce.common.admin.condition.ConditionalOnAdmin;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
import org.broadleafcommerce.common.admin.condition.ConditionalOnNotAdmin;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
import org.broadleafcommerce.common.web.filter.FilterOrdered;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
return FilterOrdered.POST_SECURITY_HIGH + 50;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,0
return 1501;,94c99119c3821c752b657fe9ca850d1b11fb15db,1,1
/**,94c99119c3821c752b657fe9ca850d1b11fb15db,0,0
*/,94c99119c3821c752b657fe9ca850d1b11fb15db,0,0
grantedAuthorities.add(new SimpleGrantedAuthority(role.getRoleName()));,94c99119c3821c752b657fe9ca850d1b11fb15db,0,0
"grantedAuthorities.add(new SimpleGrantedAuthority(""ROLE_USER""));",94c99119c3821c752b657fe9ca850d1b11fb15db,0,0
"@Resource(name=""blCustomerService"")",94c99119c3821c752b657fe9ca850d1b11fb15db,0,1
"@Resource(name=""blRoleService"")",94c99119c3821c752b657fe9ca850d1b11fb15db,0,1
"grantedAuthorities.add(new GrantedAuthorityImpl(""ROLE_PASSWORD_CHANGE_REQUIRED""));",94c99119c3821c752b657fe9ca850d1b11fb15db,0,1
"grantedAuthorities.add(new GrantedAuthorityImpl(""ROLE_USER""));",94c99119c3821c752b657fe9ca850d1b11fb15db,0,1
grantedAuthorities.add(new GrantedAuthorityImpl(role.getRoleName()));,94c99119c3821c752b657fe9ca850d1b11fb15db,0,1
/**,94c99119c3821c752b657fe9ca850d1b11fb15db,0,0
*/,94c99119c3821c752b657fe9ca850d1b11fb15db,0,0
@Override,94c99119c3821c752b657fe9ca850d1b11fb15db,0,0
grantedAuthorities.add(new SimpleGrantedAuthority(role.getRoleName()));,94c99119c3821c752b657fe9ca850d1b11fb15db,0,0
"grantedAuthorities.add(new SimpleGrantedAuthority(""ROLE_USER""));",94c99119c3821c752b657fe9ca850d1b11fb15db,0,0
"@Resource(name=""blCustomerService"")",94c99119c3821c752b657fe9ca850d1b11fb15db,0,1
"@Resource(name=""blRoleService"")",94c99119c3821c752b657fe9ca850d1b11fb15db,0,1
"grantedAuthorities.add(new GrantedAuthorityImpl(""ROLE_PASSWORD_CHANGE_REQUIRED""));",94c99119c3821c752b657fe9ca850d1b11fb15db,0,1
"grantedAuthorities.add(new GrantedAuthorityImpl(""ROLE_USER""));",94c99119c3821c752b657fe9ca850d1b11fb15db,0,1
grantedAuthorities.add(new GrantedAuthorityImpl(role.getRoleName()));,94c99119c3821c752b657fe9ca850d1b11fb15db,0,1
"@Component(""blCustomerStateFilter"")",94c99119c3821c752b657fe9ca850d1b11fb15db,0,0
@ConditionalOnNotAdmin,94c99119c3821c752b657fe9ca850d1b11fb15db,0,0
"@Component(""blCustomerStateFilter"")",94c99119c3821c752b657fe9ca850d1b11fb15db,0,1
//FilterChainOrder has been dropped from Spring Security 3,94c99119c3821c752b657fe9ca850d1b11fb15db,0,1
//return FilterChainOrder.REMEMBER_ME_FILTER+1;,94c99119c3821c752b657fe9ca850d1b11fb15db,0,1
protected Category category = new CategoryImpl();,dc89225aeb0806ee2fe5246ce20c3cee065d1245,4,0
protected Product product = new ProductImpl();,dc89225aeb0806ee2fe5246ce20c3cee065d1245,4,0
"@ManyToOne(targetEntity = CategoryImpl.class, optional = false)",dc89225aeb0806ee2fe5246ce20c3cee065d1245,3,0
"@JoinColumn(name = ""CATEGORY_ID"", nullable = false)",dc89225aeb0806ee2fe5246ce20c3cee065d1245,3,0
"@ManyToOne(targetEntity = ProductImpl.class, optional = false)",dc89225aeb0806ee2fe5246ce20c3cee065d1245,3,0
"@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = ""blCategories"")",dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
parameters = {,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
"@Parameter(name = ""segment_value"", value = ""CategoryProductXrefImpl""),",dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
"@Parameter(name = ""entity_name"", value = ""org.broadleafcommerce.core.catalog.domain.CategoryProductXrefImpl"")",dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
/** The product. */,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
"@JoinColumn(name = ""PRODUCT_ID"", nullable = false)",dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
return category;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
this.category = category;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
return product;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
this.product = product;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
public Long getId() {,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
public void setId(Long id) {,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
if (category != null ? !category.equals(that.category) : that.category != null) return false;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
if (displayOrder != null ? !displayOrder.equals(that.displayOrder) : that.displayOrder != null) return false;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
if (id != null ? !id.equals(that.id) : that.id != null) return false;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
if (product != null ? !product.equals(that.product) : that.product != null) return false;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
int result = id != null ? id.hashCode() : 0;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
result = 31 * result + (category != null ? category.hashCode() : 0);,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
result = 31 * result + (product != null ? product.hashCode() : 0);,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
result = 31 * result + (displayOrder != null ? displayOrder.hashCode() : 0);,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,0
CategoryProductXrefPK categoryProductXref = new CategoryProductXrefPK();,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,1
public CategoryProductXrefPK getCategoryProductXref() {,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,1
public void setCategoryProductXref(CategoryProductXrefPK categoryProductXref) {,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,1
return new EqualsBuilder(),dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,1
int result = categoryProductXref != null ? categoryProductXref.hashCode() : 0;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,2,1
"@GeneratedValue(generator = ""CategoryProductId"")",dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,0
"name = ""CategoryProductId"",",dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,0
"strategy = ""org.broadleafcommerce.common.persistence.IdOverrideTableGenerator"",",dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,0
"@Column(name = ""CATEGORY_PRODUCT_ID"")",dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,0
},dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,0
return id;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,0
this.id = id;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,0
if (this == o) return true;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,0
if (!(o instanceof CategoryProductXrefImpl)) return false;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,0
CategoryProductXrefImpl that = (CategoryProductXrefImpl) o;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,0
return true;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,0
"@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region=""blStandardElements"")",dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,1
return categoryProductXref;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,1
},dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,1
this.categoryProductXref = categoryProductXref;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,1
/**,dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,1
return categoryProductXref.getCategory();,dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,1
* @param category,dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,1
return categoryProductXref.getProduct();,dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,1
* @param product,dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,1
if (o instanceof CategoryProductXrefImpl) {,dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,1
CategoryProductXrefImpl that = (CategoryProductXrefImpl) o;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,1
return false;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,1,1
import org.hibernate.annotations.GenericGenerator;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,0
import org.hibernate.annotations.Parameter;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,0
import javax.persistence.Column;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,0
import javax.persistence.Entity;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,0
import javax.persistence.GeneratedValue;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,0
import javax.persistence.Id;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,0
import javax.persistence.Inheritance;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,0
import javax.persistence.InheritanceType;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,0
import javax.persistence.JoinColumn;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,0
import javax.persistence.ManyToOne;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,0
import javax.persistence.Table;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,0
@Id,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,0
@GenericGenerator(,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,0
}),dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,0
protected Long id;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,0
@Override,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,0
import javax.persistence.Column;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
import javax.persistence.EmbeddedId;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
import javax.persistence.Entity;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
import javax.persistence.Inheritance;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
import javax.persistence.InheritanceType;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
import javax.persistence.Table;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
import org.apache.commons.lang3.builder.EqualsBuilder;,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
@EmbeddedId,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
/* (non-Javadoc),dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
* @see org.broadleafcommerce.core.catalog.domain.CategoryProductXref#getDisplayOrder(),dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
*/,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
* @see org.broadleafcommerce.core.catalog.domain.CategoryProductXref#setDisplayOrder(java.lang.Integer),dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
* @return,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
* @see org.broadleafcommerce.core.catalog.domain.CategoryProductXrefImpl.CategoryProductXrefPK#getCategory(),dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
* @see org.broadleafcommerce.core.catalog.domain.CategoryProductXrefImpl.CategoryProductXrefPK#setCategory(org.broadleafcommerce.core.catalog.domain.Category),dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
categoryProductXref.setCategory(category);,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
* @see org.broadleafcommerce.core.catalog.domain.CategoryProductXrefImpl.CategoryProductXrefPK#getProduct(),dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
* @see org.broadleafcommerce.core.catalog.domain.CategoryProductXrefImpl.CategoryProductXrefPK#setProduct(org.broadleafcommerce.core.catalog.domain.Product),dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
categoryProductXref.setProduct(product);,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
".append(categoryProductXref, that.categoryProductXref)",dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
.build();,dc89225aeb0806ee2fe5246ce20c3cee065d1245,0,1
"@Test(groups = { ""addPaymentToOrderLegacy"" }, dataProvider = ""basicPaymentInfo"", dataProviderClass = PaymentInfoDataProvider.class, dependsOnGroups = { ""checkOrderItemsLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,12,1
"@Test(groups = ""addFulfillmentGroupToOrderFirstLegacy"", dataProvider = ""basicFulfillmentGroupLegacy"", dataProviderClass = FulfillmentGroupDataProvider.class, dependsOnGroups = { ""addPaymentToOrderLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,10,1
"//sets up anonymous cart with active DiscreteOrderItems, and active GiftWrapOrderItem inside a BundleOrderItem. Active OrderItems are also in the root of the order and the bundled GiftWrapOrderItem wraps the root OrderItems",1b397c5267574a2aa47352245db66860acb1f75e,9,1
"@Test(groups = { ""createCartForCustomerLegacy"" }, dependsOnGroups = { ""readCustomer"", ""createPhone"" })",1b397c5267574a2aa47352245db66860acb1f75e,9,1
"@Test(groups = { ""findCurrentCartForCustomerLegacy"" }, dependsOnGroups = { ""readCustomer"", ""createPhone"", ""createCartForCustomerLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,9,1
"@Test(groups = { ""addItemToOrderLegacy"" }, dependsOnGroups = { ""findCurrentCartForCustomerLegacy"", ""createSku"", ""testCatalog"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""addAnotherItemToOrderLegacy"" }, dependsOnGroups = { ""addItemToOrderLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""addBundleToOrderLegacy"" }, dependsOnGroups = { ""addAnotherItemToOrderLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""removeBundleFromOrderLegacy"" }, dependsOnGroups = { ""addBundleToOrderLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""getItemsForOrderLegacy"" }, dependsOnGroups = { ""removeBundleFromOrderLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""updateItemsInOrderLegacy"" }, dependsOnGroups = { ""getItemsForOrderLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""removeItemFromOrderLegacy"" }, dependsOnGroups = { ""getItemsForOrderLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""checkOrderItemsLegacy"" }, dependsOnGroups = { ""removeItemFromOrderLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""removeFulfillmentGroupFromOrderLegacy"" }, dependsOnGroups = { ""addFulfillmentGroupToOrderFirstLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""findFulFillmentGroupForOrderFirstLegacy"" }, dependsOnGroups = { ""addFulfillmentGroupToOrderFirstLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""findDefaultFulFillmentGroupForOrderLegacy"" }, dependsOnGroups = { ""findCurrentCartForCustomerLegacy"", ""addFulfillmentGroupToOrderFirstLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""removeItemFromOrderAfterDefaultFulfillmentGroupLegacy"" }, dependsOnGroups = { ""addFulfillmentGroupToOrderFirstLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""getOrdersForCustomerLegacy"" }, dependsOnGroups = { ""readCustomer"", ""findCurrentCartForCustomerLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""findCartForAnonymousCustomerLegacy"" }, dependsOnGroups = { ""getOrdersForCustomerLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""findOrderByOrderNumberLegacy"" }, dependsOnGroups = { ""findCartForAnonymousCustomerLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""findNamedOrderForCustomerLegacy"" }, dependsOnGroups = { ""findOrderByOrderNumberLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""testReadOrdersForCustomerLegacy"" }, dependsOnGroups = { ""findNamedOrderForCustomerLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""testOrderPropertiesLegacy"" }, dependsOnGroups = { ""testReadOrdersForCustomerLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""testNamedOrderForCustomerLegacy"" }, dependsOnGroups = { ""testOrderPropertiesLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""testOrderPaymentInfosLegacy"" }, dataProvider = ""basicPaymentInfo"", dataProviderClass = PaymentInfoDataProvider.class)",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""testSubmitOrderLegacy"" }, dependsOnGroups = { ""findNamedOrderForCustomerLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"@Test(groups = { ""testOrderFulfillmentGroupsLegacy"" }, dataProvider = ""basicShippingRates"", dataProviderClass = ShippingRateDataProvider.class)",1b397c5267574a2aa47352245db66860acb1f75e,8,1
"* @Test(groups = { ""removeFulFillmentGroupForOrderFirst"" }, dependsOnGroups",1b397c5267574a2aa47352245db66860acb1f75e,6,1
"* Licensed under the Broadleaf Fair Use License Agreement, Version 1.0",1b397c5267574a2aa47352245db66860acb1f75e,5,1
"* the Broadleaf End User License Agreement (EULA), Version 1.1",1b397c5267574a2aa47352245db66860acb1f75e,5,1
"* Licensed under the Broadleaf Fair Use License Agreement, Version 1.0",1b397c5267574a2aa47352245db66860acb1f75e,5,1
"* the Broadleaf End User License Agreement (EULA), Version 1.1",1b397c5267574a2aa47352245db66860acb1f75e,5,1
"* @Test(groups = { ""removeDefaultFulFillmentGroupForOrder"" },",1b397c5267574a2aa47352245db66860acb1f75e,5,1
"* Licensed under the Broadleaf Fair Use License Agreement, Version 1.0",1b397c5267574a2aa47352245db66860acb1f75e,5,1
"* the Broadleaf End User License Agreement (EULA), Version 1.1",1b397c5267574a2aa47352245db66860acb1f75e,5,1
private static HydratedCacheManager manager = null;,1b397c5267574a2aa47352245db66860acb1f75e,5,1
if (toConvert != null) {,1b397c5267574a2aa47352245db66860acb1f75e,4,0
* unless the restrictions on use therein are violated and require payment to Broadleaf in which case,1b397c5267574a2aa47352245db66860acb1f75e,4,1
"* Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the ""Custom License"")",1b397c5267574a2aa47352245db66860acb1f75e,4,1
* between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.,1b397c5267574a2aa47352245db66860acb1f75e,4,1
"@Test(groups = { ""testCartAndNamedOrderLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,4,1
"@Test(groups = { ""testMergeCartLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,4,1
assert response.isMerged() == false;,1b397c5267574a2aa47352245db66860acb1f75e,4,1
"//sets up anonymous cart with two BundleOrderItems, one of which has a GiftWrapOrderItem. The GiftWrapOrderItem wraps the DiscreteOrderItems from the other bundle, which makes its bundle inactive.",1b397c5267574a2aa47352245db66860acb1f75e,4,1
* unless the restrictions on use therein are violated and require payment to Broadleaf in which case,1b397c5267574a2aa47352245db66860acb1f75e,4,1
"* Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the ""Custom License"")",1b397c5267574a2aa47352245db66860acb1f75e,4,1
* between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.,1b397c5267574a2aa47352245db66860acb1f75e,4,1
private Long orderId = null;,1b397c5267574a2aa47352245db66860acb1f75e,4,1
assert order != null;,1b397c5267574a2aa47352245db66860acb1f75e,4,1
assert items != null;,1b397c5267574a2aa47352245db66860acb1f75e,4,1
"@Test(groups= {""addItemToFulfillmentGroupSecondLegacy""}, dependsOnGroups = { ""addFulfillmentGroupToOrderFirstLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,4,1
"* ""addFulfillmentGroupToOrderFirst"" }) public void",1b397c5267574a2aa47352245db66860acb1f75e,4,1
"* dependsOnGroups = { ""findCurrentCartForCustomer"",",1b397c5267574a2aa47352245db66860acb1f75e,4,1
assert order == null;,1b397c5267574a2aa47352245db66860acb1f75e,4,1
"@Test(groups = { ""testAddSkuToOrderLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,4,1
Category category = new CategoryImpl();,1b397c5267574a2aa47352245db66860acb1f75e,4,1
"@Test(groups = { ""testCartAndNamedOrderLegacy"" })",1b397c5267574a2aa47352245db66860acb1f75e,4,1
private Long userId = null;,1b397c5267574a2aa47352245db66860acb1f75e,4,0
* unless the restrictions on use therein are violated and require payment to Broadleaf in which case,1b397c5267574a2aa47352245db66860acb1f75e,4,1
"* Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the ""Custom License"")",1b397c5267574a2aa47352245db66860acb1f75e,4,1
* between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.,1b397c5267574a2aa47352245db66860acb1f75e,4,1
//uncapitalizes the first letter of the url key,1b397c5267574a2aa47352245db66860acb1f75e,3,0
} else {,1b397c5267574a2aa47352245db66860acb1f75e,3,0
//uncapitalizes the first letter of the url key,1b397c5267574a2aa47352245db66860acb1f75e,3,1
} else {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public class LegacyCartTest extends LegacyOrderBaseTest {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void testMoveAllItemsToCartFromNamedOrder() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
Order cart = cartService.createNewCartForCustomer(namedOrder.getCustomer());,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void testAddAllItemsToCartFromNamedOrder() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void testAddAllItemsToCartFromNamedOrderWithoutExistingCart() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
Order cart = cartService.addAllItemsToCartFromNamedOrder(namedOrder);,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void testAddItemToCartFromNamedOrder() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert movedItem != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void testMoveItemToCartFromNamedOrder() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void testMoveItemToCartFromNamedOrderWithoutExistingCart() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
Order cart = cartService.findCartForCustomer(namedOrder.getCustomer());,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void testMoveItemToCartFromNamedOrderByIds() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void testMergeToEmptyCart() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
Customer customer = customerService.saveCustomer(createNamedCustomer());,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void testMergeToExistingCart() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void testMergeToExistingCartWithGiftWrapOrderItems() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public class LegacyOrderTest extends LegacyOrderBaseTest {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void createCartForCustomer() {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
Customer customer = customerService.readCustomerByUsername(userName);,1b397c5267574a2aa47352245db66860acb1f75e,3,1
Order order = cartService.createNewCartForCustomer(customer);,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert order.getId() != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void findCurrentCartForCustomer() {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
Order order = cartService.findCartForCustomer(customer);,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void addItemToOrder() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
Order order = cartService.findOrderById(orderId);,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert sku.getId() != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert item != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert item.getSku() != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void addAnotherItemToOrder() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert item.getQuantity() == 2;  // item-was merged with prior item.,1b397c5267574a2aa47352245db66860acb1f75e,3,1
"This test is currently not supported, as the order service only supports like item merging",1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert item2.getSku() != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void addBundleToOrder() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void removeBundleFromOrder() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert bundleOrderItem != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert bundleOrderItem.getDiscreteOrderItems() != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void getItemsForOrder() {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert orderItems != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
"public void updateItemsInOrder() throws ItemNotFoundException, PricingException {",1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert updatedItem != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void removeItemFromOrder() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void checkOrderItems() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert bundleOrderItem == null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void addPaymentToOrder(OrderPayment paymentInfo) {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert payment != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert payment.getOrder() != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void addFulfillmentGroupToOrderFirst(FulfillmentGroup fulfillmentGroup) throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert fg != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert fg.getId() != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void removeFulfillmentGroupFromOrder() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void findFillmentGroupForOrderFirst() {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void addItemToFulfillmentgroupSecond() {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
"* = { ""findCurrentCartForCustomer"",",1b397c5267574a2aa47352245db66860acb1f75e,3,1
* removeFulFillmentGroupForOrderFirst() { int beforeRemove =,1b397c5267574a2aa47352245db66860acb1f75e,3,1
* (beforeRemove - afterRemove) == 1; },1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void findDefaultFillmentGroupForOrder() {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
* removeDefaultFulFillmentGroupForOrder() { int beforeRemove =,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void removeItemFromOrderAfterFulfillmentGroups() {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void getOrdersForCustomer() {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
Customer customer = customerService.readCustomerByUsername(username);,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert orders != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void findCartForAnonymousCustomer() {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
Customer customer = customerService.createCustomerFromId(null);,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert newOrder != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert newOrder.getCustomer() != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void findOrderByOrderNumber() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert nullOrder == null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void findNamedOrderForCustomer() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void testReadOrdersForCustomer() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert containsOrder == true;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void testOrderProperties() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert order.getSubTotal() == null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert order.getTotal() == null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void testNamedOrderForCustomer() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
"Order order = cartService.createNamedOrderForCustomer(""Birthday Order"", customer);",1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert cartService.findOrderById(orderId) == null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void testAddSkuToOrder() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
Customer customer = customerService.saveCustomer(customerService.createCustomerFromId(null));,1b397c5267574a2aa47352245db66860acb1f75e,3,1
Sku newDefaultSku = new SkuImpl();,1b397c5267574a2aa47352245db66860acb1f75e,3,1
"Order order = cartService.createNamedOrderForCustomer(""Pants Order"", customer);",1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert orderItem != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert skuNullOrderItem == null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert quantityNullOrderItem == null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert orderNullOrderItem == null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert productNullOrderItem != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert categoryNullOrderItem != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void testOrderPaymentInfos(OrderPayment info) throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
Customer customer = customerService.saveCustomer(createNamedCustomer());,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert order.getPayments() != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert foundInfo == true;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert cartService.readPaymentInfosForOrder(order) != null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void testSubmitOrder() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void findCartForNullCustomerId() {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
assert cartService.findCartForCustomer(new CustomerImpl()) == null;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void testCreateNamedOrder() throws PricingException {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
Customer customer = createCustomerWithAddresses();,1b397c5267574a2aa47352245db66860acb1f75e,3,1
Order order = initializeExistingCart(customer);,1b397c5267574a2aa47352245db66860acb1f75e,3,1
"Customer customer = customerService.readCustomerByUsername(""customer1"");",1b397c5267574a2aa47352245db66860acb1f75e,3,0
private final Long userId = 1L;,1b397c5267574a2aa47352245db66860acb1f75e,3,1
Customer customer = customerService.readCustomerById(userId);,1b397c5267574a2aa47352245db66860acb1f75e,3,1
"public class HydratedCacheEventListenerFactory implements CacheEventListener, CacheEntryListener {",1b397c5267574a2aa47352245db66860acb1f75e,3,1
public static HydratedCacheManager getConfiguredManager() {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
public void onEvent(CacheEvent cacheEvent) {,1b397c5267574a2aa47352245db66860acb1f75e,3,1
"if (toConvert.matches("".*?\\W.*?"")) {",1b397c5267574a2aa47352245db66860acb1f75e,2,0
"String result = toConvert.replaceAll(""[^\\w-]+"", """");",1b397c5267574a2aa47352245db66860acb1f75e,2,0
"if (toConvert.matches("".*?\\W.*?"")) {",1b397c5267574a2aa47352245db66860acb1f75e,2,1
"String result = toConvert.replaceAll(""\\W"","""");",1b397c5267574a2aa47352245db66860acb1f75e,2,1
import org.springframework.transaction.annotation.Transactional;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
Order namedOrder = setUpNamedOrder();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
List<OrderItem> namedOrderItems = new ArrayList<OrderItem>();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
cart = cartService.moveAllItemsToCartFromNamedOrder(namedOrder);,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert namedOrder.getOrderItems().size() == 0;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
cart = cartService.addAllItemsToCartFromNamedOrder(namedOrder);,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert cart.getOrderItems().size() == 1;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert customerNamedOrders.size() == 0;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
Order anonymousCart = setUpAnonymousCartWithInactiveSku();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
"MergeCartResponse response = cartService.mergeCart(customer, anonymousCart);",1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert response.getAddedItems().size() == 2;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert response.getOrder().getOrderItems().size() == 2;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert response.getRemovedItems().size() == 2;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert response.getOrder().getOrderItems().size() == 4;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert response.getRemovedItems().size() == 4;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
Order anonymousCart = setUpAnonymousCartWithGiftWrap();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert response.getAddedItems().size() == 3;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert response.getOrder().getOrderItems().size() == 5;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert response.getRemovedItems().size() == 0;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
"//sets up anonymous cart with a DiscreteOrderItem, inactive DiscreteOrderItem and inactive GiftWrapOrderItem (due to inactive wrapped item)",1b397c5267574a2aa47352245db66860acb1f75e,2,1
customer = customerService.saveCustomer(createNamedCustomer());,1b397c5267574a2aa47352245db66860acb1f75e,2,1
"response = cartService.mergeCart(customer, anonymousCart);",1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert response.getAddedItems().size() == 1;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert response.getOrder().getOrderItems().size() == 3;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
"//sets up anonymous cart with a DiscreteOrderItem, inactive DiscreteOrderItem and inactive GiftWrapOrderItem (due to inactive wrapped item) inside a BundleOrderItem",1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert response.getAddedItems().size() == 0;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert response.getRemovedItems().size() == 1;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
import org.springframework.transaction.annotation.Transactional;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
private int numOrderItems = 0;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
private Long fulfillmentGroupId;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
private Long bundleOrderItemId;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
"String userName = ""customer1"";",1b397c5267574a2aa47352245db66860acb1f75e,2,1
Sku sku = skuDao.readFirstSku();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
DiscreteOrderItemRequest itemRequest = new DiscreteOrderItemRequest();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert item.getQuantity() == numOrderItems;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
order = cartService.findOrderById(orderId);,1b397c5267574a2aa47352245db66860acb1f75e,2,1
// re-price the order without automatically merging.,1b397c5267574a2aa47352245db66860acb1f75e,2,1
DiscreteOrderItemRequest itemRequest2 = new DiscreteOrderItemRequest();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert item2.getQuantity() == 1;  // item-was not auto-merged with prior items.,1b397c5267574a2aa47352245db66860acb1f75e,2,1
BundleOrderItemRequest bundleRequest = new BundleOrderItemRequest();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert item.getQuantity() == 1;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert orderItems.size() == numOrderItems;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert bundleOrderItem.getDiscreteOrderItems().size() == 1;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
List<OrderItem> items = order.getOrderItems();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert items.size() == startingSize - 1;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert orderItems.size() == numOrderItems - 1;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert orderItems.size() > 0;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert updatedItem.getQuantity() == 10;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
List<OrderItem> updateItems = new ArrayList<OrderItem> (order.getOrderItems());,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert order.getOrderItems().get(0).getQuantity() == 15;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert order.getOrderItems().size() == 1;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
//assert payment.getId() != null;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
Address address = customerAddressService.readActiveCustomerAddressesByCustomerId(customer.getId()).get(0).getAddress();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert fgItems.size() > 0;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
List<FulfillmentGroup> items = order.getFulfillmentGroups();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert(orderItems.size() > 0);,1b397c5267574a2aa47352245db66860acb1f75e,2,1
FulfillmentGroup newFg = new FulfillmentGroupImpl();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
} catch (PricingException e) {,1b397c5267574a2aa47352245db66860acb1f75e,2,1
"* FulfillmentGroup fulfillmentGroup = entityManager.find(FulfillmentGroupImpl.class,",1b397c5267574a2aa47352245db66860acb1f75e,2,1
* fulfillmentGroup); int afterRemove =,1b397c5267574a2aa47352245db66860acb1f75e,2,1
* cartService.findFulfillmentGroupsForOrder(order).size(); assert,1b397c5267574a2aa47352245db66860acb1f75e,2,1
* int afterRemove =,1b397c5267574a2aa47352245db66860acb1f75e,2,1
"String username = ""customer1"";",1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert orders.size() > 0;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
order = cartService.createNewCartForCustomer(customer);,1b397c5267574a2aa47352245db66860acb1f75e,2,1
Long orderId = order.getId();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
Order newOrder = cartService.findOrderById(orderId);,1b397c5267574a2aa47352245db66860acb1f75e,2,1
"order = cartService.save(order, false);",1b397c5267574a2aa47352245db66860acb1f75e,2,1
"Order newOrder = cartService.findOrderByOrderNumber(""3456"");",1b397c5267574a2aa47352245db66860acb1f75e,2,1
Order nullOrder = cartService.findOrderByOrderNumber(null);,1b397c5267574a2aa47352245db66860acb1f75e,2,1
"Order newOrder = cartService.findNamedOrderForCustomer(""COOL ORDER"", customer);",1b397c5267574a2aa47352245db66860acb1f75e,2,1
boolean containsOrder = false;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
containsOrder = true;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
containsOrder = false;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
Calendar testCalendar = Calendar.getInstance();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
customer = customerService.saveCustomer(customer);,1b397c5267574a2aa47352245db66860acb1f75e,2,1
category = catalogService.saveCategory(category);,1b397c5267574a2aa47352245db66860acb1f75e,2,1
Calendar activeStartCal = Calendar.getInstance();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
Product newProduct = new ProductImpl();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
boolean foundInfo = false;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
foundInfo = true;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
Order confirmedOrder = cartService.confirmOrder(order);,1b397c5267574a2aa47352245db66860acb1f75e,2,1
Long confirmedOrderId = confirmedOrder.getId();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
"public void testAddFulfillmentGroupToOrder(ShippingRate shippingRate, ShippingRate sr2) throws PricingException, ItemNotFoundException{",1b397c5267574a2aa47352245db66860acb1f75e,2,1
FulfillmentGroupRequest fgRequest = new FulfillmentGroupRequest();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
List<FulfillmentGroupItemRequest> fgiRequests = new ArrayList<FulfillmentGroupItemRequest>();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
FulfillmentGroupItemRequest fgiRequest = new FulfillmentGroupItemRequest();,1b397c5267574a2aa47352245db66860acb1f75e,2,1
Order resultOrder = cartService.findOrderById(order.getId());,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert resultOrder.getFulfillmentGroups().size() == 1;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert resultOrder.getFulfillmentGroups().get(0).getFulfillmentGroupItems().size() == 2;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
assert resultOrder.getFulfillmentGroups().size() == 0;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
"@BeforeMethod(alwaysRun = true, dependsOnMethods = ""springTestContextBeforeTestMethod"")",1b397c5267574a2aa47352245db66860acb1f75e,2,0
protected void setupCustomerId(Method testMethod) throws Exception {,1b397c5267574a2aa47352245db66860acb1f75e,2,0
public HydratedCacheEventListenerFactory() {,1b397c5267574a2aa47352245db66860acb1f75e,2,1
//todo what should be actually here for new ehcache ??,1b397c5267574a2aa47352245db66860acb1f75e,2,1
"Cache<?,?> cache = cacheManager.getCache(cacheName);",1b397c5267574a2aa47352245db66860acb1f75e,2,1
manager = hydratedCacheManager;,1b397c5267574a2aa47352245db66860acb1f75e,2,1
"toConvert = toConvert.replaceAll("" "", ""-"");",1b397c5267574a2aa47352245db66860acb1f75e,1,0
//remove all non-word characters,1b397c5267574a2aa47352245db66860acb1f75e,1,0
return StringUtils.uncapitalize(result);,1b397c5267574a2aa47352245db66860acb1f75e,1,0
return StringUtils.uncapitalize(toConvert);,1b397c5267574a2aa47352245db66860acb1f75e,1,0
},1b397c5267574a2aa47352245db66860acb1f75e,1,0
return toConvert;,1b397c5267574a2aa47352245db66860acb1f75e,1,0
//remove all non-word characters,1b397c5267574a2aa47352245db66860acb1f75e,1,1
return StringUtils.uncapitalize(result);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
return StringUtils.uncapitalize(toConvert);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
* #%L,1b397c5267574a2aa47352245db66860acb1f75e,1,1
* BroadleafCommerce Integration,1b397c5267574a2aa47352245db66860acb1f75e,1,1
* %%,1b397c5267574a2aa47352245db66860acb1f75e,1,1
* Copyright (C) 2009 - 2016 Broadleaf Commerce,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"* (the ""Fair Use License"" located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)",1b397c5267574a2aa47352245db66860acb1f75e,1,1
"* (the ""Commercial License"" located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)",1b397c5267574a2aa47352245db66860acb1f75e,1,1
* shall apply.,1b397c5267574a2aa47352245db66860acb1f75e,1,1
*,1b397c5267574a2aa47352245db66860acb1f75e,1,1
* #L%,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.domain.Order;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.domain.OrderItem;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.service.call.MergeCartResponse;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.service.type.OrderStatus;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.pricing.service.exception.PricingException;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.profile.core.domain.Customer;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.testng.annotations.Test;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import java.util.ArrayList;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import java.util.List;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
@Transactional,1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert namedOrderItems.equals(cart.getOrderItems());,1b397c5267574a2aa47352245db66860acb1f75e,1,1
},1b397c5267574a2aa47352245db66860acb1f75e,1,1
"OrderItem movedItem = cartService.moveItemToCartFromNamedOrder(namedOrder, namedOrderItems.get(0));",1b397c5267574a2aa47352245db66860acb1f75e,1,1
"List<Order> customerNamedOrders = cartService.findOrdersForCustomer(namedOrder.getCustomer(), OrderStatus.NAMED);",1b397c5267574a2aa47352245db66860acb1f75e,1,1
"OrderItem movedItem = cartService.moveItemToCartFromNamedOrder(namedOrder.getCustomer().getId(),",1b397c5267574a2aa47352245db66860acb1f75e,1,1
"//sets up anonymous cart with a DiscreteOrderItem, inactive DiscreteOrderItem, BundleOrderItem, and inactive BundleOrderItem",1b397c5267574a2aa47352245db66860acb1f75e,1,1
"//sets up existing cart with a DiscreteOrderItem, inactive DiscreteOrderItem, BundleOrderItem, and inactive BundleOrderItem",1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert response.isMerged();,1b397c5267574a2aa47352245db66860acb1f75e,1,1
//FIXME: This test needs to be fixed,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"//sets up anonymous cart with two DiscreteOrderItems, and a GiftWrapOrderItem",1b397c5267574a2aa47352245db66860acb1f75e,1,1
//sets up existing cart with two active DiscreteOrderItems,1b397c5267574a2aa47352245db66860acb1f75e,1,1
anonymousCart = setUpAnonymousCartWithInactiveGiftWrap();,1b397c5267574a2aa47352245db66860acb1f75e,1,1
anonymousCart = setUpAnonymousCartWithInactiveBundleGiftWrap();,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"//sets up anonymous cart with active DiscreteOrderItems, and active GiftWrapOrderItem inside a BundleOrderItem",1b397c5267574a2aa47352245db66860acb1f75e,1,1
anonymousCart = setUpAnonymousCartWithBundleGiftWrap();,1b397c5267574a2aa47352245db66860acb1f75e,1,1
anonymousCart = setUpAnonymousCartWithBundleGiftWrapReferringToRootItems();,1b397c5267574a2aa47352245db66860acb1f75e,1,1
anonymousCart = setUpAnonymousCartWithBundleGiftWrapReferringItemsInAnotherBundle();,1b397c5267574a2aa47352245db66860acb1f75e,1,1
* #%L,1b397c5267574a2aa47352245db66860acb1f75e,1,1
* BroadleafCommerce Integration,1b397c5267574a2aa47352245db66860acb1f75e,1,1
* %%,1b397c5267574a2aa47352245db66860acb1f75e,1,1
* Copyright (C) 2009 - 2016 Broadleaf Commerce,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"* (the ""Fair Use License"" located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)",1b397c5267574a2aa47352245db66860acb1f75e,1,1
"* (the ""Commercial License"" located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)",1b397c5267574a2aa47352245db66860acb1f75e,1,1
* shall apply.,1b397c5267574a2aa47352245db66860acb1f75e,1,1
*,1b397c5267574a2aa47352245db66860acb1f75e,1,1
* #L%,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.common.money.Money;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.catalog.dao.SkuDao;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.catalog.domain.Category;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.catalog.domain.CategoryImpl;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.catalog.domain.Product;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.catalog.domain.ProductImpl;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.catalog.domain.Sku;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.catalog.domain.SkuImpl;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.FulfillmentGroupDataProvider;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.domain.BundleOrderItem;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.domain.DiscreteOrderItem;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.domain.FulfillmentGroup;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.domain.FulfillmentGroupImpl;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.domain.FulfillmentGroupItem;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.domain.Order;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.domain.OrderItem;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.service.OrderItemService;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.service.call.BundleOrderItemRequest;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.service.call.DiscreteOrderItemRequest;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.service.call.FulfillmentGroupItemRequest;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.service.call.FulfillmentGroupRequest;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.service.exception.ItemNotFoundException;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.order.service.type.OrderStatus;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.payment.PaymentInfoDataProvider;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.payment.domain.OrderPayment;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.pricing.ShippingRateDataProvider;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.pricing.domain.ShippingRate;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.pricing.service.ShippingRateService;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.pricing.service.exception.PricingException;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.core.pricing.service.workflow.type.ShippingServiceType;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.profile.core.domain.Address;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.profile.core.domain.Customer;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.profile.core.domain.CustomerAddress;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.broadleafcommerce.profile.core.domain.CustomerImpl;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.springframework.test.annotation.Rollback;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.springframework.transaction.annotation.Propagation;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.testng.annotations.Test;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import java.math.BigDecimal;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import java.util.ArrayList;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import java.util.Calendar;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import java.util.List;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import javax.annotation.Resource;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"@Resource(name = ""blOrderItemService"")",1b397c5267574a2aa47352245db66860acb1f75e,1,1
private OrderItemService orderItemService;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
private SkuDao skuDao;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
private ShippingRateService shippingRateService;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
@Transactional,1b397c5267574a2aa47352245db66860acb1f75e,1,1
this.orderId = order.getId();,1b397c5267574a2aa47352245db66860acb1f75e,1,1
},1b397c5267574a2aa47352245db66860acb1f75e,1,1
@Transactional(propagation = Propagation.REQUIRES_NEW),1b397c5267574a2aa47352245db66860acb1f75e,1,1
"DiscreteOrderItem item = (DiscreteOrderItem) cartService.addDiscreteItemToOrder(order, itemRequest);",1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert item.getSku().equals(sku);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"DiscreteOrderItem item = (DiscreteOrderItem) cartService.addDiscreteItemToOrder(order, itemRequest, true);",1b397c5267574a2aa47352245db66860acb1f75e,1,1
"DiscreteOrderItem item2 = (DiscreteOrderItem) cartService.addDiscreteItemToOrder(order, itemRequest2, true);",1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert item2.getSku().equals(sku);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"BundleOrderItem item = (BundleOrderItem) cartService.addBundleItemToOrder(order, bundleRequest);",1b397c5267574a2aa47352245db66860acb1f75e,1,1
bundleOrderItemId = item.getId();,1b397c5267574a2aa47352245db66860acb1f75e,1,1
List<OrderItem> orderItems = order.getOrderItems();,1b397c5267574a2aa47352245db66860acb1f75e,1,1
int startingSize = orderItems.size();,1b397c5267574a2aa47352245db66860acb1f75e,1,1
BundleOrderItem bundleOrderItem = (BundleOrderItem) orderItemService.readOrderItemById(bundleOrderItemId);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
OrderItem item = orderItems.get(0);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
OrderItem updatedItem = orderItemService.readOrderItemById(item.getId());,1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert updatedItem.getPrice().equals(new Money(BigDecimal.valueOf(10000)));,1b397c5267574a2aa47352245db66860acb1f75e,1,1
//the removal from the previous test was rolled back,1b397c5267574a2aa47352245db66860acb1f75e,1,1
OrderPayment payment = order.getPayments().get(order.getPayments().indexOf(paymentInfo));,1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert payment.getOrder().equals(order);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"FulfillmentGroup fg = cartService.addFulfillmentGroupToOrder(order, fulfillmentGroup);",1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert fg.getAddress().equals(fulfillmentGroup.getAddress());,1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert fg.getOrder().equals(order);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert fg.getMethod().equals(fulfillmentGroup.getMethod());,1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert fg.getReferenceNumber().equals(fulfillmentGroup.getReferenceNumber());,1b397c5267574a2aa47352245db66860acb1f75e,1,1
this.fulfillmentGroupId = fg.getId();,1b397c5267574a2aa47352245db66860acb1f75e,1,1
List<FulfillmentGroup> fgItems = order.getFulfillmentGroups();,1b397c5267574a2aa47352245db66860acb1f75e,1,1
int startingSize = fgItems.size();,1b397c5267574a2aa47352245db66860acb1f75e,1,1
FulfillmentGroup item = fgItems.get(0);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
FulfillmentGroup fg = order.getFulfillmentGroups().get(0);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"FulfillmentGroup fulfillmentGroup = em.find(FulfillmentGroupImpl.class, fulfillmentGroupId);",1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert fg.getAddress().getId().equals(fulfillmentGroup.getAddress().getId());,1b397c5267574a2aa47352245db66860acb1f75e,1,1
try {,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"newFg = cartService.addItemToFulfillmentGroup(orderItems.get(0), newFg, 1);",1b397c5267574a2aa47352245db66860acb1f75e,1,1
throw new RuntimeException(e);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
FulfillmentGroup newNewFg = order.getFulfillmentGroups().get(order.getFulfillmentGroups().indexOf(newFg));,1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert(newNewFg.getFulfillmentGroupItems().size() == 1);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
* cartService.findFulfillmentGroupsForOrder(order).size();,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"* fulfillmentGroupId); cartService.removeFulfillmentGroupFromOrder(order,",1b397c5267574a2aa47352245db66860acb1f75e,1,1
FulfillmentGroup fg = cartService.findDefaultFulfillmentGroupForOrder(order);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"* cartService.removeFulfillmentGroupFromOrder(order, fulfillmentGroup);",1b397c5267574a2aa47352245db66860acb1f75e,1,1
for (FulfillmentGroupItem fulfillmentGroupItem : fg.getFulfillmentGroupItems()) {,1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert !fulfillmentGroupItem.getOrderItem().equals(item);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
List<Order> orders = cartService.findOrdersForCustomer(customer);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert newOrder.getId().equals(orderId);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"nullOrder = cartService.findOrderByOrderNumber("""");",1b397c5267574a2aa47352245db66860acb1f75e,1,1
"List<Order> newOrders = cartService.findOrdersForCustomer(customer, OrderStatus.IN_PROCESS);",1b397c5267574a2aa47352245db66860acb1f75e,1,1
if (newOrders.contains(order)),1b397c5267574a2aa47352245db66860acb1f75e,1,1
{,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"newOrders = cartService.findOrdersForCustomer(customer, null);",1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert order.getSubmitDate().equals(testCalendar.getTime());,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"assert order.getName().equals(""Birthday Order"");",1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert order.getCustomer().equals(customer);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
newDefaultSku = catalogService.saveSku(newDefaultSku);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
newProduct = catalogService.saveProduct(newProduct);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"OrderItem orderItem = cartService.addSkuToOrder(order.getId(), newDefaultSku.getId(),",1b397c5267574a2aa47352245db66860acb1f75e,1,1
"OrderItem quantityNullOrderItem = cartService.addSkuToOrder(order.getId(), newDefaultSku.getId(),",1b397c5267574a2aa47352245db66860acb1f75e,1,1
"OrderItem skuNullOrderItem = cartService.addSkuToOrder(order.getId(), null,",1b397c5267574a2aa47352245db66860acb1f75e,1,1
"OrderItem orderNullOrderItem = cartService.addSkuToOrder(null, newDefaultSku.getId(),",1b397c5267574a2aa47352245db66860acb1f75e,1,1
"OrderItem productNullOrderItem = cartService.addSkuToOrder(order.getId(), newDefaultSku.getId(),",1b397c5267574a2aa47352245db66860acb1f75e,1,1
"OrderItem categoryNullOrderItem = cartService.addSkuToOrder(order.getId(), newDefaultSku.getId(),",1b397c5267574a2aa47352245db66860acb1f75e,1,1
if (testInfo.equals(info)),1b397c5267574a2aa47352245db66860acb1f75e,1,1
//assert order.getPaymentInfos().size() == 0;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
confirmedOrder = cartService.findOrderById(confirmedOrder.getId());,1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert orderId.equals(confirmedOrderId);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert confirmedOrder.getStatus().equals(OrderStatus.SUBMITTED);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
shippingRate = shippingRateService.save(shippingRate);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
sr2 = shippingRateService.save(sr2);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
CustomerAddress customerAddress = customerAddressService.readActiveCustomerAddressesByCustomerId(customer.getId()).get(0);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
for (OrderItem orderItem : order.getOrderItems()) {,1b397c5267574a2aa47352245db66860acb1f75e,1,1
resultOrder = cartService.findOrderById(order.getId());,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"FulfillmentGroup defaultFg = cartService.createDefaultFulfillmentGroup(order, customerAddress.getAddress());",1b397c5267574a2aa47352245db66860acb1f75e,1,1
assert defaultFg.isPrimary();,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.springframework.test.annotation.Commit;,1b397c5267574a2aa47352245db66860acb1f75e,1,0
import org.testng.annotations.BeforeMethod;,1b397c5267574a2aa47352245db66860acb1f75e,1,0
import java.lang.reflect.Method;,1b397c5267574a2aa47352245db66860acb1f75e,1,0
"userId = customerService.readCustomerByUsername(""customer1"").getId();",1b397c5267574a2aa47352245db66860acb1f75e,1,0
},1b397c5267574a2aa47352245db66860acb1f75e,1,0
List<CustomerPhone> phones = customerPhoneService.readAllCustomerPhonesByCustomerId(userId);,1b397c5267574a2aa47352245db66860acb1f75e,1,0
List<CustomerPhone> phones_1 = customerPhoneService.readAllCustomerPhonesByCustomerId(userId);,1b397c5267574a2aa47352245db66860acb1f75e,1,0
List<CustomerPhone> phones_2 = customerPhoneService.readAllCustomerPhonesByCustomerId(userId);,1b397c5267574a2aa47352245db66860acb1f75e,1,0
import org.springframework.test.annotation.Rollback;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
List<CustomerPhone> phones = customerPhoneService.readAllCustomerPhonesByCustomerId(1L);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
List<CustomerPhone> phones_1 = customerPhoneService.readAllCustomerPhonesByCustomerId(1L);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
List<CustomerPhone> phones_2 = customerPhoneService.readAllCustomerPhonesByCustomerId(1L);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import javax.annotation.Resource;,1b397c5267574a2aa47352245db66860acb1f75e,1,0
CustomerAddress savedAddress = customerAddressService.saveCustomerAddress(ca);,1b397c5267574a2aa47352245db66860acb1f75e,1,0
import javax.annotation.Resource;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
@Transactional,1b397c5267574a2aa47352245db66860acb1f75e,1,1
CustomerAddress savedAddress = saveCustomerAddress(ca);,1b397c5267574a2aa47352245db66860acb1f75e,1,1
* #%L,1b397c5267574a2aa47352245db66860acb1f75e,1,1
* BroadleafCommerce Common Libraries,1b397c5267574a2aa47352245db66860acb1f75e,1,1
* %%,1b397c5267574a2aa47352245db66860acb1f75e,1,1
* Copyright (C) 2009 - 2016 Broadleaf Commerce,1b397c5267574a2aa47352245db66860acb1f75e,1,1
"* (the ""Fair Use License"" located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)",1b397c5267574a2aa47352245db66860acb1f75e,1,1
"* (the ""Commercial License"" located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)",1b397c5267574a2aa47352245db66860acb1f75e,1,1
* shall apply.,1b397c5267574a2aa47352245db66860acb1f75e,1,1
*,1b397c5267574a2aa47352245db66860acb1f75e,1,1
* #L%,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.ehcache.event.CacheEvent;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.ehcache.event.CacheEventListener;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.springframework.beans.factory.annotation.Autowired;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.springframework.beans.factory.annotation.Qualifier;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.springframework.beans.factory.annotation.Value;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import org.springframework.stereotype.Component;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import java.util.List;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import javax.cache.Cache;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import javax.cache.CacheManager;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import javax.cache.configuration.FactoryBuilder;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import javax.cache.configuration.MutableCacheEntryListenerConfiguration;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
import javax.cache.event.CacheEntryListener;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
* @author jfischer,1b397c5267574a2aa47352245db66860acb1f75e,1,1
},1b397c5267574a2aa47352245db66860acb1f75e,1,1
"public HydratedCacheEventListenerFactory(@Qualifier(""blHydratedCacheMangager"") HydratedCacheManager hydratedCacheManager,",1b397c5267574a2aa47352245db66860acb1f75e,1,1
"@Value(""${cache.hydratedCache.require.synchronous:true}"") Boolean synchronous) {",1b397c5267574a2aa47352245db66860acb1f75e,1,1
for (String cacheName : cacheNames) {,1b397c5267574a2aa47352245db66860acb1f75e,1,1
return manager;,1b397c5267574a2aa47352245db66860acb1f75e,1,1
/*,1b397c5267574a2aa47352245db66860acb1f75e,0,1
*/,1b397c5267574a2aa47352245db66860acb1f75e,0,1
package org.broadleafcommerce.core.order.service.legacy;,1b397c5267574a2aa47352245db66860acb1f75e,0,1
namedOrderItems.addAll(namedOrder.getOrderItems());,1b397c5267574a2aa47352245db66860acb1f75e,0,1
cartService.setMoveNamedOrderItems(false);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
cartService.setMoveNamedOrderItems(true);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"namedOrder.getName(), namedOrderItems.get(0).getId(), namedOrderItems.get(0).getQuantity());",1b397c5267574a2aa47352245db66860acb1f75e,0,1
initializeExistingCartWithInactiveSkuAndInactiveBundle(customer);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
initializeExistingCart(customer);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
/*,1b397c5267574a2aa47352245db66860acb1f75e,0,1
*/,1b397c5267574a2aa47352245db66860acb1f75e,0,1
package org.broadleafcommerce.core.order.service.legacy;,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"@SuppressWarnings(""deprecation"")",1b397c5267574a2aa47352245db66860acb1f75e,0,1
@Resource,1b397c5267574a2aa47352245db66860acb1f75e,0,1
@Rollback(false),1b397c5267574a2aa47352245db66860acb1f75e,0,1
numOrderItems++;,1b397c5267574a2aa47352245db66860acb1f75e,0,1
itemRequest.setQuantity(1);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
itemRequest.setSku(sku);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
cartService.setAutomaticallyMergeLikeItems(true);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
assert(order.getOrderItems().size()==1);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
assert(order.getOrderItems().get(0).getQuantity()==2);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
cartService.setAutomaticallyMergeLikeItems(false);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
itemRequest2.setQuantity(1);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
itemRequest2.setSku(sku);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
assert(order.getOrderItems().size()==2);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
assert(order.getOrderItems().get(1).getQuantity()==1);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
//numOrderItems++;,1b397c5267574a2aa47352245db66860acb1f75e,0,1
bundleRequest.setQuantity(1);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"bundleRequest.setName(""myBundle"");",1b397c5267574a2aa47352245db66860acb1f75e,0,1
bundleRequest.getDiscreteOrderItems().add(itemRequest);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"cartService.removeItemFromOrder(order, bundleOrderItem);",1b397c5267574a2aa47352245db66860acb1f75e,0,1
//item.setSalePrice(new Money(BigDecimal.valueOf(10000)));,1b397c5267574a2aa47352245db66860acb1f75e,0,1
((DiscreteOrderItem) item).getSku().setSalePrice(new Money(BigDecimal.valueOf(10000)));,1b397c5267574a2aa47352245db66860acb1f75e,0,1
((DiscreteOrderItem) item).getSku().setRetailPrice(new Money(BigDecimal.valueOf(10000)));,1b397c5267574a2aa47352245db66860acb1f75e,0,1
item.setQuantity(10);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"cartService.updateItemQuantity(order, item);",1b397c5267574a2aa47352245db66860acb1f75e,0,1
updateItems.get(0).setQuantity(15);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"cartService.updateItemQuantity(order, updatedItem);",1b397c5267574a2aa47352245db66860acb1f75e,0,1
"cartService.removeItemFromOrder(order, item);",1b397c5267574a2aa47352245db66860acb1f75e,0,1
"cartService.addPaymentToOrder(order, paymentInfo, null);",1b397c5267574a2aa47352245db66860acb1f75e,0,1
fulfillmentGroup.setOrder(order);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
fulfillmentGroup.setAddress(address);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"cartService.removeFulfillmentGroupFromOrder(order, item);",1b397c5267574a2aa47352245db66860acb1f75e,0,1
newFg.setAddress(address);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"newFg.setMethod(""standard"");",1b397c5267574a2aa47352245db66860acb1f75e,0,1
newFg.setService(ShippingServiceType.BANDED_SHIPPING.getType());,1b397c5267574a2aa47352245db66860acb1f75e,0,1
assert(newNewFg.getFulfillmentGroupItems().get(0).getOrderItem().equals(orderItems.get(0)));,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"order.setOrderNumber(""3456"");",1b397c5267574a2aa47352245db66860acb1f75e,0,1
order.setStatus(OrderStatus.NAMED);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"order.setName(""COOL ORDER"");",1b397c5267574a2aa47352245db66860acb1f75e,0,1
order.setStatus(OrderStatus.IN_PROCESS);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
order.setSubmitDate(testCalendar.getTime());,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"cartService.removeNamedOrderForCustomer(""Birthday Order"", customer);",1b397c5267574a2aa47352245db66860acb1f75e,0,1
"category.setName(""Pants"");",1b397c5267574a2aa47352245db66860acb1f75e,0,1
"activeStartCal.add(Calendar.DAY_OF_YEAR, -2);",1b397c5267574a2aa47352245db66860acb1f75e,0,1
"newDefaultSku.setName(""Leather Pants"");",1b397c5267574a2aa47352245db66860acb1f75e,0,1
newDefaultSku.setRetailPrice(new Money(44.99));,1b397c5267574a2aa47352245db66860acb1f75e,0,1
newDefaultSku.setActiveStartDate(activeStartCal.getTime());,1b397c5267574a2aa47352245db66860acb1f75e,0,1
newDefaultSku.setDiscountable(true);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
newProduct.setDefaultCategory(category);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
newProduct.setDefaultSku(newDefaultSku);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"newProduct.getId(), category.getId(), 2);",1b397c5267574a2aa47352245db66860acb1f75e,0,1
"newProduct.getId(), category.getId(), null);",1b397c5267574a2aa47352245db66860acb1f75e,0,1
"null, category.getId(), 2);",1b397c5267574a2aa47352245db66860acb1f75e,0,1
"newProduct.getId(), null, 2);",1b397c5267574a2aa47352245db66860acb1f75e,0,1
"cartService.addPaymentToOrder(order, info);",1b397c5267574a2aa47352245db66860acb1f75e,0,1
for (OrderPayment testInfo : order.getPayments()),1b397c5267574a2aa47352245db66860acb1f75e,0,1
//cartService.removeAllPaymentsFromOrder(order);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
@Test,1b397c5267574a2aa47352245db66860acb1f75e,0,1
category.setActiveStartDate(activeStartCal.getTime());,1b397c5267574a2aa47352245db66860acb1f75e,0,1
fgiRequest.setOrderItem(orderItem);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
fgiRequest.setQuantity(1);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
fgiRequests.add(fgiRequest);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
fgRequest.setAddress(customerAddress.getAddress());,1b397c5267574a2aa47352245db66860acb1f75e,0,1
fgRequest.setFulfillmentGroupItemRequests(fgiRequests);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
fgRequest.setOrder(cartService.findCartForCustomer(customer));,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"fgRequest.setMethod(""standard"");",1b397c5267574a2aa47352245db66860acb1f75e,0,1
fgRequest.setService(ShippingServiceType.BANDED_SHIPPING.getType());,1b397c5267574a2aa47352245db66860acb1f75e,0,1
cartService.addFulfillmentGroupToOrder(fgRequest);,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"cartService.removeAllFulfillmentGroupsFromOrder(order, false);",1b397c5267574a2aa47352245db66860acb1f75e,0,1
"defaultFg.setMethod(""standard"");",1b397c5267574a2aa47352245db66860acb1f75e,0,1
defaultFg.setService(ShippingServiceType.BANDED_SHIPPING.getType());,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"cartService.addFulfillmentGroupToOrder(order, defaultFg);",1b397c5267574a2aa47352245db66860acb1f75e,0,1
@Commit,1b397c5267574a2aa47352245db66860acb1f75e,0,0
@Rollback(false),1b397c5267574a2aa47352245db66860acb1f75e,0,1
/*,1b397c5267574a2aa47352245db66860acb1f75e,0,1
*/,1b397c5267574a2aa47352245db66860acb1f75e,0,1
package org.broadleafcommerce.common.cache.engine;,1b397c5267574a2aa47352245db66860acb1f75e,0,1
/**,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"@Component(""blHydratedCacheEventListenerFactory"")",1b397c5267574a2aa47352245db66860acb1f75e,0,1
@Autowired,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"@Qualifier(""blCacheManager"") CacheManager cacheManager,",1b397c5267574a2aa47352245db66860acb1f75e,0,1
"@Value(""${cache.hydratedCache.names}"") List<String> cacheNames,",1b397c5267574a2aa47352245db66860acb1f75e,0,1
"@Value(""${cache.hydratedCache.require.old.value:false}"") Boolean oldValue,",1b397c5267574a2aa47352245db66860acb1f75e,0,1
"if(cacheName.startsWith(""$"")){",1b397c5267574a2aa47352245db66860acb1f75e,0,1
continue;,1b397c5267574a2aa47352245db66860acb1f75e,0,1
"cache.registerCacheEntryListener(new MutableCacheEntryListenerConfiguration(FactoryBuilder.factoryOf(hydratedCacheManager), null, oldValue, synchronous));",1b397c5267574a2aa47352245db66860acb1f75e,0,1
@Override,1b397c5267574a2aa47352245db66860acb1f75e,0,1
if (key instanceof CacheKey) {,b9113cc952405fc38bffc1a680d1ca93f4e2079c,2,1
key = ((CacheKey) key).getKey();,b9113cc952405fc38bffc1a680d1ca93f4e2079c,2,1
"if (key.getClass().getName().equals(""org.hibernate.cache.internal.CacheKeyImplementation"")) {",b9113cc952405fc38bffc1a680d1ca93f4e2079c,2,0
key = keyPieces[1];,b9113cc952405fc38bffc1a680d1ca93f4e2079c,2,0
//if (key instanceof CacheKey) {,b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,0
//cacheName = ((CacheKey) key).getEntityOrRoleName();,b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,0
//key = ((CacheKey) key).getKey();,b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,0
import org.hibernate.cache.spi.CacheKey;,b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,1
cacheName = ((CacheKey) key).getEntityOrRoleName();,b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,1
},b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,1
import net.sf.ehcache.CacheException;,b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,0
import net.sf.ehcache.Ehcache;,b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,0
import net.sf.ehcache.Element;,b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,0
import net.sf.ehcache.event.CacheEventListener;,b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,0
"String[] keyPieces = key.toString().split(""#"");",b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,0
cacheName = keyPieces[0];,b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,0
},b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,0
import net.sf.ehcache.CacheException;,b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,1
import net.sf.ehcache.Ehcache;,b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,1
import net.sf.ehcache.Element;,b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,1
import net.sf.ehcache.event.CacheEventListener;,b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,1
//if (key instanceof CacheKey) {,b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,1
//cacheName = ((CacheKey) key).getEntityOrRoleName();,b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,1
//key = ((CacheKey) key).getKey();,b9113cc952405fc38bffc1a680d1ca93f4e2079c,1,1
//},b9113cc952405fc38bffc1a680d1ca93f4e2079c,0,0
//TODO 3064 what is this an instance of now?,b9113cc952405fc38bffc1a680d1ca93f4e2079c,0,0
@Override,b9113cc952405fc38bffc1a680d1ca93f4e2079c,0,0
// Since CacheKeyImplementation is a protected Class we can't cast it nor can we access the entityOrRoleName property,b9113cc952405fc38bffc1a680d1ca93f4e2079c,0,0
"// therefore, to match how this worked in pre Hibernate 5, we split the toString since it's comprised of the fields we need",b9113cc952405fc38bffc1a680d1ca93f4e2079c,0,0
//},b9113cc952405fc38bffc1a680d1ca93f4e2079c,0,1
//TODO 3064 what is this an instance of now?,b9113cc952405fc38bffc1a680d1ca93f4e2079c,0,1
import javax.annotation.Resource;,23b534a090d87626cfa98ef3e87005691e33eb13,1,0
import javax.annotation.Resource;,23b534a090d87626cfa98ef3e87005691e33eb13,1,1
"offerService.applyAndSaveOffersToOrder(offers, order);",23b534a090d87626cfa98ef3e87005691e33eb13,0,0
"offerService.applyAndSaveFulfillmentGroupOffersToOrder(offers, order);",23b534a090d87626cfa98ef3e87005691e33eb13,0,0
"offerService.applyOffersToOrder(offers, order);",23b534a090d87626cfa98ef3e87005691e33eb13,0,1
"offerService.applyFulfillmentGroupOffersToOrder(offers, order);",23b534a090d87626cfa98ef3e87005691e33eb13,0,1
import javax.persistence.GeneratedValue;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.AdminPresentation;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.AdminPresentationClass;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.PopulateToOneFieldsEnum;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.RequiredOverride;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.client.VisibilityEnum;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.Cache;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.CacheConcurrencyStrategy;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.GenericGenerator;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.Parameter;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.SQLDelete;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* @see org.broadleafcommerce.core.store.domain.Store#setId(java.lang.Long),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public static class Name {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"public static final String Advanced = ""StoreImpl_Advanced_Tab"";",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"public static final String General = ""StoreImpl_Store_General"";",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"public static final String Location = ""StoreImpl_Store_Location"";",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"public static final String Geocoding = ""StoreImpl_Store_Geocoding"";",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public static final int NAME = 1000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public static final int CITY = 4000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public static final int STATE = 5000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public static final int ZIP = 6000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public static final int COUNTRY = 7000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public static final int PHONE = 8000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public static final int LATITUDE = 9000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public static final int LONGITUDE = 10000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.Index;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
private String id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getId() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* @see org.broadleafcommerce.core.store.domain.Store#setId(java.lang.String),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String orderPaymentReferenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
result = prime * result + ((orderPaymentId == null) ? 0 : orderPaymentId.hashCode());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
result = prime * result + ((orderPaymentReferenceNumber == null) ? 0 : orderPaymentReferenceNumber.hashCode());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.core.payment.service.type.TransactionType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String paymentInfoReferenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
result = prime * result + ((paymentInfoId == null) ? 0 : paymentInfoId.hashCode());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
result = prime * result + ((paymentInfoReferenceNumber == null) ? 0 : paymentInfoReferenceNumber.hashCode());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.currency.domain.BroadleafCurrency;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.currency.domain.BroadleafCurrencyImpl;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.core.payment.service.type.TransactionType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String referenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String paymentInfoReferenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getReferenceNumber() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getCvvCode() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getPaymentInfoReferenceNumber() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* #%L,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* BroadleafCommerce Framework,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* %%,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* Copyright (C) 2009 - 2013 Broadleaf Commerce,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"* Licensed under the Apache License, Version 2.0 (the ""License"");",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* you may not use this file except in compliance with the License.,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* You may obtain a copy of the License at,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
*,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
*       http://www.apache.org/licenses/LICENSE-2.0,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"* Unless required by applicable law or agreed to in writing, software",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"* distributed under the License is distributed on an ""AS IS"" BASIS,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* See the License for the specific language governing permissions and,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* limitations under the License.,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* #L%,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.currency.util.BroadleafCurrencyUtils;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.money.Money;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.AdminPresentation;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.client.SupportedFieldType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.profile.core.domain.Customer;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.profile.core.domain.CustomerImpl;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.BatchSize;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.GenericGenerator;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.Index;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.Parameter;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.math.BigDecimal;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.util.Date;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.util.HashMap;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.util.Map;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.CollectionTable;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Column;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.ElementCollection;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Entity;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.GeneratedValue;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Inheritance;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.InheritanceType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.JoinColumn;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.ManyToOne;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.MapKeyColumn;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Table;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Temporal;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.TemporalType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Transient;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String userName;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String authorizationCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String middlewareResponseCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String middlewareResponseText;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String processorResponseCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String processorResponseText;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String implementorResponseCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String implementorResponseText;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String transactionId;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String avsCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String cvvCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String transactionType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getAuthorizationCode() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getMiddlewareResponseCode() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getMiddlewareResponseText() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getProcessorResponseCode() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getProcessorResponseText() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getImplementorResponseCode() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getImplementorResponseText() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getTransactionId() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getAvsCode() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getUserName() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String toString() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
result = prime * result + ((transactionId == null) ? 0 : transactionId.hashCode());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.AdminPresentationCollection;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.AdminPresentationOperationTypes;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.client.AddMethodType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.client.OperationType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.client.SupportedFieldType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.Index;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.AdminPresentation;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.AdminPresentationClass;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.AdminPresentationCollection;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.AdminPresentationMap;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.PopulateToOneFieldsEnum;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.BatchSize;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.CacheConcurrencyStrategy;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.Cascade;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.Index;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.Where;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.CascadeType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Column;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Embedded;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Entity;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.EntityListeners;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.FetchType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Inheritance;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.InheritanceType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.JoinColumn;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.ManyToOne;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.MapKey;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.OneToMany;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Table;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Transient;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.*;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.*;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.CascadeType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.*;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Entity;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Table;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.*;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.*;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.CascadeType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.*;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Entity;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Table;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.AdminPresentation;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.AdminPresentationClass;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.AdminPresentationCollection;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.AdminPresentationMap;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.PopulateToOneFieldsEnum;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.BatchSize;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.CacheConcurrencyStrategy;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.Cascade;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.Index;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.Where;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.CascadeType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Column;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Embedded;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Entity;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.EntityListeners;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.FetchType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Inheritance;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.InheritanceType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.JoinColumn;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.ManyToOne;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.MapKey;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.OneToMany;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Table;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Transient;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.AdminPresentation;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.AdminPresentationClass;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.AdminPresentationCollection;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.AdminPresentationMap;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.PopulateToOneFieldsEnum;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.BatchSize;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.CacheConcurrencyStrategy;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.Cascade;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.Index;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.Where;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.CascadeType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Column;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Embedded;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Entity;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.EntityListeners;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.FetchType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Inheritance;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.InheritanceType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.JoinColumn;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.ManyToOne;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.MapKey;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.OneToMany;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Table;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Transient;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.*;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.*;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.CascadeType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.*;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Entity;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Table;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* #%L,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* BroadleafCommerce Framework,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* %%,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* Copyright (C) 2009 - 2013 Broadleaf Commerce,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"* Licensed under the Apache License, Version 2.0 (the ""License"");",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* you may not use this file except in compliance with the License.,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* You may obtain a copy of the License at,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
*,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
*       http://www.apache.org/licenses/LICENSE-2.0,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"* Unless required by applicable law or agreed to in writing, software",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"* distributed under the License is distributed on an ""AS IS"" BASIS,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* See the License for the specific language governing permissions and,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* limitations under the License.,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* #L%,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
private static final Log LOG = LogFactory.getLog(FulfillmentGroupItemImpl.class);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
private String status;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public String getCurrencyCode() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
//this is likely an extended class - instantiate from the fully qualified name via reflection,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
result = prime * result + ((orderItem == null) ? 0 : orderItem.hashCode());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* #%L,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* BroadleafCommerce Framework,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* %%,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* Copyright (C) 2009 - 2013 Broadleaf Commerce,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"* Licensed under the Apache License, Version 2.0 (the ""License"");",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* you may not use this file except in compliance with the License.,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* You may obtain a copy of the License at,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
*,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
*       http://www.apache.org/licenses/LICENSE-2.0,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"* Unless required by applicable law or agreed to in writing, software",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"* distributed under the License is distributed on an ""AS IS"" BASIS,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* See the License for the specific language governing permissions and,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* limitations under the License.,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* #L%,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
private static final Log LOG = LogFactory.getLog(FulfillmentGroupItemImpl.class);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
private String status;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getCurrencyCode() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
//this is likely an extended class - instantiate from the fully qualified name via reflection,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
result = prime * result + ((orderItem == null) ? 0 : orderItem.hashCode());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.*;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.*;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.CascadeType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.*;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Entity;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Table;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.AdminPresentation;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.AdminPresentationCollection;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.AdminPresentationOperationTypes;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.ConfigurationItem;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.ValidationConfiguration;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.BatchSize;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.CacheConcurrencyStrategy;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.GenericGenerator;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.Index;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.CascadeType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Column;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Entity;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.FetchType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.GeneratedValue;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Inheritance;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.InheritanceType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.JoinColumn;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.JoinTable;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.ManyToMany;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.ManyToOne;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.MapKey;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.OneToMany;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Table;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Transient;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.math.BigDecimal;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import java.util.ArrayList;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import java.util.Collections;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import java.util.Comparator;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import java.util.Date;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import java.util.HashMap;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import java.util.HashSet;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import java.util.Iterator;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import java.util.List;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import java.util.Map;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import java.util.Set;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
*,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* The Constant serialVersionUID.,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* The id.,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"itemValue = ""This URL is already in use. Please provide a unique URL.""",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.AdminPresentationMap;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.math.BigDecimal;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.util.ArrayList;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.util.Collection;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.util.Collections;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.util.Comparator;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.util.Date;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.util.HashMap;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.util.HashSet;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.util.Iterator;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.util.List;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.util.Map;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.util.Set;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.MapKey;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"configurationItems = { @ConfigurationItem(itemName = ConfigurationItem.ERROR_MESSAGE, itemValue = ""This URL is already in use. Please provide a unique URL."")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* #%L,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* BroadleafCommerce Framework,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* %%,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* Copyright (C) 2009 - 2022 Broadleaf Commerce,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"* Licensed under the Broadleaf Fair Use License Agreement, Version 1.0",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"* (the ""Fair Use License"" located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* unless the restrictions on use therein are violated and require payment to Broadleaf in which case,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"* the Broadleaf End User License Agreement (EULA), Version 1.1",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"* (the ""Commercial License"" located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* shall apply.,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
*,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"* Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the ""Custom License"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* #L%,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.copy.CreateResponse;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.copy.MultiTenantCopyContext;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.currency.util.BroadleafCurrencyUtils;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.currency.util.CurrencyCodeIdentifiable;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransform;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformMember;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformTypes;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.money.Money;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.AdminPresentation;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.AdminPresentationClass;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.AdminPresentationCollection;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.PopulateToOneFieldsEnum;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.client.SupportedFieldType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeEntry;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverride;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverrides;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.common.presentation.override.PropertyType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOffer;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOfferImpl;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustment;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustmentImpl;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.core.order.service.type.FulfillmentType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.profile.core.domain.Address;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.profile.core.domain.AddressImpl;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.profile.core.domain.Phone;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.broadleafcommerce.profile.core.domain.PhoneImpl;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.Cache;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.CacheConcurrencyStrategy;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.GenericGenerator;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.Index;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import org.hibernate.annotations.Parameter;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import java.math.BigDecimal;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import java.util.ArrayList;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import java.util.List;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import java.util.Vector;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.CascadeType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Column;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Entity;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.FetchType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.GeneratedValue;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Inheritance;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.InheritanceType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.JoinColumn;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.JoinTable;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.ManyToOne;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.OneToMany;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
import javax.persistence.Table;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
protected String referenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
protected String method;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
protected String service;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
protected String type;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
protected String deliveryInstruction;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
protected String status;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* @deprecated uses the phonePrimary property on AddressImpl instead,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public String getReferenceNumber() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* @deprecated use the phonePrimary property on the related Address instead,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public String getMethod() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public String getDeliveryInstruction() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public String getService() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public String getCurrencyCode() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
result = prime * result + ((address == null) ? 0 : address.hashCode());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
result = prime * result + ((fulfillmentGroupItems == null) ? 0 : fulfillmentGroupItems.hashCode());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public static class Name {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"public static final String Items = ""FulfillmentGroupImpl_Items_Tab"";",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"public static final String Pricing = ""FulfillmentGroupImpl_Pricing_Tab"";",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"public static final String Address = ""FulfillmentGroupImpl_Address_Tab"";",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"public static final String Advanced = ""FulfillmentGroupImpl_Advanced_Tab"";",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
"public static final String Pricing = ""FulfillmentGroupImpl_Pricing"";",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public static final int STATUS = 4000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public static final int TYPE = 5000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public static final int PRIMARY = 7000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public static final int PHONE = 8000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public static final int SALE = 2000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
public static final int TAXABLE = 10000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,0
* #%L,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* BroadleafCommerce Framework,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* %%,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* Copyright (C) 2009 - 2016 Broadleaf Commerce,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"* Licensed under the Broadleaf Fair Use License Agreement, Version 1.0",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"* (the ""Fair Use License"" located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* unless the restrictions on use therein are violated and require payment to Broadleaf in which case,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"* the Broadleaf End User License Agreement (EULA), Version 1.1",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"* (the ""Commercial License"" located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* shall apply.,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
*,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"* Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the ""Custom License"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* #L%,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.copy.CreateResponse;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.copy.MultiTenantCopyContext;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.currency.util.BroadleafCurrencyUtils;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.currency.util.CurrencyCodeIdentifiable;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransform;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformMember;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformTypes;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.money.Money;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.AdminPresentation;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.AdminPresentationClass;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.AdminPresentationCollection;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.PopulateToOneFieldsEnum;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.client.SupportedFieldType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeEntry;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverride;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverrides;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.common.presentation.override.PropertyType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOffer;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOfferImpl;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustment;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustmentImpl;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.core.order.service.type.FulfillmentType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.profile.core.domain.Address;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.profile.core.domain.AddressImpl;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.profile.core.domain.Phone;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.broadleafcommerce.profile.core.domain.PhoneImpl;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.Cache;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.CacheConcurrencyStrategy;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.GenericGenerator;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.Index;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import org.hibernate.annotations.Parameter;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.math.BigDecimal;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.util.ArrayList;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.util.List;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import java.util.Vector;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.CascadeType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Column;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Entity;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.FetchType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.GeneratedValue;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Inheritance;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.InheritanceType;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.JoinColumn;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.JoinTable;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.ManyToOne;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.OneToMany;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
import javax.persistence.Table;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String referenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String method;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String service;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String type;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String deliveryInstruction;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
protected String status;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* @deprecated uses the phonePrimary property on AddressImpl instead,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getReferenceNumber() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
* @deprecated use the phonePrimary property on the related Address instead,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getMethod() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getDeliveryInstruction() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getService() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public String getCurrencyCode() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
result = prime * result + ((address == null) ? 0 : address.hashCode());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
result = prime * result + ((fulfillmentGroupItems == null) ? 0 : fulfillmentGroupItems.hashCode());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public static class Name {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"public static final String Items = ""FulfillmentGroupImpl_Items_Tab"";",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"public static final String Pricing = ""FulfillmentGroupImpl_Pricing_Tab"";",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"public static final String Address = ""FulfillmentGroupImpl_Address_Tab"";",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"public static final String Advanced = ""FulfillmentGroupImpl_Advanced_Tab"";",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"public static final String Pricing = ""FulfillmentGroupImpl_Pricing"";",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public static final int STATUS = 4000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public static final int TYPE = 5000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public static final int PRIMARY = 7000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public static final int PHONE = 8000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public static final int SALE = 2000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
public static final int TAXABLE = 10000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,1,1
"@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region=""blStandardElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationClass(populateToOneFields = PopulateToOneFieldsEnum.TRUE, friendlyName = ""StoreImpl_baseStore"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@SQLDelete(sql=""UPDATE BLC_STORE SET ARCHIVED = 'Y' WHERE STORE_ID = ?"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@GeneratedValue(generator= ""StoreId"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@GenericGenerator(,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"name=""StoreId"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"strategy=""org.broadleafcommerce.common.persistence.IdOverrideTableGenerator"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
parameters = {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Parameter(name=""segment_value"", value=""StoreImpl""),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Parameter(name=""entity_name"", value=""org.broadleafcommerce.core.store.domain.StoreImpl"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
},0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""StoreImpl_Store_ID"", visibility = VisibilityEnum.HIDDEN_ALL)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
private Long id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""STORE_NAME"", nullable = false)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""StoreImpl_Store_Name"", order = Presentation.FieldOrder.NAME,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"group = Presentation.Group.Name.General, groupOrder = Presentation.Group.Order.General,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"prominent = true, gridOrder = 1, columnWidth = ""200px"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
requiredOverride = RequiredOverride.REQUIRED),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""StoreImpl_address1"", order = Presentation.FieldOrder.ADDRESS_1,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"group = Presentation.Group.Name.Location, groupOrder = Presentation.Group.Order.Location,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"gridOrder = 2, columnWidth = ""200px"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""StoreImpl_address2"", order = Presentation.FieldOrder.ADDRESS_2,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"gridOrder = 3, columnWidth = ""200px"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""StoreImpl_city"", order = Presentation.FieldOrder.CITY,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"prominent = true, gridOrder = 4)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""StoreImpl_State"", order = Presentation.FieldOrder.STATE,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"prominent = true, gridOrder = 5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""StoreImpl_Zip"", order = Presentation.FieldOrder.ZIP,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"prominent = true, gridOrder = 6)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""StoreImpl_Country"", order = Presentation.FieldOrder.COUNTRY,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"gridOrder = 7, columnWidth = ""200px"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""StoreImpl_Phone"", order = Presentation.FieldOrder.PHONE,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"gridOrder = 8, columnWidth = ""200px"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""StoreImpl_lat"", order = Presentation.FieldOrder.LATITUDE,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"group = Presentation.Group.Name.Geocoding, groupOrder = Presentation.Group.Order.Geocoding,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"gridOrder = 9, columnWidth = ""200px"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""StoreImpl_lng"", order = Presentation.FieldOrder.LONGITUDE,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"gridOrder = 10, columnWidth = ""200px"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Long getId() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setId(Long id) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static class Presentation {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static class Tab {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static class Order {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int Advanced = 7000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static class Group {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int General = 1000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int Location = 2000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int Geocoding = 3000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static class FieldOrder {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int ADDRESS_1 = 2000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int ADDRESS_2 = 3000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""STORE_NAME"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""STORE_NAME_INDEX"", columnNames={""STORE_NAME""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""STORE_CITY_INDEX"", columnNames={""STORE_CITY""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""STORE_STATE_INDEX"", columnNames={""STORE_STATE""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""STORE_ZIP_INDEX"", columnNames={""STORE_ZIP""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""STORE_COUNTRY_INDEX"", columnNames={""STORE_COUNTRY""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""STORE_LATITUDE_INDEX"", columnNames={""LATITUDE""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""STORE_LONGITUDE_INDEX"", columnNames={""LONGITUDE""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setId(String id) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected Long orderPaymentId;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""ORDER_PAYMENT_REFERENCE_NUMBER"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name=""PAYMENTLOG_REFERENCE_INDEX"", columnNames={""ORDER_PAYMENT_REFERENCE_NUMBER""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return orderPaymentId;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.orderPaymentId = paymentInfoId;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return orderPaymentReferenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.orderPaymentReferenceNumber = paymentInfoReferenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public PaymentTransactionType getTransactionType() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return PaymentTransactionType.getInstance(transactionType);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setTransactionType(PaymentTransactionType transactionType) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (orderPaymentId == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (other.orderPaymentId != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
} else if (!orderPaymentId.equals(other.orderPaymentId)) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (orderPaymentReferenceNumber == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (other.orderPaymentReferenceNumber != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
} else if (!orderPaymentReferenceNumber.equals(other.orderPaymentReferenceNumber)) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected Long paymentInfoId;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""PAYMENT_INFO_REFERENCE_NUMBER"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""PAYMENTLOG_REFERENCE_INDEX"", columnNames={""PAYMENT_INFO_REFERENCE_NUMBER""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return paymentInfoId;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.paymentInfoId = paymentInfoId;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return paymentInfoReferenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.paymentInfoReferenceNumber = paymentInfoReferenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public TransactionType getTransactionType() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return TransactionType.getInstance(transactionType);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setTransactionType(TransactionType transactionType) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (paymentInfoId == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (other.paymentInfoId != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
} else if (!paymentInfoId.equals(other.paymentInfoId)) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (paymentInfoReferenceNumber == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (other.paymentInfoReferenceNumber != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
} else if (!paymentInfoReferenceNumber.equals(other.paymentInfoReferenceNumber)) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@ManyToOne(targetEntity = PaymentTransactionImpl.class),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@JoinColumn(name = ""PAYMENT_TRANSACTION_ID"", referencedColumnName = ""PAYMENT_TRANSACTION_ID"", insertable = false, updatable = false)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected PaymentTransaction paymentTransaction;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"return BroadleafCurrencyUtils.getMoney(transactionAmount, getPaymentTransaction().getOrderPayment().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"return remainingBalance == null ? null : BroadleafCurrencyUtils.getMoney(remainingBalance, getPaymentTransaction().getOrderPayment().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public PaymentTransaction getPaymentTransaction() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return paymentTransaction;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setPaymentTransaction(PaymentTransaction paymentTransaction) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.paymentTransaction = paymentTransaction;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""REFERENCE_NUMBER"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""PAYRESPONSE_REFERENCE_INDEX"", columnNames={""REFERENCE_NUMBER""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_Response_Ref_Number"", order = 10, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""ORDER_PAYMENT_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""PAYRESPONSE_ORDERPAYMENT_INDEX"", columnNames={""ORDER_PAYMENT_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(excluded = true, readOnly = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected Long paymentInfoId;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""PAYMENT_INFO_REFERENCE_NUMBER"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""PAYRESPONSE_REFERENCE_INDEX"", columnNames={""PAYMENT_INFO_REFERENCE_NUMBER""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_Payment_Ref_Number"", order = 17, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@ManyToOne(targetEntity = BroadleafCurrencyImpl.class),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@JoinColumn(name = ""CURRENCY_CODE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_currency"", order = 2, group = ""PaymentLogImpl_Payment_Log"", readOnly = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected BroadleafCurrency currency;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@ManyToOne(targetEntity = PaymentInfoImpl.class),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@JoinColumn(name = ""PAYMENT_INFO_REFERENCE_NUMBER"", referencedColumnName = ""REFERENCE_NUMBER"", insertable = false, updatable = false)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected PaymentInfo paymentInfo;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Override,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return referenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
},0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setReferenceNumber(String referenceNumber) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.referenceNumber = referenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Deprecated,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getAmountPaid() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"return BroadleafCurrencyUtils.getMoney(amountPaid, getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setAmountPaid(Money amountPaid) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.amountPaid = Money.toAmount(amountPaid);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"return BroadleafCurrencyUtils.getMoney(transactionAmount, getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return cvvCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setCvvCode(String cvvCode) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.cvvCode = cvvCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"return remainingBalance == null ? null : BroadleafCurrencyUtils.getMoney(remainingBalance, getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public TransactionType getTransactionType() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return TransactionType.getInstance(transactionType);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setTransactionType(TransactionType transactionType) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.transactionType = transactionType.getType();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Long getPaymentInfoId() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return paymentInfoId;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setPaymentInfoId(Long paymentInfoId) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.paymentInfoId = paymentInfoId;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public BroadleafCurrency getCurrency() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return currency;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setCurrency(BroadleafCurrency currency) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.currency = currency;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return paymentInfoReferenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setPaymentInfoReferenceNumber(String paymentInfoReferenceNumber) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.paymentInfoReferenceNumber = paymentInfoReferenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public PaymentInfo getPaymentInfo() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return paymentInfo;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setPaymentInfo(PaymentInfo paymentInfo) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.paymentInfo = paymentInfo;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"sb.append(""reference number: "").append(this.getReferenceNumber()).append(""\n"");",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
/*,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
*/,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
package org.broadleafcommerce.core.payment.domain;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Entity,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Inheritance(strategy = InheritanceType.JOINED),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Table(name = ""BLC_PAYMENT_RESPONSE_ITEM"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public class PaymentResponseItemImpl implements PaymentResponseItem {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
private static final long serialVersionUID = 1L;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Id,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@GeneratedValue(generator = ""PaymentResponseItemId"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@GenericGenerator(,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"name=""PaymentResponseItemId"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"strategy=""org.broadleafcommerce.common.persistence.IdOverrideTableGenerator"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
parameters = {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Parameter(name=""segment_value"", value=""PaymentResponseItemImpl""),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Parameter(name=""entity_name"", value=""org.broadleafcommerce.core.payment.domain.PaymentResponseItemImpl"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
},0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""PAYMENT_RESPONSE_ITEM_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected Long id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""USER_NAME"", nullable=false)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_User_Name"", order = 1, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""AMOUNT_PAID"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_Amount"", order = 2, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true, prominent = true, gridOrder = 200, fieldType = SupportedFieldType.MONEY)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected BigDecimal amountPaid;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""TRANSACTION_AMOUNT"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_Transaction_Amount"", order = 2, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected BigDecimal transactionAmount;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""AUTHORIZATION_CODE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_Authorization_Code"", order = 3, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""MIDDLEWARE_RESPONSE_CODE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_Middleware_Response_Code"", order = 4, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""MIDDLEWARE_RESPONSE_TEXT"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_Middleware_Response_Text"", order = 5, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""PROCESSOR_RESPONSE_CODE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_Processor_Response_Code"", order = 6, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""PROCESSOR_RESPONSE_TEXT"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_Processor_Response_Text"", order = 7, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""IMPLEMENTOR_RESPONSE_CODE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_Implementer_Response_Code"", order = 8, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""IMPLEMENTOR_RESPONSE_TEXT"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_Implementer_Response_Text"", order = 9, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""TRANSACTION_SUCCESS"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_Transaction_Successful"", order = 11, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true, prominent = true, gridOrder = 300)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected Boolean transactionSuccess = false;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""TRANSACTION_TIMESTAMP"", nullable=false)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Temporal(TemporalType.TIMESTAMP),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_Transaction_Time"", order = 12, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true, prominent = true, gridOrder = 100)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected Date transactionTimestamp;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""TRANSACTION_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_Transaction_Id"", order = 13, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""AVS_CODE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_AVS_Code"", order = 14, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Transient,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""REMAINING_BALANCE"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_Remaining_Balance"", order = 15, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected BigDecimal remainingBalance;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""TRANSACTION_TYPE"", nullable=false)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""PAYRESPONSE_TRANTYPE_INDEX"", columnNames={""TRANSACTION_TYPE""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""PaymentResponseItemImpl_Transaction_Type"", order = 16, group = ""PaymentResponseItemImpl_Payment_Response"", readOnly = true, prominent = true, gridOrder = 400)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@ElementCollection,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@MapKeyColumn(name=""FIELD_NAME"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name=""FIELD_VALUE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@CollectionTable(name=""BLC_PAYMENT_ADDITIONAL_FIELDS"", joinColumns=@JoinColumn(name=""PAYMENT_RESPONSE_ITEM_ID""))",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@BatchSize(size = 50),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"protected Map<String, String> additionalFields = new HashMap<String, String>();",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@ManyToOne(targetEntity = CustomerImpl.class),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@JoinColumn(name = ""CUSTOMER_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""PAYRESPONSE_CUSTOMER_INDEX"", columnNames={""CUSTOMER_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected Customer customer;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@ManyToOne(targetEntity = PaymentTransactionImpl.class),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@JoinColumn(name = ""PAYMENT_TRANSACTION_ID"", referencedColumnName = ""PAYMENT_TRANSACTION_ID"", insertable = false, updatable = false)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected PaymentTransaction paymentTransaction;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Override,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return authorizationCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setAuthorizationCode(String authorizationCode) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.authorizationCode = authorizationCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return middlewareResponseCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setMiddlewareResponseCode(String middlewareResponseCode) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.middlewareResponseCode = middlewareResponseCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return middlewareResponseText;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setMiddlewareResponseText(String middlewareResponseText) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.middlewareResponseText = middlewareResponseText;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return processorResponseCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setProcessorResponseCode(String processorResponseCode) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.processorResponseCode = processorResponseCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return processorResponseText;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setProcessorResponseText(String processorResponseText) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.processorResponseText = processorResponseText;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getTransactionAmount() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"return BroadleafCurrencyUtils.getMoney(transactionAmount, getPaymentTransaction().getOrderPayment().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setTransactionAmount(Money transactionAmount) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.transactionAmount = Money.toAmount(transactionAmount);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Boolean getTransactionSuccess() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (transactionSuccess == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return Boolean.FALSE;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
} else {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return transactionSuccess;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setTransactionSuccess(Boolean transactionSuccess) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.transactionSuccess = transactionSuccess;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Date getTransactionTimestamp() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return transactionTimestamp;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setTransactionTimestamp(Date transactionTimestamp) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.transactionTimestamp = transactionTimestamp;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return implementorResponseCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setImplementorResponseCode(String implementorResponseCode) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.implementorResponseCode = implementorResponseCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return implementorResponseText;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setImplementorResponseText(String implementorResponseText) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.implementorResponseText = implementorResponseText;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return transactionId;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setTransactionId(String transactionId) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.transactionId = transactionId;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return avsCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setAvsCode(String avsCode) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.avsCode = avsCode;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getRemainingBalance() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"return remainingBalance == null ? null : BroadleafCurrencyUtils.getMoney(remainingBalance, getPaymentTransaction().getOrderPayment().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setRemainingBalance(Money remainingBalance) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.remainingBalance = remainingBalance==null?null:Money.toAmount(remainingBalance);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"public Map<String, String> getAdditionalFields() {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return additionalFields;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"public void setAdditionalFields(Map<String, String> additionalFields) {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.additionalFields = additionalFields;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Long getId() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setId(Long id) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.id = id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return userName;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setUserName(String userName) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.userName = userName;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Customer getCustomer() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return customer;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setCustomer(Customer customer) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.customer = customer;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public PaymentTransaction getPaymentTransaction() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return paymentTransaction;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setPaymentTransaction(PaymentTransaction paymentTransaction) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.paymentTransaction = paymentTransaction;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
StringBuilder sb = new StringBuilder();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"sb.append(PaymentResponseItem.class.getName()).append(""\n"");",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"sb.append(""auth code: "").append(this.getAuthorizationCode()).append(""\n"");",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"sb.append(""implementor response code: "").append(this.getImplementorResponseCode()).append(""\n"");",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"sb.append(""implementor response text: "").append(this.getImplementorResponseText()).append(""\n"");",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"sb.append(""middleware response code: "").append(this.getMiddlewareResponseCode()).append(""\n"");",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"sb.append(""middleware response text: "").append(this.getMiddlewareResponseText()).append(""\n"");",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"sb.append(""processor response code: "").append(this.getProcessorResponseCode()).append(""\n"");",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"sb.append(""processor response text: "").append(this.getProcessorResponseText()).append(""\n"");",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"sb.append(""transaction id: "").append(this.getTransactionId()).append(""\n"");",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"sb.append(""avs code: "").append(this.getAvsCode()).append(""\n"");",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (remainingBalance != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"sb.append(""remaining balance: "").append(this.getRemainingBalance());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return sb.toString();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public int hashCode() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
final int prime = 31;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
int result = 1;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return result;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public boolean equals(Object obj) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (this == obj) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return true;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (obj == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return false;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (getClass() != obj.getClass()) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
PaymentResponseItemImpl other = (PaymentResponseItemImpl) obj;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (id != null && other.id != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return id.equals(other.id);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (transactionId == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (other.transactionId != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
} else if (!transactionId.equals(other.transactionId)) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""AdminPermissionImpl_Name"", order = 3000, group = ""AdminPermissionImpl_Permission"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""AdminPermissionImpl_Permission_Type"", order = 3000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"group = ""AdminPermissionImpl_Permission"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"prominent = true, gridOrder = 2000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"fieldType = SupportedFieldType.BROADLEAF_ENUMERATION,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"broadleafEnumeration = ""org.broadleafcommerce.openadmin.server.security.service.type.PermissionType"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""AdminPermissionImpl_Description"", order = 1000, group = ""AdminPermissionImpl_Permission"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"prominent = true, gridOrder = 2000)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@AdminPresentation(excluded = true),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationCollection(addType = AddMethodType.LOOKUP, friendlyName = ""entityPermissionsTitle"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
order = 2000),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationCollection(addType = AddMethodType.LOOKUP, friendlyName = ""childPermissionsTitle"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"order = 1000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"manyToField = ""allParentPermissions"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
operationTypes = @AdminPresentationOperationTypes(removeType = OperationType.NONDESTRUCTIVEREMOVE)),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@ManyToMany(fetch = FetchType.LAZY, targetEntity = AdminPermissionImpl.class)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@JoinTable(name = ""BLC_ADMIN_PERMISSION_XREF"", joinColumns = @JoinColumn(name = ""CHILD_PERMISSION_ID"", referencedColumnName = ""ADMIN_PERMISSION_ID""), inverseJoinColumns = @JoinColumn(name = ""ADMIN_PERMISSION_ID"", referencedColumnName = ""ADMIN_PERMISSION_ID""))",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = ""blStandardElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@BatchSize(size = 50),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected List<AdminPermission> allParentPermissions = new ArrayList<AdminPermission>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""AdminPermissionImpl_Is_Friendly"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"order = 4000, group = ""AdminPermissionImpl_Permission"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@Override,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public List<AdminPermission> getAllParentPermissions() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return allParentPermissions;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
},0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name=""ADMINPERM_NAME_INDEX"", columnNames={""NAME""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""ADMINPERM_TYPE_INDEX"", columnNames={""PERMISSION_TYPE""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""AdminPermissionImpl_Description"", order=2, group = ""AdminPermissionImpl_Permission"", prominent=true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@AdminPresentation(visibility = VisibilityEnum.HIDDEN_ALL),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.PREVIEW, skipOverlaps = true),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""CustomerImpl_First_Name"", order = 2000, group = ""CustomerImpl_Customer"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""CustomerImpl_Last_Name"", order = 3000, group = ""CustomerImpl_Customer"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name = ""CUSTOMER_CHALLENGE_INDEX"", columnNames = { ""CHALLENGE_QUESTION_ID"" })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Receive_Email"", order = 1000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Deactivated"", order = 3000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Locale"", order = 4000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"excluded = true, visibility = VisibilityEnum.GRID_HIDDEN)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(fetch = FetchType.EAGER, mappedBy = ""customer"", targetEntity = CustomerAttributeImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Cache(usage = CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region = ""blStandardElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@MapKey(name = ""name"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerAddressImpl.class, cascade = { CascadeType.ALL })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Cascade(value = { org.hibernate.annotations.CascadeType.ALL, org.hibernate.annotations.CascadeType.DELETE_ORPHAN })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = ""blStandardElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerPhoneImpl.class, cascade = { CascadeType.ALL })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerPaymentImpl.class, cascade = { CascadeType.ALL })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected List<CustomerPayment> customerPayments = new ArrayList<CustomerPayment>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
for (CustomerAddress entry : customerAddresses) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"for (Map.Entry<String, CustomerAttribute> entry : customerAttributes.entrySet()) {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"cloned.getCustomerAttributes().put(entry.getKey(), clonedEntry);",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
for (CustomerPayment entry : customerPayments) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
for (CustomerPhone entry : customerPhones) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.PREVIEW, skipOverlaps=true),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""CustomerImpl_First_Name"", order = 2000, group = ""CustomerImpl_Customer"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""CustomerImpl_Last_Name"", order = 3000, group = ""CustomerImpl_Customer"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""CUSTOMER_CHALLENGE_INDEX"", columnNames={""CHALLENGE_QUESTION_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Receive_Email"",order=1000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Deactivated"", order=3000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Locale"",order=4000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"excluded = true, visibility = VisibilityEnum.GRID_HIDDEN)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerAttributeImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=""blStandardElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@MapKey(name=""name"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerAddressImpl.class, cascade = {CascadeType.ALL})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Cascade(value={org.hibernate.annotations.CascadeType.ALL, org.hibernate.annotations.CascadeType.DELETE_ORPHAN})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region=""blStandardElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerPhoneImpl.class, cascade = {CascadeType.ALL})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerPaymentImpl.class, cascade = {CascadeType.ALL})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected List<CustomerPayment> customerPayments  = new ArrayList<CustomerPayment>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
for(CustomerAddress entry : customerAddresses){,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"for(Map.Entry<String, CustomerAttribute> entry : customerAttributes.entrySet()){",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"cloned.getCustomerAttributes().put(entry.getKey(),clonedEntry);",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
for(CustomerPayment entry : customerPayments){,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
for(CustomerPhone entry : customerPhones){,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.PREVIEW, skipOverlaps=true),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""CustomerImpl_First_Name"", order = 2000, group = ""CustomerImpl_Customer"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""CustomerImpl_Last_Name"", order = 3000, group = ""CustomerImpl_Customer"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name=""CUSTOMER_CHALLENGE_INDEX"", columnNames={""CHALLENGE_QUESTION_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Receive_Email"",order=1000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Deactivated"", order=3000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Locale"",order=4000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"excluded = true, visibility = VisibilityEnum.GRID_HIDDEN)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerAttributeImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=""blStandardElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@MapKey(name=""name"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerAddressImpl.class, cascade = {CascadeType.ALL})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Cascade(value={org.hibernate.annotations.CascadeType.ALL, org.hibernate.annotations.CascadeType.DELETE_ORPHAN})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region=""blStandardElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerPhoneImpl.class, cascade = {CascadeType.ALL})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerPaymentImpl.class, cascade = {CascadeType.ALL})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected List<CustomerPayment> customerPayments  = new ArrayList<CustomerPayment>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
for(CustomerAddress entry : customerAddresses){,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"for(Map.Entry<String, CustomerAttribute> entry : customerAttributes.entrySet()){",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"cloned.getCustomerAttributes().put(entry.getKey(),clonedEntry);",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
for(CustomerPayment entry : customerPayments){,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
for(CustomerPhone entry : customerPhones){,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.PREVIEW, skipOverlaps = true),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""CustomerImpl_First_Name"", order = 2000, group = ""CustomerImpl_Customer"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""CustomerImpl_Last_Name"", order = 3000, group = ""CustomerImpl_Customer"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name = ""CUSTOMER_CHALLENGE_INDEX"", columnNames = { ""CHALLENGE_QUESTION_ID"" })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Receive_Email"", order = 1000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Deactivated"", order = 3000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Locale"", order = 4000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"excluded = true, visibility = VisibilityEnum.GRID_HIDDEN)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(fetch = FetchType.EAGER, mappedBy = ""customer"", targetEntity = CustomerAttributeImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Cache(usage = CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region = ""blStandardElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@MapKey(name = ""name"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerAddressImpl.class, cascade = { CascadeType.ALL })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Cascade(value = { org.hibernate.annotations.CascadeType.ALL, org.hibernate.annotations.CascadeType.DELETE_ORPHAN })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = ""blStandardElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerPhoneImpl.class, cascade = { CascadeType.ALL })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerPaymentImpl.class, cascade = { CascadeType.ALL })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected List<CustomerPayment> customerPayments = new ArrayList<CustomerPayment>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
for (CustomerAddress entry : customerAddresses) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"for (Map.Entry<String, CustomerAttribute> entry : customerAttributes.entrySet()) {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"cloned.getCustomerAttributes().put(entry.getKey(), clonedEntry);",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
for (CustomerPayment entry : customerPayments) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
for (CustomerPhone entry : customerPhones) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.PREVIEW, skipOverlaps = true),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""CustomerImpl_First_Name"", order = 2000, group = ""CustomerImpl_Customer"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""CustomerImpl_Last_Name"", order = 3000, group = ""CustomerImpl_Customer"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name = ""CUSTOMER_CHALLENGE_INDEX"", columnNames = { ""CHALLENGE_QUESTION_ID"" })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Receive_Email"", order = 1000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Deactivated"", order = 3000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Locale"", order = 4000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"excluded = true, visibility = VisibilityEnum.GRID_HIDDEN)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(fetch = FetchType.EAGER, mappedBy = ""customer"", targetEntity = CustomerAttributeImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Cache(usage = CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region = ""blStandardElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@MapKey(name = ""name"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerAddressImpl.class, cascade = { CascadeType.ALL })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Cascade(value = { org.hibernate.annotations.CascadeType.ALL, org.hibernate.annotations.CascadeType.DELETE_ORPHAN })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = ""blStandardElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerPhoneImpl.class, cascade = { CascadeType.ALL })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerPaymentImpl.class, cascade = { CascadeType.ALL })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected List<CustomerPayment> customerPayments = new ArrayList<CustomerPayment>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
for (CustomerAddress entry : customerAddresses) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"for (Map.Entry<String, CustomerAttribute> entry : customerAttributes.entrySet()) {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"cloned.getCustomerAttributes().put(entry.getKey(), clonedEntry);",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
for (CustomerPayment entry : customerPayments) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
for (CustomerPhone entry : customerPhones) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.PREVIEW, skipOverlaps=true),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""CustomerImpl_First_Name"", order = 2000, group = ""CustomerImpl_Customer"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""CustomerImpl_Last_Name"", order = 3000, group = ""CustomerImpl_Customer"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""CUSTOMER_CHALLENGE_INDEX"", columnNames={""CHALLENGE_QUESTION_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Receive_Email"",order=1000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Deactivated"", order=3000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""CustomerImpl_Customer_Locale"",order=4000,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"excluded = true, visibility = VisibilityEnum.GRID_HIDDEN)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerAttributeImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=""blStandardElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@MapKey(name=""name"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerAddressImpl.class, cascade = {CascadeType.ALL})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Cascade(value={org.hibernate.annotations.CascadeType.ALL, org.hibernate.annotations.CascadeType.DELETE_ORPHAN})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region=""blStandardElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerPhoneImpl.class, cascade = {CascadeType.ALL})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""customer"", targetEntity = CustomerPaymentImpl.class, cascade = {CascadeType.ALL})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected List<CustomerPayment> customerPayments  = new ArrayList<CustomerPayment>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
for(CustomerAddress entry : customerAddresses){,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"for(Map.Entry<String, CustomerAttribute> entry : customerAttributes.entrySet()){",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"cloned.getCustomerAttributes().put(entry.getKey(),clonedEntry);",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
for(CustomerPayment entry : customerPayments){,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
for(CustomerPhone entry : customerPhones){,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
/*,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
*/,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
package org.broadleafcommerce.core.order.domain;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@Entity,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@DiscriminatorColumn(name = ""TYPE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@Inheritance(strategy = InheritanceType.JOINED),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Table(name = ""BLC_FULFILLMENT_GROUP_ITEM"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=""blOrderElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@AdminPresentationMergeOverrides(,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
{,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = """", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.READONLY,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
booleanOverrideValue = true)),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
},0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"public class FulfillmentGroupItemImpl implements FulfillmentGroupItem, Cloneable, CurrencyCodeIdentifiable {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
private static final long serialVersionUID = 1L;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@Id,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@GeneratedValue(generator = ""FulfillmentGroupItemId"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@GenericGenerator(,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"name=""FulfillmentGroupItemId"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"strategy=""org.broadleafcommerce.common.persistence.IdOverrideTableGenerator"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
parameters = {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Parameter(name=""segment_value"", value=""FulfillmentGroupItemImpl""),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Parameter(name=""entity_name"", value=""org.broadleafcommerce.core.order.domain.FulfillmentGroupItemImpl"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""FULFILLMENT_GROUP_ITEM_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected Long id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@ManyToOne(targetEntity = FulfillmentGroupImpl.class, optional=false)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@JoinColumn(name = ""FULFILLMENT_GROUP_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name=""FGITEM_FG_INDEX"", columnNames={""FULFILLMENT_GROUP_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected FulfillmentGroup fulfillmentGroup;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
//this needs to stay OrderItem in order to provide backwards compatibility for those implementations that place a BundleOrderItem,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@ManyToOne(targetEntity = OrderItemImpl.class, optional=false)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@JoinColumn(name = ""ORDER_ITEM_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Order_Item"", prominent = true, order = 1000, gridOrder = 1000)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@AdminPresentationToOneLookup(),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected OrderItem orderItem;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""QUANTITY"", nullable=false)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Quantity"", prominent = true, order = 2000, gridOrder = 2000)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected int quantity;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""STATUS"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name=""FGITEM_STATUS_INDEX"", columnNames={""STATUS""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Status"", prominent = true, order = 3000, gridOrder = 3000)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@JoinTable(name = ""BLC_FG_ITEM_TAX_XREF"", joinColumns = @JoinColumn(name = ""FULFILLMENT_GROUP_ITEM_ID""), inverseJoinColumns = @JoinColumn(name = ""TAX_DETAIL_ID""))",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected List<TaxDetail> taxes = new ArrayList<TaxDetail>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""TOTAL_ITEM_TAX"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Total_Item_Tax"", order=4000, fieldType=SupportedFieldType.MONEY)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected BigDecimal totalTax;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""TOTAL_ITEM_AMOUNT"", precision = 19, scale = 5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Total_Item_Amount"", order = 5000, fieldType = SupportedFieldType.MONEY)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected BigDecimal totalItemAmount;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""TOTAL_ITEM_TAXABLE_AMOUNT"", precision = 19, scale = 5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Total_Item_Taxable_Amount"", order = 6000, fieldType = SupportedFieldType.MONEY)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected BigDecimal totalItemTaxableAmount;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""PRORATED_ORDER_ADJ"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Prorated_Adjustment"", order = 7000, fieldType = SupportedFieldType.MONEY)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected BigDecimal proratedOrderAdjustment;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@Override,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Long getId() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setId(Long id) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.id = id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public FulfillmentGroup getFulfillmentGroup() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return fulfillmentGroup;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setFulfillmentGroup(FulfillmentGroup fulfillmentGroup) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.fulfillmentGroup = fulfillmentGroup;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public OrderItem getOrderItem() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return orderItem;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setOrderItem(OrderItem orderItem) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.orderItem = orderItem;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public int getQuantity() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return quantity;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setQuantity(int quantity) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.quantity = quantity;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getRetailPrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return orderItem.getRetailPrice();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getSalePrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return orderItem.getSalePrice();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getPrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return orderItem.getAveragePrice();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected Money convertToMoney(BigDecimal amount) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"return amount == null ? null : BroadleafCurrencyUtils.getMoney(amount, orderItem.getOrder().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getTotalItemAmount() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return convertToMoney(totalItemAmount);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setTotalItemAmount(Money amount) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
totalItemAmount = amount.getAmount();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getProratedOrderAdjustmentAmount() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return convertToMoney(proratedOrderAdjustment);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setProratedOrderAdjustmentAmount(Money proratedOrderAdjustment) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.proratedOrderAdjustment = proratedOrderAdjustment.getAmount();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getTotalItemTaxableAmount() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return convertToMoney(totalItemTaxableAmount);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setTotalItemTaxableAmount(Money taxableAmount) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
totalItemTaxableAmount = taxableAmount.getAmount();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public FulfillmentGroupStatusType getStatus() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return FulfillmentGroupStatusType.getInstance(this.status);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setStatus(FulfillmentGroupStatusType status) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.status = status.getType();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void removeAssociations() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (getFulfillmentGroup() != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
getFulfillmentGroup().getFulfillmentGroupItems().remove(this);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
setFulfillmentGroup(null);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
setOrderItem(null);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public List<TaxDetail> getTaxes() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return taxes;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setTaxes(List<TaxDetail> taxes) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.taxes = taxes;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getTotalTax() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"return totalTax == null ? null : BroadleafCurrencyUtils.getMoney(totalTax, getFulfillmentGroup().getOrder().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setTotalTax(Money totalTax) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.totalTax = Money.toAmount(totalTax);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return ((CurrencyCodeIdentifiable) fulfillmentGroup).getCurrencyCode();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"public void checkCloneable(FulfillmentGroupItem fulfillmentGroupItem) throws CloneNotSupportedException, SecurityException, NoSuchMethodException {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"Method cloneMethod = fulfillmentGroupItem.getClass().getMethod(""clone"", new Class[]{});",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"if (cloneMethod.getDeclaringClass().getName().startsWith(""org.broadleafcommerce"") && !orderItem.getClass().getName().startsWith(""org.broadleafcommerce"")) {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
//subclass is not implementing the clone method,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"throw new CloneNotSupportedException(""Custom extensions and implementations should implement clone in order to guarantee split and merge operations are performed accurately"");",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public FulfillmentGroupItem clone() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
FulfillmentGroupItem clonedFulfillmentGroupItem;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
try {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
clonedFulfillmentGroupItem = (FulfillmentGroupItem) Class.forName(this.getClass().getName()).newInstance();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
checkCloneable(clonedFulfillmentGroupItem);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
} catch (CloneNotSupportedException e) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"LOG.warn(""Clone implementation missing in inheritance hierarchy outside of Broadleaf: "" + clonedFulfillmentGroupItem.getClass().getName(), e);",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
clonedFulfillmentGroupItem.setFulfillmentGroup(getFulfillmentGroup());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
clonedFulfillmentGroupItem.setOrderItem(getOrderItem());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
clonedFulfillmentGroupItem.setQuantity(getQuantity());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
clonedFulfillmentGroupItem.setTotalItemAmount(getTotalItemAmount());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
clonedFulfillmentGroupItem.setTotalItemTaxableAmount(getTotalItemTaxableAmount());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (getStatus() != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
clonedFulfillmentGroupItem.setStatus(getStatus());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
} catch (Exception e) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
throw new RuntimeException(e);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return clonedFulfillmentGroupItem;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public boolean getHasProratedOrderAdjustments() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (proratedOrderAdjustment != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return (proratedOrderAdjustment.compareTo(BigDecimal.ZERO) == 0);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return false;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public boolean equals(Object obj) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (this == obj) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return true;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (obj == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (!getClass().isAssignableFrom(obj.getClass())) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
FulfillmentGroupItemImpl other = (FulfillmentGroupItemImpl) obj;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (id != null && other.id != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return id.equals(other.id);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (orderItem == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (other.orderItem != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
} else if (!orderItem.equals(other.orderItem)) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public int hashCode() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
final int prime = 31;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
int result = 1;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return result;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
/*,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
*/,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
package org.broadleafcommerce.core.order.domain;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Entity,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@DiscriminatorColumn(name = ""TYPE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Inheritance(strategy = InheritanceType.JOINED),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Table(name = ""BLC_FULFILLMENT_GROUP_ITEM"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=""blOrderElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@AdminPresentationMergeOverrides(,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
{,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = """", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.READONLY,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
booleanOverrideValue = true)),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
},0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"public class FulfillmentGroupItemImpl implements FulfillmentGroupItem, Cloneable, CurrencyCodeIdentifiable {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
private static final long serialVersionUID = 1L;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Id,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@GeneratedValue(generator = ""FulfillmentGroupItemId"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@GenericGenerator(,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"name=""FulfillmentGroupItemId"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"strategy=""org.broadleafcommerce.common.persistence.IdOverrideTableGenerator"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
parameters = {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Parameter(name=""segment_value"", value=""FulfillmentGroupItemImpl""),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Parameter(name=""entity_name"", value=""org.broadleafcommerce.core.order.domain.FulfillmentGroupItemImpl"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""FULFILLMENT_GROUP_ITEM_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected Long id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@ManyToOne(targetEntity = FulfillmentGroupImpl.class, optional=false)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@JoinColumn(name = ""FULFILLMENT_GROUP_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""FGITEM_FG_INDEX"", columnNames={""FULFILLMENT_GROUP_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected FulfillmentGroup fulfillmentGroup;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
//this needs to stay OrderItem in order to provide backwards compatibility for those implementations that place a BundleOrderItem,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@ManyToOne(targetEntity = OrderItemImpl.class, optional=false)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@JoinColumn(name = ""ORDER_ITEM_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Order_Item"", prominent = true, order = 1000, gridOrder = 1000)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@AdminPresentationToOneLookup(),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected OrderItem orderItem;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""QUANTITY"", nullable=false)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Quantity"", prominent = true, order = 2000, gridOrder = 2000)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected int quantity;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""STATUS"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""FGITEM_STATUS_INDEX"", columnNames={""STATUS""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Status"", prominent = true, order = 3000, gridOrder = 3000)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@JoinTable(name = ""BLC_FG_ITEM_TAX_XREF"", joinColumns = @JoinColumn(name = ""FULFILLMENT_GROUP_ITEM_ID""), inverseJoinColumns = @JoinColumn(name = ""TAX_DETAIL_ID""))",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected List<TaxDetail> taxes = new ArrayList<TaxDetail>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""TOTAL_ITEM_TAX"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Total_Item_Tax"", order=4000, fieldType=SupportedFieldType.MONEY)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected BigDecimal totalTax;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""TOTAL_ITEM_AMOUNT"", precision = 19, scale = 5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Total_Item_Amount"", order = 5000, fieldType = SupportedFieldType.MONEY)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected BigDecimal totalItemAmount;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""TOTAL_ITEM_TAXABLE_AMOUNT"", precision = 19, scale = 5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Total_Item_Taxable_Amount"", order = 6000, fieldType = SupportedFieldType.MONEY)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected BigDecimal totalItemTaxableAmount;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""PRORATED_ORDER_ADJ"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Prorated_Adjustment"", order = 7000, fieldType = SupportedFieldType.MONEY)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected BigDecimal proratedOrderAdjustment;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Override,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Long getId() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setId(Long id) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.id = id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public FulfillmentGroup getFulfillmentGroup() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return fulfillmentGroup;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setFulfillmentGroup(FulfillmentGroup fulfillmentGroup) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.fulfillmentGroup = fulfillmentGroup;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public OrderItem getOrderItem() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return orderItem;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setOrderItem(OrderItem orderItem) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.orderItem = orderItem;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public int getQuantity() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return quantity;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setQuantity(int quantity) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.quantity = quantity;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getRetailPrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return orderItem.getRetailPrice();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getSalePrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return orderItem.getSalePrice();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getPrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return orderItem.getAveragePrice();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected Money convertToMoney(BigDecimal amount) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"return amount == null ? null : BroadleafCurrencyUtils.getMoney(amount, orderItem.getOrder().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getTotalItemAmount() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return convertToMoney(totalItemAmount);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setTotalItemAmount(Money amount) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
totalItemAmount = amount.getAmount();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getProratedOrderAdjustmentAmount() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return convertToMoney(proratedOrderAdjustment);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setProratedOrderAdjustmentAmount(Money proratedOrderAdjustment) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.proratedOrderAdjustment = proratedOrderAdjustment.getAmount();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getTotalItemTaxableAmount() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return convertToMoney(totalItemTaxableAmount);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setTotalItemTaxableAmount(Money taxableAmount) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
totalItemTaxableAmount = taxableAmount.getAmount();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public FulfillmentGroupStatusType getStatus() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return FulfillmentGroupStatusType.getInstance(this.status);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setStatus(FulfillmentGroupStatusType status) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.status = status.getType();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void removeAssociations() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (getFulfillmentGroup() != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
getFulfillmentGroup().getFulfillmentGroupItems().remove(this);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
setFulfillmentGroup(null);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
setOrderItem(null);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public List<TaxDetail> getTaxes() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return taxes;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setTaxes(List<TaxDetail> taxes) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.taxes = taxes;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getTotalTax() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"return totalTax == null ? null : BroadleafCurrencyUtils.getMoney(totalTax, getFulfillmentGroup().getOrder().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setTotalTax(Money totalTax) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.totalTax = Money.toAmount(totalTax);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return ((CurrencyCodeIdentifiable) fulfillmentGroup).getCurrencyCode();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"public void checkCloneable(FulfillmentGroupItem fulfillmentGroupItem) throws CloneNotSupportedException, SecurityException, NoSuchMethodException {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"Method cloneMethod = fulfillmentGroupItem.getClass().getMethod(""clone"", new Class[]{});",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"if (cloneMethod.getDeclaringClass().getName().startsWith(""org.broadleafcommerce"") && !orderItem.getClass().getName().startsWith(""org.broadleafcommerce"")) {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
//subclass is not implementing the clone method,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"throw new CloneNotSupportedException(""Custom extensions and implementations should implement clone in order to guarantee split and merge operations are performed accurately"");",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public FulfillmentGroupItem clone() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
FulfillmentGroupItem clonedFulfillmentGroupItem;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
try {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
clonedFulfillmentGroupItem = (FulfillmentGroupItem) Class.forName(this.getClass().getName()).newInstance();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
checkCloneable(clonedFulfillmentGroupItem);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
} catch (CloneNotSupportedException e) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"LOG.warn(""Clone implementation missing in inheritance hierarchy outside of Broadleaf: "" + clonedFulfillmentGroupItem.getClass().getName(), e);",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
clonedFulfillmentGroupItem.setFulfillmentGroup(getFulfillmentGroup());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
clonedFulfillmentGroupItem.setOrderItem(getOrderItem());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
clonedFulfillmentGroupItem.setQuantity(getQuantity());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
clonedFulfillmentGroupItem.setTotalItemAmount(getTotalItemAmount());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
clonedFulfillmentGroupItem.setTotalItemTaxableAmount(getTotalItemTaxableAmount());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (getStatus() != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
clonedFulfillmentGroupItem.setStatus(getStatus());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
} catch (Exception e) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
throw new RuntimeException(e);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return clonedFulfillmentGroupItem;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public boolean getHasProratedOrderAdjustments() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (proratedOrderAdjustment != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return (proratedOrderAdjustment.compareTo(BigDecimal.ZERO) == 0);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return false;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public boolean equals(Object obj) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (this == obj) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return true;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (obj == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (!getClass().isAssignableFrom(obj.getClass())) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
FulfillmentGroupItemImpl other = (FulfillmentGroupItemImpl) obj;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (id != null && other.id != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return id.equals(other.id);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (orderItem == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (other.orderItem != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
} else if (!orderItem.equals(other.orderItem)) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public int hashCode() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
final int prime = 31;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
int result = 1;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return result;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"group = AdminUserAdminPresentation.GroupName.User, prominent = true, defaultValue = ""My Name"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"group = AdminUserAdminPresentation.GroupName.User, prominent = true, defaultValue = ""New Admin User"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""AdminUserImpl_Admin_Email_Address"", order = 3000, group = AdminUserAdminPresentation.GroupName.User, defaultValue = ""my-email@website.com"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"group = AdminUserAdminPresentation.GroupName.User, prominent = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""AdminUserImpl_Admin_Email_Address"", order = 3000, group = AdminUserAdminPresentation.GroupName.User)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"columnNames = {""URL"", ""URL_KEY""}",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
{,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = ""defaultSku.displayTemplate"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = ""defaultSku.urlKey"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = ""defaultSku.retailPrice"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = ""defaultSku.name"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = ""defaultSku.activeEndDate"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@ValidationConfiguration(,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"validationImplementation = ""blAfterStartDateValidator"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
configurationItems = {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@ConfigurationItem(itemName = ""otherField"", itemValue = ""defaultSku.activeStartDate"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
}),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = ""defaultSku.auditable.createdBy"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = ""defaultSku.auditable.dateCreated"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = ""defaultSku.auditable.dateUpdated"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = ""defaultSku.auditable.updatedBy"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
/**,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
*/,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@AdminPresentation(,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"friendlyName = ""ProductImpl_Product_Url"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"group = GroupName.General,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"order = FieldOrder.URL,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"prominent = true,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"gridOrder = 3,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"columnWidth = ""260px"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
validationConfigurations = {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@ValidationConfiguration(validationImplementation = ""blUriPropertyValidator""),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"validationImplementation = ""blUniqueValueValidator"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@ConfigurationItem(,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"itemName = ConfigurationItem.ERROR_MESSAGE,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
},0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToOne(targetEntity = SkuImpl.class, cascade = {CascadeType.ALL})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@Cascade(value = {org.hibernate.annotations.CascadeType.ALL}),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(mappedBy = ""product"", targetEntity = CrossSaleProductImpl.class, cascade = {CascadeType.ALL})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Cascade(value = {org.hibernate.annotations.CascadeType.ALL, org.hibernate.annotations.CascadeType.DELETE_ORPHAN})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"maintainedAdornedTargetFields = {""promotionMessage""},",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"gridVisibleFields = {""defaultSku.name"", ""promotionMessage""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(mappedBy = ""product"", targetEntity = UpSaleProductImpl.class, cascade = {CascadeType.ALL})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name = ""PRODUCT_CATEGORY_INDEX"", columnNames = {""DEFAULT_CATEGORY_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"cascade = {CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"gridVisibleFields = {""name""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(mappedBy = ""product"", targetEntity = ProductAttributeImpl.class, cascade = {CascadeType.ALL}, orphanRemoval = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = ""blProducts"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"gridVisibleFields = {""name"", ""type"", ""required""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
while (it.hasNext()) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
productAttributeList.addAll((List) productAttributes.get(theKey));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"columnNames = { ""URL"", ""URL_KEY"" }",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
{,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = ""defaultSku.displayTemplate"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = ""defaultSku.urlKey"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = ""defaultSku.retailPrice"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = ""defaultSku.name"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = ""defaultSku.activeEndDate"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@ValidationConfiguration(,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"validationImplementation = ""blAfterStartDateValidator"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
configurationItems = {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@ConfigurationItem(itemName = ""otherField"", itemValue = ""defaultSku.activeStartDate"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
}),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = ""defaultSku.auditable.createdBy"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = ""defaultSku.auditable.dateCreated"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = ""defaultSku.auditable.dateUpdated"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = ""defaultSku.auditable.updatedBy"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
/** The Constant serialVersionUID. */,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
/** The id. */,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""ProductImpl_Product_Url"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"group = GroupName.General, order = FieldOrder.URL,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"prominent = true, gridOrder = 3, columnWidth = ""260px"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"validationConfigurations = { @ValidationConfiguration(validationImplementation = ""blUriPropertyValidator""),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@ValidationConfiguration(validationImplementation = ""blUniqueValueValidator"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"}),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToOne(targetEntity = SkuImpl.class, cascade = { CascadeType.ALL })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Cascade(value = { org.hibernate.annotations.CascadeType.ALL }),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""product"", targetEntity = CrossSaleProductImpl.class, cascade = { CascadeType.ALL })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Cascade(value = { org.hibernate.annotations.CascadeType.ALL, org.hibernate.annotations.CascadeType.DELETE_ORPHAN })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"maintainedAdornedTargetFields = { ""promotionMessage"" },",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"gridVisibleFields = { ""defaultSku.name"", ""promotionMessage"" })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""product"", targetEntity = UpSaleProductImpl.class, cascade = { CascadeType.ALL })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name = ""PRODUCT_CATEGORY_INDEX"", columnNames = { ""DEFAULT_CATEGORY_ID"" })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"cascade = { CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"gridVisibleFields = { ""name"" })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""product"", targetEntity = ProductAttributeImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Cache(usage=CacheConcurrencyStrategy.READ_WRITE, region=""blProducts"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"gridVisibleFields = { ""name"", ""type"", ""required"" })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
while(it.hasNext()){,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
productAttributeList.addAll((List)productAttributes.get(theKey));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""OIADJUST_OFFER_INDEX"", columnNames={""OFFER_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name = ""OFFERAUDIT_CUSTOMER_INDEX"", columnNames = { ""CUSTOMER_ID, OFFER_ID"" })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""ACCOUNT_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name = ""OFFERAUDIT_ACCOUNT_INDEX"", columnNames = { ""ACCOUNT_ID, OFFER_ID"" })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected Long accountId;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@Override,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Long getAccountId() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return accountId;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
},0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setAccountId(Long accountId) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.accountId = accountId;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
".append(this.accountId, that.accountId)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name=""OFFERAUDIT_CUSTOMER_INDEX"", columnNames={""CUSTOMER_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
/*-,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
*/,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
package org.broadleafcommerce.core.order.domain;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@Entity,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@Inheritance(strategy = InheritanceType.JOINED),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Table(name = ""BLC_FULFILLMENT_GROUP"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = ""blOrderElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@AdminPresentationMergeOverrides(,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
{,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = """", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.READONLY,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"booleanOverrideValue = true)),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = ""currency"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.PROMINENT,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"booleanOverrideValue = false)),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = ""personalMessage"", mergeEntries = {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TAB,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Advanced),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TABORDER,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Advanced),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"}),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = ""address"", mergeEntries = {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Address),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Address),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = ""address.isDefault"", mergeEntries = {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
booleanOverrideValue = true),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = ""address.isActive"", mergeEntries = {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = ""address.isBusiness"", mergeEntries = {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = ""phone"", mergeEntries = {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeOverride(name = ""phone.phoneNumber"", mergeEntries = {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"booleanOverrideValue = false),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.ORDER,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"intOverrideValue = FulfillmentGroupImpl.Presentation.FieldOrder.PHONE),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.GROUP,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"overrideValue = ""General""),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.REQUIREDOVERRIDE,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"overrideValue = ""NOT_REQUIRED"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
}),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
},0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationClass(populateToOneFields = PopulateToOneFieldsEnum.TRUE, friendlyName = ""FulfillmentGroupImpl_baseFulfillmentGroup"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@DirectCopyTransform({,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.MULTITENANT_SITE),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"public class FulfillmentGroupImpl implements FulfillmentGroup, CurrencyCodeIdentifiable {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
private static final long serialVersionUID = 1L;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@Id,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@GeneratedValue(generator = ""FulfillmentGroupId"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@GenericGenerator(,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"name=""FulfillmentGroupId"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"strategy=""org.broadleafcommerce.common.persistence.IdOverrideTableGenerator"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
parameters = {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Parameter(name=""segment_value"", value=""FulfillmentGroupImpl""),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Parameter(name=""entity_name"", value=""org.broadleafcommerce.core.order.domain.FulfillmentGroupImpl"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""FULFILLMENT_GROUP_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected Long id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""REFERENCE_NUMBER"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name=""FG_REFERENCE_INDEX"", columnNames={""REFERENCE_NUMBER""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Reference_Number"", order=Presentation.FieldOrder.REFNUMBER,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
groupOrder = Presentation.Group.Order.General),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""METHOD"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name=""FG_METHOD_INDEX"", columnNames={""METHOD""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@AdminPresentation(excluded = true),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@Deprecated,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""SERVICE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name=""FG_SERVICE_INDEX"", columnNames={""SERVICE""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""RETAIL_PRICE"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Retail_Shipping_Price"", order=Presentation.FieldOrder.RETAIL,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
fieldType=SupportedFieldType.MONEY),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected BigDecimal retailFulfillmentPrice;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""SALE_PRICE"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Sale_Shipping_Price"", order=Presentation.FieldOrder.SALE,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected BigDecimal saleFulfillmentPrice;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""PRICE"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Shipping_Price"", order=Presentation.FieldOrder.PRICE,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected BigDecimal fulfillmentPrice;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""TYPE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Type"", order=Presentation.FieldOrder.TYPE,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"fieldType=SupportedFieldType.BROADLEAF_ENUMERATION,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"broadleafEnumeration=""org.broadleafcommerce.core.order.service.type.FulfillmentType"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"prominent = true, gridOrder = 3000)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""TOTAL_TAX"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total_Tax"", order=Presentation.FieldOrder.TOTALTAX,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected BigDecimal totalTax;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""TOTAL_ITEM_TAX"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total_Item_Tax"", order=Presentation.FieldOrder.ITEMTAX,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected BigDecimal totalItemTax;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""TOTAL_FEE_TAX"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total_Fee_Tax"", order=Presentation.FieldOrder.FEETAX,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected BigDecimal totalFeeTax;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""TOTAL_FG_TAX"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total_FG_Tax"", order=Presentation.FieldOrder.FGTAX,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected BigDecimal totalFulfillmentGroupTax;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""DELIVERY_INSTRUCTION"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Delivery_Instruction"", order=Presentation.FieldOrder.DELIVERINSTRUCTION)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""IS_PRIMARY"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name=""FG_PRIMARY_INDEX"", columnNames={""IS_PRIMARY""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Primary_FG"", order=Presentation.FieldOrder.PRIMARY)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected boolean primary = false;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""MERCHANDISE_TOTAL"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Merchandise_Total"", order=Presentation.FieldOrder.MERCHANDISETOTAL,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected BigDecimal merchandiseTotal;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""TOTAL"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total"", order=Presentation.FieldOrder.TOTAL,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"fieldType= SupportedFieldType.MONEY, prominent = true, gridOrder = 2000)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected BigDecimal total;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""STATUS"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name=""FG_STATUS_INDEX"", columnNames={""STATUS""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Status"", order=Presentation.FieldOrder.STATUS,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"broadleafEnumeration=""org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"prominent = true, gridOrder = 4000)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""SHIPPING_PRICE_TAXABLE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Shipping_Price_Taxable"", order=Presentation.FieldOrder.TAXABLE,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected Boolean isShippingPriceTaxable = Boolean.FALSE;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@ManyToOne(targetEntity = FulfillmentOptionImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@JoinColumn(name = ""FULFILLMENT_OPTION_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected FulfillmentOption fulfillmentOption;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@ManyToOne(targetEntity = OrderImpl.class, optional=false)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@JoinColumn(name = ""ORDER_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name=""FG_ORDER_INDEX"", columnNames={""ORDER_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected Order order;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""FULFILLMENT_GROUP_SEQUNCE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected Integer sequence;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@ManyToOne(targetEntity = AddressImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@JoinColumn(name = ""ADDRESS_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name=""FG_ADDRESS_INDEX"", columnNames={""ADDRESS_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected Address address;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
/**,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@ManyToOne(targetEntity = PhoneImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@JoinColumn(name = ""PHONE_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name=""FG_PHONE_INDEX"", columnNames={""PHONE_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected Phone phone;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@ManyToOne(targetEntity = PersonalMessageImpl.class, cascade = { CascadeType.ALL })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@JoinColumn(name = ""PERSONAL_MESSAGE_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Index(name=""FG_MESSAGE_INDEX"", columnNames={""PERSONAL_MESSAGE_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected PersonalMessage personalMessage;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(mappedBy = ""fulfillmentGroup"", targetEntity = FulfillmentGroupItemImpl.class, cascade = CascadeType.ALL,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
orphanRemoval = true),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationCollection(friendlyName=""FulfillmentGroupImpl_Items"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"tab = Presentation.Tab.Name.Items, tabOrder = Presentation.Tab.Order.Items)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected List<FulfillmentGroupItem> fulfillmentGroupItems = new ArrayList<FulfillmentGroupItem>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(mappedBy = ""fulfillmentGroup"", targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CascadeType.ALL },",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationCollection(friendlyName=""FulfillmentGroupImpl_Fees"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected List<FulfillmentGroupFee> fulfillmentGroupFees = new ArrayList<FulfillmentGroupFee>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(mappedBy = ""fulfillmentGroup"", targetEntity = CandidateFulfillmentGroupOfferImpl.class, cascade = { CascadeType.ALL },",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected List<CandidateFulfillmentGroupOffer> candidateOffers = new ArrayList<CandidateFulfillmentGroupOffer>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(mappedBy = ""fulfillmentGroup"", targetEntity = FulfillmentGroupAdjustmentImpl.class, cascade = { CascadeType.ALL },",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@AdminPresentationCollection(friendlyName=""FulfillmentGroupImpl_Adjustments"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected List<FulfillmentGroupAdjustment> fulfillmentGroupAdjustments = new ArrayList<FulfillmentGroupAdjustment>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@JoinTable(name = ""BLC_FG_FG_TAX_XREF"", joinColumns = @JoinColumn(name = ""FULFILLMENT_GROUP_ID""),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"inverseJoinColumns = @JoinColumn(name = ""TAX_DETAIL_ID""))",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected List<TaxDetail> taxes = new ArrayList<TaxDetail>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"@Column(name = ""SHIPPING_OVERRIDE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
protected Boolean shippingOverride;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
@Override,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Long getId() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setId(Long id) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.id = id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Order getOrder() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return order;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setOrder(Order order) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.order = order;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public FulfillmentOption getFulfillmentOption() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return fulfillmentOption;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setFulfillmentOption(FulfillmentOption fulfillmentOption) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.fulfillmentOption = fulfillmentOption;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return referenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setReferenceNumber(String referenceNumber) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.referenceNumber = referenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public List<FulfillmentGroupItem> getFulfillmentGroupItems() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return fulfillmentGroupItems;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public List<DiscreteOrderItem> getDiscreteOrderItems() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
List<DiscreteOrderItem> discreteOrderItems = new ArrayList<DiscreteOrderItem>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
for (FulfillmentGroupItem fgItem : fulfillmentGroupItems) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
OrderItem orderItem = fgItem.getOrderItem();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (orderItem instanceof BundleOrderItem) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
BundleOrderItemImpl bundleOrderItem = (BundleOrderItemImpl)orderItem;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
for (DiscreteOrderItem discreteOrderItem : bundleOrderItem.getDiscreteOrderItems()) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
discreteOrderItems.add(discreteOrderItem);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
} else if (orderItem instanceof DiscreteOrderItem) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
DiscreteOrderItem discreteOrderItem = (DiscreteOrderItem)orderItem;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return discreteOrderItems;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setFulfillmentGroupItems(List<FulfillmentGroupItem> fulfillmentGroupItems) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.fulfillmentGroupItems = fulfillmentGroupItems;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void addFulfillmentGroupItem(FulfillmentGroupItem fulfillmentGroupItem) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (this.fulfillmentGroupItems == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.fulfillmentGroupItems = new Vector<FulfillmentGroupItem>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.fulfillmentGroupItems.add(fulfillmentGroupItem);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Address getAddress() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return address;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setAddress(Address address) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.address = address;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Phone getPhone() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return phone;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setPhone(Phone phone) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.phone = phone;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return method;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setMethod(String fulfillmentMethod) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.method = fulfillmentMethod;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getRetailFulfillmentPrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return retailFulfillmentPrice == null ? null :,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"BroadleafCurrencyUtils.getMoney(retailFulfillmentPrice, getOrder().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setRetailFulfillmentPrice(Money retailFulfillmentPrice) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.retailFulfillmentPrice = Money.toAmount(retailFulfillmentPrice);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getRetailShippingPrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return getRetailFulfillmentPrice();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setRetailShippingPrice(Money retailShippingPrice) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
setRetailFulfillmentPrice(retailShippingPrice);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public FulfillmentType getType() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return FulfillmentType.getInstance(type);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setType(FulfillmentType type) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.type = type == null ? null : type.getType();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void addCandidateFulfillmentGroupOffer(CandidateFulfillmentGroupOffer candidateOffer) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
candidateOffers.add(candidateOffer);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public List<CandidateFulfillmentGroupOffer> getCandidateFulfillmentGroupOffers() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return candidateOffers;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setCandidateFulfillmentGroupOffer(List<CandidateFulfillmentGroupOffer> candidateOffers) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.candidateOffers = candidateOffers;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void removeAllCandidateOffers() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (candidateOffers != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
for (CandidateFulfillmentGroupOffer offer : candidateOffers) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
offer.setFulfillmentGroup(null);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
candidateOffers.clear();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public List<FulfillmentGroupAdjustment> getFulfillmentGroupAdjustments() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return this.fulfillmentGroupAdjustments;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public List<FulfillmentGroupAdjustment> getFutureCreditFulfillmentGroupAdjustments() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
List<FulfillmentGroupAdjustment> futureCreditAdjustments = new ArrayList<>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (adjustment.isFutureCredit()) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
futureCreditAdjustments.add(adjustment);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return futureCreditAdjustments;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getFulfillmentGroupAdjustmentsValue() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (!adjustment.isFutureCredit()) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
adjustmentsValue = adjustmentsValue.add(adjustment.getValue());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return adjustmentsValue;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getFutureCreditFulfillmentGroupAdjustmentsValue() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
for (FulfillmentGroupAdjustment adjustment : getFutureCreditFulfillmentGroupAdjustments()) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void removeAllAdjustments() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (fulfillmentGroupAdjustments != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
adjustment.setFulfillmentGroup(null);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
fulfillmentGroupAdjustments.clear();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setFulfillmentGroupAdjustments(List<FulfillmentGroupAdjustment> fulfillmentGroupAdjustments) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.fulfillmentGroupAdjustments = fulfillmentGroupAdjustments;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getSaleFulfillmentPrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"return saleFulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(saleFulfillmentPrice,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
getOrder().getCurrency());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setSaleFulfillmentPrice(Money saleFulfillmentPrice) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.saleFulfillmentPrice = Money.toAmount(saleFulfillmentPrice);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getSaleShippingPrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return getSaleFulfillmentPrice();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setSaleShippingPrice(Money saleShippingPrice) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
setSaleFulfillmentPrice(saleShippingPrice);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getFulfillmentPrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"return fulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(fulfillmentPrice,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setFulfillmentPrice(Money fulfillmentPrice) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.fulfillmentPrice = Money.toAmount(fulfillmentPrice);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getShippingPrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return getFulfillmentPrice();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setShippingPrice(Money shippingPrice) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
setFulfillmentPrice(shippingPrice);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public List<TaxDetail> getTaxes() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return taxes;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setTaxes(List<TaxDetail> taxes) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.taxes = taxes;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getTotalTax() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"return totalTax == null ? null : BroadleafCurrencyUtils.getMoney(totalTax, getOrder().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setTotalTax(Money totalTax) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.totalTax = Money.toAmount(totalTax);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getTotalItemTax() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"return totalItemTax == null ? null : BroadleafCurrencyUtils.getMoney(totalItemTax, getOrder().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setTotalItemTax(Money totalItemTax) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.totalItemTax = Money.toAmount(totalItemTax);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getTotalFeeTax() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"return totalFeeTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFeeTax, getOrder().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setTotalFeeTax(Money totalFeeTax) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.totalFeeTax = Money.toAmount(totalFeeTax);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getTotalFulfillmentGroupTax() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"return totalFulfillmentGroupTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFulfillmentGroupTax,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setTotalFulfillmentGroupTax(Money totalFulfillmentGroupTax) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.totalFulfillmentGroupTax = Money.toAmount(totalFulfillmentGroupTax);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return deliveryInstruction;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setDeliveryInstruction(String deliveryInstruction) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.deliveryInstruction = deliveryInstruction;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public PersonalMessage getPersonalMessage() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return personalMessage;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setPersonalMessage(PersonalMessage personalMessage) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.personalMessage = personalMessage;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public boolean isPrimary() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return primary;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setPrimary(boolean primary) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.primary = primary;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getMerchandiseTotal() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"return merchandiseTotal == null ? null : BroadleafCurrencyUtils.getMoney(merchandiseTotal,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setMerchandiseTotal(Money merchandiseTotal) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.merchandiseTotal = Money.toAmount(merchandiseTotal);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Money getTotal() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"return total == null ? null : BroadleafCurrencyUtils.getMoney(total, getOrder().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setTotal(Money orderTotal) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.total = Money.toAmount(orderTotal);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public FulfillmentGroupStatusType getStatus() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return FulfillmentGroupStatusType.getInstance(status);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setStatus(FulfillmentGroupStatusType status) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.status = status.getType();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public List<FulfillmentGroupFee> getFulfillmentGroupFees() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return fulfillmentGroupFees;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setFulfillmentGroupFees(List<FulfillmentGroupFee> fulfillmentGroupFees) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.fulfillmentGroupFees = fulfillmentGroupFees;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void addFulfillmentGroupFee(FulfillmentGroupFee fulfillmentGroupFee) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (fulfillmentGroupFees == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
fulfillmentGroupFees = new ArrayList<FulfillmentGroupFee>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
fulfillmentGroupFees.add(fulfillmentGroupFee);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void removeAllFulfillmentGroupFees() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (fulfillmentGroupFees != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
fulfillmentGroupFees.clear();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Boolean isShippingPriceTaxable() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return isShippingPriceTaxable;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setIsShippingPriceTaxable(Boolean isShippingPriceTaxable) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.isShippingPriceTaxable = isShippingPriceTaxable;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setSequence(Integer sequence) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.sequence = sequence;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Integer getSequence() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return this.sequence;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return service;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setService(String service) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.service = service;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (getOrder().getCurrency() != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return getOrder().getCurrency().getCurrencyCode();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return null;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public Boolean getShippingOverride() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return shippingOverride == null ? false : shippingOverride;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public void setShippingOverride(Boolean shippingOverride) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
this.shippingOverride = shippingOverride;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public int hashCode() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
final int prime = 31;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
int result = 1;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return result;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public <G extends FulfillmentGroup> CreateResponse<G> createOrRetrieveCopyInstance(MultiTenantCopyContext context) throws CloneNotSupportedException {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
CreateResponse<G> createResponse = context.createOrRetrieveCopyInstance(this);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (createResponse.isAlreadyPopulated()) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return createResponse;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
FulfillmentGroup cloned = createResponse.getClone();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.setAddress(address == null ? null : address.createOrRetrieveCopyInstance(context).getClone());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.setDeliveryInstruction(deliveryInstruction);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.setFulfillmentOption(fulfillmentOption);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.setFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.setIsShippingPriceTaxable(isShippingPriceTaxable == null ? null : isShippingPriceTaxable);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.setMerchandiseTotal(merchandiseTotal == null ? null : new Money(merchandiseTotal));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.setRetailFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"cloneTaxDetails(context, cloned);",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.setTotalItemTax(totalItemTax == null ? null : new Money(totalItemTax));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.setTotalFulfillmentGroupTax(totalFulfillmentGroupTax == null ? null : new Money(totalFulfillmentGroupTax));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.setTotalFeeTax(totalFeeTax == null ? null : new Money(totalFeeTax));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.setTotalTax(totalTax == null ? null : new Money(totalTax));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.setRetailFulfillmentPrice(retailFulfillmentPrice == null ? null : new Money(retailFulfillmentPrice));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.setSaleFulfillmentPrice(saleFulfillmentPrice == null ? null : new Money(saleFulfillmentPrice));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.setTotal(total == null ? null : new Money(total));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.setOrder(order);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.setPrimary(primary);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.setType(getType());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
for (FulfillmentGroupItem fgi: fulfillmentGroupItems) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
FulfillmentGroupItem fulfillmentGroupItem = fgi.createOrRetrieveCopyInstance(context).getClone();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
fulfillmentGroupItem.setFulfillmentGroup(cloned);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.getFulfillmentGroupItems().add(fulfillmentGroupItem);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return  createResponse;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
"protected void cloneTaxDetails(MultiTenantCopyContext context, FulfillmentGroup cloned) throws CloneNotSupportedException {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
for (TaxDetail taxDetail : getTaxes()) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
TaxDetail clonedTaxDetail = taxDetail.createOrRetrieveCopyInstance(context).getClone();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
cloned.getTaxes().add(clonedTaxDetail);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public boolean equals(Object obj) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (this == obj) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return true;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (obj == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return false;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (!getClass().isAssignableFrom(obj.getClass())) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
FulfillmentGroupImpl other = (FulfillmentGroupImpl) obj;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (id != null && other.id != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
return id.equals(other.id);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (address == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (other.address != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
} else if (!address.equals(other.address)) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (fulfillmentGroupItems == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
if (other.fulfillmentGroupItems != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
} else if (!fulfillmentGroupItems.equals(other.fulfillmentGroupItems)) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static class Presentation {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static class Tab {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static class Order {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int Items = 2000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int Pricing = 3000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int Address = 4000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int Advanced = 5000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static class Group {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int General = 1000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int Pricing = 2000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static class FieldOrder {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int REFNUMBER = 3000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int DELIVERINSTRUCTION = 6000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int RETAIL = 1000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int PRICE = 3000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int ITEMTAX = 4000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int FEETAX = 5000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int FGTAX = 6000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int TOTALTAX = 7000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int MERCHANDISETOTAL = 8000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
public static final int TOTAL = 9000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,0
/*,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
*/,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
package org.broadleafcommerce.core.order.domain;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Entity,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Inheritance(strategy = InheritanceType.JOINED),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Table(name = ""BLC_FULFILLMENT_GROUP"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = ""blOrderElements"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@AdminPresentationMergeOverrides(,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
{,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = """", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.READONLY,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"booleanOverrideValue = true)),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = ""currency"", mergeEntries =",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.PROMINENT,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"booleanOverrideValue = false)),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = ""personalMessage"", mergeEntries = {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TAB,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Advanced),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TABORDER,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Advanced),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"}),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = ""address"", mergeEntries = {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Address),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Address),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = ""address.isDefault"", mergeEntries = {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
booleanOverrideValue = true),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = ""address.isActive"", mergeEntries = {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = ""address.isBusiness"", mergeEntries = {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = ""phone"", mergeEntries = {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeOverride(name = ""phone.phoneNumber"", mergeEntries = {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"booleanOverrideValue = false),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.ORDER,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"intOverrideValue = FulfillmentGroupImpl.Presentation.FieldOrder.PHONE),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.GROUP,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"overrideValue = ""General""),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.REQUIREDOVERRIDE,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"overrideValue = ""NOT_REQUIRED"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
}),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
},0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationClass(populateToOneFields = PopulateToOneFieldsEnum.TRUE, friendlyName = ""FulfillmentGroupImpl_baseFulfillmentGroup"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@DirectCopyTransform({,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.MULTITENANT_SITE),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"public class FulfillmentGroupImpl implements FulfillmentGroup, CurrencyCodeIdentifiable {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
private static final long serialVersionUID = 1L;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Id,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@GeneratedValue(generator = ""FulfillmentGroupId"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@GenericGenerator(,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"name=""FulfillmentGroupId"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"strategy=""org.broadleafcommerce.common.persistence.IdOverrideTableGenerator"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
parameters = {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Parameter(name=""segment_value"", value=""FulfillmentGroupImpl""),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Parameter(name=""entity_name"", value=""org.broadleafcommerce.core.order.domain.FulfillmentGroupImpl"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""FULFILLMENT_GROUP_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected Long id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""REFERENCE_NUMBER"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""FG_REFERENCE_INDEX"", columnNames={""REFERENCE_NUMBER""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Reference_Number"", order=Presentation.FieldOrder.REFNUMBER,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
groupOrder = Presentation.Group.Order.General),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""METHOD"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""FG_METHOD_INDEX"", columnNames={""METHOD""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@AdminPresentation(excluded = true),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Deprecated,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""SERVICE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""FG_SERVICE_INDEX"", columnNames={""SERVICE""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""RETAIL_PRICE"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Retail_Shipping_Price"", order=Presentation.FieldOrder.RETAIL,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
fieldType=SupportedFieldType.MONEY),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected BigDecimal retailFulfillmentPrice;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""SALE_PRICE"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Sale_Shipping_Price"", order=Presentation.FieldOrder.SALE,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected BigDecimal saleFulfillmentPrice;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""PRICE"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Shipping_Price"", order=Presentation.FieldOrder.PRICE,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected BigDecimal fulfillmentPrice;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""TYPE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Type"", order=Presentation.FieldOrder.TYPE,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"fieldType=SupportedFieldType.BROADLEAF_ENUMERATION,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"broadleafEnumeration=""org.broadleafcommerce.core.order.service.type.FulfillmentType"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"prominent = true, gridOrder = 3000)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""TOTAL_TAX"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total_Tax"", order=Presentation.FieldOrder.TOTALTAX,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected BigDecimal totalTax;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""TOTAL_ITEM_TAX"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total_Item_Tax"", order=Presentation.FieldOrder.ITEMTAX,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected BigDecimal totalItemTax;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""TOTAL_FEE_TAX"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total_Fee_Tax"", order=Presentation.FieldOrder.FEETAX,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected BigDecimal totalFeeTax;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""TOTAL_FG_TAX"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total_FG_Tax"", order=Presentation.FieldOrder.FGTAX,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected BigDecimal totalFulfillmentGroupTax;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""DELIVERY_INSTRUCTION"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Delivery_Instruction"", order=Presentation.FieldOrder.DELIVERINSTRUCTION)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""IS_PRIMARY"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""FG_PRIMARY_INDEX"", columnNames={""IS_PRIMARY""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Primary_FG"", order=Presentation.FieldOrder.PRIMARY)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected boolean primary = false;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""MERCHANDISE_TOTAL"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Merchandise_Total"", order=Presentation.FieldOrder.MERCHANDISETOTAL,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected BigDecimal merchandiseTotal;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""TOTAL"", precision=19, scale=5)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total"", order=Presentation.FieldOrder.TOTAL,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"fieldType= SupportedFieldType.MONEY, prominent = true, gridOrder = 2000)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected BigDecimal total;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""STATUS"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""FG_STATUS_INDEX"", columnNames={""STATUS""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Status"", order=Presentation.FieldOrder.STATUS,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"broadleafEnumeration=""org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"prominent = true, gridOrder = 4000)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""SHIPPING_PRICE_TAXABLE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Shipping_Price_Taxable"", order=Presentation.FieldOrder.TAXABLE,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected Boolean isShippingPriceTaxable = Boolean.FALSE;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@ManyToOne(targetEntity = FulfillmentOptionImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@JoinColumn(name = ""FULFILLMENT_OPTION_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected FulfillmentOption fulfillmentOption;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@ManyToOne(targetEntity = OrderImpl.class, optional=false)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@JoinColumn(name = ""ORDER_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""FG_ORDER_INDEX"", columnNames={""ORDER_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected Order order;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""FULFILLMENT_GROUP_SEQUNCE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected Integer sequence;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@ManyToOne(targetEntity = AddressImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@JoinColumn(name = ""ADDRESS_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""FG_ADDRESS_INDEX"", columnNames={""ADDRESS_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected Address address;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
/**,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@ManyToOne(targetEntity = PhoneImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@JoinColumn(name = ""PHONE_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""FG_PHONE_INDEX"", columnNames={""PHONE_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected Phone phone;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@ManyToOne(targetEntity = PersonalMessageImpl.class, cascade = { CascadeType.ALL })",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@JoinColumn(name = ""PERSONAL_MESSAGE_ID"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Index(name=""FG_MESSAGE_INDEX"", columnNames={""PERSONAL_MESSAGE_ID""})",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected PersonalMessage personalMessage;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""fulfillmentGroup"", targetEntity = FulfillmentGroupItemImpl.class, cascade = CascadeType.ALL,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
orphanRemoval = true),0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationCollection(friendlyName=""FulfillmentGroupImpl_Items"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"tab = Presentation.Tab.Name.Items, tabOrder = Presentation.Tab.Order.Items)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected List<FulfillmentGroupItem> fulfillmentGroupItems = new ArrayList<FulfillmentGroupItem>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""fulfillmentGroup"", targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CascadeType.ALL },",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationCollection(friendlyName=""FulfillmentGroupImpl_Fees"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected List<FulfillmentGroupFee> fulfillmentGroupFees = new ArrayList<FulfillmentGroupFee>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""fulfillmentGroup"", targetEntity = CandidateFulfillmentGroupOfferImpl.class, cascade = { CascadeType.ALL },",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected List<CandidateFulfillmentGroupOffer> candidateOffers = new ArrayList<CandidateFulfillmentGroupOffer>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(mappedBy = ""fulfillmentGroup"", targetEntity = FulfillmentGroupAdjustmentImpl.class, cascade = { CascadeType.ALL },",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@AdminPresentationCollection(friendlyName=""FulfillmentGroupImpl_Adjustments"",",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected List<FulfillmentGroupAdjustment> fulfillmentGroupAdjustments = new ArrayList<FulfillmentGroupAdjustment>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@JoinTable(name = ""BLC_FG_FG_TAX_XREF"", joinColumns = @JoinColumn(name = ""FULFILLMENT_GROUP_ID""),",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"inverseJoinColumns = @JoinColumn(name = ""TAX_DETAIL_ID""))",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected List<TaxDetail> taxes = new ArrayList<TaxDetail>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"@Column(name = ""SHIPPING_OVERRIDE"")",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
protected Boolean shippingOverride;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
@Override,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Long getId() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setId(Long id) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.id = id;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Order getOrder() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return order;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setOrder(Order order) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.order = order;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public FulfillmentOption getFulfillmentOption() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return fulfillmentOption;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setFulfillmentOption(FulfillmentOption fulfillmentOption) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.fulfillmentOption = fulfillmentOption;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return referenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setReferenceNumber(String referenceNumber) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.referenceNumber = referenceNumber;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public List<FulfillmentGroupItem> getFulfillmentGroupItems() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return fulfillmentGroupItems;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public List<DiscreteOrderItem> getDiscreteOrderItems() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
List<DiscreteOrderItem> discreteOrderItems = new ArrayList<DiscreteOrderItem>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
for (FulfillmentGroupItem fgItem : fulfillmentGroupItems) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
OrderItem orderItem = fgItem.getOrderItem();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (orderItem instanceof BundleOrderItem) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
BundleOrderItemImpl bundleOrderItem = (BundleOrderItemImpl)orderItem;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
for (DiscreteOrderItem discreteOrderItem : bundleOrderItem.getDiscreteOrderItems()) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
discreteOrderItems.add(discreteOrderItem);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
} else if (orderItem instanceof DiscreteOrderItem) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
DiscreteOrderItem discreteOrderItem = (DiscreteOrderItem)orderItem;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return discreteOrderItems;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setFulfillmentGroupItems(List<FulfillmentGroupItem> fulfillmentGroupItems) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.fulfillmentGroupItems = fulfillmentGroupItems;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void addFulfillmentGroupItem(FulfillmentGroupItem fulfillmentGroupItem) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (this.fulfillmentGroupItems == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.fulfillmentGroupItems = new Vector<FulfillmentGroupItem>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.fulfillmentGroupItems.add(fulfillmentGroupItem);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Address getAddress() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return address;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setAddress(Address address) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.address = address;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Phone getPhone() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return phone;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setPhone(Phone phone) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.phone = phone;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return method;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setMethod(String fulfillmentMethod) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.method = fulfillmentMethod;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getRetailFulfillmentPrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return retailFulfillmentPrice == null ? null :,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"BroadleafCurrencyUtils.getMoney(retailFulfillmentPrice, getOrder().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setRetailFulfillmentPrice(Money retailFulfillmentPrice) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.retailFulfillmentPrice = Money.toAmount(retailFulfillmentPrice);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getRetailShippingPrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return getRetailFulfillmentPrice();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setRetailShippingPrice(Money retailShippingPrice) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
setRetailFulfillmentPrice(retailShippingPrice);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public FulfillmentType getType() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return FulfillmentType.getInstance(type);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setType(FulfillmentType type) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.type = type == null ? null : type.getType();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void addCandidateFulfillmentGroupOffer(CandidateFulfillmentGroupOffer candidateOffer) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
candidateOffers.add(candidateOffer);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public List<CandidateFulfillmentGroupOffer> getCandidateFulfillmentGroupOffers() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return candidateOffers;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setCandidateFulfillmentGroupOffer(List<CandidateFulfillmentGroupOffer> candidateOffers) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.candidateOffers = candidateOffers;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void removeAllCandidateOffers() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (candidateOffers != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
for (CandidateFulfillmentGroupOffer offer : candidateOffers) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
offer.setFulfillmentGroup(null);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
candidateOffers.clear();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public List<FulfillmentGroupAdjustment> getFulfillmentGroupAdjustments() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return this.fulfillmentGroupAdjustments;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public List<FulfillmentGroupAdjustment> getFutureCreditFulfillmentGroupAdjustments() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
List<FulfillmentGroupAdjustment> futureCreditAdjustments = new ArrayList<>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (adjustment.isFutureCredit()) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
futureCreditAdjustments.add(adjustment);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return futureCreditAdjustments;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getFulfillmentGroupAdjustmentsValue() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (!adjustment.isFutureCredit()) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
adjustmentsValue = adjustmentsValue.add(adjustment.getValue());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return adjustmentsValue;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getFutureCreditFulfillmentGroupAdjustmentsValue() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
for (FulfillmentGroupAdjustment adjustment : getFutureCreditFulfillmentGroupAdjustments()) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void removeAllAdjustments() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (fulfillmentGroupAdjustments != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
adjustment.setFulfillmentGroup(null);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
fulfillmentGroupAdjustments.clear();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setFulfillmentGroupAdjustments(List<FulfillmentGroupAdjustment> fulfillmentGroupAdjustments) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.fulfillmentGroupAdjustments = fulfillmentGroupAdjustments;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getSaleFulfillmentPrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"return saleFulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(saleFulfillmentPrice,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
getOrder().getCurrency());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setSaleFulfillmentPrice(Money saleFulfillmentPrice) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.saleFulfillmentPrice = Money.toAmount(saleFulfillmentPrice);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getSaleShippingPrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return getSaleFulfillmentPrice();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setSaleShippingPrice(Money saleShippingPrice) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
setSaleFulfillmentPrice(saleShippingPrice);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getFulfillmentPrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"return fulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(fulfillmentPrice,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setFulfillmentPrice(Money fulfillmentPrice) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.fulfillmentPrice = Money.toAmount(fulfillmentPrice);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getShippingPrice() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return getFulfillmentPrice();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setShippingPrice(Money shippingPrice) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
setFulfillmentPrice(shippingPrice);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public List<TaxDetail> getTaxes() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return taxes;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setTaxes(List<TaxDetail> taxes) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.taxes = taxes;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getTotalTax() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"return totalTax == null ? null : BroadleafCurrencyUtils.getMoney(totalTax, getOrder().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setTotalTax(Money totalTax) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.totalTax = Money.toAmount(totalTax);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getTotalItemTax() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"return totalItemTax == null ? null : BroadleafCurrencyUtils.getMoney(totalItemTax, getOrder().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setTotalItemTax(Money totalItemTax) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.totalItemTax = Money.toAmount(totalItemTax);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getTotalFeeTax() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"return totalFeeTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFeeTax, getOrder().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setTotalFeeTax(Money totalFeeTax) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.totalFeeTax = Money.toAmount(totalFeeTax);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getTotalFulfillmentGroupTax() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"return totalFulfillmentGroupTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFulfillmentGroupTax,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setTotalFulfillmentGroupTax(Money totalFulfillmentGroupTax) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.totalFulfillmentGroupTax = Money.toAmount(totalFulfillmentGroupTax);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return deliveryInstruction;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setDeliveryInstruction(String deliveryInstruction) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.deliveryInstruction = deliveryInstruction;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public PersonalMessage getPersonalMessage() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return personalMessage;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setPersonalMessage(PersonalMessage personalMessage) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.personalMessage = personalMessage;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public boolean isPrimary() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return primary;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setPrimary(boolean primary) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.primary = primary;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getMerchandiseTotal() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"return merchandiseTotal == null ? null : BroadleafCurrencyUtils.getMoney(merchandiseTotal,",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setMerchandiseTotal(Money merchandiseTotal) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.merchandiseTotal = Money.toAmount(merchandiseTotal);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Money getTotal() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"return total == null ? null : BroadleafCurrencyUtils.getMoney(total, getOrder().getCurrency());",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setTotal(Money orderTotal) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.total = Money.toAmount(orderTotal);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public FulfillmentGroupStatusType getStatus() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return FulfillmentGroupStatusType.getInstance(status);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setStatus(FulfillmentGroupStatusType status) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.status = status.getType();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public List<FulfillmentGroupFee> getFulfillmentGroupFees() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return fulfillmentGroupFees;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setFulfillmentGroupFees(List<FulfillmentGroupFee> fulfillmentGroupFees) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.fulfillmentGroupFees = fulfillmentGroupFees;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void addFulfillmentGroupFee(FulfillmentGroupFee fulfillmentGroupFee) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (fulfillmentGroupFees == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
fulfillmentGroupFees = new ArrayList<FulfillmentGroupFee>();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
fulfillmentGroupFees.add(fulfillmentGroupFee);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void removeAllFulfillmentGroupFees() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (fulfillmentGroupFees != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
fulfillmentGroupFees.clear();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Boolean isShippingPriceTaxable() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return isShippingPriceTaxable;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setIsShippingPriceTaxable(Boolean isShippingPriceTaxable) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.isShippingPriceTaxable = isShippingPriceTaxable;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setSequence(Integer sequence) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.sequence = sequence;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Integer getSequence() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return this.sequence;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return service;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setService(String service) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.service = service;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (getOrder().getCurrency() != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return getOrder().getCurrency().getCurrencyCode();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return null;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public Boolean getShippingOverride() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return shippingOverride == null ? false : shippingOverride;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public void setShippingOverride(Boolean shippingOverride) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
this.shippingOverride = shippingOverride;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public int hashCode() {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
final int prime = 31;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
int result = 1;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return result;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public <G extends FulfillmentGroup> CreateResponse<G> createOrRetrieveCopyInstance(MultiTenantCopyContext context) throws CloneNotSupportedException {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
CreateResponse<G> createResponse = context.createOrRetrieveCopyInstance(this);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (createResponse.isAlreadyPopulated()) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return createResponse;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
FulfillmentGroup cloned = createResponse.getClone();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.setAddress(address == null ? null : address.createOrRetrieveCopyInstance(context).getClone());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.setDeliveryInstruction(deliveryInstruction);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.setFulfillmentOption(fulfillmentOption);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.setFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.setIsShippingPriceTaxable(isShippingPriceTaxable == null ? null : isShippingPriceTaxable);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.setMerchandiseTotal(merchandiseTotal == null ? null : new Money(merchandiseTotal));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.setRetailFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"cloneTaxDetails(context, cloned);",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.setTotalItemTax(totalItemTax == null ? null : new Money(totalItemTax));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.setTotalFulfillmentGroupTax(totalFulfillmentGroupTax == null ? null : new Money(totalFulfillmentGroupTax));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.setTotalFeeTax(totalFeeTax == null ? null : new Money(totalFeeTax));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.setTotalTax(totalTax == null ? null : new Money(totalTax));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.setRetailFulfillmentPrice(retailFulfillmentPrice == null ? null : new Money(retailFulfillmentPrice));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.setSaleFulfillmentPrice(saleFulfillmentPrice == null ? null : new Money(saleFulfillmentPrice));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.setTotal(total == null ? null : new Money(total));,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.setOrder(order);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.setPrimary(primary);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.setType(getType());,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
for (FulfillmentGroupItem fgi: fulfillmentGroupItems) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
FulfillmentGroupItem fulfillmentGroupItem = fgi.createOrRetrieveCopyInstance(context).getClone();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
fulfillmentGroupItem.setFulfillmentGroup(cloned);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.getFulfillmentGroupItems().add(fulfillmentGroupItem);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return  createResponse;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"protected void cloneTaxDetails(MultiTenantCopyContext context, FulfillmentGroup cloned) throws CloneNotSupportedException {",0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
for (TaxDetail taxDetail : getTaxes()) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
TaxDetail clonedTaxDetail = taxDetail.createOrRetrieveCopyInstance(context).getClone();,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
cloned.getTaxes().add(clonedTaxDetail);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public boolean equals(Object obj) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (this == obj) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return true;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (obj == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return false;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (!getClass().isAssignableFrom(obj.getClass())) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
FulfillmentGroupImpl other = (FulfillmentGroupImpl) obj;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (id != null && other.id != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
return id.equals(other.id);,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (address == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (other.address != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
} else if (!address.equals(other.address)) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (fulfillmentGroupItems == null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
if (other.fulfillmentGroupItems != null) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
} else if (!fulfillmentGroupItems.equals(other.fulfillmentGroupItems)) {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static class Presentation {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static class Tab {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static class Order {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static final int Items = 2000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static final int Pricing = 3000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static final int Address = 4000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static final int Advanced = 5000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static class Group {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static final int General = 1000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static final int Pricing = 2000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static class FieldOrder {,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static final int REFNUMBER = 3000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static final int DELIVERINSTRUCTION = 6000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static final int RETAIL = 1000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static final int PRICE = 3000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static final int ITEMTAX = 4000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static final int FEETAX = 5000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static final int FGTAX = 6000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static final int TOTALTAX = 7000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static final int MERCHANDISETOTAL = 8000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
public static final int TOTAL = 9000;,0d2a5ecdd979ebc977172e7045cbd0930962f6c1,0,1
"* distributed under the License is distributed on an ""AS IS"" BASIS,",b8a1641218de8a7b24390425a40307e70ab3a3ba,8,1
* This is a re-worked version from Hibernate tools,b8a1641218de8a7b24390425a40307e70ab3a3ba,8,1
"* Unless required by applicable law or agreed to in writing, software",b8a1641218de8a7b24390425a40307e70ab3a3ba,6,1
"""Ensure that the classpath contains the classes needed for Hibernate and your code are in the classpath.\n"";",b8a1641218de8a7b24390425a40307e70ab3a3ba,6,1
* you may not use this file except in compliance with the License.,b8a1641218de8a7b24390425a40307e70ab3a3ba,5,1
* You may obtain a copy of the License at,b8a1641218de8a7b24390425a40307e70ab3a3ba,5,1
* limitations under the License.,b8a1641218de8a7b24390425a40307e70ab3a3ba,5,1
// launch the service merge application context to get the entity configuration for the entire framework,b8a1641218de8a7b24390425a40307e70ab3a3ba,5,1
"return ""You are most likely running the ant task with a JRE that is older than the JRE required to use the classes.\n"" +",b8a1641218de8a7b24390425a40307e70ab3a3ba,5,1
"* Licensed under the Apache License, Version 2.0 (the ""License"");",b8a1641218de8a7b24390425a40307e70ab3a3ba,4,1
* See the License for the specific language governing permissions and,b8a1641218de8a7b24390425a40307e70ab3a3ba,4,1
"* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",b8a1641218de8a7b24390425a40307e70ab3a3ba,3,1
* @author jfischer,b8a1641218de8a7b24390425a40307e70ab3a3ba,3,1
* Set the classpath to be used when running the Java class,b8a1641218de8a7b24390425a40307e70ab3a3ba,3,1
* Adds a path to the classpath.,b8a1641218de8a7b24390425a40307e70ab3a3ba,3,1
"return ""A class were not found in the classpath of the Ant task.\n"" +",b8a1641218de8a7b24390425a40307e70ab3a3ba,3,1
* Copyright (C) 2009 - 2013 Broadleaf Commerce,b8a1641218de8a7b24390425a40307e70ab3a3ba,2,1
* @param s an Ant Path object containing the classpath.,b8a1641218de8a7b24390425a40307e70ab3a3ba,2,1
String[] contexts = StandardConfigLocations.retrieveAll(StandardConfigLocations.TESTCONTEXTTYPE);,b8a1641218de8a7b24390425a40307e70ab3a3ba,2,1
for (String context : contexts) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,2,1
"mergeContext = new MergeFileSystemAndClassPathXMLApplicationContext(locations, null);",b8a1641218de8a7b24390425a40307e70ab3a3ba,2,1
"log(""Executing Hibernate Tool with a "" + configurationTask.getDescription());",b8a1641218de8a7b24390425a40307e70ab3a3ba,2,1
String filename = file.getName();,b8a1641218de8a7b24390425a40307e70ab3a3ba,2,1
for (String starter : starters) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,2,1
"log(""To get the full stack trace run ant with -verbose"", Project.MSG_ERR);",b8a1641218de8a7b24390425a40307e70ab3a3ba,2,1
String ex = new String();,b8a1641218de8a7b24390425a40307e70ab3a3ba,2,1
private String getProbableSolutionOrCause(Throwable re) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,2,1
if(re instanceof ClassNotFoundException || re instanceof NoClassDefFoundError) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,2,1
"""e.g. running with JRE 1.3 or 1.4 when using JDK 1.5 annotations is not possible.\n"" +",b8a1641218de8a7b24390425a40307e70ab3a3ba,2,1
public File getDestdir() {,b8a1641218de8a7b24390425a40307e70ab3a3ba,2,1
"public boolean accept(File dir, String name) {",b8a1641218de8a7b24390425a40307e70ab3a3ba,2,1
* #%L,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
* BroadleafCommerce Common Libraries,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
* %%,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
*,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
*       http://www.apache.org/licenses/LICENSE-2.0,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
* #L%,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
*/,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
/**,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
public class HibernateToolTask extends Task {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
public HibernateToolTask() {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
protected List configurationTasks = new ArrayList();,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
protected File destDir;,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
protected List generators = new ArrayList();,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
protected List<Task> appContexts = new ArrayList<Task>();,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
public ExporterTask createHbm2DDL() {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
ExporterTask generator = new Hbm2DDLExporterTask(this);,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
public ClassPathApplicationContextTask createClassPathApplicationContext() {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
ClassPathApplicationContextTask task = new ClassPathApplicationContextTask();,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
public FileSystemApplicationContextTask createFileSystemApplicationContext() {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
FileSystemApplicationContextTask task = new FileSystemApplicationContextTask();,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
public JPAConfigurationTask createJPAConfiguration() {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
JPAConfigurationTask task = new JPAConfigurationTask();,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
"@SuppressWarnings(""unchecked"")",b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
protected boolean addConfiguration(ConfigurationTask config) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
protected boolean addGenerator(ExporterTask generator) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
public void setClasspath(Path s) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
* @return created classpath,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
public Path createClasspath() {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
classPath = new Path(getProject() );,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
public void execute() {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
try {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
ConfigurationOnlyState state = new ConfigurationOnlyState();,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
"LinkedHashMap<String, MergeFileSystemAndClassPathXMLApplicationContext.ResourceType> locations = new LinkedHashMap<String, MergeFileSystemAndClassPathXMLApplicationContext.ResourceType>();",b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
for (Task task : appContexts) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
if (task instanceof ClassPathApplicationContextTask) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
} else if (task instanceof FileSystemApplicationContextTask) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
} catch (Exception e) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
"throw new BuildException(e, getLocation());",b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
} finally {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
for (Object configuration : configurationTasks) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
while (iterator.hasNext()) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
} catch (RuntimeException re) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
if (combinePersistenceUnits) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
ArrayList<File> combine = new ArrayList<File>();,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
for (File file : sqlFiles) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
if (refineFileNames) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
"String[] starters = {""org.hibernate.dialect."", ""org.broadleafcommerce.profile.util.sql.""};",b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
if (filename.startsWith(starter)) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
"String newFileName = filename.substring(starter.length(), filename.length());",b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
private void combineFiles(ArrayList<File> combine) throws Exception {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
File startFile = itr.next();,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
while(itr.hasNext()) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
File nextFile = itr.next();,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
"writer = new BufferedWriter(new FileWriter(startFile, true));",b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
reader = new BufferedReader(new FileReader(nextFile));,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
String temp = null;,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
while (!eof) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
if (temp == null) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
} else {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
if (writer != null) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
if (reader != null) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
"private void reportException(Throwable re, int count, ExporterTask generatorTask) {",b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
while(cause!=null) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
if(cause==cause.getCause()) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
break; // we reached the top.,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
if(StringUtils.isNotEmpty(ex)) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
String newbieMessage = getProbableSolutionOrCause(re);,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
if(newbieMessage!=null) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
if(re instanceof BuildException) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
"throw new BuildException(re, getLocation());",b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
if(re instanceof MappingNotFoundException) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
"if(""resource"".equals(mnf.getType())) {",b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
"""Check the following:\n"" +",b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
"""1) Is the spelling/casing correct ?\n"" +",b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
"""2) Is "" + mnf.getPath() + "" available via the classpath ?\n"" +",b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
if(re instanceof UnsupportedClassVersionError) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
"""Ensure that you are using a correct JRE."";",b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
if(re.getCause()!=re) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
public void setDestdir(File destDir) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
public boolean isCombinePersistenceUnits() {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
public void setCombinePersistenceUnits(boolean combinePersistenceUnits) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
public boolean isRefineFileNames() {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
public void setRefineFileNames(boolean refineFileNames) {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
private class SqlFileFilter implements FilenameFilter {,b8a1641218de8a7b24390425a40307e70ab3a3ba,1,1
/*,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
package org.broadleafcommerce.common.util.sql;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import org.apache.commons.lang.StringUtils;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import org.apache.tools.ant.BuildException;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import org.apache.tools.ant.Project;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import org.apache.tools.ant.Task;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import org.apache.tools.ant.types.Path;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import org.broadleafcommerce.common.extensibility.context.MergeFileSystemAndClassPathXMLApplicationContext;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import org.broadleafcommerce.common.extensibility.context.StandardConfigLocations;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import org.broadleafcommerce.common.extensibility.jpa.ConfigurationOnlyState;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import org.hibernate.MappingNotFoundException;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import org.hibernate.tool.ant.ConfigurationTask;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import java.io.BufferedReader;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import java.io.BufferedWriter;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import java.io.File;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import java.io.FileReader;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import java.io.FileWriter;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import java.io.FilenameFilter;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import java.util.ArrayList;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import java.util.Iterator;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import java.util.LinkedHashMap;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
import java.util.List;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
super();,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
},b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"@SuppressWarnings(""rawtypes"")",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
protected Path classPath;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
protected boolean combinePersistenceUnits = true;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
protected boolean refineFileNames = true;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
addGenerator( generator );,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
return generator;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
appContexts.add(task);,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
return task;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
addConfiguration(task);,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
return configurationTasks.add(config);,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
return generators.add(generator);,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
classPath = s;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
return classPath;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
@Override,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
MergeFileSystemAndClassPathXMLApplicationContext mergeContext;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
state.setConfigurationOnly(true);,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
ConfigurationOnlyState.setState(state);,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
Thread.currentThread().setContextClassLoader(this.getClass().getClassLoader());,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"locations.put(context, MergeFileSystemAndClassPathXMLApplicationContext.ResourceType.CLASSPATH);",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"locations.put(((ClassPathApplicationContextTask) task).getPath(), MergeFileSystemAndClassPathXMLApplicationContext.ResourceType.CLASSPATH);",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"locations.put(((FileSystemApplicationContextTask) task).getPath(), MergeFileSystemAndClassPathXMLApplicationContext.ResourceType.FILESYSTEM);",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
ConfigurationOnlyState.setState(null);,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
int count = 1;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
ExporterTask generatorTask = null;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
JPAConfigurationTask configurationTask = (JPAConfigurationTask) configuration;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
Iterator iterator = generators.iterator();,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
generatorTask = (ExporterTask) iterator.next();,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"log(count++ + "". task: "" + generatorTask.getName());",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"generatorTask.setOutputFileName(configurationTask.getDialect() + ""_"" + configurationTask.getPersistenceUnit() + "".sql"");",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
generatorTask.setDestdir(destDir);,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
generatorTask.setConfiguration(configurationTask.createConfiguration(mergeContext));,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
generatorTask.execute();,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"reportException(re, count, generatorTask);",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
File[] sqlFiles = destDir.listFiles(new SqlFileFilter());,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
if (file.getName().startsWith(configurationTask.getDialect())){,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
combine.add(file);,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
combineFiles(combine);,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
combine.clear();,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"file.renameTo(new File(destDir, newFileName));",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
Iterator<File> itr = combine.iterator();,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
BufferedWriter writer = null;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
BufferedReader reader = null;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
try{,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
boolean eof = false;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
temp = reader.readLine();,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
eof = true;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
writer.write(temp);,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"writer.write(""\n"");",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
try{ writer.close(); } catch (Throwable e) {};,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
try{ reader.close(); } catch (Throwable e) {};,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
nextFile.delete();,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
} catch (Throwable e) {},b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"log(""An exception occurred while running exporter #"" + count + "":"" + generatorTask.getName(), Project.MSG_ERR);",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"log(re.toString(), Project.MSG_ERR);",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
Throwable cause = re.getCause();,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"ex += cause.toString() + ""\n"";",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
cause=cause.getCause();,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"log(ex, Project.MSG_ERR);",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
log(newbieMessage);,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
throw (BuildException)re;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
if(re==null) return null;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
MappingNotFoundException mnf = (MappingNotFoundException)re;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"return ""A "" + mnf.getType() + "" located at "" + mnf.getPath() + "" was not found.\n"" +",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"""\n"" +",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"""3) Does it actually exist ?\n"";",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"""2) Do you permission to access "" + mnf.getPath() + "" ?\n"" +",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
return getProbableSolutionOrCause( re.getCause() );,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
return null;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
return destDir;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
this.destDir = destDir;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
return combinePersistenceUnits;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
this.combinePersistenceUnits = combinePersistenceUnits;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
return refineFileNames;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
this.refineFileNames = refineFileNames;,b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"return name.endsWith("".sql"");",b8a1641218de8a7b24390425a40307e70ab3a3ba,0,1
"private static final Map<String, PaymentInfoType> TYPES = new LinkedHashMap<String, PaymentInfoType>();",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,9,1
"private static final Map<String, TransactionType> TYPES = new LinkedHashMap<String, TransactionType>();",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,9,1
"private static final Map<String, OfferDeliveryType> TYPES = new LinkedHashMap<String, OfferDeliveryType>();",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,9,1
"private static final Map<String, PaymentActionType> TYPES = new LinkedHashMap<String, PaymentActionType>();",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,8,1
"public static final RatingSortType MOST_HELPFUL = new RatingSortType(""MOST_HELPFUL"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,8,1
"public static final RatingSortType MOST_RECENT = new RatingSortType(""MOST_RECENT"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,8,1
"public static final RatingSortType DEFAULT = new RatingSortType(""DEFAULT"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,8,1
"public static final RatingType PRODUCT = new RatingType(""PRODUCT"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,8,1
"public static final PaymentInfoType GIFT_CARD = new PaymentInfoType(""GIFT_CARD"", ""Gift Card"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final PaymentInfoType CREDIT_CARD = new PaymentInfoType(""CREDIT_CARD"", ""Credit Card"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final PaymentInfoType ACCOUNT = new PaymentInfoType(""ACCOUNT"", ""Account"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final TransactionType AUTHORIZE = new TransactionType(""AUTHORIZE"", ""Authorize"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final TransactionType DEBIT = new TransactionType(""DEBIT"", ""Debit"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final TransactionType AUTHORIZEANDDEBIT = new TransactionType(""AUTHORIZEANDDEBIT"", ""Authorize and Debit"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final TransactionType CREDIT = new TransactionType(""CREDIT"", ""Credit"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final TransactionType VOIDPAYMENT = new TransactionType(""VOIDPAYMENT"", ""Void Payment"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final TransactionType BALANCE = new TransactionType(""BALANCE"", ""Balance"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final PaymentActionType AUTHORIZE = new PaymentActionType(""AUTHORIZE"", ""Authorize"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final PaymentActionType DEBIT = new PaymentActionType(""DEBIT"", ""Debit"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final PaymentActionType AUTHORIZEANDDEBIT = new PaymentActionType(""AUTHORIZEANDDEBIT"", ""Authorize and Debit"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final PaymentActionType CREDIT = new PaymentActionType(""CREDIT"", ""Credit"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final PaymentActionType VOID = new PaymentActionType(""VOID"", ""Void"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final PaymentActionType BALANCE = new PaymentActionType(""BALANCE"", ""Check Balance"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final OfferDeliveryType AUTOMATIC = new OfferDeliveryType(""AUTOMATIC"", ""Automatically"", 1000);",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final OfferDeliveryType CODE = new OfferDeliveryType(""CODE"", ""Using Shared Code"", 2000);",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final OfferDeliveryType MANUAL = new OfferDeliveryType(""MANUAL"", ""Via Application or Shared Code"", 3000);",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,1
"public static final RatingSortType MOST_HELPFUL = new RatingSortType(""MOST_HELPFUL"", ""Most Helpful"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,0
"public static final RatingSortType MOST_RECENT = new RatingSortType(""MOST_RECENT"", ""Most Recent"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,0
"public static final RatingSortType DEFAULT = new RatingSortType(""DEFAULT"", ""Default"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,0
"public static final RatingType PRODUCT = new RatingType(""PRODUCT"", ""Product"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,7,0
"public static final PaymentInfoType BANK_ACCOUNT = new PaymentInfoType(""BANK_ACCOUNT"", ""Bank Account"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,6,1
"public static final PaymentInfoType PAYPAL = new PaymentInfoType(""PAYPAL"", ""PayPal"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,6,1
"public static final PaymentInfoType CHECK = new PaymentInfoType(""CHECK"", ""Check"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,6,1
"public static final PaymentInfoType ELECTRONIC_CHECK = new PaymentInfoType(""ELECTRONIC_CHECK"", ""Electronic Check"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,6,1
"public static final PaymentInfoType WIRE = new PaymentInfoType(""WIRE"", ""Wire Transfer"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,6,1
"public static final PaymentInfoType MONEY_ORDER = new PaymentInfoType(""MONEY_ORDER"", ""Money Order"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,6,1
"public static final PaymentInfoType CUSTOMER_CREDIT = new PaymentInfoType(""CUSTOMER_CREDIT"", ""Customer Credit"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,6,1
"public static final PaymentInfoType COD = new PaymentInfoType(""COD"", ""Collect On Delivery"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,6,1
public static PaymentInfoType getInstance(final String type) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,6,1
"public static final TransactionType REVERSEAUTHORIZE = new TransactionType(""REVERSEAUTHORIZE"", ""Reverse Authorize"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,6,1
"public static final TransactionType PARTIALPAYMENT = new TransactionType(""PARTIALPAYMENT"", ""Partial Payment"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,6,1
public static TransactionType getInstance(final String type) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,6,1
"public static final PaymentActionType REVERSEAUTHORIZE = new PaymentActionType(""REVERSEAUTHORIZE"", ""Reverse Authorize"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,6,1
"public static final PaymentActionType PARTIALPAYMENT = new PaymentActionType(""PARTIALPAYMENT"", ""Partial Payment"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,6,1
public static PaymentActionType getInstance(final String type) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,6,1
public static OfferDeliveryType getInstance(final String type) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,6,1
"public PaymentInfoType(final String type, final String friendlyType) {",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,5,1
private void setType(final String type) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,5,1
"public TransactionType(final String type, final String friendlyType) {",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,5,1
private void setType(final String type) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,5,1
"public PaymentActionType(final String type, final String friendlyType) {",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,5,1
private void setType(final String type) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,5,1
"public OfferDeliveryType(final String type, final String friendlyType, int order) {",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,5,1
public void setType(final String type) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,5,1
"public class RatingSortType implements BroadleafEnumerationType, Serializable {",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,5,0
public class RatingSortType implements Serializable {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,5,1
"public class RatingType implements BroadleafEnumerationType, Serializable {",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,5,0
"public class ReviewStatusType implements BroadleafEnumerationType, Serializable {",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,5,0
private void setType(final String type) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,5,0
public void setRating(Double newRating);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,4,0
"public class PaymentInfoType implements Serializable, BroadleafEnumerationType {",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,4,1
private static final long serialVersionUID = 1L;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,4,1
"public class TransactionType implements Serializable, BroadleafEnumerationType {",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,4,1
private static final long serialVersionUID = 1L;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,4,1
"public class PaymentActionType implements Serializable, BroadleafEnumerationType {",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,4,1
private static final long serialVersionUID = 1L;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,4,1
* MANUAL - offer is manually assigned to a Customer by an administrator,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,4,1
* CODE - a offer code must be supplied in order to receive this offer,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,4,1
"public class OfferDeliveryType implements Serializable, BroadleafEnumerationType, Comparable<OfferDeliveryType> {",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,4,1
private static final long serialVersionUID = 1L;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,4,1
public RatingSortType(final String type) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,4,1
public class RatingType {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,4,1
public RatingType(final String type) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,4,1
public class ReviewStatusType {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,4,1
public ReviewStatusType(final String type) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,4,1
private void setType(String type) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,4,1
public Long getId();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public Double getRating();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public Customer getCustomer();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public Date getRatingSubmittedDate();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public RatingSummary getRatingSummary();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
void setRating(Double newRating);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,1
public Long getId();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public RatingType getRatingType();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public String getItemId();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public Integer getNumberOfRatings();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public Integer getNumberOfReviews();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public Double getAverageRating();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public void resetAverageRating();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public List<ReviewDetail> getReviews();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public List<RatingDetail> getRatings();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public String getType() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,1
public String getFriendlyType() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,1
public boolean equals(Object obj) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,1
public String getType() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,1
public String getFriendlyType() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,1
public boolean equals(Object obj) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,1
public String getType() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,1
public String getFriendlyType() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,1
public boolean equals(Object obj) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,1
public String getType() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,1
public String getFriendlyType() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,1
public void setOrder(int order) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,1
public boolean equals(Object obj) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,1
public RatingSortType(String type) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
"public RatingSortType(String type, String friendlyType) {",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public String getFriendlyType() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public RatingType(String type) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
"public RatingType(String type, String friendlyType) {",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public String getFriendlyType() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public ReviewStatusType(String type) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
"public ReviewStatusType(String type, String friendlyType) {",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public String getFriendlyType() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,3,0
public void setId(Long id);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,0
public void setCustomer(Customer customer);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,0
public void setRatingSubmittedDate(Date ratingSubmittedDate);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,0
public void setRatingSummary(RatingSummary ratingSummary);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,0
Long getId();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
Double getRating();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
Customer getCustomer();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
Date getRatingSubmittedDate();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
RatingSummary getRatingSummary();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
public void setId(Long id);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,0
public void setRatingType(RatingType ratingType);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,0
public void setItemId(String itemId);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,0
public void setReviews(List<ReviewDetail> reviews);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,0
public void setRatings(List<RatingDetail> ratings);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,0
Long getId();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
RatingType getRatingType();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
String getItemId();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
Integer getNumberOfRatings();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
Integer getNumberOfReviews();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
Double getAverageRating();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
void resetAverageRating();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
List<ReviewDetail> getReviews();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
List<RatingDetail> getRatings();,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
private String type;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
private String friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
public PaymentInfoType() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
if (!TYPES.containsKey(type)) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
public int hashCode() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
final int prime = 31;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
PaymentInfoType other = (PaymentInfoType) obj;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
if (type == null) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
private String type;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
private String friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
public TransactionType() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
if (!TYPES.containsKey(type)) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
public int hashCode() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
final int prime = 31;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
TransactionType other = (TransactionType) obj;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
if (type == null) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
private String type;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
private String friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
public PaymentActionType() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
if (!TYPES.containsKey(type)) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
public int hashCode() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
final int prime = 31;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
PaymentActionType other = (PaymentActionType) obj;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
if (type == null) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
* AUTOMATIC - will be applied to everyone's order,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
private String type;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
private String friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
public OfferDeliveryType() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
if (!TYPES.containsKey(type)) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
public int getOrder() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
public int hashCode() {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
final int prime = 31;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
OfferDeliveryType other = (OfferDeliveryType) obj;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
if (type == null) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
public int compareTo(OfferDeliveryType arg0) {,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,1
private String friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,0
private String friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,0
private String friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,2,0
"* distributed under the License is distributed on an ""AS IS"" BASIS,",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
* An extendible enumeration of payment info types.,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
this.friendlyType = friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
this.type = type;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
"TYPES.put(type, this);",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
int result = 1;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
result = prime * result + ((type == null) ? 0 : type.hashCode());,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
if (this == obj),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
if (obj == null),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
if (getClass() != obj.getClass()),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
if (other.type != null),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
} else if (!type.equals(other.type)),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
"* distributed under the License is distributed on an ""AS IS"" BASIS,",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
this.friendlyType = friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
this.type = type;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
"TYPES.put(type, this);",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
int result = 1;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
result = prime * result + ((type == null) ? 0 : type.hashCode());,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
if (this == obj),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
if (obj == null),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
if (getClass() != obj.getClass()),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
if (other.type != null),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
} else if (!type.equals(other.type)),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
"* distributed under the License is distributed on an ""AS IS"" BASIS,",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
this.friendlyType = friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
this.type = type;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
"TYPES.put(type, this);",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
int result = 1;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
result = prime * result + ((type == null) ? 0 : type.hashCode());,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
if (this == obj),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
if (obj == null),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
if (getClass() != obj.getClass()),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
if (other.type != null),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
} else if (!type.equals(other.type)),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
* Enumeration of how the offer should be applied.,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
private int order;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
this.friendlyType = friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
this.type = type;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
"TYPES.put(type, this);",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
this.order = order;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
int result = 1;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
result = prime * result + ((type == null) ? 0 : type.hashCode());,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
if (this == obj),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
if (obj == null),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
if (!getClass().isAssignableFrom(obj.getClass())),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
if (other.type != null),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
} else if (!type.equals(other.type)),703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,1
"this(type, type);",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,0
this.friendlyType = friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,0
"this(type, type);",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,0
this.friendlyType = friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,0
"this(type, type);",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,0
this.friendlyType = friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,1,0
/*,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* #%L,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* BroadleafCommerce Framework,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* %%,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* Copyright (C) 2009 - 2013 Broadleaf Commerce,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
"* Licensed under the Apache License, Version 2.0 (the ""License"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* you may not use this file except in compliance with the License.,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* You may obtain a copy of the License at,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
*,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
*       http://www.apache.org/licenses/LICENSE-2.0,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
"* Unless required by applicable law or agreed to in writing, software",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
"* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* See the License for the specific language governing permissions and,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* limitations under the License.,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* #L%,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
*/,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
package org.broadleafcommerce.core.payment.service.type;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
import org.broadleafcommerce.common.BroadleafEnumerationType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
import java.io.Serializable;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
import java.util.LinkedHashMap;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
import java.util.Map;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
/**,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* @author jfischer,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
@Deprecated,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return TYPES.get(type);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
},703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
//do nothing,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
setType(type);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return type;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
@Override,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return result;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return true;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return false;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
/*,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* #%L,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* BroadleafCommerce Framework,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* %%,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* Copyright (C) 2009 - 2013 Broadleaf Commerce,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
"* Licensed under the Apache License, Version 2.0 (the ""License"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* you may not use this file except in compliance with the License.,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* You may obtain a copy of the License at,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
*,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
*       http://www.apache.org/licenses/LICENSE-2.0,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
"* Unless required by applicable law or agreed to in writing, software",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
"* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* See the License for the specific language governing permissions and,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* limitations under the License.,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* #L%,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
*/,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
package org.broadleafcommerce.core.payment.service.type;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
import org.broadleafcommerce.common.BroadleafEnumerationType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
import java.io.Serializable;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
import java.util.LinkedHashMap;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
import java.util.Map;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
/**,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* An extendible enumeration of payment transaction types.,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* @author jfischer,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return TYPES.get(type);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
},703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
//do nothing,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
setType(type);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return type;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
@Override,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return result;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return true;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return false;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
/*,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* #%L,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* BroadleafCommerce Framework,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* %%,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* Copyright (C) 2009 - 2013 Broadleaf Commerce,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
"* Licensed under the Apache License, Version 2.0 (the ""License"");",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* you may not use this file except in compliance with the License.,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* You may obtain a copy of the License at,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
*,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
*       http://www.apache.org/licenses/LICENSE-2.0,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
"* Unless required by applicable law or agreed to in writing, software",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
"* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* See the License for the specific language governing permissions and,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* limitations under the License.,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* #L%,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
*/,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
package org.broadleafcommerce.core.payment.service.workflow;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
import org.broadleafcommerce.common.BroadleafEnumerationType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
import java.io.Serializable;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
import java.util.LinkedHashMap;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
import java.util.Map;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
/**,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* An extendible enumeration of payment action types.,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* @author jfischer,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return TYPES.get(type);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
},703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
//do nothing,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
setType(type);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return type;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
@Override,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return result;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return true;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return false;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
/*,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* #%L,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* BroadleafCommerce Framework,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* %%,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* Copyright (C) 2009 - 2016 Broadleaf Commerce,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
"* Licensed under the Broadleaf Fair Use License Agreement, Version 1.0",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
"* (the ""Fair Use License"" located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* unless the restrictions on use therein are violated and require payment to Broadleaf in which case,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
"* the Broadleaf End User License Agreement (EULA), Version 1.1",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
"* (the ""Commercial License"" located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* shall apply.,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
*,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
"* Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the ""Custom License"")",703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* #L%,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
*/,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
package org.broadleafcommerce.core.offer.service.type;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
import org.broadleafcommerce.common.BroadleafEnumerationType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
import java.io.Serializable;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
import java.util.LinkedHashMap;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
import java.util.Map;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
/**,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
* An extendible enumeration of delivery types.,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return TYPES.get(type);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
},703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
//do nothing,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
setType(type);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
setOrder(order);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return type;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return order;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
@Override,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return result;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return true;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return false;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
return this.order - arg0.order;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
*,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
import org.broadleafcommerce.common.BroadleafEnumerationType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
//do nothing,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
this.setType(type);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
},703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
@Override,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
return friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
*,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
setType(type);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
*,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
import org.broadleafcommerce.common.BroadleafEnumerationType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
import java.io.Serializable;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
//do nothing,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
this.setType(type);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
},703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
@Override,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
return friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
*,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
setType(type);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
*,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
import org.broadleafcommerce.common.BroadleafEnumerationType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
import java.io.Serializable;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
//do nothing,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
this.setType(type);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
},703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
@Override,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
return friendlyType;,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,0
*,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
setType(type);,703ecd2c2389598d2f02d6eaaed8ed0cade50f11,0,1
public boolean isTotalitarianOrderOfferApplied() {,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,3,0
public boolean isTotalitarianItemOfferApplied() {,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,3,0
public boolean isTotalitarianFgOfferApplied() {,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,3,0
boolean totalitarianOfferApplied = false;,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,3,1
return false;,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,2,0
if (itemPriceDetail.isTotalitarianOfferApplied()) {,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,2,0
for (PromotableFulfillmentGroup fg : getFulfillmentGroups()) {,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,2,0
if (fg.isTotalitarianOfferApplied()) {,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,2,0
if (!totalitarianOfferApplied) {,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,2,1
for (PromotableFulfillmentGroup fg : getFulfillmentGroups()) {,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,2,1
if (fg.isTotalitarianOfferApplied()) {,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,2,1
if (isTotalitarianOfferApplied()) {,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,2,1
return false;,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,2,1
calculatedSubTotal = calculatedSubTotal.add(orderItem.getTotalPrice());,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,2,0
if (orderItem.getParentOrderItem() == null) {,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,2,1
calculatedSubTotal = calculatedSubTotal.add(orderItem.getTotalPrice());,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,2,1
return isTotalitarianFgOfferApplied() || isTotalitarianItemOfferApplied() || isTotalitarianOrderOfferApplied();,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,1,0
},2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,1,0
return true;,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,1,0
for (PromotableOrderItemPriceDetail itemPriceDetail : getAllPromotableOrderItemPriceDetails()) {,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,1,0
totalitarianOfferApplied = true;,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,1,1
for (PromotableOrderItemPriceDetail itemPriceDetail : getAllPromotableOrderItemPriceDetails()) {,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,1,1
totalitarianOfferApplied = itemPriceDetail.isTotalitarianOfferApplied();,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,1,1
return true;,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,1,1
},2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,1,1
return totalitarianOfferApplied;,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,1,1
},2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,1,1
@Override,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,0,0
break;,2c2a1e91af899d84b48d02fe1b7157031c3d5d6c,0,1
import org.broadleafcommerce.core.order.service.call.AddToCartItem;,8ecb846dc0086d78fd52547459197a73d8d2d009,1,0
import org.broadleafcommerce.core.web.order.model.AddToCartItem;,8ecb846dc0086d78fd52547459197a73d8d2d009,1,1
import org.broadleafcommerce.core.order.service.call.OrderItemRequestDTO;,8ecb846dc0086d78fd52547459197a73d8d2d009,1,0
import org.broadleafcommerce.core.order.service.call.AddToCartItem;,8ecb846dc0086d78fd52547459197a73d8d2d009,1,1
List<OrderItemRequestDTO> itemsToReprice = new ArrayList<OrderItemRequestDTO>();,8ecb846dc0086d78fd52547459197a73d8d2d009,0,0
OrderItemRequestDTO itemRequest = new OrderItemRequestDTO();,8ecb846dc0086d78fd52547459197a73d8d2d009,0,0
for(OrderItemRequestDTO itemRequest: itemsToReprice){,8ecb846dc0086d78fd52547459197a73d8d2d009,0,0
List<AddToCartItem> itemsToReprice = new ArrayList<AddToCartItem>();,8ecb846dc0086d78fd52547459197a73d8d2d009,0,1
AddToCartItem itemRequest = new AddToCartItem();,8ecb846dc0086d78fd52547459197a73d8d2d009,0,1
for(AddToCartItem itemRequest: itemsToReprice){,8ecb846dc0086d78fd52547459197a73d8d2d009,0,1
protected boolean getQualifyGroupAcrossAllOrderItems(PromotableFulfillmentGroup fg) {,7e9a594431453cd2bc7e7b516307840af4e25657,3,0
Order order = dataProvider.createBasicPromotableOrder(promotableOfferUtility).getOrder();,7e9a594431453cd2bc7e7b516307840af4e25657,3,0
Order order = dataProvider.createBasicPromotableOrder().getOrder();,7e9a594431453cd2bc7e7b516307840af4e25657,3,1
* Created to work around a dependency in FulfillmentGroupOfferProcessorImpl to a live application context and,7e9a594431453cd2bc7e7b516307840af4e25657,2,0
protected static class TestableFulfillmentGroupOfferProcessor extends FulfillmentGroupOfferProcessorImpl {,7e9a594431453cd2bc7e7b516307840af4e25657,2,0
order = dataProvider.createBasicPromotableOrder(promotableOfferUtility).getOrder();,7e9a594431453cd2bc7e7b516307840af4e25657,2,0
order = dataProvider.createBasicPromotableOrder().getOrder();,7e9a594431453cd2bc7e7b516307840af4e25657,2,1
public TestableFulfillmentGroupOfferProcessor(PromotableOfferUtility promotableOfferUtility) {,7e9a594431453cd2bc7e7b516307840af4e25657,2,0
PromotableOrder order = dataProvider.createBasicPromotableOrder(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,2,0
order = dataProvider.createBasicPromotableOrder(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,2,0
PromotableOrder order = dataProvider.createBasicPromotableOrder();,7e9a594431453cd2bc7e7b516307840af4e25657,2,1
order = dataProvider.createBasicPromotableOrder();,7e9a594431453cd2bc7e7b516307840af4e25657,2,1
PromotableOrder order = dataProvider.createBasicPromotableOrder(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,2,0
PromotableOrder order = dataProvider.createBasicPromotableOrder();,7e9a594431453cd2bc7e7b516307840af4e25657,2,1
OfferServiceUtilitiesImpl offerServiceUtilities = new OfferServiceUtilitiesImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
ItemOfferProcessorImpl itemProcessor = new ItemOfferProcessorImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
import org.broadleafcommerce.core.offer.service.processor.ItemOfferProcessor;,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
ItemOfferProcessor itemProcessor = new ItemOfferProcessorImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
import org.broadleafcommerce.core.offer.service.OfferServiceUtilitiesImpl;,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
OfferServiceUtilitiesImpl offerServiceUtilities = new OfferServiceUtilitiesImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
ItemOfferProcessorImpl itemProcessor = new ItemOfferProcessorImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
ItemOfferProcessor itemProcessor = new ItemOfferProcessorImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
count = count + (detail.getOrderItemPriceDetailAdjustments().size() * detail.getQuantity());,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
count = count + detail.getOrderItemPriceDetailAdjustments().size();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
* system properties service since it uses BLCSystemProperty,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
@Override,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
return false;,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
},7e9a594431453cd2bc7e7b516307840af4e25657,1,0
fgProcessor = new TestableFulfillmentGroupOfferProcessor();,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
fgProcessor = new FulfillmentGroupOfferProcessorImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
import junit.framework.TestCase;,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtility;,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtilityImpl;,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
protected PromotableOfferUtility promotableOfferUtility;,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
promotableOfferUtility = new PromotableOfferUtilityImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
OfferServiceUtilitiesImpl offerServiceUtilities = new OfferServiceUtilitiesImpl(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
OrderOfferProcessorImpl orderProcessor = new OrderOfferProcessorImpl(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
ItemOfferProcessorImpl itemProcessor = new ItemOfferProcessorImpl(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
FulfillmentGroupOfferProcessor fgProcessor = new FulfillmentGroupOfferProcessorImpl(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
import junit.framework.TestCase;,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
OfferServiceUtilitiesImpl offerServiceUtilities = new OfferServiceUtilitiesImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
OrderOfferProcessorImpl orderProcessor = new OrderOfferProcessorImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
ItemOfferProcessorImpl itemProcessor = new ItemOfferProcessorImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
FulfillmentGroupOfferProcessor fgProcessor = new FulfillmentGroupOfferProcessorImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
import junit.framework.TestCase;,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtility;,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtilityImpl;,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
protected PromotableOfferUtility promotableOfferUtility;,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
},7e9a594431453cd2bc7e7b516307840af4e25657,1,0
promotableOfferUtility = new PromotableOfferUtilityImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
fgProcessor = new TestableFulfillmentGroupOfferProcessor(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
OfferServiceUtilitiesImpl offerServiceUtilities = new OfferServiceUtilitiesImpl(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
OrderOfferProcessorImpl orderProcessor = new OrderOfferProcessorImpl(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
ItemOfferProcessorImpl itemProcessor = new ItemOfferProcessorImpl(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
PromotableOrder promotableOrder = dataProvider.createBasicPromotableOrder(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
promotableOrder = dataProvider.createBasicPromotableOrder(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
import junit.framework.TestCase;,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
fgProcessor = new TestableFulfillmentGroupOfferProcessor();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
OfferServiceUtilitiesImpl offerServiceUtilities = new OfferServiceUtilitiesImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
OrderOfferProcessorImpl orderProcessor = new OrderOfferProcessorImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
ItemOfferProcessorImpl itemProcessor = new ItemOfferProcessorImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
PromotableOrder promotableOrder = dataProvider.createBasicPromotableOrder();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
promotableOrder = dataProvider.createBasicPromotableOrder();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
import junit.framework.TestCase;,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtility;,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtilityImpl;,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
protected PromotableOfferUtility promotableOfferUtility;,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
promotableOfferUtility = new PromotableOfferUtilityImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
OfferServiceUtilitiesImpl offerServiceUtilities = new OfferServiceUtilitiesImpl(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
itemProcessor = new ItemOfferProcessorImpl(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
OrderOfferProcessorImpl orderProcessor = new OrderOfferProcessorImpl(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
PromotableOrder promotableOrder = dataProvider.createBasicPromotableOrder(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,1,0
import junit.framework.TestCase;,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
OfferServiceUtilitiesImpl offerServiceUtilities = new OfferServiceUtilitiesImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
itemProcessor = new ItemOfferProcessorImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
OrderOfferProcessorImpl orderProcessor = new OrderOfferProcessorImpl();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
PromotableOrder promotableOrder = dataProvider.createBasicPromotableOrder();,7e9a594431453cd2bc7e7b516307840af4e25657,1,1
assertTrue(candidates.isMatchedQualifier() && candidates.getCandidateQualifiersMap().size() == 1 &&,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
candidates.getCandidateQualifiersMap().values().iterator().next().size() == 2 &&,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
candidates.isMatchedTarget() && candidates.getCandidateTargetsMap().size() == 1 &&,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
candidates.getCandidateTargetsMap().values().iterator().next().size() == 2);,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
assertTrue(candidates.isMatchedQualifier() && candidates.getCandidateQualifiersMap().size() == 1 && candidates.getCandidateQualifiersMap().values().iterator().next().size() == 2 && candidates.isMatchedTarget() && candidates.getCandidateTargets().size() == 2);,7e9a594431453cd2bc7e7b516307840af4e25657,0,1
offerServiceUtilities.setOfferDao(offerDaoMock);,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
offerServiceUtilities.setPromotableItemFactory(new PromotableItemFactoryImpl());,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
orderProcessor.setOfferServiceUtilities(offerServiceUtilities);,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
itemProcessor.setOfferServiceUtilities(offerServiceUtilities);,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
offerServiceUtilities.setOfferDao(offerDaoMock);,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
offerServiceUtilities.setPromotableItemFactory(new PromotableItemFactoryImpl());,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
orderProcessor.setOfferServiceUtilities(offerServiceUtilities);,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
itemProcessor.setOfferServiceUtilities(offerServiceUtilities);,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
// This line is commented out because we are no longer creating legacy offers.,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
//assertTrue(qualifiedOffers.size() == 2 && qualifiedOffers.get(0).getOffer().equals(offers.get(0)) && qualifiedOffers.get(1).getOffer().equals(offers.get(0)));,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
assertTrue(qualifiedOffers.size() == 2 && qualifiedOffers.get(0).getOffer().equals(offers.get(0)) && qualifiedOffers.get(1).getOffer().equals(offers.get(0)));,7e9a594431453cd2bc7e7b516307840af4e25657,0,1
"offerService.applyAndSaveOffersToOrder(offers, order);",7e9a594431453cd2bc7e7b516307840af4e25657,0,0
"offerService.applyOffersToOrder(offers, order);",7e9a594431453cd2bc7e7b516307840af4e25657,0,1
/**,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
*,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
* @author Phillip Verheyden (phillipuniverse),7e9a594431453cd2bc7e7b516307840af4e25657,0,0
*/,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
offerServiceUtilities.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
orderProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
itemProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
fgProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
offerService.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
offerServiceUtilities.setPromotableItemFactory(new PromotableItemFactoryImpl());,7e9a594431453cd2bc7e7b516307840af4e25657,0,1
orderProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl());,7e9a594431453cd2bc7e7b516307840af4e25657,0,1
itemProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl());,7e9a594431453cd2bc7e7b516307840af4e25657,0,1
fgProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl());,7e9a594431453cd2bc7e7b516307840af4e25657,0,1
offerService.setPromotableItemFactory(new PromotableItemFactoryImpl());,7e9a594431453cd2bc7e7b516307840af4e25657,0,1
super(promotableOfferUtility);,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
fgProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
offerServiceUtilities.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
orderProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
itemProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
offerService.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
fgProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl());,7e9a594431453cd2bc7e7b516307840af4e25657,0,1
offerServiceUtilities.setPromotableItemFactory(new PromotableItemFactoryImpl());,7e9a594431453cd2bc7e7b516307840af4e25657,0,1
orderProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl());,7e9a594431453cd2bc7e7b516307840af4e25657,0,1
itemProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl());,7e9a594431453cd2bc7e7b516307840af4e25657,0,1
offerService.setPromotableItemFactory(new PromotableItemFactoryImpl());,7e9a594431453cd2bc7e7b516307840af4e25657,0,1
offerServiceUtilities.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
itemProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
orderProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
offerService.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,7e9a594431453cd2bc7e7b516307840af4e25657,0,0
offerServiceUtilities.setPromotableItemFactory(new PromotableItemFactoryImpl());,7e9a594431453cd2bc7e7b516307840af4e25657,0,1
itemProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl());,7e9a594431453cd2bc7e7b516307840af4e25657,0,1
orderProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl());,7e9a594431453cd2bc7e7b516307840af4e25657,0,1
offerService.setPromotableItemFactory(new PromotableItemFactoryImpl());,7e9a594431453cd2bc7e7b516307840af4e25657,0,1
"throw new IllegalArgumentException(""Unable to find a result for batchId("" + persistencePackage.getBatchId() + "") in cached batch result set."");",77bd4d3644793f3c67a8e47b76e559f7b26f84b6,5,1
"throw new IllegalArgumentException(""Unable to find a result for batchId("" + persistencePackage.getBatchId() + "") in cached batch result set."");",77bd4d3644793f3c67a8e47b76e559f7b26f84b6,5,1
"public PersistenceResponse fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServiceException {",77bd4d3644793f3c67a8e47b76e559f7b26f84b6,4,0
"public DynamicResultSet fetch(PersistencePackage persistencePackage, CriteriaTransferObject cto) throws ServiceException {",77bd4d3644793f3c67a8e47b76e559f7b26f84b6,4,1
public Entity add(PersistencePackage persistencePackage) throws ServiceException {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,4,1
public Entity update(PersistencePackage persistencePackage) throws ServiceException {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,4,1
public void remove(PersistencePackage persistencePackage) throws ServiceException {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,4,1
public PersistenceResponse inspect(PersistencePackage persistencePackage) throws ServiceException {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,3,0
public PersistenceResponse add(PersistencePackage persistencePackage) throws ServiceException {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,3,0
public PersistenceResponse update(PersistencePackage persistencePackage) throws ServiceException {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,3,0
public PersistenceResponse remove(PersistencePackage persistencePackage) throws ServiceException {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,3,0
public BatchDynamicResultSet batchInspect(BatchPersistencePackage batchPersistencePackage) throws ServiceException {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,3,1
} else {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,3,1
public DynamicResultSet inspect(PersistencePackage persistencePackage) throws ServiceException {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,3,1
public BatchDynamicResultSet batchInspect(BatchPersistencePackage batchPersistencePackage) throws ServiceException {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,3,1
} else {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,3,1
if (METADATA_CACHE.containsKey(batchPersistencePackage)) {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,2,1
if (persistencePackage.getPersistencePerspective().getUseServerSideInspectionCache()) {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,2,1
if (dynamicResultSet.getBatchId().equals(persistencePackage.getBatchId())) {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,2,1
"Collections.sort(dynamicResultSetList, new Comparator<DynamicResultSet>() {",77bd4d3644793f3c67a8e47b76e559f7b26f84b6,2,1
"public int compare(DynamicResultSet o1, DynamicResultSet o2) {",77bd4d3644793f3c67a8e47b76e559f7b26f84b6,2,1
if (!containsCache) {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,2,1
} catch (IllegalArgumentException e) {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,2,1
"throw new ServiceException(""Problem performing batch inspect"", e);",77bd4d3644793f3c67a8e47b76e559f7b26f84b6,2,1
if (METADATA_CACHE.containsKey(batchPersistencePackage)) {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,2,1
if (persistencePackage.getPersistencePerspective().getUseServerSideInspectionCache()) {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,2,1
if (dynamicResultSet.getBatchId().equals(persistencePackage.getBatchId())) {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,2,1
"Collections.sort(dynamicResultSetList, new Comparator<DynamicResultSet>() {",77bd4d3644793f3c67a8e47b76e559f7b26f84b6,2,1
"public int compare(DynamicResultSet o1, DynamicResultSet o2) {",77bd4d3644793f3c67a8e47b76e559f7b26f84b6,2,1
if (!containsCache) {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,2,1
} catch (IllegalArgumentException e) {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,2,1
"throw new ServiceException(""Problem performing batch inspect"", e);",77bd4d3644793f3c67a8e47b76e559f7b26f84b6,2,1
import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceResponse;,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,0
import javax.annotation.Resource;,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,0
return new PersistenceResponse().withEntity(persistencePackage.getEntity());,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,0
return new PersistenceResponse().withEntity(((ValidationException) e).getEntity());,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,0
return new PersistenceResponse().withEntity(((ValidationException) e.getCause()).getEntity());,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,0
import org.broadleafcommerce.openadmin.dto.DynamicResultSet;,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
import javax.annotation.Resource;,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
try {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
List<DynamicResultSet> dynamicResultSetList = new ArrayList<DynamicResultSet>(15);,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
persistencePackageList = new ArrayList<PersistencePackage>();,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
for (PersistencePackage persistencePackage : batchPersistencePackage.getPersistencePackages()) {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
checkResultSetList: {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
for (DynamicResultSet dynamicResultSet : METADATA_CACHE.get(batchPersistencePackage).getDynamicResultSets()) {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
},77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
for (PersistencePackage persistencePackage : persistencePackageList) {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
@Override,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
BatchDynamicResultSet batchResults = new BatchDynamicResultSet();,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
"LOG.error(""Problem performing batch inspect"", e);",77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
try {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
List<DynamicResultSet> dynamicResultSetList = new ArrayList<DynamicResultSet>(15);,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
persistencePackageList = new ArrayList<PersistencePackage>();,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
for (PersistencePackage persistencePackage : batchPersistencePackage.getPersistencePackages()) {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
checkResultSetList: {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
for (DynamicResultSet dynamicResultSet : METADATA_CACHE.get(batchPersistencePackage).getDynamicResultSets()) {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
},77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
for (PersistencePackage persistencePackage : persistencePackageList) {,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
@Override,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
BatchDynamicResultSet batchResults = new BatchDynamicResultSet();,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
"LOG.error(""Problem performing batch inspect"", e);",77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
"LOG.warn(""Not saving entity as it has failed validation"");",77bd4d3644793f3c67a8e47b76e559f7b26f84b6,1,1
return persistenceManager.remove(persistencePackage);,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,0
/*@Override,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
List<PersistencePackage> persistencePackageList;,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
boolean containsCache = false;,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
containsCache = true;,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
dynamicResultSetList.add(dynamicResultSet);,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
break checkResultSetList;,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
persistencePackageList.add(persistencePackage);,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
persistencePackageList = Arrays.asList(batchPersistencePackage.getPersistencePackages());,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
DynamicResultSet resultSet = inspect(persistencePackage);,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
resultSet.setBatchId(persistencePackage.getBatchId());,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
dynamicResultSetList.add(resultSet);,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
return o1.getBatchId().compareTo(o2.getBatchId());,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
});,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
batchResults.setDynamicResultSets(dynamicResultSetList.toArray(new DynamicResultSet[dynamicResultSetList.size()]));,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
"METADATA_CACHE.put(batchPersistencePackage, batchResults);",77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
return METADATA_CACHE.get(batchPersistencePackage);,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
return batchResults;,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
}*/,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
return persistencePackage.getEntity();,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
return ((ValidationException) e).getEntity();,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
return ((ValidationException) e.getCause()).getEntity();,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
persistenceManager.remove(persistencePackage);,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
throw e;,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,0
throw (ValidationException) e.getCause();,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,0
/*@Override,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
List<PersistencePackage> persistencePackageList;,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
boolean containsCache = false;,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
containsCache = true;,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
dynamicResultSetList.add(dynamicResultSet);,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
break checkResultSetList;,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
persistencePackageList.add(persistencePackage);,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
persistencePackageList = Arrays.asList(batchPersistencePackage.getPersistencePackages());,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
DynamicResultSet resultSet = inspect(persistencePackage);,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
resultSet.setBatchId(persistencePackage.getBatchId());,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
dynamicResultSetList.add(resultSet);,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
return o1.getBatchId().compareTo(o2.getBatchId());,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
});,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
batchResults.setDynamicResultSets(dynamicResultSetList.toArray(new DynamicResultSet[dynamicResultSetList.size()]));,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
"METADATA_CACHE.put(batchPersistencePackage, batchResults);",77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
return METADATA_CACHE.get(batchPersistencePackage);,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
return batchResults;,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
}*/,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
return ((ValidationException) e).getEntity();,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
return ((ValidationException) e.getCause()).getEntity();,77bd4d3644793f3c67a8e47b76e559f7b26f84b6,0,1
"protected String getSolrRangeFunctionString(BigDecimal minValue, BigDecimal maxValue) {",2f5a9cee706bff484552f959dbc4d4a5d03d17eb,1,0
"protected String getSolrRangeFunctionString(BigDecimal minValue, BigDecimal maxValue) {",2f5a9cee706bff484552f959dbc4d4a5d03d17eb,1,1
query.addFilterQuery(valueString);,2f5a9cee706bff484552f959dbc4d4a5d03d17eb,0,0
if (range.getMaxValue() != null) {,2f5a9cee706bff484552f959dbc4d4a5d03d17eb,0,0
} else {,2f5a9cee706bff484552f959dbc4d4a5d03d17eb,0,0
},2f5a9cee706bff484552f959dbc4d4a5d03d17eb,0,0
"sb.append("" "" + getSolrRangeFunctionString(range.getMinValue(), range.getMaxValue()));",2f5a9cee706bff484552f959dbc4d4a5d03d17eb,0,0
StringBuilder sb = new StringBuilder();,2f5a9cee706bff484552f959dbc4d4a5d03d17eb,0,0
"sb.append("" u="").append(maxValue.toPlainString());",2f5a9cee706bff484552f959dbc4d4a5d03d17eb,0,0
return sb.toString();,2f5a9cee706bff484552f959dbc4d4a5d03d17eb,0,0
StringBuilder sb = new StringBuilder();,2f5a9cee706bff484552f959dbc4d4a5d03d17eb,0,1
"sb.append(""("").append(valueString).append("")"");",2f5a9cee706bff484552f959dbc4d4a5d03d17eb,0,1
query.addFilterQuery(sb.toString());,2f5a9cee706bff484552f959dbc4d4a5d03d17eb,0,1
if (range.getMaxValue() != null),2f5a9cee706bff484552f959dbc4d4a5d03d17eb,0,1
else,2f5a9cee706bff484552f959dbc4d4a5d03d17eb,0,1
"sb.append("" ""+getSolrRangeFunctionString(range.getMinValue(), range.getMaxValue()));",2f5a9cee706bff484552f959dbc4d4a5d03d17eb,0,1
"sb.append("" u="").append(maxValue.toPlainString());",2f5a9cee706bff484552f959dbc4d4a5d03d17eb,0,1
return sb.toString();,2f5a9cee706bff484552f959dbc4d4a5d03d17eb,0,1
},2f5a9cee706bff484552f959dbc4d4a5d03d17eb,0,1
"""property to true in your application's common.properties or common-shared.properties. If you would like to provide a default schema to be used to qualify table names used in the\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,10,0
"""property to true in your application's common.properties or common-shared.properties. If you would like to provide a default schema to be used to qualify table names used in the\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,10,1
"""property to true in your application's common.properties or common-shared.properties. If you would like to provide a default schema to be used to qualify table names used in the\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,10,0
"""property to true in your application's common.properties or common-shared.properties. If you would like to provide a default schema to be used to qualify table names used in the\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,10,1
"""property to true in your application's common.properties or common-shared.properties. If you would like to provide a default schema to be used to qualify table names used in the\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,10,0
"""property to true in your application's common.properties or common-shared.properties. If you would like to provide a default schema to be used to qualify table names used in the\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,10,1
"""set the 'detect.sequence.generator.inconsistencies' property to false in your application's common.properties or common-shared.properties. If you would like for this component\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,6,0
"""set the 'detect.sequence.generator.inconsistencies' property to false in your application's common.properties or common-shared.properties. If you would like for this component\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,6,1
"""set the 'detect.sequence.generator.inconsistencies' property to false in your application's common.properties or common-shared.properties. If you would like for this component\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,6,0
"""set the 'detect.sequence.generator.inconsistencies' property to false in your application's common.properties or common-shared.properties. If you would like for this component\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,6,1
"""set the 'detect.sequence.generator.inconsistencies' property to false in your application's common.properties or common-shared.properties. If you would like for this component\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,6,0
"""set the 'detect.sequence.generator.inconsistencies' property to false in your application's common.properties or common-shared.properties. If you would like for this component\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,6,1
"""queries for this detection, set the 'default.schema.sequence.generator' property in your application's common.properties or common-shared.properties. Also, if you are upgrading\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,5,0
"""queries for this detection, set the 'default.schema.sequence.generator' property in your application's common.properties or common-shared.properties. Also, if you are upgrading\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,5,1
"""queries for this detection, set the 'default.schema.sequence.generator' property in your application's common.properties or common-shared.properties. Also, if you are upgrading\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,5,0
"""queries for this detection, set the 'default.schema.sequence.generator' property in your application's common.properties or common-shared.properties. Also, if you are upgrading\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,5,1
"""queries for this detection, set the 'default.schema.sequence.generator' property in your application's common.properties or common-shared.properties. Also, if you are upgrading\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,5,0
"""queries for this detection, set the 'default.schema.sequence.generator' property in your application's common.properties or common-shared.properties. Also, if you are upgrading\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,5,1
"""has stopped startup of the application in order to allow you to resolve the issue and avoid possible data corruption. If you wish to disable this detection, you may\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,4,0
"""from 1.6 or below, please refer to http://docs.broadleafcommerce.org/current/1.6-to-2.0-Migration.html for important information regarding migrating your SEQUENCE_GENERATOR table."";",3f045f476d549a73478867a8aa6d305ec4284457,4,0
"""has stopped startup of the application in order to allow you to resolve the issue and avoid possible data corruption. If you wish to disable this detection, you may\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,4,1
"""from 1.6 or below, please refer to http://docs.broadleafcommerce.org/current/1.6-to-2.0-Migration.html for important information regarding migrating your SEQUENCE_GENERATOR table."";",3f045f476d549a73478867a8aa6d305ec4284457,4,1
"""has stopped startup of the application in order to allow you to resolve the issue and avoid possible data corruption. If you wish to disable this detection, you may\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,4,0
"""from 1.6 or below, please refer to http://docs.broadleafcommerce.org/current/1.6-to-2.0-Migration.html for important information regarding migrating your SEQUENCE_GENERATOR table."";",3f045f476d549a73478867a8aa6d305ec4284457,4,0
"""has stopped startup of the application in order to allow you to resolve the issue and avoid possible data corruption. If you wish to disable this detection, you may\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,4,1
"""from 1.6 or below, please refer to http://docs.broadleafcommerce.org/current/1.6-to-2.0-Migration.html for important information regarding migrating your SEQUENCE_GENERATOR table."";",3f045f476d549a73478867a8aa6d305ec4284457,4,1
"""has stopped startup of the application in order to allow you to resolve the issue and avoid possible data corruption. If you wish to disable this detection, you may\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,4,0
"""from 1.6 or below, please refer to http://docs.broadleafcommerce.org/current/1.6-to-2.0-Migration.html for important information regarding migrating your SEQUENCE_GENERATOR table."";",3f045f476d549a73478867a8aa6d305ec4284457,4,0
"""has stopped startup of the application in order to allow you to resolve the issue and avoid possible data corruption. If you wish to disable this detection, you may\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,4,1
"""from 1.6 or below, please refer to http://docs.broadleafcommerce.org/current/1.6-to-2.0-Migration.html for important information regarding migrating your SEQUENCE_GENERATOR table."";",3f045f476d549a73478867a8aa6d305ec4284457,4,1
"throw new RuntimeException(""Unable to update "" + tableName + "" with the sequence generator id for "" + segmentValue);",3f045f476d549a73478867a8aa6d305ec4284457,3,0
"""to autocorrect these problems by setting the sequence generator value to a value greater than the max entity id, then set the 'auto.correct.sequence.generator.inconsistencies'\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,3,0
"""to autocorrect these problems by setting the sequence generator value to a value greater than the max entity id, then set the 'auto.correct.sequence.generator.inconsistencies'\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,3,1
"throw new RuntimeException(""Unable to update "" + tableName + "" with the sequence generator id for "" + segmentValue);",3f045f476d549a73478867a8aa6d305ec4284457,3,0
"""to autocorrect these problems by setting the sequence generator value to a value greater than the max entity id, then set the 'auto.correct.sequence.generator.inconsistencies'\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,3,0
"throw new RuntimeException(""Unable to update "" + tableName + "" with the sequence generator id for "" + segmentValue);",3f045f476d549a73478867a8aa6d305ec4284457,3,1
"""to autocorrect these problems by setting the sequence generator value to a value greater than the max entity id, then set the 'auto.correct.sequence.generator.inconsistencies'\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,3,1
"throw new RuntimeException(""Unable to update "" + tableName + "" with the sequence generator id for "" + segmentValue);",3f045f476d549a73478867a8aa6d305ec4284457,3,0
"""to autocorrect these problems by setting the sequence generator value to a value greater than the max entity id, then set the 'auto.correct.sequence.generator.inconsistencies'\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,3,0
"throw new RuntimeException(""Unable to update "" + tableName + "" with the sequence generator id for "" + segmentValue);",3f045f476d549a73478867a8aa6d305ec4284457,3,1
"""to autocorrect these problems by setting the sequence generator value to a value greater than the max entity id, then set the 'auto.correct.sequence.generator.inconsistencies'\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,3,1
"LOG.error(String.format(""The sequence value for %s in %s was found as %d (or an entry did not exist) but the actual max sequence in""",3f045f476d549a73478867a8aa6d305ec4284457,2,0
"LOG.error(String.format(""The sequence value for %s in %s was found as %d (or an entry did not exist) but the actual max sequence in""",3f045f476d549a73478867a8aa6d305ec4284457,2,0
"LOG.error(String.format(""The sequence value for %s in %s was found as %d (or an entry did not exist) but the actual max sequence in""",3f045f476d549a73478867a8aa6d305ec4284457,2,1
"LOG.error(String.format(""The sequence value for %s in %s was found as %d (or an entry did not exist) but the actual max sequence in""",3f045f476d549a73478867a8aa6d305ec4284457,2,0
"LOG.error(String.format(""The sequence value for %s in %s was found as %d (or an entry did not exist) but the actual max sequence in""",3f045f476d549a73478867a8aa6d305ec4284457,2,1
"// to redefine them. If they aren't defined in the annotation, glean them from the defaults",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"LOG.info(""Detecting id sequence state between "" + mappedClass.getName() + "" and "" + segmentValue + "" in "" + tableName);",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"+ "" %s's table was found as %d"", segmentValue, tableName, maxSequenceId, mappedClass.getName(), maxEntityId));",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"String log = String.format(""Correcting sequences for entity %s.  Updating the sequence value""",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"+ "" to %d"",",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"+ "" %s, inserting the new sequence value as %d"",",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"String reason = ""A data inconsistency has been detected between the "" + tableName + "" table and one or more entity tables for which it manages current max primary key values.\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"LOG.error(""Broadleaf Commerce failed to start"", new RuntimeException(reason));",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"LOG.info(""Detecting id sequence state between "" + mappedClass.getName() + "" and "" + segmentValue + "" in "" + tableName);",3f045f476d549a73478867a8aa6d305ec4284457,1,1
"String reason = ""A data inconsistency has been detected between the "" + tableName + "" table and one or more entity tables for which it manages current max primary key values.\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,1,1
"LOG.error(""Broadleaf Commerce failed to start"", new RuntimeException(reason));",3f045f476d549a73478867a8aa6d305ec4284457,1,1
//This is a BLC style ID generator,3f045f476d549a73478867a8aa6d305ec4284457,1,0
"// to redefine them. If they aren't defined in the annotation, glean them from the defaults",3f045f476d549a73478867a8aa6d305ec4284457,1,0
//This is a traditional Hibernate generator,3f045f476d549a73478867a8aa6d305ec4284457,1,0
StringBuilder sb2 = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,1,0
"LOG.info(""Detecting id sequence state between "" + mappedClass.getName() + "" and "" + segmentValue + "" in "" + tableName);",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"LOG.debug(String.format(""Checking for sequence corruption on entity %s"", segmentValue));",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"+ "" %s's table was found as %d"", segmentValue, tableName, maxSequenceId, mappedClass.getName(), maxEntityId));",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"String log = String.format(""Correcting sequences for entity %s.  Updating the sequence value""",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"+ "" to %d"",",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"+ "" %s, inserting the new sequence value as %d"",",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"String reason = ""A data inconsistency has been detected between the "" + tableName + "" table and one or more entity tables for which it manages current max primary key values.\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"LOG.error(""Broadleaf Commerce failed to start"", new RuntimeException(reason));",3f045f476d549a73478867a8aa6d305ec4284457,1,0
//This is a BLC style ID generator,3f045f476d549a73478867a8aa6d305ec4284457,1,1
"// to redefine them. If they aren't defined in the annotation, glean them from the defaults",3f045f476d549a73478867a8aa6d305ec4284457,1,1
//This is a traditional Hibernate generator,3f045f476d549a73478867a8aa6d305ec4284457,1,1
StringBuilder sb2 = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,1,1
"LOG.info(""Detecting id sequence state between "" + mappedClass.getName() + "" and "" + segmentValue + "" in "" + tableName);",3f045f476d549a73478867a8aa6d305ec4284457,1,1
"LOG.debug(String.format(""Checking for sequence corruption on entity %s"", segmentValue));",3f045f476d549a73478867a8aa6d305ec4284457,1,1
"+ "" %s's table was found as %d"", segmentValue, tableName, maxSequenceId, mappedClass.getName(), maxEntityId));",3f045f476d549a73478867a8aa6d305ec4284457,1,1
"String log = String.format(""Correcting sequences for entity %s.  Updating the sequence value""",3f045f476d549a73478867a8aa6d305ec4284457,1,1
"+ "" to %d"",",3f045f476d549a73478867a8aa6d305ec4284457,1,1
"+ "" %s, inserting the new sequence value as %d"",",3f045f476d549a73478867a8aa6d305ec4284457,1,1
"String reason = ""A data inconsistency has been detected between the "" + tableName + "" table and one or more entity tables for which it manages current max primary key values.\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,1,1
"LOG.error(""Broadleaf Commerce failed to start"", new RuntimeException(reason));",3f045f476d549a73478867a8aa6d305ec4284457,1,1
//This is a BLC style ID generator,3f045f476d549a73478867a8aa6d305ec4284457,1,0
"// to redefine them. If they aren't defined in the annotation, glean them from the defaults",3f045f476d549a73478867a8aa6d305ec4284457,1,0
//This is a traditional Hibernate generator,3f045f476d549a73478867a8aa6d305ec4284457,1,0
StringBuilder sb2 = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,1,0
"LOG.info(""Detecting id sequence state between "" + mappedClass.getName() + "" and "" + segmentValue + "" in "" + tableName);",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"LOG.debug(String.format(""Checking for sequence corruption on entity %s"", segmentValue));",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"+ "" %s's table was found as %d"", segmentValue, tableName, maxSequenceId, mappedClass.getName(), maxEntityId));",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"String log = String.format(""Correcting sequences for entity %s.  Updating the sequence value""",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"+ "" to %d"",",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"+ "" %s, inserting the new sequence value as %d"",",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"String reason = ""A data inconsistency has been detected between the "" + tableName + "" table and one or more entity tables for which it manages current max primary key values.\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,1,0
"LOG.error(""Broadleaf Commerce failed to start"", new RuntimeException(reason));",3f045f476d549a73478867a8aa6d305ec4284457,1,0
//This is a BLC style ID generator,3f045f476d549a73478867a8aa6d305ec4284457,1,1
"// to redefine them. If they aren't defined in the annotation, glean them from the defaults",3f045f476d549a73478867a8aa6d305ec4284457,1,1
//This is a traditional Hibernate generator,3f045f476d549a73478867a8aa6d305ec4284457,1,1
StringBuilder sb2 = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,1,1
"LOG.info(""Detecting id sequence state between "" + mappedClass.getName() + "" and "" + segmentValue + "" in "" + tableName);",3f045f476d549a73478867a8aa6d305ec4284457,1,1
"LOG.debug(String.format(""Checking for sequence corruption on entity %s"", segmentValue));",3f045f476d549a73478867a8aa6d305ec4284457,1,1
"+ "" %s's table was found as %d"", segmentValue, tableName, maxSequenceId, mappedClass.getName(), maxEntityId));",3f045f476d549a73478867a8aa6d305ec4284457,1,1
"String log = String.format(""Correcting sequences for entity %s.  Updating the sequence value""",3f045f476d549a73478867a8aa6d305ec4284457,1,1
"+ "" to %d"",",3f045f476d549a73478867a8aa6d305ec4284457,1,1
"+ "" %s, inserting the new sequence value as %d"",",3f045f476d549a73478867a8aa6d305ec4284457,1,1
"String reason = ""A data inconsistency has been detected between the "" + tableName + "" table and one or more entity tables for which it manages current max primary key values.\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,1,1
"LOG.error(""Broadleaf Commerce failed to start"", new RuntimeException(reason));",3f045f476d549a73478867a8aa6d305ec4284457,1,1
import org.apache.commons.collections.CollectionUtils;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
import java.lang.reflect.Field;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
import java.util.List;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (genericAnnot != null && genericAnnot.strategy().equals(IdOverrideTableGenerator.class.getName())) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
// Default values are set on startup in IdOverrideTableGenerator so that every annotation does not have,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (StringUtils.isBlank(tableName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
tableName = IdOverrideTableGenerator.DEFAULT_TABLE_NAME;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
},3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (StringUtils.isBlank(segmentColumnName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
segmentColumnName = IdOverrideTableGenerator.DEFAULT_SEGMENT_COLUMN_NAME;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (StringUtils.isBlank(valueColumnName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
valueColumnName = IdOverrideTableGenerator.DEFAULT_VALUE_COLUMN_NAME;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
Long maxSequenceId = 0l;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
boolean sequenceEntryExists = false;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (CollectionUtils.isNotEmpty(results2) && results2.get(0) != null) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
maxSequenceId = ((Number) results2.get(0)).longValue();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
sequenceEntryExists = true;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
StringBuilder sb = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb.append(""select max("");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
sb.append(idField.getName());,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb.append("") from "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
sb.append(mappedClass.getName());,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb.append("" entity"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
List results = em.createQuery(sb.toString()).getResultList();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (CollectionUtils.isNotEmpty(results) && results.get(0) != null) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
Long maxEntityId = (Long) results.get(0);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (maxEntityId > maxSequenceId) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (automaticallyCorrectInconsistencies) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
long newMaxId = maxEntityId + 10;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (sequenceEntryExists) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"mappedClass.getName(), newMaxId);",3f045f476d549a73478867a8aa6d305ec4284457,0,0
LOG.warn(log);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
StringBuilder updateQuery = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append(""update "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
updateQuery.append(tableName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append("" set "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
updateQuery.append(valueColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append("" = "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
updateQuery.append(String.valueOf(newMaxId));,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append("" where "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
updateQuery.append(segmentColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append("" = '"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
updateQuery.append(segmentValue);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append(""'"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
int response = em.createNativeQuery(updateQuery.toString()).executeUpdate();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"String log = String.format(""Correcting sequences for entity %s. Did not find an entry in""",3f045f476d549a73478867a8aa6d305ec4284457,0,0
"mappedClass.getName(), tableName, newMaxId);",3f045f476d549a73478867a8aa6d305ec4284457,0,0
StringBuilder insertQuery = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"insertQuery.append(""insert into "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
"if (!tableName.contains(""."") && !StringUtils.isEmpty(defaultSchemaSequenceGenerator)) {",3f045f476d549a73478867a8aa6d305ec4284457,0,0
sb2.append(defaultSchemaSequenceGenerator);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb2.append(""."");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
insertQuery.append(tableName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"insertQuery.append("" ("" + segmentColumnName + "","" + valueColumnName + "")"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
"insertQuery.append(""values ('"" + segmentValue + ""','"" + String.valueOf(newMaxId) + ""')"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
int response = em.createNativeQuery(insertQuery.toString()).executeUpdate();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (response <= 0) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
} else {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"""The inconsistency was detected between the managed class ("" + mappedClass.getName() + "") and the identifier ("" + segmentValue + "") in "" + tableName + "". Broadleaf\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,0,0
System.exit(1);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
import java.lang.reflect.Field;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
import java.util.List;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"if (genericAnnot != null && genericAnnot.strategy().equals(""org.broadleafcommerce.common.persistence.IdOverrideTableGenerator"")) {",3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (results2 != null && !results2.isEmpty() && results2.get(0) != null) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
Long maxSequenceId = ((Number) results2.get(0)).longValue();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
StringBuilder sb = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb.append(""select max("");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb.append(idField.getName());,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb.append("") from "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb.append(mappedClass.getName());,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb.append("" entity"");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
List results = em.createQuery(sb.toString()).getResultList();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (results != null && !results.isEmpty() && results.get(0) != null) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
Long maxEntityId = (Long) results.get(0);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (maxEntityId > maxSequenceId) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (automaticallyCorrectInconsistencies) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
StringBuilder sb3 = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb3.append(""update "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb3.append(tableName);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb3.append("" set "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb3.append(valueColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb3.append("" = "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb3.append(String.valueOf(maxEntityId + 10));,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb3.append("" where "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb3.append(segmentColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb3.append("" = '"");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb3.append(segmentValue);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb3.append(""'"");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
int response = em.createNativeQuery(sb3.toString()).executeUpdate();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"""The inconsistency was detected between the managed class ("" + mappedClass.getName() + "") and the identifier ("" + segmentValue + "") in "" + tableName + "". Broadleaf\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,0,1
System.exit(1);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
import org.broadleafcommerce.common.service.EntityManagerService;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
import javax.annotation.Resource;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"@Resource(name=""blEntityManagerService"")",3f045f476d549a73478867a8aa6d305ec4284457,0,0
protected EntityManagerService emService;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
List<EntityManager> entityManagers = emService.retrieveAllEntityManagers();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
for (EntityManager em : entityManagers) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
SessionFactory sessionFactory = ((HibernateEntityManager) em).getSession().getSessionFactory();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
for (Object item : sessionFactory.getAllClassMetadata().values()) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
ClassMetadata metadata = (ClassMetadata) item;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
String idProperty = metadata.getIdentifierPropertyName();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
Class<?> mappedClass = metadata.getMappedClass();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
Field idField;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
try {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
idField = mappedClass.getDeclaredField(idProperty);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
} catch (NoSuchFieldException e) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
continue;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
},3f045f476d549a73478867a8aa6d305ec4284457,0,0
idField.setAccessible(true);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
GenericGenerator genericAnnot = idField.getAnnotation(GenericGenerator.class);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
TableGenerator tableAnnot = idField.getAnnotation(TableGenerator.class);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
String segmentValue = null;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
String tableName = null;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
String segmentColumnName = null;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
String valueColumnName = null;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (genericAnnot != null && genericAnnot.strategy().equals(IdOverrideTableGenerator.class.getName())) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
for (Parameter param : genericAnnot.parameters()) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"if (param.name().equals(""segment_value"")) {",3f045f476d549a73478867a8aa6d305ec4284457,0,0
segmentValue = param.value();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"if (param.name().equals(""table_name"")) {",3f045f476d549a73478867a8aa6d305ec4284457,0,0
tableName = param.value();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"if (param.name().equals(""segment_column_name"")) {",3f045f476d549a73478867a8aa6d305ec4284457,0,0
segmentColumnName = param.value();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"if (param.name().equals(""value_column_name"")) {",3f045f476d549a73478867a8aa6d305ec4284457,0,0
valueColumnName = param.value();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
// Default values are set on startup in IdOverrideTableGenerator so that every annotation does not have,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (StringUtils.isBlank(tableName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
tableName = IdOverrideTableGenerator.DEFAULT_TABLE_NAME;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (StringUtils.isBlank(segmentColumnName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
segmentColumnName = IdOverrideTableGenerator.DEFAULT_SEGMENT_COLUMN_NAME;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (StringUtils.isBlank(valueColumnName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
valueColumnName = IdOverrideTableGenerator.DEFAULT_VALUE_COLUMN_NAME;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
} else if (tableAnnot != null) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
segmentValue = tableAnnot.pkColumnValue();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
tableName = tableAnnot.table();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
segmentColumnName = tableAnnot.pkColumnName();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
valueColumnName = tableAnnot.valueColumnName();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (!StringUtils.isEmpty(segmentValue) && !StringUtils.isEmpty(tableName) && !StringUtils.isEmpty(segmentColumnName) && !StringUtils.isEmpty(valueColumnName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb2.append(""select "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
sb2.append(valueColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb2.append("" from "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
"if (!tableName.contains(""."") && !StringUtils.isEmpty(defaultSchemaSequenceGenerator)) {",3f045f476d549a73478867a8aa6d305ec4284457,0,0
sb2.append(defaultSchemaSequenceGenerator);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb2.append(""."");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
sb2.append(tableName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb2.append("" where "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
sb2.append(segmentColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb2.append("" = '"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
sb2.append(segmentValue);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb2.append(""'"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
Long maxSequenceId = 0l;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
boolean sequenceEntryExists = false;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
List results2 = em.createNativeQuery(sb2.toString()).getResultList();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (CollectionUtils.isNotEmpty(results2) && results2.get(0) != null) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
maxSequenceId = ((Number) results2.get(0)).longValue();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
sequenceEntryExists = true;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
StringBuilder sb = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb.append(""select max("");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
sb.append(idField.getName());,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb.append("") from "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
sb.append(mappedClass.getName());,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb.append("" entity"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
List results;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
context.setInternalIgnoreFilters(true);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
results = em.createQuery(sb.toString()).getResultList();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
} finally {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
context.setInternalIgnoreFilters(false);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (CollectionUtils.isNotEmpty(results) && results.get(0) != null) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
Long maxEntityId = BLCNumberUtils.toLong(results.get(0));,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (maxEntityId > maxSequenceId) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (automaticallyCorrectInconsistencies) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
long newMaxId = maxEntityId + 10;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (sequenceEntryExists) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"mappedClass.getName(), newMaxId);",3f045f476d549a73478867a8aa6d305ec4284457,0,0
LOG.warn(log);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
StringBuilder updateQuery = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append(""update "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
updateQuery.append(tableName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append("" set "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
updateQuery.append(valueColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append("" = "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
updateQuery.append(String.valueOf(newMaxId));,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append("" where "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
updateQuery.append(segmentColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append("" = '"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
updateQuery.append(segmentValue);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append(""'"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
int response = em.createNativeQuery(updateQuery.toString()).executeUpdate();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (response <= 0) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
} else {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"String log = String.format(""Correcting sequences for entity %s. Did not find an entry in""",3f045f476d549a73478867a8aa6d305ec4284457,0,0
"mappedClass.getName(), tableName, newMaxId);",3f045f476d549a73478867a8aa6d305ec4284457,0,0
StringBuilder insertQuery = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"insertQuery.append(""insert into "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
insertQuery.append(tableName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"insertQuery.append("" ("" + segmentColumnName + "","" + valueColumnName + "")"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
"insertQuery.append(""values ('"" + segmentValue + ""','"" + String.valueOf(newMaxId) + ""')"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
int response = em.createNativeQuery(insertQuery.toString()).executeUpdate();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"""The inconsistency was detected between the managed class ("" + mappedClass.getName() + "") and the identifier ("" + segmentValue + "") in "" + tableName + "". Broadleaf\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,0,0
System.exit(1);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
import javax.persistence.PersistenceContext;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"@PersistenceContext(unitName=""blPU"")",3f045f476d549a73478867a8aa6d305ec4284457,0,1
protected EntityManager em;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
SessionFactory sessionFactory = ((HibernateEntityManager) em).getSession().getSessionFactory();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
for (Object item : sessionFactory.getAllClassMetadata().values()) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
ClassMetadata metadata = (ClassMetadata) item;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
String idProperty = metadata.getIdentifierPropertyName();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
Class<?> mappedClass = metadata.getMappedClass();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
Field idField;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
try {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
idField = mappedClass.getDeclaredField(idProperty);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
} catch (NoSuchFieldException e) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
continue;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
},3f045f476d549a73478867a8aa6d305ec4284457,0,1
idField.setAccessible(true);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
GenericGenerator genericAnnot = idField.getAnnotation(GenericGenerator.class);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
TableGenerator tableAnnot = idField.getAnnotation(TableGenerator.class);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
String segmentValue = null;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
String tableName = null;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
String segmentColumnName = null;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
String valueColumnName = null;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (genericAnnot != null && genericAnnot.strategy().equals(IdOverrideTableGenerator.class.getName())) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
for (Parameter param : genericAnnot.parameters()) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"if (param.name().equals(""segment_value"")) {",3f045f476d549a73478867a8aa6d305ec4284457,0,1
segmentValue = param.value();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"if (param.name().equals(""table_name"")) {",3f045f476d549a73478867a8aa6d305ec4284457,0,1
tableName = param.value();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"if (param.name().equals(""segment_column_name"")) {",3f045f476d549a73478867a8aa6d305ec4284457,0,1
segmentColumnName = param.value();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"if (param.name().equals(""value_column_name"")) {",3f045f476d549a73478867a8aa6d305ec4284457,0,1
valueColumnName = param.value();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
// Default values are set on startup in IdOverrideTableGenerator so that every annotation does not have,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (StringUtils.isBlank(tableName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
tableName = IdOverrideTableGenerator.DEFAULT_TABLE_NAME;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (StringUtils.isBlank(segmentColumnName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
segmentColumnName = IdOverrideTableGenerator.DEFAULT_SEGMENT_COLUMN_NAME;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (StringUtils.isBlank(valueColumnName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
valueColumnName = IdOverrideTableGenerator.DEFAULT_VALUE_COLUMN_NAME;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
} else if (tableAnnot != null) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
segmentValue = tableAnnot.pkColumnValue();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
tableName = tableAnnot.table();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
segmentColumnName = tableAnnot.pkColumnName();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
valueColumnName = tableAnnot.valueColumnName();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (!StringUtils.isEmpty(segmentValue) && !StringUtils.isEmpty(tableName) && !StringUtils.isEmpty(segmentColumnName) && !StringUtils.isEmpty(valueColumnName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb2.append(""select "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb2.append(valueColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb2.append("" from "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
"if (!tableName.contains(""."") && !StringUtils.isEmpty(defaultSchemaSequenceGenerator)) {",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb2.append(defaultSchemaSequenceGenerator);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb2.append(""."");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb2.append(tableName);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb2.append("" where "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb2.append(segmentColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb2.append("" = '"");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb2.append(segmentValue);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb2.append(""'"");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
Long maxSequenceId = 0l;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
boolean sequenceEntryExists = false;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
List results2 = em.createNativeQuery(sb2.toString()).getResultList();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (CollectionUtils.isNotEmpty(results2) && results2.get(0) != null) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
maxSequenceId = ((Number) results2.get(0)).longValue();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
sequenceEntryExists = true;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
StringBuilder sb = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb.append(""select max("");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb.append(idField.getName());,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb.append("") from "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb.append(mappedClass.getName());,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb.append("" entity"");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
List results;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
context.setInternalIgnoreFilters(true);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
results = em.createQuery(sb.toString()).getResultList();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
} finally {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
context.setInternalIgnoreFilters(false);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (CollectionUtils.isNotEmpty(results) && results.get(0) != null) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
Long maxEntityId = BLCNumberUtils.toLong(results.get(0));,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (maxEntityId > maxSequenceId) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (automaticallyCorrectInconsistencies) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
long newMaxId = maxEntityId + 10;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (sequenceEntryExists) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"mappedClass.getName(), newMaxId);",3f045f476d549a73478867a8aa6d305ec4284457,0,1
LOG.warn(log);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
StringBuilder updateQuery = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"updateQuery.append(""update "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
updateQuery.append(tableName);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"updateQuery.append("" set "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
updateQuery.append(valueColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"updateQuery.append("" = "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
updateQuery.append(String.valueOf(newMaxId));,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"updateQuery.append("" where "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
updateQuery.append(segmentColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"updateQuery.append("" = '"");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
updateQuery.append(segmentValue);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"updateQuery.append(""'"");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
int response = em.createNativeQuery(updateQuery.toString()).executeUpdate();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (response <= 0) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"String log = String.format(""Correcting sequences for entity %s. Did not find an entry in""",3f045f476d549a73478867a8aa6d305ec4284457,0,1
"mappedClass.getName(), tableName, newMaxId);",3f045f476d549a73478867a8aa6d305ec4284457,0,1
StringBuilder insertQuery = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"insertQuery.append(""insert into "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
insertQuery.append(tableName);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"insertQuery.append("" ("" + segmentColumnName + "","" + valueColumnName + "")"");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
"insertQuery.append(""values ('"" + segmentValue + ""','"" + String.valueOf(newMaxId) + ""')"");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
int response = em.createNativeQuery(insertQuery.toString()).executeUpdate();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
} else {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"""The inconsistency was detected between the managed class ("" + mappedClass.getName() + "") and the identifier ("" + segmentValue + "") in "" + tableName + "". Broadleaf\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,0,1
System.exit(1);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
import org.broadleafcommerce.common.util.TransactionUtils;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
import org.hibernate.Session;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
import org.hibernate.Transaction;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
Session hibernateSession = em.unwrap(Session.class);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
Transaction tx = TransactionUtils.createTransaction(hibernateSession);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
try {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"patchSequenceGeneratorInconsistencies(em, hibernateSession);",3f045f476d549a73478867a8aa6d305ec4284457,0,0
} finally {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"TransactionUtils.finalizeTransaction(tx, false);",3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (hibernateSession != null) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
hibernateSession.close();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
},3f045f476d549a73478867a8aa6d305ec4284457,0,0
"protected void patchSequenceGeneratorInconsistencies(EntityManager em, Session session) {",3f045f476d549a73478867a8aa6d305ec4284457,0,0
SessionFactory sessionFactory = session.getSessionFactory();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
for (Object item : sessionFactory.getAllClassMetadata().values()) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
ClassMetadata metadata = (ClassMetadata) item;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
String idProperty = metadata.getIdentifierPropertyName();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
Class<?> mappedClass = metadata.getMappedClass();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
Field idField;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
idField = mappedClass.getDeclaredField(idProperty);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
} catch (NoSuchFieldException e) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
continue;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
idField.setAccessible(true);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
GenericGenerator genericAnnot = idField.getAnnotation(GenericGenerator.class);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
TableGenerator tableAnnot = idField.getAnnotation(TableGenerator.class);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
String segmentValue = null;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
String tableName = null;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
String segmentColumnName = null;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
String valueColumnName = null;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (genericAnnot != null && genericAnnot.strategy().equals(IdOverrideTableGenerator.class.getName())) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
for (Parameter param : genericAnnot.parameters()) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"if (param.name().equals(""segment_value"")) {",3f045f476d549a73478867a8aa6d305ec4284457,0,0
segmentValue = param.value();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"if (param.name().equals(""table_name"")) {",3f045f476d549a73478867a8aa6d305ec4284457,0,0
tableName = param.value();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"if (param.name().equals(""segment_column_name"")) {",3f045f476d549a73478867a8aa6d305ec4284457,0,0
segmentColumnName = param.value();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"if (param.name().equals(""value_column_name"")) {",3f045f476d549a73478867a8aa6d305ec4284457,0,0
valueColumnName = param.value();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
// Default values are set on startup in IdOverrideTableGenerator so that every annotation does not have,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (StringUtils.isBlank(tableName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
tableName = IdOverrideTableGenerator.DEFAULT_TABLE_NAME;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (StringUtils.isBlank(segmentColumnName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
segmentColumnName = IdOverrideTableGenerator.DEFAULT_SEGMENT_COLUMN_NAME;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (StringUtils.isBlank(valueColumnName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
valueColumnName = IdOverrideTableGenerator.DEFAULT_VALUE_COLUMN_NAME;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
} else if (tableAnnot != null) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
segmentValue = tableAnnot.pkColumnValue();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
tableName = tableAnnot.table();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
segmentColumnName = tableAnnot.pkColumnName();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
valueColumnName = tableAnnot.valueColumnName();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (!StringUtils.isEmpty(segmentValue) && !StringUtils.isEmpty(tableName) && !StringUtils.isEmpty(segmentColumnName) && !StringUtils.isEmpty(valueColumnName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb2.append(""select "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
sb2.append(valueColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb2.append("" from "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
"if (!tableName.contains(""."") && !StringUtils.isEmpty(defaultSchemaSequenceGenerator)) {",3f045f476d549a73478867a8aa6d305ec4284457,0,0
sb2.append(defaultSchemaSequenceGenerator);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb2.append(""."");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
sb2.append(tableName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb2.append("" where "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
sb2.append(segmentColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb2.append("" = '"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
sb2.append(segmentValue);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb2.append(""'"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
Long maxSequenceId = 0l;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
boolean sequenceEntryExists = false;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
List results2 = em.createNativeQuery(sb2.toString()).getResultList();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (CollectionUtils.isNotEmpty(results2) && results2.get(0) != null) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
maxSequenceId = ((Number) results2.get(0)).longValue();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
sequenceEntryExists = true;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
StringBuilder sb = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb.append(""select max("");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
sb.append(idField.getName());,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb.append("") from "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
sb.append(mappedClass.getName());,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"sb.append("" entity"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
List results;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
context.setInternalIgnoreFilters(true);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
results = em.createQuery(sb.toString()).getResultList();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
context.setInternalIgnoreFilters(false);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (CollectionUtils.isNotEmpty(results) && results.get(0) != null) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
Long maxEntityId = BLCNumberUtils.toLong(results.get(0));,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (maxEntityId > maxSequenceId) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (automaticallyCorrectInconsistencies) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
long newMaxId = maxEntityId + 10;,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (sequenceEntryExists) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"mappedClass.getName(), newMaxId);",3f045f476d549a73478867a8aa6d305ec4284457,0,0
LOG.warn(log);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
StringBuilder updateQuery = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append(""update "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
updateQuery.append(tableName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append("" set "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
updateQuery.append(valueColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append("" = "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
updateQuery.append(String.valueOf(newMaxId));,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append("" where "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
updateQuery.append(segmentColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append("" = '"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
updateQuery.append(segmentValue);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"updateQuery.append(""'"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
int response = em.createNativeQuery(updateQuery.toString()).executeUpdate();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
if (response <= 0) {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
} else {,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"String log = String.format(""Correcting sequences for entity %s. Did not find an entry in""",3f045f476d549a73478867a8aa6d305ec4284457,0,0
"mappedClass.getName(), tableName, newMaxId);",3f045f476d549a73478867a8aa6d305ec4284457,0,0
StringBuilder insertQuery = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"insertQuery.append(""insert into "");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
insertQuery.append(tableName);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"insertQuery.append("" ("" + segmentColumnName + "","" + valueColumnName + "")"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
"insertQuery.append(""values ('"" + segmentValue + ""','"" + String.valueOf(newMaxId) + ""')"");",3f045f476d549a73478867a8aa6d305ec4284457,0,0
int response = em.createNativeQuery(insertQuery.toString()).executeUpdate();,3f045f476d549a73478867a8aa6d305ec4284457,0,0
"""The inconsistency was detected between the managed class ("" + mappedClass.getName() + "") and the identifier ("" + segmentValue + "") in "" + tableName + "". Broadleaf\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,0,0
System.exit(1);,3f045f476d549a73478867a8aa6d305ec4284457,0,0
import org.hibernate.ejb.HibernateEntityManager;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
import org.springframework.transaction.annotation.Transactional;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"@Transactional(""blTransactionManager"")",3f045f476d549a73478867a8aa6d305ec4284457,0,1
SessionFactory sessionFactory = ((HibernateEntityManager) em).getSession().getSessionFactory();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
for (Object item : sessionFactory.getAllClassMetadata().values()) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
ClassMetadata metadata = (ClassMetadata) item;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
String idProperty = metadata.getIdentifierPropertyName();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
Class<?> mappedClass = metadata.getMappedClass();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
Field idField;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
try {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
idField = mappedClass.getDeclaredField(idProperty);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
} catch (NoSuchFieldException e) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
continue;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
idField.setAccessible(true);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
GenericGenerator genericAnnot = idField.getAnnotation(GenericGenerator.class);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
TableGenerator tableAnnot = idField.getAnnotation(TableGenerator.class);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
String segmentValue = null;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
String tableName = null;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
String segmentColumnName = null;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
String valueColumnName = null;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (genericAnnot != null && genericAnnot.strategy().equals(IdOverrideTableGenerator.class.getName())) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
for (Parameter param : genericAnnot.parameters()) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"if (param.name().equals(""segment_value"")) {",3f045f476d549a73478867a8aa6d305ec4284457,0,1
segmentValue = param.value();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
},3f045f476d549a73478867a8aa6d305ec4284457,0,1
"if (param.name().equals(""table_name"")) {",3f045f476d549a73478867a8aa6d305ec4284457,0,1
tableName = param.value();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"if (param.name().equals(""segment_column_name"")) {",3f045f476d549a73478867a8aa6d305ec4284457,0,1
segmentColumnName = param.value();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"if (param.name().equals(""value_column_name"")) {",3f045f476d549a73478867a8aa6d305ec4284457,0,1
valueColumnName = param.value();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
// Default values are set on startup in IdOverrideTableGenerator so that every annotation does not have,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (StringUtils.isBlank(tableName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
tableName = IdOverrideTableGenerator.DEFAULT_TABLE_NAME;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (StringUtils.isBlank(segmentColumnName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
segmentColumnName = IdOverrideTableGenerator.DEFAULT_SEGMENT_COLUMN_NAME;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (StringUtils.isBlank(valueColumnName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
valueColumnName = IdOverrideTableGenerator.DEFAULT_VALUE_COLUMN_NAME;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
} else if (tableAnnot != null) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
segmentValue = tableAnnot.pkColumnValue();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
tableName = tableAnnot.table();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
segmentColumnName = tableAnnot.pkColumnName();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
valueColumnName = tableAnnot.valueColumnName();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (!StringUtils.isEmpty(segmentValue) && !StringUtils.isEmpty(tableName) && !StringUtils.isEmpty(segmentColumnName) && !StringUtils.isEmpty(valueColumnName)) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb2.append(""select "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb2.append(valueColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb2.append("" from "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
"if (!tableName.contains(""."") && !StringUtils.isEmpty(defaultSchemaSequenceGenerator)) {",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb2.append(defaultSchemaSequenceGenerator);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb2.append(""."");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb2.append(tableName);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb2.append("" where "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb2.append(segmentColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb2.append("" = '"");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb2.append(segmentValue);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb2.append(""'"");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
Long maxSequenceId = 0l;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
boolean sequenceEntryExists = false;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
List results2 = em.createNativeQuery(sb2.toString()).getResultList();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (CollectionUtils.isNotEmpty(results2) && results2.get(0) != null) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
maxSequenceId = ((Number) results2.get(0)).longValue();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
sequenceEntryExists = true;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
StringBuilder sb = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb.append(""select max("");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb.append(idField.getName());,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb.append("") from "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
sb.append(mappedClass.getName());,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"sb.append("" entity"");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
List results;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
context.setInternalIgnoreFilters(true);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
results = em.createQuery(sb.toString()).getResultList();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
} finally {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
context.setInternalIgnoreFilters(false);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (CollectionUtils.isNotEmpty(results) && results.get(0) != null) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
Long maxEntityId = BLCNumberUtils.toLong(results.get(0));,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (maxEntityId > maxSequenceId) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (automaticallyCorrectInconsistencies) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
long newMaxId = maxEntityId + 10;,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (sequenceEntryExists) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"mappedClass.getName(), newMaxId);",3f045f476d549a73478867a8aa6d305ec4284457,0,1
LOG.warn(log);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
StringBuilder updateQuery = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"updateQuery.append(""update "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
updateQuery.append(tableName);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"updateQuery.append("" set "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
updateQuery.append(valueColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"updateQuery.append("" = "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
updateQuery.append(String.valueOf(newMaxId));,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"updateQuery.append("" where "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
updateQuery.append(segmentColumnName);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"updateQuery.append("" = '"");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
updateQuery.append(segmentValue);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"updateQuery.append(""'"");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
int response = em.createNativeQuery(updateQuery.toString()).executeUpdate();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (response <= 0) {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
} else {,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"String log = String.format(""Correcting sequences for entity %s. Did not find an entry in""",3f045f476d549a73478867a8aa6d305ec4284457,0,1
"mappedClass.getName(), tableName, newMaxId);",3f045f476d549a73478867a8aa6d305ec4284457,0,1
StringBuilder insertQuery = new StringBuilder();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"insertQuery.append(""insert into "");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
insertQuery.append(tableName);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"insertQuery.append("" ("" + segmentColumnName + "","" + valueColumnName + "")"");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
"insertQuery.append(""values ('"" + segmentValue + ""','"" + String.valueOf(newMaxId) + ""')"");",3f045f476d549a73478867a8aa6d305ec4284457,0,1
int response = em.createNativeQuery(insertQuery.toString()).executeUpdate();,3f045f476d549a73478867a8aa6d305ec4284457,0,1
"""The inconsistency was detected between the managed class ("" + mappedClass.getName() + "") and the identifier ("" + segmentValue + "") in "" + tableName + "". Broadleaf\n"" +",3f045f476d549a73478867a8aa6d305ec4284457,0,1
System.exit(1);,3f045f476d549a73478867a8aa6d305ec4284457,0,1
if (fulfillmentGroup.getShippingOverride()) {,984aba0c7214f3f04667baab1ebfa04293cd1e48,2,0
} else {,984aba0c7214f3f04667baab1ebfa04293cd1e48,2,0
FulfillmentGroup fulfillmentGroup = fulfillmentGroupMember.getFulfillmentGroup();,984aba0c7214f3f04667baab1ebfa04293cd1e48,1,0
fulfillmentCharges = fulfillmentGroup.getFulfillmentPrice();,984aba0c7214f3f04667baab1ebfa04293cd1e48,1,0
fulfillmentCharges = fulfillmentGroupMember.getFinalizedPriceWithAdjustments();,984aba0c7214f3f04667baab1ebfa04293cd1e48,1,0
},984aba0c7214f3f04667baab1ebfa04293cd1e48,1,0
PromotableFulfillmentGroup fulfillmentGroup = fulfillmentGroupMember;,984aba0c7214f3f04667baab1ebfa04293cd1e48,1,1
Money fulfillmentCharges = fulfillmentGroup.getFinalizedPriceWithAdjustments();,984aba0c7214f3f04667baab1ebfa04293cd1e48,1,1
import org.broadleafcommerce.core.order.domain.FulfillmentGroup;,984aba0c7214f3f04667baab1ebfa04293cd1e48,0,0
Money fulfillmentCharges;,984aba0c7214f3f04667baab1ebfa04293cd1e48,0,0
fulfillmentGroupMember.getFulfillmentGroup().setFulfillmentPrice(fulfillmentCharges);,984aba0c7214f3f04667baab1ebfa04293cd1e48,0,0
fulfillmentGroup.getFulfillmentGroup().setFulfillmentPrice(fulfillmentCharges);,984aba0c7214f3f04667baab1ebfa04293cd1e48,0,1
//NOTE: There is no reason to set the admin server here as the SolrContext will return the primary server,33025acc016e68691cbde972fb62e2b766178b80,4,1
* This creates the proper directories and writes the correct properties files for Solr to run in embedded mode.,33025acc016e68691cbde972fb62e2b766178b80,3,1
//Make sure we shut down each of the SolrClient references (these is really the Solr clients despite the name),33025acc016e68691cbde972fb62e2b766178b80,3,1
//This is the name of the config that Zookeeper has associated with Solr configs,33025acc016e68691cbde972fb62e2b766178b80,2,1
"protected String solrCloudConfigName = ""blc"";",33025acc016e68691cbde972fb62e2b766178b80,2,1
"final String baseTempPath = System.getProperty(""java.io.tmpdir"");",33025acc016e68691cbde972fb62e2b766178b80,2,1
while ((line = br.readLine()) != null) {,33025acc016e68691cbde972fb62e2b766178b80,2,1
} finally {,33025acc016e68691cbde972fb62e2b766178b80,2,1
} catch (Throwable e) {,33025acc016e68691cbde972fb62e2b766178b80,2,1
public String getSolrHomePath() {,33025acc016e68691cbde972fb62e2b766178b80,2,1
} else {,33025acc016e68691cbde972fb62e2b766178b80,2,1
* This constructor serves to mimic the one which takes in one {@link SolrClient} argument.,33025acc016e68691cbde972fb62e2b766178b80,2,1
"* By having this and then simply disregarding the second parameter, we can more easily support 2-core",33025acc016e68691cbde972fb62e2b766178b80,2,1
"* By having this and then simply disregarding the second and third parameters, we can more easily support 2-core",33025acc016e68691cbde972fb62e2b766178b80,2,1
"public SolrSearchServiceImpl(String solrServer, String reindexServer, String adminServer)",33025acc016e68691cbde972fb62e2b766178b80,2,1
//We want to use the Solr APIs to make sure the correct collections are set up.,33025acc016e68691cbde972fb62e2b766178b80,2,1
"+ "" the two instances. All other things, like Zookeeper addresses should be the same."");",33025acc016e68691cbde972fb62e2b766178b80,2,1
"+ ""and their defaultCollection property must be unique or null.  All other things like the """,33025acc016e68691cbde972fb62e2b766178b80,2,1
String collectionName = null;,33025acc016e68691cbde972fb62e2b766178b80,2,1
for (int i = 0; i < 1000; i++) {,33025acc016e68691cbde972fb62e2b766178b80,2,1
String collectionName = aliasCollectionMap.get(primary.getDefaultCollection());,33025acc016e68691cbde972fb62e2b766178b80,2,1
String collectionName = aliasCollectionMap.get(reindex.getDefaultCollection());,33025acc016e68691cbde972fb62e2b766178b80,2,1
} catch (Exception e) {,33025acc016e68691cbde972fb62e2b766178b80,2,1
"public class SolrSearchServiceImpl implements SearchService, DisposableBean {",33025acc016e68691cbde972fb62e2b766178b80,1,0
@Autowired(required = false),33025acc016e68691cbde972fb62e2b766178b80,1,0
"response = solrConfiguration.getServer().query(solrQuery, getSolrQueryMethod());",33025acc016e68691cbde972fb62e2b766178b80,1,0
public void destroy() throws Exception {,33025acc016e68691cbde972fb62e2b766178b80,1,0
},33025acc016e68691cbde972fb62e2b766178b80,1,0
"public class SolrSearchServiceImpl implements SearchService, InitializingBean, DisposableBean {",33025acc016e68691cbde972fb62e2b766178b80,1,1
//This is the default number of shards that should be created if a SolrCloud collection is created via API,33025acc016e68691cbde972fb62e2b766178b80,1,1
protected int solrCloudNumShards = 2;,33025acc016e68691cbde972fb62e2b766178b80,1,1
protected String solrHomePath;,33025acc016e68691cbde972fb62e2b766178b80,1,1
"public SolrSearchServiceImpl(String solrServer) throws IOException, ParserConfigurationException, SAXException {",33025acc016e68691cbde972fb62e2b766178b80,1,1
"if (Objects.equals(""solrhome"", solrServer)) {",33025acc016e68691cbde972fb62e2b766178b80,1,1
"File tempDir = new File(baseTempPath + File.separator + System.getProperty(""user.name"") + File.separator + ""solrhome-5.3.1"");",33025acc016e68691cbde972fb62e2b766178b80,1,1
"if (System.getProperty(""tmpdir.solrhome"") != null) {",33025acc016e68691cbde972fb62e2b766178b80,1,1
"tempDir = new File(System.getProperty(""tmpdir.solrhome""));",33025acc016e68691cbde972fb62e2b766178b80,1,1
},33025acc016e68691cbde972fb62e2b766178b80,1,1
if (!tempDir.exists()) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
solrServer = tempDir.getAbsolutePath();,33025acc016e68691cbde972fb62e2b766178b80,1,1
solrHomePath = solrServer;,33025acc016e68691cbde972fb62e2b766178b80,1,1
"File solrXml = new File(new File(solrServer), ""solr.xml"");",33025acc016e68691cbde972fb62e2b766178b80,1,1
if (!solrXml.exists()) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
if (LOG.isTraceEnabled()) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
BufferedReader br = null;,33025acc016e68691cbde972fb62e2b766178b80,1,1
try {,33025acc016e68691cbde972fb62e2b766178b80,1,1
br = new BufferedReader(new FileReader(solrXml));,33025acc016e68691cbde972fb62e2b766178b80,1,1
String line;,33025acc016e68691cbde972fb62e2b766178b80,1,1
if (br != null) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
"CoreContainer coreContainer = CoreContainer.createAndLoad(solrServer, solrXml);",33025acc016e68691cbde972fb62e2b766178b80,1,1
"EmbeddedSolrServer primaryServer = new EmbeddedSolrServer(coreContainer, SolrContext.PRIMARY);",33025acc016e68691cbde972fb62e2b766178b80,1,1
"EmbeddedSolrServer reindexServer = new EmbeddedSolrServer(coreContainer, SolrContext.REINDEX);",33025acc016e68691cbde972fb62e2b766178b80,1,1
//if the admin server is not set...,33025acc016e68691cbde972fb62e2b766178b80,1,1
return solrHomePath;,33025acc016e68691cbde972fb62e2b766178b80,1,1
"public void copyConfigToSolrHome(InputStream configIs, File destFile) throws IOException {",33025acc016e68691cbde972fb62e2b766178b80,1,1
BufferedInputStream bis = null;,33025acc016e68691cbde972fb62e2b766178b80,1,1
BufferedOutputStream bos = null;,33025acc016e68691cbde972fb62e2b766178b80,1,1
bis = new BufferedInputStream(configIs);,33025acc016e68691cbde972fb62e2b766178b80,1,1
"bos = new BufferedOutputStream(new FileOutputStream(destFile, false));",33025acc016e68691cbde972fb62e2b766178b80,1,1
boolean eof = false;,33025acc016e68691cbde972fb62e2b766178b80,1,1
while (!eof) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
int temp = bis.read();,33025acc016e68691cbde972fb62e2b766178b80,1,1
if (temp == -1) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
eof = true;,33025acc016e68691cbde972fb62e2b766178b80,1,1
if (bis != null) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
if (bos != null) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
* @param solrServer,33025acc016e68691cbde972fb62e2b766178b80,1,1
* @throws IOException,33025acc016e68691cbde972fb62e2b766178b80,1,1
protected void buildSolrCoreDirectories(String solrServer) throws IOException {,33025acc016e68691cbde972fb62e2b766178b80,1,1
"File cores = new File(new File(solrServer), ""cores"");",33025acc016e68691cbde972fb62e2b766178b80,1,1
if (!cores.exists() || !cores.isDirectory()) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
"File primaryCoreDir = new File(cores, ""primary"");",33025acc016e68691cbde972fb62e2b766178b80,1,1
if (!primaryCoreDir.exists() || !primaryCoreDir.isDirectory()) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
"File primaryCoreFile = new File(primaryCoreDir, ""core.properties"");",33025acc016e68691cbde972fb62e2b766178b80,1,1
if (!primaryCoreFile.exists()) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
FileOutputStream os = new FileOutputStream(primaryCoreFile);,33025acc016e68691cbde972fb62e2b766178b80,1,1
Properties prop = new Properties();,33025acc016e68691cbde972fb62e2b766178b80,1,1
"File primaryConfDir = new File(primaryCoreDir, ""conf"");",33025acc016e68691cbde972fb62e2b766178b80,1,1
if (!primaryConfDir.exists() || !primaryConfDir.isDirectory()) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
"File reindexCoreDir = new File(cores, ""reindex"");",33025acc016e68691cbde972fb62e2b766178b80,1,1
if (!reindexCoreDir.exists() || !reindexCoreDir.isDirectory()) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
"File reindexCoreFile = new File(reindexCoreDir, ""core.properties"");",33025acc016e68691cbde972fb62e2b766178b80,1,1
if (!reindexCoreFile.exists()) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
FileOutputStream os = new FileOutputStream(reindexCoreFile);,33025acc016e68691cbde972fb62e2b766178b80,1,1
"File reindexConfDir = new File(reindexCoreDir, ""conf"");",33025acc016e68691cbde972fb62e2b766178b80,1,1
if (!reindexConfDir.exists() || !reindexConfDir.isDirectory()) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
public SolrSearchServiceImpl(SolrClient solrServer) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
* Solr configurations that use embedded/standalone per environment.,33025acc016e68691cbde972fb62e2b766178b80,1,1
*,33025acc016e68691cbde972fb62e2b766178b80,1,1
* @param reindexServer,33025acc016e68691cbde972fb62e2b766178b80,1,1
* @throws SAXException,33025acc016e68691cbde972fb62e2b766178b80,1,1
* @throws ParserConfigurationException,33025acc016e68691cbde972fb62e2b766178b80,1,1
"public SolrSearchServiceImpl(String solrServer, String reindexServer)",33025acc016e68691cbde972fb62e2b766178b80,1,1
"throws IOException, ParserConfigurationException, SAXException {",33025acc016e68691cbde972fb62e2b766178b80,1,1
"* Solr configurations that use embedded/standalone per environment, along with an admin server.",33025acc016e68691cbde972fb62e2b766178b80,1,1
"public SolrSearchServiceImpl(SolrClient solrServer, SolrClient reindexServer) {",33025acc016e68691cbde972fb62e2b766178b80,1,1
"public SolrSearchServiceImpl(SolrClient solrServer, SolrClient reindexServer, SolrClient adminServer) {",33025acc016e68691cbde972fb62e2b766178b80,1,1
public void afterPropertiesSet() throws Exception {,33025acc016e68691cbde972fb62e2b766178b80,1,1
if (SolrContext.isSolrCloudMode()) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
CloudSolrClient primary = (CloudSolrClient) SolrContext.getServer();,33025acc016e68691cbde972fb62e2b766178b80,1,1
CloudSolrClient reindex = (CloudSolrClient) SolrContext.getReindexServer();,33025acc016e68691cbde972fb62e2b766178b80,1,1
if (primary == null || reindex == null) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
"+ ""your configuration and ensure that you are passing a different instance for each to the """,33025acc016e68691cbde972fb62e2b766178b80,1,1
if (primary == reindex) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
"//These are the same object instances.  They should be separate instances, with generally",33025acc016e68691cbde972fb62e2b766178b80,1,1
"//the same configuration, except for the defaultCollection name.",33025acc016e68691cbde972fb62e2b766178b80,1,1
"+ ""Zookeeper addresses should be the same."");",33025acc016e68691cbde972fb62e2b766178b80,1,1
//Set the default collection if it's null,33025acc016e68691cbde972fb62e2b766178b80,1,1
if (StringUtils.isEmpty(primary.getDefaultCollection())) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
if (StringUtils.isEmpty(reindex.getDefaultCollection())) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
"if (Objects.equals(primary.getDefaultCollection(), reindex.getDefaultCollection())) {",33025acc016e68691cbde972fb62e2b766178b80,1,1
"+ ""unique defaultCollection property.  All other things like the """,33025acc016e68691cbde972fb62e2b766178b80,1,1
Set<String> collectionNames = primary.getZkStateReader().getClusterState().getCollections();,33025acc016e68691cbde972fb62e2b766178b80,1,1
if (collectionNames == null) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
collectionNames = new HashSet<String>();,33025acc016e68691cbde972fb62e2b766178b80,1,1
Aliases aliases = primary.getZkStateReader().getAliases();,33025acc016e68691cbde972fb62e2b766178b80,1,1
"Map<String, String> aliasCollectionMap = aliases.getCollectionAliasMap();",33025acc016e68691cbde972fb62e2b766178b80,1,1
if (aliasCollectionMap == null || !aliasCollectionMap.containsKey(primary.getDefaultCollection())) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
"collectionName = ""blcCollection"" + i;",33025acc016e68691cbde972fb62e2b766178b80,1,1
if (collectionNames.contains(collectionName)) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
collectionName = null;,33025acc016e68691cbde972fb62e2b766178b80,1,1
//Aliases can be mapped to collections that don't exist.... Make sure the collection exists,33025acc016e68691cbde972fb62e2b766178b80,1,1
"collectionName = collectionName.split("","")[0];",33025acc016e68691cbde972fb62e2b766178b80,1,1
if (!collectionNames.contains(collectionName)) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
//Reload the collection names,33025acc016e68691cbde972fb62e2b766178b80,1,1
collectionNames = primary.getZkStateReader().getClusterState().getCollections();,33025acc016e68691cbde972fb62e2b766178b80,1,1
//Reload these maps for the next collection.,33025acc016e68691cbde972fb62e2b766178b80,1,1
aliases = primary.getZkStateReader().getAliases();,33025acc016e68691cbde972fb62e2b766178b80,1,1
aliasCollectionMap = aliases.getCollectionAliasMap();,33025acc016e68691cbde972fb62e2b766178b80,1,1
if (aliasCollectionMap == null || !aliasCollectionMap.containsKey(reindex.getDefaultCollection())) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
public void destroy() throws Exception {,33025acc016e68691cbde972fb62e2b766178b80,1,1
if (SolrContext.getServer() != null) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
&& SolrContext.getReindexServer() != SolrContext.getServer()) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
&& SolrContext.getAdminServer() != SolrContext.getReindexServer()) {,33025acc016e68691cbde972fb62e2b766178b80,1,1
"response = SolrContext.getServer().query(solrQuery, getSolrQueryMethod());",33025acc016e68691cbde972fb62e2b766178b80,1,1
import org.springframework.beans.factory.annotation.Autowired;,33025acc016e68691cbde972fb62e2b766178b80,0,0
import org.springframework.beans.factory.annotation.Qualifier;,33025acc016e68691cbde972fb62e2b766178b80,0,0
"@Qualifier(""blCatalogSolrConfiguration"")",33025acc016e68691cbde972fb62e2b766178b80,0,0
protected SolrConfiguration solrConfiguration;,33025acc016e68691cbde972fb62e2b766178b80,0,0
"//This is for SolrCloud.  We assume that we are always searching against a collection aliased as ""primaryName""",33025acc016e68691cbde972fb62e2b766178b80,0,0
"solrQuery.setParam(""collection"", solrConfiguration.getPrimaryName()); //This should be ignored if not using SolrCloud",33025acc016e68691cbde972fb62e2b766178b80,0,0
"solrQuery.addFilterQuery(shs.getNamespaceFieldName() + "":(\"""" + solrConfiguration.getNamespace() + ""\"")"");",33025acc016e68691cbde972fb62e2b766178b80,0,0
@Override,33025acc016e68691cbde972fb62e2b766178b80,0,0
solrConfiguration.destroy();,33025acc016e68691cbde972fb62e2b766178b80,0,0
import org.apache.commons.io.IOUtils;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import org.apache.solr.client.solrj.SolrClient;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import org.apache.solr.client.solrj.embedded.EmbeddedSolrServer;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import org.apache.solr.client.solrj.impl.CloudSolrClient;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import org.apache.solr.client.solrj.request.CollectionAdminRequest;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import org.apache.solr.common.cloud.Aliases;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import org.apache.solr.core.CoreContainer;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import org.springframework.beans.factory.InitializingBean;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import org.xml.sax.SAXException;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import java.io.BufferedInputStream;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import java.io.BufferedOutputStream;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import java.io.BufferedReader;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import java.io.File;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import java.io.FileOutputStream;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import java.io.FileReader;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import java.io.InputStream;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import java.util.HashSet;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import java.util.Properties;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import java.util.Set;,33025acc016e68691cbde972fb62e2b766178b80,0,1
import javax.xml.parsers.ParserConfigurationException;,33025acc016e68691cbde972fb62e2b766178b80,0,1
"@Value(""${solr.cloud.configName}"")",33025acc016e68691cbde972fb62e2b766178b80,0,1
"@Value(""${solr.cloud.defaultNumShards}"")",33025acc016e68691cbde972fb62e2b766178b80,0,1
//allow for an override of tmpdir,33025acc016e68691cbde972fb62e2b766178b80,0,1
tempDir.mkdirs();,33025acc016e68691cbde972fb62e2b766178b80,0,1
"copyConfigToSolrHome(this.getClass().getResourceAsStream(""/solr-default.xml""), solrXml);",33025acc016e68691cbde972fb62e2b766178b80,0,1
buildSolrCoreDirectories(solrServer);,33025acc016e68691cbde972fb62e2b766178b80,0,1
"LOG.debug(String.format(""Using [%s] as solrhome"", solrServer));",33025acc016e68691cbde972fb62e2b766178b80,0,1
"LOG.debug(String.format(""Using [%s] as solr.xml"", solrXml.getAbsoluteFile()));",33025acc016e68691cbde972fb62e2b766178b80,0,1
"LOG.trace(""Contents of solr.xml:"");",33025acc016e68691cbde972fb62e2b766178b80,0,1
LOG.trace(line);,33025acc016e68691cbde972fb62e2b766178b80,0,1
br.close();,33025acc016e68691cbde972fb62e2b766178b80,0,1
//do nothing,33025acc016e68691cbde972fb62e2b766178b80,0,1
"LOG.trace(""Done printing solr.xml"");",33025acc016e68691cbde972fb62e2b766178b80,0,1
SolrContext.setPrimaryServer(primaryServer);,33025acc016e68691cbde972fb62e2b766178b80,0,1
SolrContext.setReindexServer(reindexServer);,33025acc016e68691cbde972fb62e2b766178b80,0,1
bos.write(temp);,33025acc016e68691cbde972fb62e2b766178b80,0,1
bos.flush();,33025acc016e68691cbde972fb62e2b766178b80,0,1
bis.close();,33025acc016e68691cbde972fb62e2b766178b80,0,1
bos.close();,33025acc016e68691cbde972fb62e2b766178b80,0,1
/**,33025acc016e68691cbde972fb62e2b766178b80,0,1
*/,33025acc016e68691cbde972fb62e2b766178b80,0,1
"//Create a ""cores"" directory if it does not exist",33025acc016e68691cbde972fb62e2b766178b80,0,1
cores.mkdirs();,33025acc016e68691cbde972fb62e2b766178b80,0,1
"//Create a ""cores/primary"" if it does not exist",33025acc016e68691cbde972fb62e2b766178b80,0,1
primaryCoreDir.mkdirs();,33025acc016e68691cbde972fb62e2b766178b80,0,1
"//Create a cores/primary/core.properties file, populated with ""name=primary""",33025acc016e68691cbde972fb62e2b766178b80,0,1
"prop.put(""name"", SolrContext.PRIMARY);",33025acc016e68691cbde972fb62e2b766178b80,0,1
"prop.store(os, ""Generated Solr core properties file"");",33025acc016e68691cbde972fb62e2b766178b80,0,1
IOUtils.closeQuietly(os);,33025acc016e68691cbde972fb62e2b766178b80,0,1
"//Create a ""cores/primary/conf"" directory if it does not exist",33025acc016e68691cbde972fb62e2b766178b80,0,1
primaryConfDir.mkdirs();,33025acc016e68691cbde972fb62e2b766178b80,0,1
"//Create a ""cores/reindex"" if it does not exist",33025acc016e68691cbde972fb62e2b766178b80,0,1
reindexCoreDir.mkdirs();,33025acc016e68691cbde972fb62e2b766178b80,0,1
"//Create a cores/reindex/core.properties file, populated with ""name=reindex""",33025acc016e68691cbde972fb62e2b766178b80,0,1
"prop.put(""name"", SolrContext.REINDEX);",33025acc016e68691cbde972fb62e2b766178b80,0,1
"//Create a ""cores/reindex/conf"" directory if it does not exist",33025acc016e68691cbde972fb62e2b766178b80,0,1
reindexConfDir.mkdirs();,33025acc016e68691cbde972fb62e2b766178b80,0,1
SolrContext.setPrimaryServer(solrServer);,33025acc016e68691cbde972fb62e2b766178b80,0,1
this(solrServer);,33025acc016e68691cbde972fb62e2b766178b80,0,1
SolrContext.setAdminServer(adminServer);,33025acc016e68691cbde972fb62e2b766178b80,0,1
@Override,33025acc016e68691cbde972fb62e2b766178b80,0,1
"throw new IllegalStateException(""The primary and reindex CloudSolrServers must not be null. Check """,33025acc016e68691cbde972fb62e2b766178b80,0,1
"+ ""constructor of """,33025acc016e68691cbde972fb62e2b766178b80,0,1
+ this.getClass().getName(),33025acc016e68691cbde972fb62e2b766178b80,0,1
"+ "" and ensure that each has a null (empty)""",33025acc016e68691cbde972fb62e2b766178b80,0,1
"+ "" defaultCollection property, or ensure that defaultCollection is unique between""",33025acc016e68691cbde972fb62e2b766178b80,0,1
"throw new IllegalStateException(""The primary and reindex CloudSolrServers must be different instances """,33025acc016e68691cbde972fb62e2b766178b80,0,1
primary.setDefaultCollection(SolrContext.PRIMARY);,33025acc016e68691cbde972fb62e2b766178b80,0,1
reindex.setDefaultCollection(SolrContext.REINDEX);,33025acc016e68691cbde972fb62e2b766178b80,0,1
"throw new IllegalStateException(""The primary and reindex CloudSolrServers must have a null (empty) or """,33025acc016e68691cbde972fb62e2b766178b80,0,1
primary.connect(); //This is required to ensure no NPE!,33025acc016e68691cbde972fb62e2b766178b80,0,1
//Get a list of existing collections so we don't overwrite one,33025acc016e68691cbde972fb62e2b766178b80,0,1
//Create a completely new collection,33025acc016e68691cbde972fb62e2b766178b80,0,1
break;,33025acc016e68691cbde972fb62e2b766178b80,0,1
new CollectionAdminRequest.Create().setCollectionName(collectionName).setNumShards(solrCloudNumShards),33025acc016e68691cbde972fb62e2b766178b80,0,1
.setConfigName(solrCloudConfigName).process(primary);,33025acc016e68691cbde972fb62e2b766178b80,0,1
new CollectionAdminRequest.CreateAlias().setAliasName(primary.getDefaultCollection()),33025acc016e68691cbde972fb62e2b766178b80,0,1
.setAliasedCollections(collectionName).process(primary);,33025acc016e68691cbde972fb62e2b766178b80,0,1
new CollectionAdminRequest.CreateAlias().setAliasName(reindex.getDefaultCollection()),33025acc016e68691cbde972fb62e2b766178b80,0,1
SolrContext.getServer().shutdown();,33025acc016e68691cbde972fb62e2b766178b80,0,1
"LOG.error(""Error shutting down primary SolrClient (client)."", e);",33025acc016e68691cbde972fb62e2b766178b80,0,1
if (SolrContext.getReindexServer() != null,33025acc016e68691cbde972fb62e2b766178b80,0,1
SolrContext.getReindexServer().shutdown();,33025acc016e68691cbde972fb62e2b766178b80,0,1
"LOG.error(""Error shutting down reindex SolrClient (client)."", e);",33025acc016e68691cbde972fb62e2b766178b80,0,1
if (SolrContext.getAdminServer() != null,33025acc016e68691cbde972fb62e2b766178b80,0,1
&& SolrContext.getAdminServer() != SolrContext.getServer(),33025acc016e68691cbde972fb62e2b766178b80,0,1
SolrContext.getAdminServer().shutdown();,33025acc016e68691cbde972fb62e2b766178b80,0,1
"LOG.error(""Error shutting down admin SolrClient (client)."", e);",33025acc016e68691cbde972fb62e2b766178b80,0,1
"//This is for SolrCloud.  We assume that we are always searching against a collection aliased as ""PRIMARY""",33025acc016e68691cbde972fb62e2b766178b80,0,1
"solrQuery.setParam(""collection"", SolrContext.PRIMARY); //This should be ignored if not using SolrCloud",33025acc016e68691cbde972fb62e2b766178b80,0,1
"solrQuery.addFilterQuery(shs.getNamespaceFieldName() + "":(\"""" + shs.getCurrentNamespace() + ""\"")"");",33025acc016e68691cbde972fb62e2b766178b80,0,1
"entityValidatorService.validate(entity, populatedInstance, mergedProperties, this);",c8c764b456d52bdbea69567c3b0b66f188c1e953,1,0
import java.io.Serializable;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.lang.reflect.Field;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.lang.reflect.InvocationTargetException;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.lang.reflect.Method;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.lang.reflect.ParameterizedType;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.math.BigDecimal;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.sql.Timestamp;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.text.DecimalFormat;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.text.NumberFormat;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.text.SimpleDateFormat;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.ArrayList;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.Calendar;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.Collection;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.Collections;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.Comparator;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.Date;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.HashMap;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.List;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.Locale;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.Map;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.Map.Entry;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.StringTokenizer;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import javax.annotation.Resource;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import javax.persistence.criteria.CriteriaBuilder;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import javax.persistence.criteria.From;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import javax.persistence.criteria.Path;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import javax.persistence.criteria.Predicate;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.io.Serializable;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.lang.reflect.Field;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.lang.reflect.InvocationTargetException;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.lang.reflect.Method;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.lang.reflect.ParameterizedType;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.math.BigDecimal;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.sql.Timestamp;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.text.DecimalFormat;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.text.NumberFormat;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.text.SimpleDateFormat;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.ArrayList;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.Calendar;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.Collection;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.Collections;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.Comparator;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.Date;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.HashMap;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.List;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.Locale;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.Map;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.Map.Entry;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.StringTokenizer;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import javax.annotation.Resource;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import javax.persistence.criteria.CriteriaBuilder;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import javax.persistence.criteria.From;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import javax.persistence.criteria.Path;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import javax.persistence.criteria.Predicate;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
"entityValidatorService.validate(entity, populatedInstance, mergedProperties);",c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.io.Serializable;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.lang.reflect.Field;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.lang.reflect.InvocationTargetException;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.lang.reflect.Method;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.lang.reflect.ParameterizedType;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.math.BigDecimal;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.sql.Timestamp;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.text.DecimalFormat;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.text.NumberFormat;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.text.SimpleDateFormat;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.ArrayList;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.Calendar;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.Collection;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.Collections;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.Comparator;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.Date;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.HashMap;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.List;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.Locale;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.Map;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.Map.Entry;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.util.StringTokenizer;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import javax.annotation.Resource;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import javax.persistence.criteria.CriteriaBuilder;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import javax.persistence.criteria.From;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import javax.persistence.criteria.Path;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import javax.persistence.criteria.Predicate;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
"Collection collection = (Collection) fieldManager.getFieldValue(foreignInstance, foreignKey.getOriginatingField());",c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
collection.remove(instance);,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,0
import java.io.Serializable;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.lang.reflect.Field;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.lang.reflect.InvocationTargetException;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.lang.reflect.Method;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.lang.reflect.ParameterizedType;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.math.BigDecimal;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.sql.Timestamp;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.text.DecimalFormat;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.text.NumberFormat;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.text.SimpleDateFormat;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.ArrayList;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.Calendar;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.Collection;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.Collections;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.Comparator;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.Date;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.HashMap;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.List;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.Locale;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.Map;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.Map.Entry;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import java.util.StringTokenizer;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import javax.annotation.Resource;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import javax.persistence.criteria.CriteriaBuilder;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import javax.persistence.criteria.From;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import javax.persistence.criteria.Path;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
import javax.persistence.criteria.Predicate;,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
"Collection collection = (Collection) fieldManager.getFieldValue(instance, property.getName());",c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
collection.remove(foreignInstance);,c8c764b456d52bdbea69567c3b0b66f188c1e953,0,1
"This test is currently not supported, as the order service only supports like item merging",69877cda3b323c2da3a26f32c48e1111e61fed45,9,1
"//FIXME: After the change to cascading the deletion on PaymentResponseItems, this test does not work but for a really",69877cda3b323c2da3a26f32c48e1111e61fed45,6,0
"@Test(groups = { ""addPaymentToOrderLegacy"" }, dataProvider = ""basicPaymentInfo"", dataProviderClass = PaymentInfoDataProvider.class, dependsOnGroups = { ""checkOrderItemsLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,6,1
"@Test(groups = ""addFulfillmentGroupToOrderFirstLegacy"", dataProvider = ""basicFulfillmentGroupLegacy"", dataProviderClass = FulfillmentGroupDataProvider.class, dependsOnGroups = { ""addPaymentToOrderLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,5,1
"throw new UnsupportedOperationException(""At this time, OrderService only supports merging like items in the cart"");",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""createCartForCustomerLegacy"" }, dependsOnGroups = { ""readCustomer"", ""createPhone"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""findCurrentCartForCustomerLegacy"" }, dependsOnGroups = { ""readCustomer"", ""createPhone"", ""createCartForCustomerLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""addItemToOrderLegacy"" }, dependsOnGroups = { ""findCurrentCartForCustomerLegacy"", ""createSku"", ""testCatalog"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
public void addItemToOrder() throws PricingException {,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""addAnotherItemToOrderLegacy"" }, dependsOnGroups = { ""addItemToOrderLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
public void addAnotherItemToOrder() throws PricingException {,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
assert item2.getQuantity() == 1;  // item-was not auto-merged with prior items.,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""addBundleToOrderLegacy"" }, dependsOnGroups = { ""addAnotherItemToOrderLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
public void addBundleToOrder() throws PricingException {,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""removeBundleFromOrderLegacy"" }, dependsOnGroups = { ""addBundleToOrderLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
public void removeBundleFromOrder() throws PricingException {,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""getItemsForOrderLegacy"" }, dependsOnGroups = { ""removeBundleFromOrderLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""updateItemsInOrderLegacy"" }, dependsOnGroups = { ""getItemsForOrderLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"public void updateItemsInOrder() throws ItemNotFoundException, PricingException {",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""removeItemFromOrderLegacy"" }, dependsOnGroups = { ""getItemsForOrderLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
public void removeItemFromOrder() throws PricingException {,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""checkOrderItemsLegacy"" }, dependsOnGroups = { ""removeItemFromOrderLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
public void checkOrderItems() throws PricingException {,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
assert order.getOrderItems().size() == 1;,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
public void addFulfillmentGroupToOrderFirst(FulfillmentGroup fulfillmentGroup) throws PricingException {,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""removeFulfillmentGroupFromOrderLegacy"" }, dependsOnGroups = { ""addFulfillmentGroupToOrderFirstLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
public void removeFulfillmentGroupFromOrder() throws PricingException {,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""findFulFillmentGroupForOrderFirstLegacy"" }, dependsOnGroups = { ""addFulfillmentGroupToOrderFirstLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""findDefaultFulFillmentGroupForOrderLegacy"" }, dependsOnGroups = { ""findCurrentCartForCustomerLegacy"", ""addFulfillmentGroupToOrderFirstLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""removeItemFromOrderAfterDefaultFulfillmentGroupLegacy"" }, dependsOnGroups = { ""addFulfillmentGroupToOrderFirstLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""getOrdersForCustomerLegacy"" }, dependsOnGroups = { ""readCustomer"", ""findCurrentCartForCustomerLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""findCartForAnonymousCustomerLegacy"" }, dependsOnGroups = { ""getOrdersForCustomerLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""findOrderByOrderNumberLegacy"" }, dependsOnGroups = { ""findCartForAnonymousCustomerLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
public void findOrderByOrderNumber() throws PricingException {,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""findNamedOrderForCustomerLegacy"" }, dependsOnGroups = { ""findOrderByOrderNumberLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
public void findNamedOrderForCustomer() throws PricingException {,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""testReadOrdersForCustomerLegacy"" }, dependsOnGroups = { ""findNamedOrderForCustomerLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
public void testReadOrdersForCustomer() throws PricingException {,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""testOrderPropertiesLegacy"" }, dependsOnGroups = { ""testReadOrdersForCustomerLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
public void testOrderProperties() throws PricingException {,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""testNamedOrderForCustomerLegacy"" }, dependsOnGroups = { ""testOrderPropertiesLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
public void testNamedOrderForCustomer() throws PricingException {,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
public void testAddSkuToOrder() throws PricingException {,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""testOrderPaymentInfosLegacy"" }, dataProvider = ""basicPaymentInfo"", dataProviderClass = PaymentInfoDataProvider.class)",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
public void testOrderPaymentInfos(OrderPayment info) throws PricingException {,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""testSubmitOrderLegacy"" }, dependsOnGroups = { ""findNamedOrderForCustomerLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
public void testSubmitOrder() throws PricingException {,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
public void testCreateNamedOrder() throws PricingException {,69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
"@Test(groups = { ""testOrderFulfillmentGroupsLegacy"" }, dataProvider = ""basicShippingRates"", dataProviderClass = ShippingRateDataProvider.class)",69877cda3b323c2da3a26f32c48e1111e61fed45,4,1
protected boolean automaticallyMergeLikeItems = true;,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
//strange reason; the list of PaymentResponseItems is getting removed from the Hibernate session for some really weird,69877cda3b323c2da3a26f32c48e1111e61fed45,3,0
//        Order order = orderDao.readOrderById(orderId);,69877cda3b323c2da3a26f32c48e1111e61fed45,3,0
//        assert order != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,3,0
Order order = orderDao.readOrderById(orderId);,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
assert order != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
DefaultTransactionDefinition def = new DefaultTransactionDefinition();,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
def = new DefaultTransactionDefinition();,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
"protected void finalizeTransaction(TransactionStatus status, boolean isError) {",69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
boolean isActive = false;,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
"* Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the ""Custom License"")",69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
public void createCartForCustomer() {,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
Order order = cartService.createNewCartForCustomer(customer);,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
assert order != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
public void findCurrentCartForCustomer() {,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
Order order = cartService.findCartForCustomer(customer);,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
Order order = cartService.findOrderById(orderId);,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
assert item != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
"BundleOrderItem item = (BundleOrderItem) cartService.addBundleItemToOrder(order, bundleRequest);",69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
assert item.getQuantity() == 1;,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
assert bundleOrderItem.getDiscreteOrderItems().size() == 1;,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
assert items.size() == startingSize - 1;,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
public void getItemsForOrder() {,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
assert orderItems.size() == numOrderItems - 1;,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
public void addPaymentToOrder(OrderPayment paymentInfo) {,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
assert fg != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
public void findFillmentGroupForOrderFirst() {,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
public void addItemToFulfillmentgroupSecond() {,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
* (beforeRemove - afterRemove) == 1; },69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
public void findDefaultFillmentGroupForOrder() {,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
public void removeItemFromOrderAfterFulfillmentGroups() {,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
public void getOrdersForCustomer() {,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
public void findCartForAnonymousCustomer() {,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
assert order == null;,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
boolean containsOrder = false;,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
assert containsOrder == true;,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
"Order order = cartService.createNamedOrderForCustomer(""Birthday Order"", customer);",69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
"Order order = cartService.createNamedOrderForCustomer(""Pants Order"", customer);",69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
boolean foundInfo = false;,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
assert foundInfo == true;,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
public void findCartForNullCustomerId() {,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
Order order = initializeExistingCart(customer);,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
assert resultOrder.getFulfillmentGroups().size() == 1;,69877cda3b323c2da3a26f32c48e1111e61fed45,3,1
if (!automaticallyMergeLikeItems) {,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"//reason. This only occurs sometimes, so it is probably due to the somewhat random ordering that TestNG puts around tests",69877cda3b323c2da3a26f32c48e1111e61fed45,2,0
"//    @Test(groups = {""deleteOrderForCustomer""}, dependsOnGroups = {""readOrder""})",69877cda3b323c2da3a26f32c48e1111e61fed45,2,0
//    public void deleteOrderForCustomer(){,69877cda3b323c2da3a26f32c48e1111e61fed45,2,0
//        assert order.getId() != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,0
"@Test(groups = {""deleteOrderForCustomer""}, dependsOnGroups = {""readOrder""})",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
public void deleteOrderForCustomer(){,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert order.getId() != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"TransactionStatus status = TransactionUtils.createTransaction(""saveOrder"",",69877cda3b323c2da3a26f32c48e1111e61fed45,2,0
"status = TransactionUtils.createTransaction(""saveOrder"",",69877cda3b323c2da3a26f32c48e1111e61fed45,2,0
TransactionStatus status = transactionManager.getTransaction(def);,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
status = transactionManager.getTransaction(def);,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
if (!status.isRollbackOnly()) {,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
isActive = true;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
} catch (Exception e) {,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
if (isActive) {,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
if (isError) {,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
} else {,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
* unless the restrictions on use therein are violated and require payment to Broadleaf in which case,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
* between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
public class LegacyOrderTest extends LegacyOrderBaseTest {,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert order.getId() != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert sku.getId() != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
DiscreteOrderItemRequest itemRequest = new DiscreteOrderItemRequest();,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"DiscreteOrderItem item = (DiscreteOrderItem) cartService.addDiscreteItemToOrder(order, itemRequest);",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert item.getQuantity() == numOrderItems;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert item.getSku() != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"DiscreteOrderItem item = (DiscreteOrderItem) cartService.addDiscreteItemToOrder(order, itemRequest, true);",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert item.getQuantity() == 2;  // item-was merged with prior item.,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
order = cartService.findOrderById(orderId);,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
// re-price the order without automatically merging.,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
DiscreteOrderItemRequest itemRequest2 = new DiscreteOrderItemRequest();,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert item2.getSku() != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
BundleOrderItemRequest bundleRequest = new BundleOrderItemRequest();,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert orderItems.size() == numOrderItems;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
BundleOrderItem bundleOrderItem = (BundleOrderItem) orderItemService.readOrderItemById(bundleOrderItemId);,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert bundleOrderItem != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert bundleOrderItem.getDiscreteOrderItems() != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert items != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert orderItems != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
OrderItem item = orderItems.get(0);,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert updatedItem != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert updatedItem.getQuantity() == 10;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
List<OrderItem> updateItems = new ArrayList<OrderItem> (order.getOrderItems());,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert order.getOrderItems().get(0).getQuantity() == 15;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
//the removal from the previous test was rolled back,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert bundleOrderItem == null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert payment != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert payment.getOrder() != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"FulfillmentGroup fg = cartService.addFulfillmentGroupToOrder(order, fulfillmentGroup);",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert fg.getId() != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
FulfillmentGroup item = fgItems.get(0);,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
FulfillmentGroup fg = order.getFulfillmentGroups().get(0);,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"FulfillmentGroup fulfillmentGroup = em.find(FulfillmentGroupImpl.class, fulfillmentGroupId);",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"@Test(groups= {""addItemToFulfillmentGroupSecondLegacy""}, dependsOnGroups = { ""addFulfillmentGroupToOrderFirstLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
FulfillmentGroup newFg = new FulfillmentGroupImpl();,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
} catch (PricingException e) {,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
throw new RuntimeException(e);,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"* @Test(groups = { ""removeFulFillmentGroupForOrderFirst"" }, dependsOnGroups",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"* = { ""findCurrentCartForCustomer"",",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"* ""addFulfillmentGroupToOrderFirst"" }) public void",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
* removeFulFillmentGroupForOrderFirst() { int beforeRemove =,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"* FulfillmentGroup fulfillmentGroup = entityManager.find(FulfillmentGroupImpl.class,",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
FulfillmentGroup fg = cartService.findDefaultFulfillmentGroupForOrder(order);,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"* @Test(groups = { ""removeDefaultFulFillmentGroupForOrder"" },",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"* dependsOnGroups = { ""findCurrentCartForCustomer"",",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
* removeDefaultFulFillmentGroupForOrder() { int beforeRemove =,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
for (FulfillmentGroupItem fulfillmentGroupItem : fg.getFulfillmentGroupItems()) {,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert orders != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
order = cartService.createNewCartForCustomer(customer);,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
Order newOrder = cartService.findOrderById(orderId);,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert newOrder != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert newOrder.getCustomer() != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"order = cartService.save(order, false);",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"Order newOrder = cartService.findOrderByOrderNumber(""3456"");",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
Order nullOrder = cartService.findOrderByOrderNumber(null);,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert nullOrder == null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"Order newOrder = cartService.findNamedOrderForCustomer(""COOL ORDER"", customer);",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
containsOrder = true;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
containsOrder = false;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert order.getSubTotal() == null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert order.getTotal() == null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert cartService.findOrderById(orderId) == null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"@Test(groups = { ""testAddSkuToOrderLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
Category category = new CategoryImpl();,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
Sku newDefaultSku = new SkuImpl();,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
Product newProduct = new ProductImpl();,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert orderItem != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert skuNullOrderItem == null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert quantityNullOrderItem == null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert orderNullOrderItem == null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert productNullOrderItem != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert categoryNullOrderItem != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert order.getPayments() != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
foundInfo = true;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert cartService.readPaymentInfosForOrder(order) != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
Order confirmedOrder = cartService.confirmOrder(order);,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert cartService.findCartForCustomer(new CustomerImpl()) == null;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"@Test(groups = { ""testCartAndNamedOrderLegacy"" })",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
"public void testAddFulfillmentGroupToOrder(ShippingRate shippingRate, ShippingRate sr2) throws PricingException, ItemNotFoundException{",69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
FulfillmentGroupRequest fgRequest = new FulfillmentGroupRequest();,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
List<FulfillmentGroupItemRequest> fgiRequests = new ArrayList<FulfillmentGroupItemRequest>();,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
for (OrderItem orderItem : order.getOrderItems()) {,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
FulfillmentGroupItemRequest fgiRequest = new FulfillmentGroupItemRequest();,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
Order resultOrder = cartService.findOrderById(order.getId());,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert resultOrder.getFulfillmentGroups().get(0).getFulfillmentGroupItems().size() == 2;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
assert resultOrder.getFulfillmentGroups().size() == 0;,69877cda3b323c2da3a26f32c48e1111e61fed45,2,1
protected boolean automaticallyMergeLikeItems;,69877cda3b323c2da3a26f32c48e1111e61fed45,1,0
},69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
//    @Transactional,69877cda3b323c2da3a26f32c48e1111e61fed45,1,0
//    },69877cda3b323c2da3a26f32c48e1111e61fed45,1,0
@Transactional,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
},69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
try {,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
},69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
/*,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"* Licensed under the Broadleaf Fair Use License Agreement, Version 1.0",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"* the Broadleaf End User License Agreement (EULA), Version 1.1",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
*/,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
import org.springframework.transaction.annotation.Transactional;,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
private Long orderId = null;,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
private int numOrderItems = 0;,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"@Resource(name = ""blOrderItemService"")",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
@Transactional,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"String userName = ""customer1"";",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
Customer customer = customerService.readCustomerByUsername(userName);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
this.orderId = order.getId();,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
},69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
@Transactional(propagation = Propagation.REQUIRES_NEW),69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
Sku sku = skuDao.readFirstSku();,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert item.getSku().equals(sku);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"DiscreteOrderItem item2 = (DiscreteOrderItem) cartService.addDiscreteItemToOrder(order, itemRequest2, true);",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert item2.getSku().equals(sku);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
//numOrderItems++;,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
bundleOrderItemId = item.getId();,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
List<OrderItem> orderItems = order.getOrderItems();,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
int startingSize = orderItems.size();,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
List<OrderItem> items = order.getOrderItems();,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert orderItems.size() > 0;,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
OrderItem updatedItem = orderItemService.readOrderItemById(item.getId());,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert updatedItem.getPrice().equals(new Money(BigDecimal.valueOf(10000)));,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
OrderPayment payment = order.getPayments().get(order.getPayments().indexOf(paymentInfo));,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
//assert payment.getId() != null;,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert payment.getOrder().equals(order);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
Address address = customerAddressService.readActiveCustomerAddressesByCustomerId(customer.getId()).get(0).getAddress();,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert fg.getAddress().equals(fulfillmentGroup.getAddress());,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert fg.getOrder().equals(order);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert fg.getMethod().equals(fulfillmentGroup.getMethod());,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert fg.getReferenceNumber().equals(fulfillmentGroup.getReferenceNumber());,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
this.fulfillmentGroupId = fg.getId();,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
List<FulfillmentGroup> fgItems = order.getFulfillmentGroups();,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert fgItems.size() > 0;,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
int startingSize = fgItems.size();,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
List<FulfillmentGroup> items = order.getFulfillmentGroups();,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert fg.getAddress().getId().equals(fulfillmentGroup.getAddress().getId());,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
try {,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"newFg = cartService.addItemToFulfillmentGroup(orderItems.get(0), newFg, 1);",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
FulfillmentGroup newNewFg = order.getFulfillmentGroups().get(order.getFulfillmentGroups().indexOf(newFg));,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert(newNewFg.getFulfillmentGroupItems().size() == 1);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
* fulfillmentGroup); int afterRemove =,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
* cartService.findFulfillmentGroupsForOrder(order).size(); assert,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
* int afterRemove =,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert !fulfillmentGroupItem.getOrderItem().equals(item);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"String username = ""customer1"";",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
Customer customer = customerService.readCustomerByUsername(username);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
List<Order> orders = cartService.findOrdersForCustomer(customer);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert orders.size() > 0;,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
Customer customer = customerService.createCustomerFromId(null);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
Long orderId = order.getId();,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert newOrder.getId().equals(orderId);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"nullOrder = cartService.findOrderByOrderNumber("""");",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"List<Order> newOrders = cartService.findOrdersForCustomer(customer, OrderStatus.IN_PROCESS);",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
if (newOrders.contains(order)),69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
{,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"newOrders = cartService.findOrdersForCustomer(customer, null);",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
Calendar testCalendar = Calendar.getInstance();,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert order.getSubmitDate().equals(testCalendar.getTime());,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
customer = customerService.saveCustomer(customer);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"assert order.getName().equals(""Birthday Order"");",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert order.getCustomer().equals(customer);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
Customer customer = customerService.saveCustomer(customerService.createCustomerFromId(null));,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
category = catalogService.saveCategory(category);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
Calendar activeStartCal = Calendar.getInstance();,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
newDefaultSku = catalogService.saveSku(newDefaultSku);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
newProduct = catalogService.saveProduct(newProduct);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"OrderItem orderItem = cartService.addSkuToOrder(order.getId(), newDefaultSku.getId(),",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"OrderItem quantityNullOrderItem = cartService.addSkuToOrder(order.getId(), newDefaultSku.getId(),",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"OrderItem skuNullOrderItem = cartService.addSkuToOrder(order.getId(), null,",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"OrderItem orderNullOrderItem = cartService.addSkuToOrder(null, newDefaultSku.getId(),",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"OrderItem productNullOrderItem = cartService.addSkuToOrder(order.getId(), newDefaultSku.getId(),",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"OrderItem categoryNullOrderItem = cartService.addSkuToOrder(order.getId(), newDefaultSku.getId(),",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
Customer customer = customerService.saveCustomer(createNamedCustomer());,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
for (OrderPayment testInfo : order.getPayments()),69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
if (testInfo.equals(info)),69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
//assert order.getPaymentInfos().size() == 0;,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
confirmedOrder = cartService.findOrderById(confirmedOrder.getId());,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
Long confirmedOrderId = confirmedOrder.getId();,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert orderId.equals(confirmedOrderId);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert confirmedOrder.getStatus().equals(OrderStatus.SUBMITTED);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
shippingRate = shippingRateService.save(shippingRate);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
sr2 = shippingRateService.save(sr2);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
Customer customer = createCustomerWithAddresses();,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
CustomerAddress customerAddress = customerAddressService.readActiveCustomerAddressesByCustomerId(customer.getId()).get(0);,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
resultOrder = cartService.findOrderById(order.getId());,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"FulfillmentGroup defaultFg = cartService.createDefaultFulfillmentGroup(order, customerAddress.getAddress());",69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
assert defaultFg.isPrimary();,69877cda3b323c2da3a26f32c48e1111e61fed45,1,1
"@Value(""${automatically.merge.like.items}"")",69877cda3b323c2da3a26f32c48e1111e61fed45,0,0
import javax.annotation.Resource;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,0
//        orderDao.delete(order);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,0
import javax.annotation.Resource;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
orderDao.delete(order);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.common.util.TransactionUtils;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,0
"TransactionDefinition.PROPAGATION_REQUIRED, transactionManager);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,0
"TransactionUtils.finalizeTransaction(status, transactionManager, false);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,0
"TransactionUtils.finalizeTransaction(status, transactionManager, true);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,0
import org.springframework.transaction.support.DefaultTransactionDefinition;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"def.setName(""saveOrder"");",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
def.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRED);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"finalizeTransaction(status, false);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"finalizeTransaction(status, true);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
//do nothing,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
transactionManager.rollback(status);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
transactionManager.commit(status);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
* #%L,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
* BroadleafCommerce Integration,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
* %%,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
* Copyright (C) 2009 - 2016 Broadleaf Commerce,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"* (the ""Fair Use License"" located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"* (the ""Commercial License"" located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
* shall apply.,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
*,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
* #L%,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
package org.broadleafcommerce.core.order.service.legacy;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.common.money.Money;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.catalog.dao.SkuDao;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.catalog.domain.Category;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.catalog.domain.CategoryImpl;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.catalog.domain.Product;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.catalog.domain.ProductImpl;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.catalog.domain.Sku;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.catalog.domain.SkuImpl;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.order.FulfillmentGroupDataProvider;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.order.domain.BundleOrderItem;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.order.domain.DiscreteOrderItem;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.order.domain.FulfillmentGroup;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.order.domain.FulfillmentGroupImpl;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.order.domain.FulfillmentGroupItem;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.order.domain.Order;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.order.domain.OrderItem;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.order.service.OrderItemService;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.order.service.call.BundleOrderItemRequest;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.order.service.call.DiscreteOrderItemRequest;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.order.service.call.FulfillmentGroupItemRequest;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.order.service.call.FulfillmentGroupRequest;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.order.service.exception.ItemNotFoundException;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.order.service.type.OrderStatus;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.payment.PaymentInfoDataProvider;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.payment.domain.OrderPayment;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.pricing.ShippingRateDataProvider;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.pricing.domain.ShippingRate;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.pricing.service.ShippingRateService;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.pricing.service.exception.PricingException;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.core.pricing.service.workflow.type.ShippingServiceType;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.profile.core.domain.Address;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.profile.core.domain.Customer;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.profile.core.domain.CustomerAddress;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.broadleafcommerce.profile.core.domain.CustomerImpl;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.springframework.test.annotation.Rollback;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.springframework.transaction.annotation.Propagation;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import org.testng.annotations.Test;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import java.math.BigDecimal;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import java.util.ArrayList;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import java.util.Calendar;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import java.util.List;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
import javax.annotation.Resource;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"@SuppressWarnings(""deprecation"")",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
private Long fulfillmentGroupId;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
private Long bundleOrderItemId;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
private OrderItemService orderItemService;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
@Resource,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
private SkuDao skuDao;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
private ShippingRateService shippingRateService;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
@Rollback(false),69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
numOrderItems++;,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
itemRequest.setQuantity(1);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
itemRequest.setSku(sku);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
cartService.setAutomaticallyMergeLikeItems(true);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
assert(order.getOrderItems().size()==1);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
assert(order.getOrderItems().get(0).getQuantity()==2);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
cartService.setAutomaticallyMergeLikeItems(false);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
itemRequest2.setQuantity(1);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
itemRequest2.setSku(sku);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
assert(order.getOrderItems().size()==2);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
assert(order.getOrderItems().get(1).getQuantity()==1);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
bundleRequest.setQuantity(1);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"bundleRequest.setName(""myBundle"");",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
bundleRequest.getDiscreteOrderItems().add(itemRequest);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"cartService.removeItemFromOrder(order, bundleOrderItem);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
//item.setSalePrice(new Money(BigDecimal.valueOf(10000)));,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
((DiscreteOrderItem) item).getSku().setSalePrice(new Money(BigDecimal.valueOf(10000)));,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
((DiscreteOrderItem) item).getSku().setRetailPrice(new Money(BigDecimal.valueOf(10000)));,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
item.setQuantity(10);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"cartService.updateItemQuantity(order, item);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
updateItems.get(0).setQuantity(15);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"cartService.updateItemQuantity(order, updatedItem);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"cartService.removeItemFromOrder(order, item);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"cartService.addPaymentToOrder(order, paymentInfo, null);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
fulfillmentGroup.setOrder(order);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
fulfillmentGroup.setAddress(address);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"cartService.removeFulfillmentGroupFromOrder(order, item);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
assert(orderItems.size() > 0);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
newFg.setAddress(address);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"newFg.setMethod(""standard"");",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
newFg.setService(ShippingServiceType.BANDED_SHIPPING.getType());,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
assert(newNewFg.getFulfillmentGroupItems().get(0).getOrderItem().equals(orderItems.get(0)));,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
* cartService.findFulfillmentGroupsForOrder(order).size();,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"* fulfillmentGroupId); cartService.removeFulfillmentGroupFromOrder(order,",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"* cartService.removeFulfillmentGroupFromOrder(order, fulfillmentGroup);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"order.setOrderNumber(""3456"");",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
order.setStatus(OrderStatus.NAMED);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"order.setName(""COOL ORDER"");",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
order.setStatus(OrderStatus.IN_PROCESS);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
order.setSubmitDate(testCalendar.getTime());,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"cartService.removeNamedOrderForCustomer(""Birthday Order"", customer);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"category.setName(""Pants"");",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"activeStartCal.add(Calendar.DAY_OF_YEAR, -2);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"newDefaultSku.setName(""Leather Pants"");",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
newDefaultSku.setRetailPrice(new Money(44.99));,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
newDefaultSku.setActiveStartDate(activeStartCal.getTime());,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
newDefaultSku.setDiscountable(true);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
newProduct.setDefaultCategory(category);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
newProduct.setDefaultSku(newDefaultSku);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"newProduct.getId(), category.getId(), 2);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"newProduct.getId(), category.getId(), null);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"null, category.getId(), 2);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"newProduct.getId(), null, 2);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"cartService.addPaymentToOrder(order, info);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
//cartService.removeAllPaymentsFromOrder(order);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
@Test,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
category.setActiveStartDate(activeStartCal.getTime());,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
fgiRequest.setOrderItem(orderItem);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
fgiRequest.setQuantity(1);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
fgiRequests.add(fgiRequest);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
fgRequest.setAddress(customerAddress.getAddress());,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
fgRequest.setFulfillmentGroupItemRequests(fgiRequests);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
fgRequest.setOrder(cartService.findCartForCustomer(customer));,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"fgRequest.setMethod(""standard"");",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
fgRequest.setService(ShippingServiceType.BANDED_SHIPPING.getType());,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
cartService.addFulfillmentGroupToOrder(fgRequest);,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"cartService.removeAllFulfillmentGroupsFromOrder(order, false);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"defaultFg.setMethod(""standard"");",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
defaultFg.setService(ShippingServiceType.BANDED_SHIPPING.getType());,69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"cartService.addFulfillmentGroupToOrder(order, defaultFg);",69877cda3b323c2da3a26f32c48e1111e61fed45,0,1
"LOG.warn(""No customer was found on the current request, no cart will be added to the current request. Ensure that the""",c791912933ec9b1311b63b4671d449207cad7e3f,10,0
* @return the anonymous customer in session or null if there is no anonymous customer represented in session,c791912933ec9b1311b63b4671d449207cad7e3f,10,0
* @return the anonymous customer in session or null if there is no anonymous customer represented in session,c791912933ec9b1311b63b4671d449207cad7e3f,10,0
* Gets whether or not the cart should be copied to a new cart and then repriced if,c791912933ec9b1311b63b4671d449207cad7e3f,9,0
* Gets whether or not the cart should be copied to a new cart and then repriced if,c791912933ec9b1311b63b4671d449207cad7e3f,9,1
* @param copyCartWhenSpecifiedStateChanges whether or not the old cart should be copied to a new cart and then repriced,c791912933ec9b1311b63b4671d449207cad7e3f,8,0
* @param copyCartWhenSpecifiedStateChanges whether or not the old cart should be copied to a new cart and then repriced,c791912933ec9b1311b63b4671d449207cad7e3f,8,1
* Returns the anonymous customer that was saved in session. This first checks for a full customer in session (meaning,c791912933ec9b1311b63b4671d449207cad7e3f,8,0
* there is instead just an anonymous customer ID) then this will look up the customer from the database using that and,c791912933ec9b1311b63b4671d449207cad7e3f,8,0
"* <p>So, once Broadleaf detects that the session-based {@link Customer} has been persisted, it should remove the session-based",c791912933ec9b1311b63b4671d449207cad7e3f,8,0
* Returns the anonymous customer that was saved in session or null if none exists.,c791912933ec9b1311b63b4671d449207cad7e3f,8,1
"* So, once Broadleaf detects that the session-based {@link Customer} has been persisted, it should remove the session-based",c791912933ec9b1311b63b4671d449207cad7e3f,8,1
* Returns the anonymous customer that was saved in session. This first checks for a full customer in session (meaning,c791912933ec9b1311b63b4671d449207cad7e3f,8,0
* there is instead just an anonymous customer ID) then this will look up the customer from the database using that and,c791912933ec9b1311b63b4671d449207cad7e3f,8,0
"* <p>So, once Broadleaf detects that the session-based {@link Customer} has been persisted, it should remove the session-based",c791912933ec9b1311b63b4671d449207cad7e3f,8,0
* Returns the anonymous customer that was saved in session or null if none exists.,c791912933ec9b1311b63b4671d449207cad7e3f,8,1
"* So, once Broadleaf detects that the session-based {@link Customer} has been persisted, it should remove the session-based",c791912933ec9b1311b63b4671d449207cad7e3f,8,1
"//Customer is not in session, see if we have just a customer ID in session (the anonymous customer might have",c791912933ec9b1311b63b4671d449207cad7e3f,7,0
* <p>Returns the session attribute to store the anonymous customer ID. This session attribute should be used to track,c791912933ec9b1311b63b4671d449207cad7e3f,7,0
"//Customer is not in session, see if we have just a customer ID in session (the anonymous customer might have",c791912933ec9b1311b63b4671d449207cad7e3f,7,1
* @return the anonymous customer that has not been persisted in the database but is available as a session object,c791912933ec9b1311b63b4671d449207cad7e3f,7,1
* Returns the session attribute to store the anonymous customer ID. This session attribute should be used to track,c791912933ec9b1311b63b4671d449207cad7e3f,7,1
"//Customer is not in session, see if we have just a customer ID in session (the anonymous customer might have",c791912933ec9b1311b63b4671d449207cad7e3f,7,0
* <p>Returns the session attribute to store the anonymous customer ID. This session attribute should be used to track,c791912933ec9b1311b63b4671d449207cad7e3f,7,0
"//Customer is not in session, see if we have just a customer ID in session (the anonymous customer might have",c791912933ec9b1311b63b4671d449207cad7e3f,7,1
* @return the anonymous customer that has not been persisted in the database but is available as a session object,c791912933ec9b1311b63b4671d449207cad7e3f,7,1
* Returns the session attribute to store the anonymous customer ID. This session attribute should be used to track,c791912933ec9b1311b63b4671d449207cad7e3f,7,1
private final List<Long> createdCustomerPhoneIds = new ArrayList<Long>();,c791912933ec9b1311b63b4671d449207cad7e3f,7,1
* Ensures that the customer's current cart is available to the request.,c791912933ec9b1311b63b4671d449207cad7e3f,6,0
"// Leaving the following line in for backwards compatibility, but all rules should use order as the",c791912933ec9b1311b63b4671d449207cad7e3f,6,0
"public Order mergeCart(Customer customer, WebRequest request) {",c791912933ec9b1311b63b4671d449207cad7e3f,6,0
"// Leaving the following line in for backwards compatibility, but all rules should use order as the",c791912933ec9b1311b63b4671d449207cad7e3f,6,1
"//If there is no Customer object in session, AND no customer id in session, create a new customer",c791912933ec9b1311b63b4671d449207cad7e3f,6,0
* that the customer has not already been persisted) and returns that. If there is no full customer in session (and,c791912933ec9b1311b63b4671d449207cad7e3f,6,0
* @param request the current request,c791912933ec9b1311b63b4671d449207cad7e3f,6,0
"//If there is no Customer object in session, AND no customer id in session, create a new customer",c791912933ec9b1311b63b4671d449207cad7e3f,6,1
* @param request - the current request,c791912933ec9b1311b63b4671d449207cad7e3f,6,1
"//If there is no Customer object in session, AND no customer id in session, create a new customer",c791912933ec9b1311b63b4671d449207cad7e3f,6,0
* that the customer has not already been persisted) and returns that. If there is no full customer in session (and,c791912933ec9b1311b63b4671d449207cad7e3f,6,0
* @param request the current request,c791912933ec9b1311b63b4671d449207cad7e3f,6,0
"//If there is no Customer object in session, AND no customer id in session, create a new customer",c791912933ec9b1311b63b4671d449207cad7e3f,6,1
* @param request - the current request,c791912933ec9b1311b63b4671d449207cad7e3f,6,1
"if (currency == null && BLCRequestUtils.getURLorHeaderParameter(request, CURRENCY_CODE_PARAM) != null) {",c791912933ec9b1311b63b4671d449207cad7e3f,6,1
private final List<Long> createdCustomerPhoneIds = new ArrayList<>();,c791912933ec9b1311b63b4671d449207cad7e3f,6,0
private final Long userId = 1L;,c791912933ec9b1311b63b4671d449207cad7e3f,6,1
* Utilizes the current BroadleafRequestContext to lookup a customer from the request.,c791912933ec9b1311b63b4671d449207cad7e3f,5,1
"public boolean mergeCartNeeded(Customer customer, WebRequest request) {",c791912933ec9b1311b63b4671d449207cad7e3f,5,0
"//we have a customer ID in session, look up the customer from the database to ensure we have an up-to-date",c791912933ec9b1311b63b4671d449207cad7e3f,5,0
* {@link Customer} and then utilize just the customer ID from session.</p>,c791912933ec9b1311b63b4671d449207cad7e3f,5,0
"//we have a customer ID in session, look up the customer from the database to ensure we have an up-to-date",c791912933ec9b1311b63b4671d449207cad7e3f,5,1
* {@link Customer} and then utilize just the customer ID from session.,c791912933ec9b1311b63b4671d449207cad7e3f,5,1
if (userName != null && (customer == null || !userName.equals(customer.getUsername()))) {,c791912933ec9b1311b63b4671d449207cad7e3f,5,0
// can only get here if the authenticated user does not match the user in session,c791912933ec9b1311b63b4671d449207cad7e3f,5,0
if (userName != null && (customer == null || !userName.equals(customer.getUsername()))) {,c791912933ec9b1311b63b4671d449207cad7e3f,5,1
// can only get here if the authenticated user does not match the user in session,c791912933ec9b1311b63b4671d449207cad7e3f,5,1
"//we have a customer ID in session, look up the customer from the database to ensure we have an up-to-date",c791912933ec9b1311b63b4671d449207cad7e3f,5,0
* {@link Customer} and then utilize just the customer ID from session.</p>,c791912933ec9b1311b63b4671d449207cad7e3f,5,0
"//we have a customer ID in session, look up the customer from the database to ensure we have an up-to-date",c791912933ec9b1311b63b4671d449207cad7e3f,5,1
* {@link Customer} and then utilize just the customer ID from session.,c791912933ec9b1311b63b4671d449207cad7e3f,5,1
"// When we have a hold of the lock for the order, we want to reload the order from the database.",c791912933ec9b1311b63b4671d449207cad7e3f,5,0
"// When we have a hold of the lock for the order, we want to reload the order from the database.",c791912933ec9b1311b63b4671d449207cad7e3f,5,0
"if (desiredCurrency == null && BLCRequestUtils.getURLorHeaderParameter(request, CURRENCY_CODE_PARAM) != null) {",c791912933ec9b1311b63b4671d449207cad7e3f,5,0
if (currency == null && BLCRequestUtils.isOKtoUseSession(request)) {,c791912933ec9b1311b63b4671d449207cad7e3f,5,1
if (currency == null) {,c791912933ec9b1311b63b4671d449207cad7e3f,5,1
public class CustomerStateFilter extends GenericFilterBean implements Ordered {,c791912933ec9b1311b63b4671d449207cad7e3f,5,1
*          <li>Create a new customer with null customer id</li>,c791912933ec9b1311b63b4671d449207cad7e3f,5,0
"Customer anonymousCustomer = (Customer) request.getAttribute(CustomerStateRequestProcessor.ANONYMOUS_CUSTOMER_SESSION_ATTRIBUTE_NAME, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,4,1
if (webRequest == null) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,1
if (this.request == null) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,1
"* Also invokes blMergeCartProcessor"" if the user has just logged in.",c791912933ec9b1311b63b4671d449207cad7e3f,4,0
"Customer customer = (Customer) request.getAttribute(CustomerStateRequestProcessor.getCustomerRequestAttributeName(),",c791912933ec9b1311b63b4671d449207cad7e3f,4,0
if (customer == null) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
if (cart == null) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
// Setup cart for content rule processing,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
if (ruleMap == null) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
"Customer customer = (Customer) request.getAttribute(CustomerStateRequestProcessor.getCustomerRequestAttributeName(), WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,4,1
if (cart == null) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,1
// Setup cart for content rule processing,c791912933ec9b1311b63b4671d449207cad7e3f,4,1
if (ruleMap == null) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,1
"Customer customer = (Customer) request.getAttribute(CustomerStateRequestProcessor.getCustomerRequestAttributeName(),",c791912933ec9b1311b63b4671d449207cad7e3f,4,1
public Customer getAnonymousCustomer(WebRequest request) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
"Customer anonymousCustomer = (Customer) request.getAttribute(getAnonymousCustomerSessionAttributeName(),",c791912933ec9b1311b63b4671d449207cad7e3f,4,0
if (anonymousCustomer == null) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
if (customer == null) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,1
public static Customer getAnonymousCustomer(WebRequest request) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,1
if (logger.isDebugEnabled() && customer != null) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
if (logger.isDebugEnabled() && customer != null) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,1
public Customer getAnonymousCustomer(WebRequest request) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
"Customer anonymousCustomer = (Customer) request.getAttribute(getAnonymousCustomerSessionAttributeName(),",c791912933ec9b1311b63b4671d449207cad7e3f,4,0
if (anonymousCustomer == null) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
if (customer == null) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,1
public static Customer getAnonymousCustomer(WebRequest request) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,1
* are marked as requiring a lock will execute strictly serially as defined by the configured {@link OrderLockManager}.,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
protected static final Log LOG = LogFactory.getLog(CartStateFilter.class);,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
// This is because a different thread could have modified the order in between the time we initially,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
// sure we detach the order from the EntityManager and forcefully reload the order.,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
protected final Log LOG = LogFactory.getLog(getClass());,c791912933ec9b1311b63b4671d449207cad7e3f,4,1
* are marked as requiring a lock will execute strictly serially as defined by the configured {@link OrderLockManager}.,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
protected static final Log LOG = LogFactory.getLog(CartStateFilter.class);,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
// This is because a different thread could have modified the order in between the time we initially,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
// sure we detach the order from the EntityManager and forcefully reload the order.,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
protected final Log LOG = LogFactory.getLog(getClass());,c791912933ec9b1311b63b4671d449207cad7e3f,4,1
"private static final SimpleDateFormat CONTENT_DATE_FORMATTER = new SimpleDateFormat(""yyyyMMddHHmm"");",c791912933ec9b1311b63b4671d449207cad7e3f,4,1
"private static final SimpleDateFormat CONTENT_DATE_DISPLAY_FORMATTER = new SimpleDateFormat(""MM/dd/yyyy"");",c791912933ec9b1311b63b4671d449207cad7e3f,4,1
"private static final SimpleDateFormat CONTENT_DATE_DISPLAY_HOURS_FORMATTER = new SimpleDateFormat(""h"");",c791912933ec9b1311b63b4671d449207cad7e3f,4,1
"private static final SimpleDateFormat CONTENT_DATE_DISPLAY_MINUTES_FORMATTER = new SimpleDateFormat(""mm"");",c791912933ec9b1311b63b4671d449207cad7e3f,4,1
"private static final SimpleDateFormat CONTENT_DATE_PARSE_FORMAT = new SimpleDateFormat(""MM/dd/yyyy hh:mm aa"");",c791912933ec9b1311b63b4671d449207cad7e3f,4,1
if (desiredCurrency == null && BLCRequestUtils.isOKtoUseSession(request)) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
if (desiredCurrency == null) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
if (resultHolder != null && resultHolder.getResult() != null) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
public class CartStateFilter extends GenericFilterBean implements  Ordered {,c791912933ec9b1311b63b4671d449207cad7e3f,4,1
public BroadleafCurrency resolveCurrency(HttpServletRequest request) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,1
public BroadleafCurrency resolveCurrency(WebRequest request) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,1
if (resultHolder != null && resultHolder.getResult() != null) {,c791912933ec9b1311b63b4671d449207cad7e3f,4,1
public class CustomerStateFilter extends OncePerRequestFilter implements Ordered {,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
"protected void publishEvent(ApplicationEvent event, WebRequest request, String eventClass, String username) {",c791912933ec9b1311b63b4671d449207cad7e3f,4,0
"protected void publishEvent(ApplicationEvent event, WebRequest request, String eventClass, String username) {",c791912933ec9b1311b63b4671d449207cad7e3f,4,0
private Long userId = null;,c791912933ec9b1311b63b4671d449207cad7e3f,4,0
* Once it has been persisted (like once the user has added something to the cart) then {@link #getAnonymousCustomerIdSessionAttributeName()},c791912933ec9b1311b63b4671d449207cad7e3f,4,0
* Once it has been persisted (like once the user has added something to the cart) then {@link #getAnonymousCustomerIdAttributeName()},c791912933ec9b1311b63b4671d449207cad7e3f,4,1
WebRequest request = BroadleafRequestContext.getBroadleafRequestContext().getWebRequest();,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
customer = (Customer) BroadleafRequestCustomerResolverImpl.getRequestCustomerResolver().getCustomer(request);,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"customer = (Customer) request.getAttribute(customerRequestAttributeName, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,3,1
Customer anonymousCustomer = customerStateRequestProcessor.resolveAnonymousCustomer(request);,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"* Genericized version of the CartStateFilter. This was made to facilitate reuse between Servlet Filters, Portlet Filters",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
Order cart = null;,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"cart = mergeCart(customer, request);",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"ruleMap = new HashMap<String, Object>();",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
Customer anonymousCustomer = customerStateRequestProcessor.resolveAnonymousCustomer(request);,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
return (anonymousCustomer != null && customer.getId() != null && !customer.getId().equals(anonymousCustomer.getId()));,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
Order cart = orderService.findCartForCustomer(anonymousCustomer);,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"* Genericized version of the CartStateFilter. This was made to facilitate reuse between Servlet Filters, Portlet Filters and Spring MVC interceptors. Spring has an easy way of converting HttpRequests and PortletRequests into WebRequests via <br />",c791912933ec9b1311b63b4671d449207cad7e3f,3,1
if (customer != null) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
Order cart = orderService.findCartForCustomer(customer);,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
"ruleMap = new HashMap<String, Object>();",c791912933ec9b1311b63b4671d449207cad7e3f,3,1
Customer customer = CustomerState.getCustomer();,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
Customer anonymousCustomer = CustomerStateRequestProcessor.getAnonymousCustomer(request);,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
Customer anonymousCustomer = customerStateRequestProcessor.resolveAnonymousCustomer(request);,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
//and store the entire customer in session (don't persist to DB just yet),c791912933ec9b1311b63b4671d449207cad7e3f,3,0
* @see {@link #getAnonymousCustomerSessionAttributeName()},c791912933ec9b1311b63b4671d449207cad7e3f,3,0
* @see {@link #getAnonymousCustomerIdSessionAttributeName()},c791912933ec9b1311b63b4671d449207cad7e3f,3,0
if (customerId != null) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
if (customerId != null) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
//and store the entire customer in session (don't persist to DB just yet),c791912933ec9b1311b63b4671d449207cad7e3f,3,1
"public static final String OVERRIDE_CUSTOMER_SESSION_ATTR_NAME = ""_blc_overrideCustomerId"";",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
if (overrideId != null) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
Authentication authentication = SecurityContextHolder.getContext().getAuthentication();,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
if ((authentication != null) && !(authentication instanceof AnonymousAuthenticationToken)) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
customer = (Customer) BroadleafRequestCustomerResolverImpl.getRequestCustomerResolver().getCustomer(request);,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
if (customer != null) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
if (lastPublishedEvent != null && lastPublishedEvent instanceof CustomerAuthenticatedFromCookieEvent) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
} else if (authentication instanceof UsernamePasswordAuthenticationToken) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
if (lastPublishedEvent != null && lastPublishedEvent instanceof CustomerLoggedInEvent) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
Authentication authentication = SecurityContextHolder.getContext().getAuthentication();,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
if ((authentication != null) && !(authentication instanceof AnonymousAuthenticationToken)) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
customer = (Customer) BroadleafRequestCustomerResolverImpl.getRequestCustomerResolver().getCustomer(request);,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
if (customer != null) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
if (lastPublishedEvent != null && lastPublishedEvent instanceof CustomerAuthenticatedFromCookieEvent) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
} else if (authentication instanceof UsernamePasswordAuthenticationToken) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
if (lastPublishedEvent != null && lastPublishedEvent instanceof CustomerLoggedInEvent) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
//and store the entire customer in session (don't persist to DB just yet),c791912933ec9b1311b63b4671d449207cad7e3f,3,0
* @see {@link #getAnonymousCustomerSessionAttributeName()},c791912933ec9b1311b63b4671d449207cad7e3f,3,0
* @see {@link #getAnonymousCustomerIdSessionAttributeName()},c791912933ec9b1311b63b4671d449207cad7e3f,3,0
if (customerId != null) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
if (customerId != null) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
//and store the entire customer in session (don't persist to DB just yet),c791912933ec9b1311b63b4671d449207cad7e3f,3,1
Site site = siteResolver.resolveSite(request);,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
Site site = siteResolver.resolveSite(request);,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
"* by {@link #requestRequiresLock(ServletRequest)}. By default, this is configured for all POST requests. Requests that",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
Order order = CartState.getCart();,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"// read it for this thread and now, resulting in the order being stale. Additionally, we want to make",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
protected boolean requestRequiresLock(ServletRequest request) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {",c791912933ec9b1311b63b4671d449207cad7e3f,3,1
"* by {@link #requestRequiresLock(ServletRequest)}. By default, this is configured for all POST requests. Requests that",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
Order order = CartState.getCart();,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"// read it for this thread and now, resulting in the order being stale. Additionally, we want to make",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
protected boolean requestRequiresLock(ServletRequest request) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {",c791912933ec9b1311b63b4671d449207cad7e3f,3,1
"private static final FastDateFormat CONTENT_DATE_FORMATTER = FastDateFormat.getInstance(""yyyyMMddHHmm"");",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"private static final FastDateFormat CONTENT_DATE_DISPLAY_FORMATTER = FastDateFormat.getInstance(""MM/dd/yyyy"");",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"private static final FastDateFormat CONTENT_DATE_DISPLAY_HOURS_FORMATTER = FastDateFormat.getInstance(""h"");",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"private static final FastDateFormat CONTENT_DATE_DISPLAY_MINUTES_FORMATTER = FastDateFormat.getInstance(""mm"");",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"private static final FastDateFormat CONTENT_DATE_PARSE_FORMAT = FastDateFormat.getInstance(""MM/dd/yyyy hh:mm aa"");",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"LOG.trace(""Attempt to find currency by param "" + currencyCode + "" resulted in "" + desiredCurrency);",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
if (extensionManager != null) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
BroadleafCurrency currency = null;,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
"currency = (BroadleafCurrency) request.getAttribute(CURRENCY_VAR, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,3,1
"LOG.trace(""Attempt to find currency by param "" + currencyCode + "" resulted in "" + currency);",c791912933ec9b1311b63b4671d449207cad7e3f,3,1
"currency = (BroadleafCurrency) request.getAttribute(CURRENCY_VAR, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,3,1
public class CartStateFilter extends OncePerRequestFilter implements Ordered {,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
public BroadleafCurrency resolveCurrency(HttpServletRequest request);,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
public BroadleafCurrency resolveCurrency(WebRequest request);,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
public BroadleafRequestedCurrencyDto resolveCurrency(HttpServletRequest request) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
public BroadleafRequestedCurrencyDto resolveCurrency(WebRequest request) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
if (extensionManager != null) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
if (currencyDto != null) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,0
BroadleafCurrency currency = currencyResolver.resolveCurrency(request);,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
"public void doFilterInternal(HttpServletRequest baseRequest, HttpServletResponse baseResponse, FilterChain chain) throws IOException, ServletException {",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"ServletWebRequest request = new ServletWebRequest(baseRequest, baseResponse);",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"public void doFilter(ServletRequest baseRequest, ServletResponse baseResponse, FilterChain chain) throws IOException, ServletException {",c791912933ec9b1311b63b4671d449207cad7e3f,3,1
"private static final String LAST_PUBLISHED_EVENT_CLASS_SESSION_ATTRIBUTE_NAME = ""_blc_lastPublishedEventClass"";",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"private static final String LAST_PUBLISHED_EVENT_USERNAME_SESSION_ATTRIBUTE_NAME = ""_blc_lastPublishedEventUsername"";",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"private static final String LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME = ""_blc_lastPublishedEvent"";",c791912933ec9b1311b63b4671d449207cad7e3f,3,1
if (lastPublishedEvent != null && lastPublishedEvent instanceof CustomerAuthenticatedFromCookieEvent) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
if (lastPublishedEvent != null && lastPublishedEvent instanceof CustomerLoggedInEvent) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
"private static final String LAST_PUBLISHED_EVENT_CLASS_SESSION_ATTRIBUTE_NAME = ""_blc_lastPublishedEventClass"";",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"private static final String LAST_PUBLISHED_EVENT_USERNAME_SESSION_ATTRIBUTE_NAME = ""_blc_lastPublishedEventUsername"";",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"private static final String LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME = ""_blc_lastPublishedEvent"";",c791912933ec9b1311b63b4671d449207cad7e3f,3,1
if (lastPublishedEvent != null && lastPublishedEvent instanceof CustomerAuthenticatedFromCookieEvent) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
if (lastPublishedEvent != null && lastPublishedEvent instanceof CustomerLoggedInEvent) {,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
"Customer customer = customerService.readCustomerByUsername(""customer1"");",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
Customer customer = customerService.readCustomerById(userId);,c791912933ec9b1311b63b4671d449207cad7e3f,3,1
"locale = (Locale) request.getAttribute(LOCALE_VAR, WebRequest.SCOPE_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,3,0
"locale = (Locale) request.getAttribute(LOCALE_VAR, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,3,1
* @see {@link org.broadleafcommerce.profile.web.site.security.CustomerStateFilter},c791912933ec9b1311b63b4671d449207cad7e3f,3,0
* @see {@link #getAnonymousCustomerSessionAttributeName()},c791912933ec9b1311b63b4671d449207cad7e3f,3,0
* @see {@link #getAnonymousCustomerIdSessionAttributeName()},c791912933ec9b1311b63b4671d449207cad7e3f,3,0
* @see {@link CustomerStateFilter},c791912933ec9b1311b63b4671d449207cad7e3f,3,1
* @see {@link #getAnonymousCustomerAttributeName()},c791912933ec9b1311b63b4671d449207cad7e3f,3,1
* @see {@link #getAnonymousCustomerIdAttributeName()},c791912933ec9b1311b63b4671d449207cad7e3f,3,1
return (Customer) BroadleafRequestCustomerResolverImpl.getRequestCustomerResolver().getCustomer(request);,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
return (Customer) BroadleafRequestCustomerResolverImpl.getRequestCustomerResolver().getCustomer();,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
import org.springframework.web.context.request.ServletWebRequest;,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
return getCustomer(new ServletWebRequest(request));,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"return (Customer) request.getAttribute(CustomerStateRequestProcessor.getCustomerRequestAttributeName(), WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"protected static String customerRequestAttributeName = ""customer"";",c791912933ec9b1311b63b4671d449207cad7e3f,2,1
public static void setCustomerRequestAttributeName(String customerRequestAttributeName) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
protected boolean copyCartWhenSpecifiedStateChanges = false;,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
* {@link UpdateCartService#validateCart(Order)} throws an IllegalArgumentException,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
* @return the copyCartWhenSpecifiedStateChanges,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
public boolean isCopyCartWhenSpecifiedStateChanges() {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
public void setCopyCartWhenSpecifiedStateChanges(boolean copyCartWhenSpecifiedStateChanges) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
protected static boolean copyCartWhenSpecifiedStateChanges = false;,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"@Resource(name = ""blCustomerStateRequestProcessor"")",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
import java.util.HashMap;,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
import javax.servlet.http.HttpServletRequest;,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
import javax.servlet.http.HttpServletResponse;,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
this.webRequest = new ServletWebRequest(request);,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (webRequest instanceof ServletWebRequest) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
import javax.servlet.http.HttpServletRequest;,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
import javax.servlet.http.HttpServletResponse;,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
import java.util.HashMap;,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
if (webRequest instanceof ServletWebRequest) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"private String mergeCartResponseKey = ""bl_merge_cart_response"";",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"@Resource(name = ""blMergeCartService"")",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"@Resource(name = ""blCustomerStateRequestProcessor"")",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"protected static String cartRequestAttributeName = ""cart"";",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"if (mergeCartNeeded(customer, request)) {",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
} else {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
cart = orderService.findCartForCustomer(customer);,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
cart = orderService.getNullOrder();,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"Map<String, Object> ruleMap = (Map<String, Object>) request.getAttribute(BLC_RULE_MAP_PARAM, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
} catch (PricingException e) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
} catch (RemoveFromCartException e) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
public static String getCartRequestAttributeName() {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
public static void setCartRequestAttributeName(String cartRequestAttributeName) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
protected boolean copyCartWhenSpecifiedStateChanges = false;,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"protected static String cartRequestAttributeName = ""cart"";",c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"LOG.trace(""Looking up cart for customer "" + customer.getId());",c791912933ec9b1311b63b4671d449207cad7e3f,2,1
cart = orderService.getNullOrder();,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
} else {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
} catch (IllegalArgumentException e) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
if (copyCartWhenSpecifiedStateChanges) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
cart = orderService.createNewCartForCustomer(customer);,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"Map<String, Object> ruleMap = (Map<String, Object>) request.getAttribute(BLC_RULE_MAP_PARAM, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,2,1
public static String getCartRequestAttributeName() {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
public static void setCartRequestAttributeName(String cartRequestAttributeName) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
* {@link UpdateCartService#validateCart(Order)} throws an IllegalArgumentException,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
* @return the copyCartWhenSpecifiedStateChanges,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
public boolean isCopyCartWhenSpecifiedStateChanges() {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
public void setCopyCartWhenSpecifiedStateChanges(boolean copyCartWhenSpecifiedStateChanges) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
if (LOG.isDebugEnabled()) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"@Resource(name = ""blCustomerStateRequestProcessor"")",c791912933ec9b1311b63b4671d449207cad7e3f,2,1
if (LOG.isTraceEnabled()) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
customer = customerService.createNewCustomer();,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
* return it.,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"Long customerId = (Long) request.getAttribute(getAnonymousCustomerIdSessionAttributeName(), WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
anonymousCustomer = customerService.readCustomerById(customerId);,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
* date in regards to Hibernate (specifically with lists).</p>,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"Long customerId = (Long) request.getAttribute(getAnonymousCustomerIdSessionAttributeName(), WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,2,1
customer = customerService.readCustomerById(customerId);,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
customer = customerService.createNewCustomer();,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"return (Customer) request.getAttribute(getAnonymousCustomerSessionAttributeName(), WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,2,1
* date in regards to Hibernate (specifically with lists).,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
import org.springframework.web.context.request.ServletWebRequest;,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
} catch (HaltFilterChainException e) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
import org.springframework.web.context.request.ServletWebRequest;,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"Long overrideId = (Long) request.getAttribute(OVERRIDE_CUSTOMER_SESSION_ATTR_NAME, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
customer = customerService.readCustomerById(overrideId);,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
} else {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
customer = customerService.readCustomerByUsername(userName);,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (authentication instanceof RememberMeAuthenticationToken) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
// set transient property of customer,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (userName.equals(cookieEvent.getCustomer().getUsername())) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (publishRememberMeEvent) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"CustomerAuthenticatedFromCookieEvent cookieEvent = new CustomerAuthenticatedFromCookieEvent(customer, this.getClass().getName());",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (userName.equals(loggedInEvent.getCustomer().getUsername())) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (publishLoggedInEvent) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"CustomerLoggedInEvent loggedInEvent = new CustomerLoggedInEvent(customer, this.getClass().getName());",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
customer = resolveAuthenticatedCustomer(authentication);,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
customer = customerService.readCustomerByUsername(userName);,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
if (authentication instanceof RememberMeAuthenticationToken) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
// set transient property of customer,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
if (userName.equals(cookieEvent.getCustomer().getUsername())) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
if (publishRememberMeEvent) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"CustomerAuthenticatedFromCookieEvent cookieEvent = new CustomerAuthenticatedFromCookieEvent(customer, this.getClass().getName());",c791912933ec9b1311b63b4671d449207cad7e3f,2,1
if (userName.equals(loggedInEvent.getCustomer().getUsername())) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
if (publishLoggedInEvent) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"CustomerLoggedInEvent loggedInEvent = new CustomerLoggedInEvent(customer, this.getClass().getName());",c791912933ec9b1311b63b4671d449207cad7e3f,2,1
} else {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
customer = resolveAuthenticatedCustomer(authentication);,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
customer = customerService.createNewCustomer();,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
* return it.,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"Long customerId = (Long) request.getAttribute(getAnonymousCustomerIdSessionAttributeName(), WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
anonymousCustomer = customerService.readCustomerById(customerId);,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
* date in regards to Hibernate (specifically with lists).</p>,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"Long customerId = (Long) request.getAttribute(getAnonymousCustomerIdSessionAttributeName(), WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,2,1
customer = customerService.readCustomerById(customerId);,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
customer = customerService.createNewCustomer();,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"return (Customer) request.getAttribute(getAnonymousCustomerSessionAttributeName(), WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,2,1
* date in regards to Hibernate (specifically with lists).,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"* This filter is also responsible for establishing a session-wide lock for operations that require a lock, indicated",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"@Resource(name = ""blOrderLockManager"")",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"@Resource(name = ""blOrderService"")",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (!requestRequiresLock(request)) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (LOG.isTraceEnabled()) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
} finally {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (request instanceof HttpServletRequest) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
/** Logger for this class and subclasses */,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"* This filter is also responsible for establishing a session-wide lock for operations that require a lock, indicated",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"@Resource(name = ""blOrderLockManager"")",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"@Resource(name = ""blOrderService"")",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (!requestRequiresLock(request)) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (LOG.isTraceEnabled()) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
} finally {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (request instanceof HttpServletRequest) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
/** Logger for this class and subclasses */,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
if (BLCRequestUtils.isOKtoUseSession(request)) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"@Resource(name = ""blCurrencyResolverExtensionManager"")",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
BroadleafCurrency desiredCurrency = null;,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"desiredCurrency = (BroadleafCurrency) request.getAttribute(CURRENCY_VAR, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"desiredCurrency = (BroadleafCurrency) request.getAttribute(CURRENCY_VAR, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
BroadleafCurrency defaultCurrency = broadleafCurrencyService.findDefaultBroadleafCurrency();,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
BroadleafCurrency currencyToUse = defaultCurrency;,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
ExtensionResultHolder<BroadleafCurrency> resultHolder = new ExtensionResultHolder<BroadleafCurrency>();,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
currency = broadleafCurrencyService.findCurrencyByCode(currencyCode);,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
currency = locale.getDefaultCurrency();,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
currency = broadleafCurrencyService.findDefaultBroadleafCurrency();,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
import javax.annotation.Resource;,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
import javax.annotation.Resource;,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
private boolean updatePrices = true;,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
if (updatePrices) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
order = orderDao.updatePrices(order);,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
public boolean isUpdatePrices() {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
public void setUpdatePrices(boolean updatePrices) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"public void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)",c791912933ec9b1311b63b4671d449207cad7e3f,2,1
public BroadleafRequestedCurrencyDto resolveCurrency(HttpServletRequest request);,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
public BroadleafRequestedCurrencyDto resolveCurrency(WebRequest request);,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"BroadleafRequestedCurrencyDto dto = new BroadleafRequestedCurrencyDto(currencyToUse, desiredCurrency);",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"@Resource(name = ""blCurrencyResolverExtensionManager"")",c791912933ec9b1311b63b4671d449207cad7e3f,2,1
ExtensionResultHolder<BroadleafCurrency> resultHolder = new ExtensionResultHolder<BroadleafCurrency>();,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
} finally {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
protected boolean shouldNotFilterErrorDispatch() {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (CustomerAuthenticatedFromCookieEvent.class.getName().equals(lastPublishedEventClass)) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (userName.equals(eventUsername)) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"CustomerAuthenticatedFromCookieEvent cookieEvent = new CustomerAuthenticatedFromCookieEvent(customer, this.getClass().getName());",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (CustomerLoggedInEvent.class.getName().equals(lastPublishedEventClass)) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (userName.equals(cookieEvent.getCustomer().getUsername())) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"CustomerAuthenticatedFromCookieEvent cookieEvent = new CustomerAuthenticatedFromCookieEvent(customer, this.getClass().getName());",c791912933ec9b1311b63b4671d449207cad7e3f,2,1
if (userName.equals(loggedInEvent.getCustomer().getUsername())) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
if (CustomerAuthenticatedFromCookieEvent.class.getName().equals(lastPublishedEventClass)) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (userName.equals(eventUsername)) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"CustomerAuthenticatedFromCookieEvent cookieEvent = new CustomerAuthenticatedFromCookieEvent(customer, this.getClass().getName());",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (CustomerLoggedInEvent.class.getName().equals(lastPublishedEventClass)) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
if (userName.equals(cookieEvent.getCustomer().getUsername())) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"CustomerAuthenticatedFromCookieEvent cookieEvent = new CustomerAuthenticatedFromCookieEvent(customer, this.getClass().getName());",c791912933ec9b1311b63b4671d449207cad7e3f,2,1
if (userName.equals(loggedInEvent.getCustomer().getUsername())) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
import javax.annotation.Resource;,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
import javax.servlet.http.HttpServletRequest;,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
import javax.servlet.http.HttpServletResponse;,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
HttpServletResponse response = ((ServletWebRequest) request).getResponse();,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
} catch(Exception e) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
import javax.annotation.Resource;,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
import javax.servlet.http.HttpServletRequest;,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
} catch(EncodingException e) {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
import javax.annotation.Resource;,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
public class CustomerPhoneControllerTest extends TestNGSiteIntegrationSetup {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
import javax.annotation.Resource;,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
public class CustomerPhoneControllerTest extends BaseTest {,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"@BeforeMethod(alwaysRun = true, dependsOnMethods = ""springTestContextBeforeTestMethod"")",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
protected void setupCustomerId(Method testMethod) throws Exception {,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
"userId = customerService.readCustomerByUsername(""customer1"").getId();",c791912933ec9b1311b63b4671d449207cad7e3f,2,0
import javax.annotation.Resource;,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
"@Resource(name = ""blRequestProcessor"")",c791912933ec9b1311b63b4671d449207cad7e3f,2,1
customer = customerService.createCustomerWithNullId();,c791912933ec9b1311b63b4671d449207cad7e3f,2,0
*          <li>Create a new customer</li>,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
customer = customerService.createNewCustomer();,c791912933ec9b1311b63b4671d449207cad7e3f,2,1
import org.broadleafcommerce.common.web.BroadleafRequestCustomerResolverImpl;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.common.web.BroadleafRequestContext;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.broadleafcommerce.profile.web.core.security.CustomerStateRequestProcessor;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
/**,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
* @return,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
*/,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
"request.setAttribute(CustomerStateRequestProcessor.getCustomerRequestAttributeName(), customer, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.broadleafcommerce.common.web.BroadleafRequestCustomerResolverImpl;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
return BroadleafRequestCustomerResolverImpl.getRequestCustomerResolver().getCustomerRequestAttributeName();,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
return customerRequestAttributeName;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
},c791912933ec9b1311b63b4671d449207cad7e3f,1,1
CustomerStateRequestProcessor.customerRequestAttributeName = customerRequestAttributeName;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
/**,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
*,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
*/,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
return copyCartWhenSpecifiedStateChanges;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
},c791912933ec9b1311b63b4671d449207cad7e3f,1,0
this.copyCartWhenSpecifiedStateChanges = copyCartWhenSpecifiedStateChanges;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
protected CustomerStateRequestProcessor customerStateRequestProcessor;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import java.util.Currency;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import java.util.Map;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import java.util.TimeZone;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.common.classloader.release.ThreadLocalManager;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
this.request = ((ServletWebRequest) webRequest).getRequest();,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.common.classloader.release.ThreadLocalManager;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import java.util.Currency;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import java.util.Map;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import java.util.TimeZone;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
setWebRequest(new ServletWebRequest(request));,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
},c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.broadleafcommerce.core.order.service.MergeCartService;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.core.order.service.call.MergeCartResponse;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.core.order.service.exception.RemoveFromCartException;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.core.pricing.service.exception.PricingException;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
*,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
* and Spring MVC interceptors. Spring has an easy way of converting HttpRequests and PortletRequests into WebRequests,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
* via <br />,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
private MergeCartService mergeCartService;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
protected CustomerStateRequestProcessor customerStateRequestProcessor;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
},c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"LOG.trace(""Merge cart required, calling mergeCart "" + customer.getId());",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
try {,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"mergeCartResponse = mergeCartService.mergeCart(customer, cart);",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
throw new RuntimeException(e);,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
return mergeCartResponse.getOrder();,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
return cartRequestAttributeName;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
CartStateRequestProcessor.cartRequestAttributeName = cartRequestAttributeName;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.core.order.service.call.UpdateCartResponse;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
},c791912933ec9b1311b63b4671d449207cad7e3f,1,1
try {,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
UpdateCartResponse updateCartResponse = updateCartService.copyCartToCurrentContext(cart);,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
return cartRequestAttributeName;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
CartStateRequestProcessor.cartRequestAttributeName = cartRequestAttributeName;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
/**,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
*,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
*/,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
return copyCartWhenSpecifiedStateChanges;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
this.copyCartWhenSpecifiedStateChanges = copyCartWhenSpecifiedStateChanges;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.broadleafcommerce.profile.web.core.CustomerState;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"+ "" blCustomerStateFilter occurs prior to the blCartStateFilter"");",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"LOG.debug(""Merge cart required, calling mergeCart "" + customer.getId());",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
protected CustomerStateRequestProcessor customerStateRequestProcessor;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
"LOG.trace(""Merge cart required, calling mergeCart "" + customer.getId());",c791912933ec9b1311b63b4671d449207cad7e3f,1,1
"request.setAttribute(getAnonymousCustomerSessionAttributeName(), customer, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
//customer to store in CustomerState,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
},c791912933ec9b1311b63b4671d449207cad7e3f,1,0
return anonymousCustomer;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
//customer to store in CustomerState,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
},c791912933ec9b1311b63b4671d449207cad7e3f,1,1
"request.setAttribute(getAnonymousCustomerSessionAttributeName(), customer, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.apache.commons.logging.Log;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.apache.commons.logging.LogFactory;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.common.RequestDTOImpl;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.common.exception.SiteNotFoundException;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.common.web.exception.HaltFilterChainException;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.springframework.stereotype.Component;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.springframework.web.filter.OncePerRequestFilter;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.apache.commons.logging.Log;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.apache.commons.logging.LogFactory;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.broadleafcommerce.common.RequestDTOImpl;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.broadleafcommerce.common.exception.SiteNotFoundException;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.springframework.stereotype.Component;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.springframework.web.filter.OncePerRequestFilter;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
String userName = authentication.getName();,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
},c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"ApplicationEvent lastPublishedEvent = (ApplicationEvent) request.getAttribute(LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
boolean publishRememberMeEvent = true;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
CustomerAuthenticatedFromCookieEvent cookieEvent = (CustomerAuthenticatedFromCookieEvent) lastPublishedEvent;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
publishRememberMeEvent = false;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
boolean publishLoggedInEvent = true;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
CustomerLoggedInEvent loggedInEvent = (CustomerLoggedInEvent) lastPublishedEvent;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
String userName = authentication.getName();,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
},c791912933ec9b1311b63b4671d449207cad7e3f,1,1
"ApplicationEvent lastPublishedEvent = (ApplicationEvent) request.getAttribute(LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,1,1
boolean publishRememberMeEvent = true;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
CustomerAuthenticatedFromCookieEvent cookieEvent = (CustomerAuthenticatedFromCookieEvent) lastPublishedEvent;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
publishRememberMeEvent = false;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
boolean publishLoggedInEvent = true;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
CustomerLoggedInEvent loggedInEvent = (CustomerLoggedInEvent) lastPublishedEvent;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
"request.setAttribute(getAnonymousCustomerSessionAttributeName(), customer, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
//customer to store in CustomerState,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
},c791912933ec9b1311b63b4671d449207cad7e3f,1,0
return anonymousCustomer;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
//customer to store in CustomerState,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
},c791912933ec9b1311b63b4671d449207cad7e3f,1,1
"request.setAttribute(getAnonymousCustomerSessionAttributeName(), customer, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.broadleafcommerce.core.order.domain.Order;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.core.order.service.OrderLockManager;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.core.order.service.OrderService;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.core.web.order.CartState;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import java.io.IOException;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
*,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
* <p>,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
* </p>,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
* @author Andre Azzolini (apazzolini),c791912933ec9b1311b63b4671d449207cad7e3f,1,0
protected OrderLockManager orderLockManager;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
protected OrderService orderService;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"throws IOException, ServletException {",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"cartStateProcessor.process(new ServletWebRequest((HttpServletRequest) request, (HttpServletResponse) response));",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
},c791912933ec9b1311b63b4671d449207cad7e3f,1,0
Object lockObject = orderLockManager.acquireLock(order);,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
try {,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"return ((HttpServletRequest) request).getMethod().equalsIgnoreCase(""post"");",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
return false;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import java.io.IOException;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
"cartStateProcessor.process(new ServletWebRequest((HttpServletRequest) request, (HttpServletResponse)response));",c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.broadleafcommerce.core.order.domain.Order;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.core.order.service.OrderLockManager;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.core.order.service.OrderService;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.core.web.order.CartState;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import java.io.IOException;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
*,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
* <p>,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
* </p>,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
* @author Andre Azzolini (apazzolini),c791912933ec9b1311b63b4671d449207cad7e3f,1,0
protected OrderLockManager orderLockManager;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
protected OrderService orderService;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"throws IOException, ServletException {",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"cartStateProcessor.process(new ServletWebRequest((HttpServletRequest) request, (HttpServletResponse) response));",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
},c791912933ec9b1311b63b4671d449207cad7e3f,1,0
Object lockObject = orderLockManager.acquireLock(order);,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
try {,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"return ((HttpServletRequest) request).getMethod().equalsIgnoreCase(""post"");",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
return false;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import java.io.IOException;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
"cartStateProcessor.process(new ServletWebRequest((HttpServletRequest) request, (HttpServletResponse)response));",c791912933ec9b1311b63b4671d449207cad7e3f,1,1
},c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.broadleafcommerce.common.util.BLCRequestUtils;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
@Override,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
},c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.apache.commons.lang3.time.FastDateFormat;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import java.text.SimpleDateFormat;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.broadleafcommerce.common.extension.ExtensionResultHolder;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.common.extension.currency.CurrencyResolverExtensionManager;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
protected CurrencyResolverExtensionManager extensionManager;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
desiredCurrency = broadleafCurrencyService.findCurrencyByCode(currencyCode);,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
desiredCurrency = locale.getDefaultCurrency();,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
// 5) Lookup default currency from DB,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
desiredCurrency = defaultCurrency;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
},c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"// For an out-of-box installation, only one currency is supported, so even though we have a",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"// desired currency, we may not have any prices that support it.",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
// Allow extension managers (like enterprise pricing) to indicate whether additional currency support is,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
currencyToUse = resultHolder.getResult();,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
return currencyToUse;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
// 5) Check default currency from DB,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
return currency;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
"ApplicationEvent lastPublishedEvent = (ApplicationEvent) BLCRequestUtils.getSessionAttributeIfOk(request, LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME);",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
publishLoggedInEvent = false;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
},c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"ApplicationEvent lastPublishedEvent = (ApplicationEvent) request.getAttribute(LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,1,1
},c791912933ec9b1311b63b4671d449207cad7e3f,1,1
protected OrderDao orderDao;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
private OrderDao orderDao;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
},c791912933ec9b1311b63b4671d449207cad7e3f,1,1
return updatePrices;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
this.updatePrices = updatePrices;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.springframework.web.filter.OncePerRequestFilter;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.springframework.web.filter.GenericFilterBean;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import javax.servlet.ServletResponse;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
"cartStateProcessor.process(new ServletWebRequest((HttpServletRequest) request, (HttpServletResponse) response));",c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.broadleafcommerce.common.currency.domain.BroadleafRequestedCurrencyDto;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.common.currency.domain.BroadleafCurrency;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.broadleafcommerce.common.currency.domain.BroadleafRequestedCurrencyDto;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
return dto;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.common.extension.ExtensionResultHolder;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.broadleafcommerce.common.extension.currency.CurrencyResolverExtensionManager;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
protected CurrencyResolverExtensionManager extensionManager;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
// Allow extension managers (like enterprise pricing) to indicate whether additional currency support is,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
currencyToUse = resultHolder.getResult();,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
},c791912933ec9b1311b63b4671d449207cad7e3f,1,1
return currencyToUse;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.broadleafcommerce.common.currency.domain.BroadleafRequestedCurrencyDto;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
BroadleafRequestedCurrencyDto currencyDto = currencyResolver.resolveCurrency(request);,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
},c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.common.currency.domain.BroadleafCurrency;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.springframework.web.filter.OncePerRequestFilter;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import java.io.IOException;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
try {,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
},c791912933ec9b1311b63b4671d449207cad7e3f,1,0
@Override,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
return false;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.springframework.web.filter.GenericFilterBean;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import javax.servlet.ServletRequest;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import javax.servlet.ServletResponse;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import java.io.IOException;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
"customerStateProcessor.process(new ServletWebRequest((HttpServletRequest) baseRequest, (HttpServletResponse)baseResponse));",c791912933ec9b1311b63b4671d449207cad7e3f,1,1
"String lastPublishedEventClass = (String) BLCRequestUtils.getSessionAttributeIfOk(request, LAST_PUBLISHED_EVENT_CLASS_SESSION_ATTRIBUTE_NAME);",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"String eventUsername = (String) BLCRequestUtils.getSessionAttributeIfOk(request, LAST_PUBLISHED_EVENT_USERNAME_SESSION_ATTRIBUTE_NAME);",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"publishEvent(cookieEvent, request, CustomerAuthenticatedFromCookieEvent.class.getName(), userName);",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
},c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"publishEvent(loggedInEvent, request, CustomerLoggedInEvent.class.getName(), userName);",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"ApplicationEvent lastPublishedEvent = (ApplicationEvent) BLCRequestUtils.getSessionAttributeIfOk(request, LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME);",c791912933ec9b1311b63b4671d449207cad7e3f,1,1
CustomerAuthenticatedFromCookieEvent cookieEvent = (CustomerAuthenticatedFromCookieEvent) lastPublishedEvent;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
},c791912933ec9b1311b63b4671d449207cad7e3f,1,1
CustomerLoggedInEvent loggedInEvent = (CustomerLoggedInEvent) lastPublishedEvent;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
"String lastPublishedEventClass = (String) BLCRequestUtils.getSessionAttributeIfOk(request, LAST_PUBLISHED_EVENT_CLASS_SESSION_ATTRIBUTE_NAME);",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"String eventUsername = (String) BLCRequestUtils.getSessionAttributeIfOk(request, LAST_PUBLISHED_EVENT_USERNAME_SESSION_ATTRIBUTE_NAME);",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"publishEvent(cookieEvent, request, CustomerAuthenticatedFromCookieEvent.class.getName(), userName);",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
},c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"publishEvent(loggedInEvent, request, CustomerLoggedInEvent.class.getName(), userName);",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"ApplicationEvent lastPublishedEvent = (ApplicationEvent) BLCRequestUtils.getSessionAttributeIfOk(request, LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME);",c791912933ec9b1311b63b4671d449207cad7e3f,1,1
CustomerAuthenticatedFromCookieEvent cookieEvent = (CustomerAuthenticatedFromCookieEvent) lastPublishedEvent;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
},c791912933ec9b1311b63b4671d449207cad7e3f,1,1
CustomerLoggedInEvent loggedInEvent = (CustomerLoggedInEvent) lastPublishedEvent;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.owasp.esapi.errors.EncodingException;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
String encodedURL = ESAPI.encoder().encodeForURL(url.toString());,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.broadleafcommerce.test.TestNGSiteIntegrationSetup;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.broadleafcommerce.test.BaseTest;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.springframework.test.annotation.Commit;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.testng.annotations.BeforeMethod;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import java.lang.reflect.Method;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
},c791912933ec9b1311b63b4671d449207cad7e3f,1,0
List<CustomerPhone> phones = customerPhoneService.readAllCustomerPhonesByCustomerId(userId);,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
List<CustomerPhone> phones_1 = customerPhoneService.readAllCustomerPhonesByCustomerId(userId);,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
List<CustomerPhone> phones_2 = customerPhoneService.readAllCustomerPhonesByCustomerId(userId);,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.springframework.test.annotation.Rollback;,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
List<CustomerPhone> phones = customerPhoneService.readAllCustomerPhonesByCustomerId(1L);,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
List<CustomerPhone> phones_1 = customerPhoneService.readAllCustomerPhonesByCustomerId(1L);,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
List<CustomerPhone> phones_2 = customerPhoneService.readAllCustomerPhonesByCustomerId(1L);,c791912933ec9b1311b63b4671d449207cad7e3f,1,1
import org.springframework.beans.factory.annotation.Autowired;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.springframework.beans.factory.annotation.Qualifier;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.springframework.beans.factory.annotation.Autowired;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
import org.springframework.beans.factory.annotation.Qualifier;,c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"request.setAttribute(LOCALE_VAR, locale, WebRequest.SCOPE_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"request.setAttribute(LOCALE_VAR, locale, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,1,1
"previousSandBoxId = (Long) request.getAttribute(SANDBOX_ID_VAR, WebRequest.SCOPE_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"sandboxId = (Long) request.getAttribute(SANDBOX_ID_VAR, WebRequest.SCOPE_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"overrideTime = (Date) request.getAttribute(SANDBOX_DATE_TIME_VAR, WebRequest.SCOPE_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,1,0
"previousSandBoxId = (Long) request.getAttribute(SANDBOX_ID_VAR, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,1,1
"sandboxId = (Long) request.getAttribute(SANDBOX_ID_VAR, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,1,1
"overrideTime = (Date) request.getAttribute(SANDBOX_DATE_TIME_VAR, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,1,1
BroadleafRequestCustomerResolverImpl.getRequestCustomerResolver().setCustomer(customer);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
setResponse(((ServletWebRequest) webRequest).getResponse());,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
setRequest(((ServletWebRequest) webRequest).getRequest());,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
setResponse(((ServletWebRequest) webRequest).getResponse());,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
WebRequest.SCOPE_REQUEST);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
return;,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
updateCartService.updateAndValidateCart(cart);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"request.setAttribute(cartRequestAttributeName, cart, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"ruleMap.put(""order"", cart);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
// variable name.,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"ruleMap.put(""cart"", cart);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"request.setAttribute(BLC_RULE_MAP_PARAM, ruleMap, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
MergeCartResponse mergeCartResponse;,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"request.setAttribute(mergeCartResponseKey, mergeCartResponse, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
updateCartService.validateCart(cart);,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"request.setAttribute(""updateCartResponse"", updateCartResponse, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
orderService.cancelOrder(cart);,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"request.setAttribute(cartRequestAttributeName, cart, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"ruleMap.put(""order"", cart);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
// variable name.,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"ruleMap.put(""cart"", cart);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"request.setAttribute(BLC_RULE_MAP_PARAM, ruleMap, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
WebRequest.SCOPE_REQUEST);,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
WebRequest.SCOPE_GLOBAL_SESSION);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
//already been persisted),c791912933ec9b1311b63b4671d449207cad7e3f,0,0
//already been persisted),c791912933ec9b1311b63b4671d449207cad7e3f,0,1
return;,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"logger.debug(""Customer found by username "" + userName);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
customer.setCookied(true);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
eventPublisher.publishEvent(cookieEvent);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"request.setAttribute(LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME, cookieEvent, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
customer.setLoggedIn(true);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
publishLoggedInEvent= false;,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
eventPublisher.publishEvent(loggedInEvent);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"request.setAttribute(LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME, loggedInEvent, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"logger.debug(""Customer found by username "" + userName);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
customer.setCookied(true);,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
eventPublisher.publishEvent(cookieEvent);,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"request.setAttribute(LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME, cookieEvent, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
customer.setLoggedIn(true);,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
publishLoggedInEvent= false;,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
eventPublisher.publishEvent(loggedInEvent);,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"request.setAttribute(LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME, loggedInEvent, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
WebRequest.SCOPE_GLOBAL_SESSION);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
//already been persisted),c791912933ec9b1311b63b4671d449207cad7e3f,0,0
//already been persisted),c791912933ec9b1311b63b4671d449207cad7e3f,0,1
brc.getAdditionalProperties().putAll(entityExtensionManagers);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
brc.getAdditionalProperties().putAll(entityExtensionManagers);,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"@Component(""blCartStateFilter"")",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"chain.doFilter(request, response);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
return;,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"LOG.trace(""Thread["" + Thread.currentThread().getId() + ""] attempting to lock order["" + order.getId() + ""]"");",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"LOG.trace(""Thread["" + Thread.currentThread().getId() + ""] grabbed lock for order["" + order.getId() + ""]"");",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
CartState.setCart(orderService.reloadOrder(order));,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
orderLockManager.releaseLock(lockObject);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"LOG.trace(""Thread["" + Thread.currentThread().getId() + ""] released lock for order["" + order.getId() +""]"");",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"@Component(""blCartStateFilter"")",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"@SuppressWarnings(""unchecked"")",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"chain.doFilter(request, response);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"@Component(""blCartStateFilter"")",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"chain.doFilter(request, response);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
return;,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"LOG.trace(""Thread["" + Thread.currentThread().getId() + ""] attempting to lock order["" + order.getId() + ""]"");",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"LOG.trace(""Thread["" + Thread.currentThread().getId() + ""] grabbed lock for order["" + order.getId() + ""]"");",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
CartState.setCart(orderService.reloadOrder(order));,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
orderLockManager.releaseLock(lockObject);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"LOG.trace(""Thread["" + Thread.currentThread().getId() + ""] released lock for order["" + order.getId() +""]"");",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"@Component(""blCartStateFilter"")",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"@SuppressWarnings(""unchecked"")",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"chain.doFilter(request, response);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"request.setAttribute(mergeCartResponseKey, mergeCartResponse, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"request.setAttribute(mergeCartResponseKey, mergeCartResponse, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
// available.,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"extensionManager.getProxy().overrideCurrency(desiredCurrency, defaultCurrency, resultHolder);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"request.setAttribute(CURRENCY_VAR, currencyToUse, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"request.setAttribute(CURRENCY_VAR, currency, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"BLCRequestUtils.setSessionAttributeIfOk(request, LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME, cookieEvent);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"BLCRequestUtils.setSessionAttributeIfOk(request, LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME, loggedInEvent);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"request.setAttribute(LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME, cookieEvent, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
publishLoggedInEvent= false;,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"request.setAttribute(LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME, loggedInEvent, WebRequest.SCOPE_REQUEST);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"cartStateProcessor.process(new ServletWebRequest(request, response));",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
// available.,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"extensionManager.getProxy().overrideCurrency(desiredCurrency, defaultCurrency, resultHolder);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
brc.setBroadleafCurrency(currencyDto.getCurrencyToUse());,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
brc.setRequestedBroadleafCurrency(currencyDto.getRequestedCurrency());,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
brc.setBroadleafCurrency(currency);,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
customerStateProcessor.process(request);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"chain.doFilter(baseRequest, baseResponse);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
customerStateProcessor.postProcess(request);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"chain.doFilter(baseRequest, baseResponse);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
eventPublisher.publishEvent(event);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"BLCRequestUtils.setSessionAttributeIfOk(request, LAST_PUBLISHED_EVENT_CLASS_SESSION_ATTRIBUTE_NAME, eventClass);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"BLCRequestUtils.setSessionAttributeIfOk(request, LAST_PUBLISHED_EVENT_USERNAME_SESSION_ATTRIBUTE_NAME, username);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
eventPublisher.publishEvent(cookieEvent);,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"BLCRequestUtils.setSessionAttributeIfOk(request, LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME, cookieEvent);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
eventPublisher.publishEvent(loggedInEvent);,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"BLCRequestUtils.setSessionAttributeIfOk(request, LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME, loggedInEvent);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
eventPublisher.publishEvent(event);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"BLCRequestUtils.setSessionAttributeIfOk(request, LAST_PUBLISHED_EVENT_CLASS_SESSION_ATTRIBUTE_NAME, eventClass);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"BLCRequestUtils.setSessionAttributeIfOk(request, LAST_PUBLISHED_EVENT_USERNAME_SESSION_ATTRIBUTE_NAME, username);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
eventPublisher.publishEvent(cookieEvent);,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"BLCRequestUtils.setSessionAttributeIfOk(request, LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME, cookieEvent);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
eventPublisher.publishEvent(loggedInEvent);,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"BLCRequestUtils.setSessionAttributeIfOk(request, LAST_PUBLISHED_EVENT_SESSION_ATTRIBUTED_NAME, loggedInEvent);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
brc.setNonPersistentSite(site);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"ESAPI.httpUtilities().sendRedirect(response, url.toString());",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"LOG.error(""SECURITY FAILURE Bad redirect location: "" + url.toString(), e);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
response.sendError(403);,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
brc.setSite(site);,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
((ServletWebRequest) request).getResponse().sendRedirect(encodedURL);,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"LOG.error(""Encoding Exception for url when reprocessing request"", e);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
((ServletWebRequest) request).getResponse().sendError(403);,c791912933ec9b1311b63b4671d449207cad7e3f,0,1
@Commit,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
@Rollback(false),c791912933ec9b1311b63b4671d449207cad7e3f,0,1
@Autowired,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"@Qualifier(""blRequestProcessor"")",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
@Autowired,c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"@Qualifier(""blCustomerStateRequestProcessor"")",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"@Resource(name=""blCustomerStateRequestProcessor"")",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"request.removeAttribute(BroadleafCurrencyResolverImpl.CURRENCY_VAR, WebRequest.SCOPE_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"request.removeAttribute(BroadleafCurrencyResolverImpl.CURRENCY_VAR, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"request.removeAttribute(SANDBOX_DATE_TIME_VAR, WebRequest.SCOPE_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"request.removeAttribute(SANDBOX_ID_VAR, WebRequest.SCOPE_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"request.setAttribute(SANDBOX_ID_VAR, sandboxId, WebRequest.SCOPE_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"request.setAttribute(SANDBOX_DATE_TIME_VAR, overrideTime, WebRequest.SCOPE_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"request.removeAttribute(SANDBOX_DATE_TIME_VAR, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"request.removeAttribute(SANDBOX_ID_VAR, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"request.setAttribute(SANDBOX_ID_VAR, sandboxId, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"request.setAttribute(SANDBOX_DATE_TIME_VAR, overrideTime, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
"request.setAttribute(mergeCartResponseKey, mergeCartResponse, WebRequest.SCOPE_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,0,0
"request.setAttribute(mergeCartResponseKey, mergeCartResponse, WebRequest.SCOPE_GLOBAL_SESSION);",c791912933ec9b1311b63b4671d449207cad7e3f,0,1
Order cart = null;,2406723e3f4313cf959ce2aff0578693004c1112,3,0
"public Order mergeCart(Customer customer, WebRequest request) {",2406723e3f4313cf959ce2aff0578693004c1112,3,0
Order cart = orderService.findCartForCustomer(anonymousCustomer);,2406723e3f4313cf959ce2aff0578693004c1112,3,0
Order cart = orderService.findCartForCustomer(customer);,2406723e3f4313cf959ce2aff0578693004c1112,3,1
"@Resource(name = ""blMergeCartService"")",2406723e3f4313cf959ce2aff0578693004c1112,2,0
"@Resource(name = ""blCustomerStateRequestProcessor"")",2406723e3f4313cf959ce2aff0578693004c1112,2,0
"protected static String cartRequestAttributeName = ""cart"";",2406723e3f4313cf959ce2aff0578693004c1112,2,0
"cart = mergeCart(customer, request);",2406723e3f4313cf959ce2aff0578693004c1112,2,0
cart = orderService.findCartForCustomer(customer);,2406723e3f4313cf959ce2aff0578693004c1112,2,0
cart = orderService.getNullOrder();,2406723e3f4313cf959ce2aff0578693004c1112,2,0
"public boolean mergeCartNeeded(Customer customer, WebRequest request) {",2406723e3f4313cf959ce2aff0578693004c1112,2,0
public static String getCartRequestAttributeName() {,2406723e3f4313cf959ce2aff0578693004c1112,2,0
return cartRequestAttributeName;,2406723e3f4313cf959ce2aff0578693004c1112,2,0
public static void setCartRequestAttributeName(String cartRequestAttributeName) {,2406723e3f4313cf959ce2aff0578693004c1112,2,0
CartStateRequestProcessor.cartRequestAttributeName = cartRequestAttributeName;,2406723e3f4313cf959ce2aff0578693004c1112,2,0
protected boolean copyCartWhenSpecifiedStateChanges = false;,2406723e3f4313cf959ce2aff0578693004c1112,2,1
"protected static String cartRequestAttributeName = ""cart"";",2406723e3f4313cf959ce2aff0578693004c1112,2,1
cart = orderService.getNullOrder();,2406723e3f4313cf959ce2aff0578693004c1112,2,1
cart = orderService.createNewCartForCustomer(customer);,2406723e3f4313cf959ce2aff0578693004c1112,2,1
public static String getCartRequestAttributeName() {,2406723e3f4313cf959ce2aff0578693004c1112,2,1
return cartRequestAttributeName;,2406723e3f4313cf959ce2aff0578693004c1112,2,1
public static void setCartRequestAttributeName(String cartRequestAttributeName) {,2406723e3f4313cf959ce2aff0578693004c1112,2,1
CartStateRequestProcessor.cartRequestAttributeName = cartRequestAttributeName;,2406723e3f4313cf959ce2aff0578693004c1112,2,1
* Gets whether or not the cart should be copied to a new cart and then repriced if,2406723e3f4313cf959ce2aff0578693004c1112,2,1
public boolean isCopyCartWhenSpecifiedStateChanges() {,2406723e3f4313cf959ce2aff0578693004c1112,2,1
* @param copyCartWhenSpecifiedStateChanges whether or not the old cart should be copied to a new cart and then repriced,2406723e3f4313cf959ce2aff0578693004c1112,2,1
public void setCopyCartWhenSpecifiedStateChanges(boolean copyCartWhenSpecifiedStateChanges) {,2406723e3f4313cf959ce2aff0578693004c1112,2,1
"@Resource(name = ""blCartStateRequestProcessor"")",2406723e3f4313cf959ce2aff0578693004c1112,2,1
"@Resource(name = ""blOrderLockManager"")",2406723e3f4313cf959ce2aff0578693004c1112,2,1
"@Resource(name = ""blOrderService"")",2406723e3f4313cf959ce2aff0578693004c1112,2,1
import org.broadleafcommerce.core.order.service.MergeCartService;,2406723e3f4313cf959ce2aff0578693004c1112,1,0
import org.broadleafcommerce.core.order.service.call.MergeCartResponse;,2406723e3f4313cf959ce2aff0578693004c1112,1,0
import org.broadleafcommerce.core.order.service.exception.RemoveFromCartException;,2406723e3f4313cf959ce2aff0578693004c1112,1,0
import org.broadleafcommerce.core.pricing.service.exception.PricingException;,2406723e3f4313cf959ce2aff0578693004c1112,1,0
* Ensures that the customer's current cart is available to the request.,2406723e3f4313cf959ce2aff0578693004c1112,1,0
"private String mergeCartResponseKey = ""bl_merge_cart_response"";",2406723e3f4313cf959ce2aff0578693004c1112,1,0
protected CustomerStateRequestProcessor customerStateRequestProcessor;,2406723e3f4313cf959ce2aff0578693004c1112,1,0
"Customer customer = (Customer) request.getAttribute(CustomerStateRequestProcessor.getCustomerRequestAttributeName(),",2406723e3f4313cf959ce2aff0578693004c1112,1,0
if (customer == null) {,2406723e3f4313cf959ce2aff0578693004c1112,1,0
"if (mergeCartNeeded(customer, request)) {",2406723e3f4313cf959ce2aff0578693004c1112,1,0
"LOG.trace(""Merge cart required, calling mergeCart "" + customer.getId());",2406723e3f4313cf959ce2aff0578693004c1112,1,0
} else {,2406723e3f4313cf959ce2aff0578693004c1112,1,0
if (cart == null) {,2406723e3f4313cf959ce2aff0578693004c1112,1,0
// Setup cart for content rule processing,2406723e3f4313cf959ce2aff0578693004c1112,1,0
"Map<String, Object> ruleMap = (Map<String, Object>) request.getAttribute(BLC_RULE_MAP_PARAM, WebRequest.SCOPE_REQUEST);",2406723e3f4313cf959ce2aff0578693004c1112,1,0
if (ruleMap == null) {,2406723e3f4313cf959ce2aff0578693004c1112,1,0
"ruleMap = new HashMap<String, Object>();",2406723e3f4313cf959ce2aff0578693004c1112,1,0
"// Leaving the following line in for backwards compatibility, but all rules should use order as the",2406723e3f4313cf959ce2aff0578693004c1112,1,0
Customer anonymousCustomer = customerStateRequestProcessor.resolveAnonymousCustomer(request);,2406723e3f4313cf959ce2aff0578693004c1112,1,0
return (anonymousCustomer != null && customer.getId() != null && !customer.getId().equals(anonymousCustomer.getId()));,2406723e3f4313cf959ce2aff0578693004c1112,1,0
try {,2406723e3f4313cf959ce2aff0578693004c1112,1,0
"mergeCartResponse = mergeCartService.mergeCart(customer, cart);",2406723e3f4313cf959ce2aff0578693004c1112,1,0
} catch (PricingException e) {,2406723e3f4313cf959ce2aff0578693004c1112,1,0
} catch (RemoveFromCartException e) {,2406723e3f4313cf959ce2aff0578693004c1112,1,0
return mergeCartResponse.getOrder();,2406723e3f4313cf959ce2aff0578693004c1112,1,0
import org.broadleafcommerce.core.order.service.call.UpdateCartResponse;,2406723e3f4313cf959ce2aff0578693004c1112,1,1
"Customer customer = (Customer) request.getAttribute(CustomerStateRequestProcessor.getCustomerRequestAttributeName(), WebRequest.SCOPE_REQUEST);",2406723e3f4313cf959ce2aff0578693004c1112,1,1
if (customer != null) {,2406723e3f4313cf959ce2aff0578693004c1112,1,1
"LOG.trace(""Looking up cart for customer "" + customer.getId());",2406723e3f4313cf959ce2aff0578693004c1112,1,1
if (cart == null) {,2406723e3f4313cf959ce2aff0578693004c1112,1,1
} else {,2406723e3f4313cf959ce2aff0578693004c1112,1,1
try {,2406723e3f4313cf959ce2aff0578693004c1112,1,1
} catch (IllegalArgumentException e) {,2406723e3f4313cf959ce2aff0578693004c1112,1,1
if (copyCartWhenSpecifiedStateChanges) {,2406723e3f4313cf959ce2aff0578693004c1112,1,1
UpdateCartResponse updateCartResponse = updateCartService.copyCartToCurrentContext(cart);,2406723e3f4313cf959ce2aff0578693004c1112,1,1
// Setup cart for content rule processing,2406723e3f4313cf959ce2aff0578693004c1112,1,1
"Map<String, Object> ruleMap = (Map<String, Object>) request.getAttribute(BLC_RULE_MAP_PARAM, WebRequest.SCOPE_REQUEST);",2406723e3f4313cf959ce2aff0578693004c1112,1,1
if (ruleMap == null) {,2406723e3f4313cf959ce2aff0578693004c1112,1,1
"ruleMap = new HashMap<String, Object>();",2406723e3f4313cf959ce2aff0578693004c1112,1,1
"// Leaving the following line in for backwards compatibility, but all rules should use order as the",2406723e3f4313cf959ce2aff0578693004c1112,1,1
return copyCartWhenSpecifiedStateChanges;,2406723e3f4313cf959ce2aff0578693004c1112,1,1
this.copyCartWhenSpecifiedStateChanges = copyCartWhenSpecifiedStateChanges;,2406723e3f4313cf959ce2aff0578693004c1112,1,1
import org.springframework.beans.factory.annotation.Autowired;,2406723e3f4313cf959ce2aff0578693004c1112,1,0
import org.springframework.beans.factory.annotation.Qualifier;,2406723e3f4313cf959ce2aff0578693004c1112,1,0
import javax.annotation.Resource;,2406723e3f4313cf959ce2aff0578693004c1112,1,1
*,2406723e3f4313cf959ce2aff0578693004c1112,0,0
"* Also invokes blMergeCartProcessor"" if the user has just logged in.",2406723e3f4313cf959ce2aff0578693004c1112,0,0
"* Genericized version of the CartStateFilter. This was made to facilitate reuse between Servlet Filters, Portlet Filters",2406723e3f4313cf959ce2aff0578693004c1112,0,0
* and Spring MVC interceptors. Spring has an easy way of converting HttpRequests and PortletRequests into WebRequests,2406723e3f4313cf959ce2aff0578693004c1112,0,0
* via <br />,2406723e3f4313cf959ce2aff0578693004c1112,0,0
private MergeCartService mergeCartService;,2406723e3f4313cf959ce2aff0578693004c1112,0,0
WebRequest.SCOPE_REQUEST);,2406723e3f4313cf959ce2aff0578693004c1112,0,0
return;,2406723e3f4313cf959ce2aff0578693004c1112,0,0
},2406723e3f4313cf959ce2aff0578693004c1112,0,0
updateCartService.updateAndValidateCart(cart);,2406723e3f4313cf959ce2aff0578693004c1112,0,0
"request.setAttribute(cartRequestAttributeName, cart, WebRequest.SCOPE_REQUEST);",2406723e3f4313cf959ce2aff0578693004c1112,0,0
"ruleMap.put(""order"", cart);",2406723e3f4313cf959ce2aff0578693004c1112,0,0
// variable name.,2406723e3f4313cf959ce2aff0578693004c1112,0,0
"ruleMap.put(""cart"", cart);",2406723e3f4313cf959ce2aff0578693004c1112,0,0
"request.setAttribute(BLC_RULE_MAP_PARAM, ruleMap, WebRequest.SCOPE_REQUEST);",2406723e3f4313cf959ce2aff0578693004c1112,0,0
MergeCartResponse mergeCartResponse;,2406723e3f4313cf959ce2aff0578693004c1112,0,0
throw new RuntimeException(e);,2406723e3f4313cf959ce2aff0578693004c1112,0,0
"request.setAttribute(mergeCartResponseKey, mergeCartResponse, WebRequest.SCOPE_GLOBAL_SESSION);",2406723e3f4313cf959ce2aff0578693004c1112,0,0
"* Genericized version of the CartStateFilter. This was made to facilitate reuse between Servlet Filters, Portlet Filters and Spring MVC interceptors. Spring has an easy way of converting HttpRequests and PortletRequests into WebRequests via <br />",2406723e3f4313cf959ce2aff0578693004c1112,0,1
},2406723e3f4313cf959ce2aff0578693004c1112,0,1
updateCartService.validateCart(cart);,2406723e3f4313cf959ce2aff0578693004c1112,0,1
"request.setAttribute(""updateCartResponse"", updateCartResponse, WebRequest.SCOPE_REQUEST);",2406723e3f4313cf959ce2aff0578693004c1112,0,1
orderService.cancelOrder(cart);,2406723e3f4313cf959ce2aff0578693004c1112,0,1
"request.setAttribute(cartRequestAttributeName, cart, WebRequest.SCOPE_REQUEST);",2406723e3f4313cf959ce2aff0578693004c1112,0,1
"ruleMap.put(""order"", cart);",2406723e3f4313cf959ce2aff0578693004c1112,0,1
// variable name.,2406723e3f4313cf959ce2aff0578693004c1112,0,1
"ruleMap.put(""cart"", cart);",2406723e3f4313cf959ce2aff0578693004c1112,0,1
"request.setAttribute(BLC_RULE_MAP_PARAM, ruleMap, WebRequest.SCOPE_REQUEST);",2406723e3f4313cf959ce2aff0578693004c1112,0,1
/**,2406723e3f4313cf959ce2aff0578693004c1112,0,1
* {@link UpdateCartService#validateCart(Order)} throws an IllegalArgumentException,2406723e3f4313cf959ce2aff0578693004c1112,0,1
*,2406723e3f4313cf959ce2aff0578693004c1112,0,1
* @return the copyCartWhenSpecifiedStateChanges,2406723e3f4313cf959ce2aff0578693004c1112,0,1
*/,2406723e3f4313cf959ce2aff0578693004c1112,0,1
@Autowired,2406723e3f4313cf959ce2aff0578693004c1112,0,0
"@Qualifier(""blCartStateRequestProcessor"")",2406723e3f4313cf959ce2aff0578693004c1112,0,0
"@Qualifier(""blOrderLockManager"")",2406723e3f4313cf959ce2aff0578693004c1112,0,0
"@Qualifier(""blOrderService"")",2406723e3f4313cf959ce2aff0578693004c1112,0,0
public void setTitle(String title) {,f2ed6868ffa2a5a951d29b03c992a89744361379,5,1
href = request.getContextPath() + folderPart + section.getUrl();,f2ed6868ffa2a5a951d29b03c992a89744361379,5,0
public String getTitle() {,f2ed6868ffa2a5a951d29b03c992a89744361379,4,1
//            // We always want the add option to be the first toolbar action for consistency,f2ed6868ffa2a5a951d29b03c992a89744361379,4,0
href = request.getContextPath() + section.getUrl();,f2ed6868ffa2a5a951d29b03c992a89744361379,4,1
public String getUnprocessedTitle() {,f2ed6868ffa2a5a951d29b03c992a89744361379,3,0
public void setUnprocessedTitle(String unprocessedTitle) {,f2ed6868ffa2a5a951d29b03c992a89744361379,3,0
public String getProcessedTitle() {,f2ed6868ffa2a5a951d29b03c992a89744361379,3,0
public void setProcessedTitle(String processedTitle) {,f2ed6868ffa2a5a951d29b03c992a89744361379,3,0
protected String title;,f2ed6868ffa2a5a951d29b03c992a89744361379,3,1
this.title = title;,f2ed6868ffa2a5a951d29b03c992a89744361379,3,1
public FieldGroup withTitle(String title) {,f2ed6868ffa2a5a951d29b03c992a89744361379,3,1
//            } else {,f2ed6868ffa2a5a951d29b03c992a89744361379,3,0
// We always want the add option to be the first toolbar action for consistency,f2ed6868ffa2a5a951d29b03c992a89744361379,3,1
"protected static final String FOLDER_SUBSECTION = ""/folder"";",f2ed6868ffa2a5a951d29b03c992a89744361379,3,0
protected String processedTitle;,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
protected String unprocessedTitle;,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
public FieldGroup withUnprocessedTitle(String unprocessedTitle) {,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
public FieldGroup withProcessedTitle(String processedTitle) {,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
"|| (getProcessedTitle() != null && getProcessedTitle().toLowerCase().contains(""master"")) ) {",f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
return title;,f2ed6868ffa2a5a951d29b03c992a89744361379,2,1
"if (getTitle() != null && getTitle().toLowerCase().contains(""master"")) {",f2ed6868ffa2a5a951d29b03c992a89744361379,2,1
} else {,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
//        for (ListGrid lg : ef.getAllListGrids()) {,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
//            if (lg.getToolbarActions().isEmpty()) {,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
//            },f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
//        },f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
} else {,f2ed6868ffa2a5a951d29b03c992a89744361379,2,1
import javax.annotation.Resource;,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
import javax.servlet.http.HttpServletRequest;,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
// format date list grid cells,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
String newValue = formatter.format(date);,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
} catch (Exception ex) {,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
} else {,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
import javax.annotation.Resource;,f2ed6868ffa2a5a951d29b03c992a89744361379,2,1
import javax.servlet.http.HttpServletRequest;,f2ed6868ffa2a5a951d29b03c992a89744361379,2,1
import javax.annotation.Resource;,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
import javax.servlet.http.HttpServletRequest;,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
} else if (md instanceof MapMetadata) {,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
import javax.annotation.Resource;,f2ed6868ffa2a5a951d29b03c992a89744361379,2,1
import javax.servlet.http.HttpServletRequest;,f2ed6868ffa2a5a951d29b03c992a89744361379,2,1
AdminSection section = context.parseExpression(attributeValue);,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
} else {,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
} else if (requireFolder) {,f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
"final String folderPart = shouldFolder ? FOLDER_SUBSECTION : """";",f2ed6868ffa2a5a951d29b03c992a89744361379,2,0
AdminSection section = (AdminSection) context.parseExpression(attributeValue);,f2ed6868ffa2a5a951d29b03c992a89744361379,2,1
return unprocessedTitle;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
this.unprocessedTitle = unprocessedTitle;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
},f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
return processedTitle;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
this.processedTitle = processedTitle;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
return this;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
"if ((getUnprocessedTitle() != null && getUnprocessedTitle().toLowerCase().contains(""master""))",f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import org.broadleafcommerce.common.util.BLCMessageUtils;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import org.broadleafcommerce.openadmin.dto.*;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import org.broadleafcommerce.openadmin.web.form.component.*;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
"PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);",f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
if (collectionCmd.getPolymorphicEntities().getChildren().length != 0) {,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
List<ClassTree> entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedClassTrees();,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
for (ClassTree entityType : entityTypes) {,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
ListGridAction ADD = new ListGridAction(ListGridAction.ADD),f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
".withDisplayText(""Add "" + BLCMessageUtils.getMessage(entityType.getFriendlyName()));",f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
},f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
//                lg.addToolbarAction(DefaultListGridActions.ADD);,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
"//                lg.getToolbarActions().add(0, DefaultListGridActions.ADD);",f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
//,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.AdornedTargetList;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.ClassMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.CollectionMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.DynamicResultSet;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.Entity;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.FieldMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.ForeignKey;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.MapMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.MapStructure;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.Property;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.SectionCrumb;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.TabMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.component.ListGrid;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.component.ListGridRecord;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.component.MediaField;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.component.RuleBuilderField;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
for (ListGrid lg : ef.getAllListGrids()) {,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
if (lg.getToolbarActions().isEmpty()) {,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
},f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import com.fasterxml.jackson.core.Version;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import com.fasterxml.jackson.databind.ObjectMapper;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import com.fasterxml.jackson.databind.module.SimpleModule;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import org.broadleafcommerce.common.presentation.client.*;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import org.broadleafcommerce.openadmin.dto.*;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import org.broadleafcommerce.openadmin.web.form.component.*;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import org.broadleafcommerce.openadmin.web.form.entity.*;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import javax.persistence.ManyToOne;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import javax.persistence.OneToOne;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import java.text.DateFormatSymbols;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import java.text.SimpleDateFormat;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import java.util.*;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
"SimpleDateFormat formatter = new SimpleDateFormat(""MMM d, Y @ hh:mma"");",f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
DateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
"symbols.setAmPmStrings(new String[] { ""am"", ""pm"" });",f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
"if (headerField.getFieldType().equals(""DATE"")) {",f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
try {,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
"Date date = new SimpleDateFormat(""yyyy.MM.dd HH:mm:ss"").parse(recordField.getValue());",f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
},f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import org.broadleafcommerce.common.presentation.client.AddMethodType;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.common.presentation.client.AdornedTargetAddMethodType;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.common.presentation.client.LookupType;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.common.presentation.client.SupportedFieldType;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.common.presentation.client.VisibilityEnum;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.AdornedTargetList;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.ClassMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.ClassTree;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.CollectionMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.DynamicResultSet;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.Entity;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.FieldMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.ForeignKey;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.MapMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.MapStructure;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.Property;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.SectionCrumb;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.TabMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.component.ListGrid;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.component.ListGridAction;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.component.ListGridRecord;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.component.MediaField;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.component.RuleBuilderField;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.entity.CodeField;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.entity.ComboField;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.entity.DynamicEntityFormInfo;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.entity.Field;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import com.fasterxml.jackson.core.Version;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import com.fasterxml.jackson.databind.ObjectMapper;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import com.fasterxml.jackson.databind.module.SimpleModule;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import java.util.ArrayList;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import java.util.Arrays;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import java.util.Collections;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import java.util.Date;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import java.util.HashMap;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import java.util.List;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import java.util.Map;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import java.util.Set;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import javax.persistence.ManyToOne;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import javax.persistence.OneToOne;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import com.fasterxml.jackson.databind.ObjectMapper;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import org.broadleafcommerce.common.extension.ExtensionResultStatusType;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import org.broadleafcommerce.openadmin.dto.*;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import org.broadleafcommerce.openadmin.web.form.entity.*;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import org.springframework.web.bind.annotation.*;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import javax.servlet.http.HttpServletResponse;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
"ExtensionResultStatusType result = extensionManager.getProxy().modifyModelForAddCollectionType(request,response,model,sectionKey,id,requestParams,(MapMetadata) md);",f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
if (result.equals(ExtensionResultStatusType.HANDLED)) {,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
"return ""modules/modalContainer"";",f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
},f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.AdornedTargetList;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.ClassMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.ClassTree;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.CollectionMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.DynamicResultSet;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.Entity;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.FieldMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.FilterAndSortCriteria;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.MapMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.Property;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.SectionCrumb;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.dto.TabMetadata;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.entity.DefaultMainActions;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.entity.EntityFormAction;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.broadleafcommerce.openadmin.web.form.entity.Field;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.springframework.web.bind.annotation.InitBinder;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.springframework.web.bind.annotation.ModelAttribute;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.springframework.web.bind.annotation.PathVariable;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.springframework.web.bind.annotation.RequestMapping;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.springframework.web.bind.annotation.RequestMethod;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.springframework.web.bind.annotation.RequestParam;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import org.springframework.web.bind.annotation.ResponseBody;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import com.fasterxml.jackson.databind.ObjectMapper;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
import javax.servlet.http.HttpServletResponse;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,1
"final boolean noFolder = Boolean.parseBoolean(tagAttributes.get(""data-no-folder""));",f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
"final boolean requireFolder = Boolean.parseBoolean(tagAttributes.get(""data-require-folder""));",f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
final boolean allowFolder = section.isFolderable();,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
final boolean folderByDefault = section.isFolderedByDefault();,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
if (!allowFolder) {,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
shouldFolder = false;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
if (noFolder) {,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
shouldFolder = true;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
"// nothing specified, do default",f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
shouldFolder = folderByDefault;,f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
},f2ed6868ffa2a5a951d29b03c992a89744361379,1,0
setUnprocessedTitle(unprocessedTitle);,f2ed6868ffa2a5a951d29b03c992a89744361379,0,0
setProcessedTitle(processedTitle);,f2ed6868ffa2a5a951d29b03c992a89744361379,0,0
setTitle(title);,f2ed6868ffa2a5a951d29b03c992a89744361379,0,1
".withButtonClass(""sub-list-grid-add"")",f2ed6868ffa2a5a951d29b03c992a89744361379,0,0
.withActionTargetEntity(entityType.getFullyQualifiedClassname()),f2ed6868ffa2a5a951d29b03c992a89744361379,0,0
".withUrlPostfix(""/add"")",f2ed6868ffa2a5a951d29b03c992a89744361379,0,0
".withIconClass(""blc-icon-add-category"")",f2ed6868ffa2a5a951d29b03c992a89744361379,0,0
"listGrid.getToolbarActions().add(0, ADD);",f2ed6868ffa2a5a951d29b03c992a89744361379,0,0
"listGrid.getToolbarActions().add(0, DefaultListGridActions.ADD);",f2ed6868ffa2a5a951d29b03c992a89744361379,0,0
lg.addToolbarAction(DefaultListGridActions.ADD);,f2ed6868ffa2a5a951d29b03c992a89744361379,0,1
"lg.getToolbarActions().add(0, DefaultListGridActions.ADD);",f2ed6868ffa2a5a951d29b03c992a89744361379,0,1
formatter.setDateFormatSymbols(symbols);,f2ed6868ffa2a5a951d29b03c992a89744361379,0,0
recordField.setValue(newValue);,f2ed6868ffa2a5a951d29b03c992a89744361379,0,0
recordField.setValue(p.getValue());,f2ed6868ffa2a5a951d29b03c992a89744361379,0,0
recordField.setValue(p.getValue());,f2ed6868ffa2a5a951d29b03c992a89744361379,0,1
"model.addAttribute(""entityId"", id);",f2ed6868ffa2a5a951d29b03c992a89744361379,0,0
"model.addAttribute(""sectionKey"", sectionKey);",f2ed6868ffa2a5a951d29b03c992a89744361379,0,0
"model.addAttribute(""collectionField"", collectionField);",f2ed6868ffa2a5a951d29b03c992a89744361379,0,0
final boolean shouldFolder;,f2ed6868ffa2a5a951d29b03c992a89744361379,0,0
if (reason == null && offer != null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,5,0
if (reason == null && offer != null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,5,1
} else if (this.offerName != null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,4,0
} else if (this.offerName != null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,4,0
} else if (this.offerName != null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,4,0
"return value == null ? null : BroadleafCurrencyUtils.getMoney(value, getCurrency());",62e9e329aac8eebda3431cd601360c9ffa46fc49,4,1
// adjustments should only have more precision if the roundingScale was,62e9e329aac8eebda3431cd601360c9ffa46fc49,4,0
if (reason == null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,1
if (deproxiedOffer == null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
if (postLoaderDao != null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
} else if (offer instanceof HibernateProxy) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
if (reason != null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
if (reason == null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,1
if (deproxiedOffer == null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
if (postLoaderDao != null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
} else if (offer instanceof HibernateProxy) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
if (reason != null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
if (reason == null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,1
if (deproxiedOffer == null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
if (postLoaderDao != null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
} else if (offer instanceof HibernateProxy) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
if (reason != null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
public Money getFutureCreditAdjustmentValue() {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
public Money getFutureCreditTotalAdjustmentValue() {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
if (value == null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
if (currency == null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
if (_roundingMode == null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
if (ctx != null) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,3,0
if (!(obj instanceof OrderItemPriceDetailAdjustmentImpl)) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
if (getClass() != obj.getClass()) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,1
} else {,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
"@ManyToOne(targetEntity = OrderItemImpl.class, cascade = {CascadeType.REFRESH})",62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
} else {,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
} else {,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
* Copyright (C) 2009 - 2013 Broadleaf Commerce,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
} else {,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
* Copyright (C) 2009 - 2016 Broadleaf Commerce,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,1
} else {,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,1
public List<OrderItemPriceDetailAdjustment> getFutureCreditOrderItemPriceDetailAdjustments() {,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
for (OrderItemPriceDetailAdjustment adjustment : orderItemPriceDetailAdjustments) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
if (adjustment.isFutureCredit()) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
if (!adjustment.isFutureCredit()) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
"Money adjustmentValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getCurrency());",62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
// handle null currency by setting to system default,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
import org.broadleafcommerce.common.web.BroadleafRequestContext;,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
if (! adjustment.isFutureCredit()) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
// preserve highest scale / allows adjustments to maintain more precision,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
} else {,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
public RoundingMode getRoundingModeForAdj() {,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
if (StringUtils.isNotEmpty(modeStr)) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
} catch (Exception e) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,0
if (!adjustment.isFutureCredit()) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,2,1
this.reason = reason;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
this.offerName = offerName;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
this.reason = reason;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
this.offerName = offer.getName();,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
@ManyToOne(targetEntity = OrderItemImpl.class),62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
import org.broadleafcommerce.common.persistence.DefaultPostLoaderDao;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
import org.broadleafcommerce.common.persistence.PostLoaderDao;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
import org.broadleafcommerce.common.util.HibernateUtils;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
import org.hibernate.proxy.HibernateProxy;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
PostLoaderDao postLoaderDao = DefaultPostLoaderDao.getPostLoaderDao();,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
Long id = offer.getId();,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
"deproxiedOffer = postLoaderDao.find(OfferImpl.class, id);",62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
deproxiedOffer = HibernateUtils.deproxy(offer);,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
deproxiedOffer = offer;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
},62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
return deproxiedOffer;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
this.reason = reason;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
this.reason = this.offerName;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
deproxiedOffer = null;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
this.orderItemPriceDetail = orderItemPriceDetail;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
this.reason = reason;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
this.reason = offer.getName();,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
},62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
return offer;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
import org.broadleafcommerce.common.persistence.DefaultPostLoaderDao;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
import org.broadleafcommerce.common.persistence.PostLoaderDao;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
import org.broadleafcommerce.common.util.HibernateUtils;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
import org.hibernate.proxy.HibernateProxy;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
PostLoaderDao postLoaderDao = DefaultPostLoaderDao.getPostLoaderDao();,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
Long id = offer.getId();,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
"deproxiedOffer = postLoaderDao.find(OfferImpl.class, id);",62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
deproxiedOffer = HibernateUtils.deproxy(offer);,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
deproxiedOffer = offer;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
},62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
return deproxiedOffer;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
this.reason = reason;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
this.reason = this.offerName;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
deproxiedOffer = null;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
this.orderItemPriceDetail = orderItemPriceDetail;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
this.reason = reason;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
this.reason = offer.getName();,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
},62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
return offer;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
import org.broadleafcommerce.common.persistence.DefaultPostLoaderDao;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
import org.broadleafcommerce.common.persistence.PostLoaderDao;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
import org.broadleafcommerce.common.util.HibernateUtils;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
import org.hibernate.proxy.HibernateProxy;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
PostLoaderDao postLoaderDao = DefaultPostLoaderDao.getPostLoaderDao();,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
Long id = offer.getId();,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
"deproxiedOffer = postLoaderDao.find(OfferImpl.class, id);",62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
deproxiedOffer = HibernateUtils.deproxy(offer);,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
deproxiedOffer = offer;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
},62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
return deproxiedOffer;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
this.reason = reason;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
this.reason = this.offerName;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
deproxiedOffer = null;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
this.orderItemPriceDetail = orderItemPriceDetail;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
this.reason = offer.getName();,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
this.reason = reason;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
},62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
return offer;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
@Override,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
List<OrderItemPriceDetailAdjustment> orderDiscountAdjustments = new ArrayList<>();,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
},62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
return orderDiscountAdjustments;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
adjustmentValue = adjustmentValue.add(adjustment.getValue());,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
return adjustmentValue;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
return getFutureCreditAdjustmentValue().multiply(quantity);,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
adjustmentValue = adjustmentValue.add(adjustment.getValue());,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
import org.broadleafcommerce.common.currency.domain.BroadleafCurrencyImpl;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
return null;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
},62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
BroadleafCurrency currency = getCurrency();,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
currency = new BroadleafCurrencyImpl();,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
"return new Money(value, currency, value.scale());",62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
import org.apache.commons.lang3.StringUtils;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
import org.broadleafcommerce.common.money.BankersRounding;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
import org.broadleafcommerce.common.util.ApplicationContextHolder;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
import org.broadleafcommerce.core.payment.service.OrderPaymentStatusService;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
import org.springframework.context.ApplicationContext;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
import java.math.RoundingMode;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
if (adjustment.getValue().getAmount().scale() >,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
adjustmentValue.getAmount().scale()) {,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
adjustmentValue = adjustment.getValue().add(adjustmentValue);,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
adjustmentValue = adjustmentValue.add(adjustment.getValue());,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
},62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
RoundingMode mode = RoundingMode.HALF_EVEN;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
ApplicationContext ctx = ApplicationContextHolder.getApplicationContext();,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
String modeStr = ctx.getEnvironment().getProperty(,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
try {,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
mode = RoundingMode.valueOf(modeStr);,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
_roundingMode = mode;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
return _roundingMode;,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
"return getAdjustmentValue().multiplyWithRounding(quantity,",62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
"return getFutureCreditAdjustmentValue().multiplyWithRounding(quantity,",62e9e329aac8eebda3431cd601360c9ffa46fc49,1,0
adjustmentValue = adjustmentValue.add(adjustment.getValue());,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
return getAdjustmentValue().multiply(quantity);,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
return getFutureCreditAdjustmentValue().multiply(quantity);,62e9e329aac8eebda3431cd601360c9ffa46fc49,1,1
"cloned.init(orderItemPriceDetail, offer, reason);",62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
// dont clone,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,1
cloned.setOrderItemPriceDetail(orderItemPriceDetail);,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,1
cloned.setReason(reason);,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,1
@Transient,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
protected Offer deproxiedOffer;,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
setOrderItemPriceDetail(orderItemPriceDetail);,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
setReason(reason);,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
@Transient,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
protected Offer deproxiedOffer;,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
setOrderItemPriceDetail(orderItemPriceDetail);,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
setReason(reason);,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
@Transient,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
protected Offer deproxiedOffer;,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
setOrderItemPriceDetail(orderItemPriceDetail);,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
setReason(reason);,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
orderDiscountAdjustments.add(adjustment);,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
currency.setCurrencyCode(Money.defaultCurrency().getCurrencyCode());,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
private static RoundingMode _roundingMode;,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
// overridden,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
"""item.offer.percent.rounding.mode"");",62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
e.printStackTrace();,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
getRoundingModeForAdj());,62e9e329aac8eebda3431cd601360c9ffa46fc49,0,0
"for (Entry<String, EntityForm> entry : entityForm.getDynamicForms().entrySet()) {",b389a4bff2a1d7b804e2c6068874684eb59f4313,5,0
"for (Entry<String, EntityForm> entry : entityForm.getDynamicForms().entrySet()) {",b389a4bff2a1d7b804e2c6068874684eb59f4313,5,0
for (Field field : fieldGroup.getFields()) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,5,1
"for (Entry<String, Field> entry : entityForm.getFields().entrySet()) {",b389a4bff2a1d7b804e2c6068874684eb59f4313,5,1
"public Entity addEntity(EntityForm entityForm, String[] customCriteria) throws ServiceException {",b389a4bff2a1d7b804e2c6068874684eb59f4313,4,1
"public Entity updateEntity(EntityForm entityForm, String[] customCriteria) throws ServiceException {",b389a4bff2a1d7b804e2c6068874684eb59f4313,4,1
"for (Entry<String, List<String>> error : dynamicFormEntity.getValidationErrors().entrySet()) {",b389a4bff2a1d7b804e2c6068874684eb59f4313,4,1
"for (Entry<String, List<String>> error : dynamicFormEntity.getValidationErrors().entrySet()) {",b389a4bff2a1d7b804e2c6068874684eb59f4313,4,1
"public PersistenceResponse addEntity(EntityForm entityForm, String[] customCriteria) throws ServiceException {",b389a4bff2a1d7b804e2c6068874684eb59f4313,3,1
"public PersistenceResponse updateEntity(EntityForm entityForm, String[] customCriteria) throws ServiceException {",b389a4bff2a1d7b804e2c6068874684eb59f4313,3,1
for (Tab tab : tabs) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,3,1
for (FieldGroup fieldGroup : tab.getFieldGroups()) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,3,1
Property p = new Property();,b389a4bff2a1d7b804e2c6068874684eb59f4313,3,1
"public Entity addEntity(EntityForm entityForm, String[] customCriteria)",b389a4bff2a1d7b804e2c6068874684eb59f4313,2,0
throws ServiceException {,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,0
"public Entity updateEntity(EntityForm entityForm, String[] customCriteria)",b389a4bff2a1d7b804e2c6068874684eb59f4313,2,0
} catch (ValidationException e) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,0
"* Since the entity form can have multiple dynamic forms defined within it, it should be saved as an all-or-nothing",b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
"@Transactional(value = ""blTransactionManager"", rollbackFor = {ServiceException.class})",b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
Entity returnEntity = add(ppr);,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
"// Once the entity has been saved, we can utilize its id for the subsequent dynamic forms",b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
} catch (ClassNotFoundException e) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
"String idProperty = (String) idMetadata.get(""name"");",b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
//add all of the validation errors from the dynamic forms to the main entity,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
Entity returnEntity = update(ppr);,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
"protected void persistDynamicForms(EntityForm entityForm,",b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
"Map<String, List<String>> dynamicFormValidationErrors) throws ServiceException {",b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
Entity dynamicFormEntity = update(ppr);,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
"//if the dynamic form has failed validation, ensure they are properly added to the main entity validation",b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
throws ServiceException {,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,0
} catch (ValidationException e) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,0
"* Since the entity form can have multiple dynamic forms defined within it, it should be saved as an all-or-nothing",b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
"@Transactional(value = ""blTransactionManager"", rollbackFor = {ServiceException.class})",b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
"// Once the entity has been saved, we can utilize its id for the subsequent dynamic forms",b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
} catch (ClassNotFoundException e) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
"String idProperty = (String) idMetadata.get(""name"");",b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
//add all of the validation errors from the dynamic forms to the main entity,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
"protected void persistDynamicForms(EntityForm entityForm,",b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
"Map<String, List<String>> dynamicFormValidationErrors) throws ServiceException {",b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
Entity dynamicFormEntity = update(ppr).getEntity();,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
"//if the dynamic form has failed validation, ensure they are properly added to the main entity validation",b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
} else {,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,0
} catch (ValidationException e) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,0
return fields == null ? null : fields.get(fieldName);,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,0
return fields == null ? null : fields.get(fieldName);,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
List<Property> properties = getPropertiesFromEntityForm(entityForm);,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,0
List<Property> properties = new ArrayList<Property>();,b389a4bff2a1d7b804e2c6068874684eb59f4313,2,1
"// If the entity form has dynamic forms inside of it, we need to persist those as well.",b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
"// They are typically done in their own custom persistence handlers, which will get triggered",b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
DynamicEntityFormInfo info = entityForm.getDynamicFormInfo(entry.getKey());,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
customCriteria = new String[] {info.getCriteriaName()};,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
"PersistencePackageRequest subRequest = getRequestForEntityForm(entry.getValue(), customCriteria);",b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
return add(ppr);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
return update(ppr);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
try {,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
return service.add(pkg);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
return e.getEntity();,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
},b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
return service.update(pkg);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
Class<?> entityClass;,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
try {,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
entityClass = Class.forName(entityForm.getEntityType());,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
},b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
"Map<String, Object> idMetadata = dynamicDaoHelper.getIdMetadata(entityClass, (HibernateEntityManager) em);",b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
"Map<String, List<String>> dynamicFormValidationErrors = new HashMap<String, List<String>>();",b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
if (MapUtils.isNotEmpty(returnEntity.getValidationErrors())) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
return returnEntity;,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
* @param entityForm the main form that contains the dynamic forms,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
"PersistencePackageRequest ppr = getRequestForEntityForm(entry.getValue(), customCriteria);",b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
if (dynamicFormEntity.isValidationFailure()) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
return service.add(pkg);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
return service.update(pkg);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
"public PersistenceResponse addEntity(EntityForm entityForm, String[] customCriteria)",b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
"// If the entity form has dynamic forms inside of it, we need to persist those as well.",b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
"// They are typically done in their own custom persistence handlers, which will get triggered",b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
DynamicEntityFormInfo info = entityForm.getDynamicFormInfo(entry.getKey());,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
customCriteria = new String[] {info.getCriteriaName()};,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
"PersistencePackageRequest subRequest = getRequestForEntityForm(entry.getValue(), customCriteria);",b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
return add(ppr);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
"public PersistenceResponse updateEntity(EntityForm entityForm, String[] customCriteria)",b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
return update(ppr);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
try {,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
return service.add(pkg);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
return e.getEntity();,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
},b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
return service.update(pkg);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
PersistenceResponse response = add(ppr);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
Class<?> entityClass;,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
try {,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
entityClass = Class.forName(entityForm.getEntityType());,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
},b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
"Map<String, Object> idMetadata = dynamicDaoHelper.getIdMetadata(entityClass, (HibernateEntityManager) em);",b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
"Map<String, List<String>> dynamicFormValidationErrors = new HashMap<String, List<String>>();",b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
if (MapUtils.isNotEmpty(response.getEntity().getValidationErrors())) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
return response;,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
PersistenceResponse response = update(ppr);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
* @param entityForm the main form that contains the dynamic forms,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
"PersistencePackageRequest ppr = getRequestForEntityForm(entry.getValue(), customCriteria);",b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
if (dynamicFormEntity.isValidationFailure()) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
return service.add(pkg);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
return service.update(pkg);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
fmd.getAddMethodType().equals(AddMethodType.LOOKUP_FOR_UPDATE)) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
if (fmd.getAddMethodType().equals(AddMethodType.LOOKUP_FOR_UPDATE)) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
},b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
if (request.isUpdateLookupType()) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
if (pkg.getSectionCrumbs() != null && pkg.getSectionCrumbs().length > 0) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
SectionCrumb sc = pkg.getSectionCrumbs()[0];,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
if (StringUtils.isNotBlank(sc.getSectionIdentifier())) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
return service.update(pkg);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
return service.add(pkg);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
try {,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
return service.remove(pkg);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
return new PersistenceResponse().withEntity(e.getEntity());,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
if (fmd.getAddMethodType().equals(AddMethodType.LOOKUP)) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
return service.add(pkg);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
return service.remove(pkg);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
return null;,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
"LOG.info(""Excluding dynamic field "" + dynamicField.getKey() + "" as there is already an occurrence in"" +",b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
"Map<String, Field> fields = getFields();",b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
return fields.get(fieldName);,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,0
"LOG.info(""Excluding dynamic field "" + dynamicField.getKey() + "" as there is already an occurrance in"" +",b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
if (field.getName().equals(fieldName)) {,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
return field;,b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
},b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
},b389a4bff2a1d7b804e2c6068874684eb59f4313,1,1
// based on the criteria specific in the PersistencePackage.,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,0
"ppr.addSubRequest(info.getPropertyName(), subRequest);",b389a4bff2a1d7b804e2c6068874684eb59f4313,0,0
import org.apache.commons.collections.MapUtils;,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
import org.hibernate.ejb.HibernateEntityManager;,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
import org.springframework.transaction.annotation.Transactional;,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
/**,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
* approach and roll back when any ServiceExceptions have been thrown in any of the saves.,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
*/,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
throw new ServiceException(e);,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
entityForm.setId(returnEntity.findProperty(idProperty).getValue());,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
"persistDynamicForms(entityForm, dynamicFormValidationErrors);",b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
returnEntity.getValidationErrors().putAll(dynamicFormValidationErrors);,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
"throw new ValidationException(returnEntity, ""Validation Exception"");",b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
"//If there are any validation exceptions, throw a validation exception to ensure that the entire transaction is rolled back",b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
*,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
* @param dynamicFormValidationErrors object to store validation errors that appear on dynamic forms,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
* @throws ServiceException,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
String[] customCriteria;,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
//errors and keyed properly,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
"dynamicFormValidationErrors.put(info.getPropertyName() + DynamicEntityFormInfo.FIELD_SEPARATOR + error.getKey(), error.getValue());",b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
// based on the criteria specific in the PersistencePackage.,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,0
"ppr.addSubRequest(info.getPropertyName(), subRequest);",b389a4bff2a1d7b804e2c6068874684eb59f4313,0,0
import org.hibernate.ejb.HibernateEntityManager;,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
import org.springframework.transaction.annotation.Transactional;,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
/**,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
* approach and roll back when any ServiceExceptions have been thrown in any of the saves.,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
*/,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
throw new ServiceException(e);,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
entityForm.setId(response.getEntity().findProperty(idProperty).getValue());,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
"persistDynamicForms(entityForm, dynamicFormValidationErrors);",b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
response.getEntity().getValidationErrors().putAll(dynamicFormValidationErrors);,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
"throw new ValidationException(response.getEntity(), ""Validation Exception"");",b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
"//If there are any validation exceptions, throw a validation exception to ensure that the entire transaction is rolled back",b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
*,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
* @param dynamicFormValidationErrors object to store validation errors that appear on dynamic forms,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
* @throws ServiceException,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
String[] customCriteria;,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
//errors and keyed properly,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
"dynamicFormValidationErrors.put(info.getPropertyName() + DynamicEntityFormInfo.FIELD_SEPARATOR + error.getKey(), error.getValue());",b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
if (fmd.getAddMethodType().equals(AddMethodType.LOOKUP) ||,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,0
ppr.setUpdateLookupType(true);,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,0
pkg.setSecurityCeilingEntityFullyQualifiedClassname(sc.getSectionIdentifier());,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,0
p.setName(entry.getKey());,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
p.setValue(entry.getValue().getValue());,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
properties.add(p);,b389a4bff2a1d7b804e2c6068874684eb59f4313,0,1
"} else if (operator.equals(""=="") && isFieldComparison) {",fad5b75f13c673e999075eda9709c449b87dbb66,6,1
"} else if (operator.equals(""!="") && isFieldComparison) {",fad5b75f13c673e999075eda9709c449b87dbb66,6,1
"} else if (operator.equals("">"") && isFieldComparison) {",fad5b75f13c673e999075eda9709c449b87dbb66,6,1
"} else if (operator.equals(""<"") && isFieldComparison) {",fad5b75f13c673e999075eda9709c449b87dbb66,6,1
"} else if (operator.equals("">="") && isFieldComparison) {",fad5b75f13c673e999075eda9709c449b87dbb66,6,1
"} else if (operator.equals(""<="") && isFieldComparison) {",fad5b75f13c673e999075eda9709c449b87dbb66,6,1
"} else if (operator.equals(""contains"") && isFieldComparison) {",fad5b75f13c673e999075eda9709c449b87dbb66,6,1
"} else if (operator.equals(""startsWith"") && isFieldComparison) {",fad5b75f13c673e999075eda9709c449b87dbb66,6,1
"} else if (operator.equals(""endsWith"") && isFieldComparison) {",fad5b75f13c673e999075eda9709c449b87dbb66,6,1
"protected String[] extractOldSpecialComponents(String phrase, String operator) {",fad5b75f13c673e999075eda9709c449b87dbb66,5,0
"protected String[] extractStandardComponents(String phrase, String operator) {",fad5b75f13c673e999075eda9709c449b87dbb66,5,0
"protected String[] extractSpecialComponents(String phrase, String operator) {",fad5b75f13c673e999075eda9709c449b87dbb66,5,0
"} else if (operator.equals(""!="") && value.equals(""null"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,5,1
"} else if (operator.equals(""contains"") && isNegation) {",fad5b75f13c673e999075eda9709c449b87dbb66,5,1
"} else if (operator.equals(""startsWith"") && isNegation) {",fad5b75f13c673e999075eda9709c449b87dbb66,5,1
"} else if (operator.equals(""endsWith"") && isNegation) {",fad5b75f13c673e999075eda9709c449b87dbb66,5,1
"protected String[] extractOldSpecialComponents(String phrase, String operator) {",fad5b75f13c673e999075eda9709c449b87dbb66,5,0
"protected String[] extractOldSpecialComponents(String phrase, String operator) {",fad5b75f13c673e999075eda9709c449b87dbb66,5,1
"value = value.substring(0, value.indexOf(""\"")"") + 1) + value.substring(value.indexOf(""\"")"") + 2);",fad5b75f13c673e999075eda9709c449b87dbb66,5,0
if (methodPos >= 0 && parenthesisPos >= 0) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"field = field.substring(0, field.lastIndexOf(""["")) + FieldManager.MAPFIELDSEPARATOR +",fad5b75f13c673e999075eda9709c449b87dbb66,4,0
"field = field.substring(field.indexOf(""("") + 1, field.length() - 1);",fad5b75f13c673e999075eda9709c449b87dbb66,4,0
"} else if (field.matches("".*\\?get\\(\"".*?\""\\)\\.\\?getValue\\(\\).*"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,0
"field = field.substring(0, field.lastIndexOf("".?get("")) + FieldManager.MAPFIELDSEPARATOR +",fad5b75f13c673e999075eda9709c449b87dbb66,4,0
"} else if (field.matches("".*\\?get\\(\"".*?\""\\)\\.\\?value.*"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,0
"} else if (components[0].matches("".*\\?get\\(\"".*?\""\\)\\.\\?getValue\\(\\).*"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,1
private static final String[] OLD_SPECIAL_CASES = {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
private static final String[] SPECIAL_CASES = {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
private static final String[] STANDARD_OPERATORS = {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
String[] components = new String[3];,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
"""compatible form for the rules builder ("" + phrase + "")"");",fad5b75f13c673e999075eda9709c449b87dbb66,4,0
String[] temp = new String[3];,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (isFieldComparison) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (isIgnoreCase) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.NOT_EQUALS_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.GREATER_THAN_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.LESS_THAN_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.GREATER_THAN_EQUALS_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.LESS_THAN_EQUALS_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.CONTAINS_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_CONTAINS_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.STARTS_WITH_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_STARTS_WITH_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.ENDS_WITH_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_ENDS_WITH_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_GREATER_THAN_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_GREATER_THAN_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_GREATER_THAN_EQUALS_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_GREATER_THAN_EQUAL_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_LESS_THAN_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_LESS_THAN_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_LESS_THAN_EQUALS_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_LESS_THAN_EQUAL_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_EQUALS_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_EQUAL_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_GREATER_THAN_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR) ||,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_EQUALS_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR) ||,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
private static final String[] SPECIALCASES = {,fad5b75f13c673e999075eda9709c449b87dbb66,4,1
private static final String[] STANDARDOPERATORS = {,fad5b75f13c673e999075eda9709c449b87dbb66,4,1
String[] components = new String[]{};,fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"""compatible form for the rules builder ("" + phrase + "")"");",fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"protected String[] extractSpecialComponents(String[] components, String key) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"} else if (operator.equals(""=="")) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"} else if (operator.equals(""!="")) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"} else if (operator.equals("">"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"} else if (operator.equals(""<"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"} else if (operator.equals("">="")) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"} else if (operator.equals(""<="")) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"} else if (operator.equals(""contains"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"} else if (operator.equals(""startsWith"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"} else if (operator.equals(""endsWith"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"} else if (operator.equals("".size()>"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"} else if (operator.equals("".size()>="")) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"} else if (operator.equals("".size()<"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"} else if (operator.equals("".size()<="")) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"} else if (operator.equals("".size()=="")) {",fad5b75f13c673e999075eda9709c449b87dbb66,4,1
} else if (operator.equals(DataDTOToMVELTranslator.SIZE_GREATER_THAN_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.SIZE_GREATER_THAN_EQUALS_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.SIZE_LESS_THAN_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.SIZE_LESS_THAN_EQUALS_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.SIZE_EQUALS_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.SIZE_GREATER_THAN_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR)){,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
} else if (operator.equals(DataDTOToMVELTranslator.SIZE_EQUALS_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR)){,fad5b75f13c673e999075eda9709c449b87dbb66,4,0
String[] temp = new String[3];,fad5b75f13c673e999075eda9709c449b87dbb66,4,1
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_GREATER_THAN_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_GREATER_THAN_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,1
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_GREATER_THAN_EQUALS_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_GREATER_THAN_EQUAL_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,1
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_LESS_THAN_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_LESS_THAN_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,1
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_LESS_THAN_EQUALS_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_LESS_THAN_EQUAL_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,1
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_EQUALS_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_EQUAL_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,4,1
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_GREATER_THAN_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR) ||,fad5b75f13c673e999075eda9709c449b87dbb66,4,1
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_EQUALS_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR) ||,fad5b75f13c673e999075eda9709c449b87dbb66,4,1
"value = value.substring(0, value.indexOf("")"")) + value.substring(value.indexOf("")"") + 1);",fad5b75f13c673e999075eda9709c449b87dbb66,4,0
//check to see if there's a method call on this field,fad5b75f13c673e999075eda9709c449b87dbb66,3,1
protected String convertMapAccessSyntax(String field) {,fad5b75f13c673e999075eda9709c449b87dbb66,3,0
"field.substring(field.lastIndexOf(""["") + 2, field.lastIndexOf(""]"") - 1) +",fad5b75f13c673e999075eda9709c449b87dbb66,3,0
"field.substring(field.lastIndexOf("".?get("") + 7, field.lastIndexOf("").?getValue()"") - 1) +",fad5b75f13c673e999075eda9709c449b87dbb66,3,0
//this is using MVELHelper null-safe map access syntax - must be a map field,fad5b75f13c673e999075eda9709c449b87dbb66,3,0
"field.substring(field.lastIndexOf("".?get("") + 7, field.lastIndexOf("").?value"") - 1) +",fad5b75f13c673e999075eda9709c449b87dbb66,3,0
"components[0] = components[0].substring(0, components[0].lastIndexOf(""["")) + FieldManager.MAPFIELDSEPARATOR +",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
"components[0].substring(components[0].lastIndexOf(""["") + 2, components[0].lastIndexOf(""]"") - 1) +",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
"components[0] = components[0].substring(0, components[0].lastIndexOf("".?get("")) + FieldManager.MAPFIELDSEPARATOR +",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
"components[0].substring(components[0].lastIndexOf("".?get("") + 7, components[0].lastIndexOf("").?getValue()"") - 1) +",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
"temp[2] = components[0].substring(startsWithIndex + key.length() + 1, components[0].lastIndexOf("")""));",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
"private static final String COLLECTION_CASE = ""CollectionUtils.intersection"";",fad5b75f13c673e999075eda9709c449b87dbb66,3,0
} else {,fad5b75f13c673e999075eda9709c449b87dbb66,3,0
"if (phrase.contains(operator.substring(0, operatorLastIndex)) && phrase.contains(operator.substring(operatorLastIndex))) {",fad5b75f13c673e999075eda9709c449b87dbb66,3,0
"throw new MVELTranslationException(MVELTranslationException.UNRECOGNIZABLE_RULE, ""Could not parse the MVEL expression to a "" +",fad5b75f13c673e999075eda9709c449b87dbb66,3,0
protected String[] extractOldCollectionCase(String phrase) {,fad5b75f13c673e999075eda9709c449b87dbb66,3,0
protected String[] extractCollectionCase(String phrase) {,fad5b75f13c673e999075eda9709c449b87dbb66,3,0
"String operatorBeginning = phrase.substring(0, phrase.indexOf(""("") + 1);",fad5b75f13c673e999075eda9709c449b87dbb66,3,0
"temp[2] = phrase.substring(startsWithIndex + operator.length() + 1, phrase.lastIndexOf("")""));",fad5b75f13c673e999075eda9709c449b87dbb66,3,0
} else if (isFieldComparison){,fad5b75f13c673e999075eda9709c449b87dbb66,3,0
"private static final String COLLECTIONCASE = ""CollectionUtils.intersection"";",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
temp = new String[2];,fad5b75f13c673e999075eda9709c449b87dbb66,3,1
} else {,fad5b75f13c673e999075eda9709c449b87dbb66,3,1
temp = new String[1];,fad5b75f13c673e999075eda9709c449b87dbb66,3,1
components = new String[3];,fad5b75f13c673e999075eda9709c449b87dbb66,3,1
"String[] temp = extractSpecialComponents(components, key);",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
String[] temp = extractProjection(components);,fad5b75f13c673e999075eda9709c449b87dbb66,3,1
"throw new MVELTranslationException(MVELTranslationException.UNRECOGNIZABLE_RULE, ""Could not parse the MVEL expression to a "" +",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
"temp[2] = components[0].substring(startsWithIndex + key.length() + 1, components[0].lastIndexOf("")""));",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
"if (operator.equals(""=="") && value.equals(""null"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
} else if (,fad5b75f13c673e999075eda9709c449b87dbb66,3,1
"} else if (operator.equals("".size()>0"")){",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
"} else if (operator.equals("".size()==0"")){",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
protected String[] extractCollectionCase(String phrase) {,fad5b75f13c673e999075eda9709c449b87dbb66,3,0
"temp[2] = phrase.substring(specialIndex + operator.length() + 1, phrase.lastIndexOf("")""));",fad5b75f13c673e999075eda9709c449b87dbb66,3,0
"private static final String COLLECTION_CASE = ""CollectionUtils.intersection"";",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
components = new String[3];,fad5b75f13c673e999075eda9709c449b87dbb66,3,1
} else {,fad5b75f13c673e999075eda9709c449b87dbb66,3,1
"if (phrase.contains(operator.substring(0, operatorLastIndex)) && phrase.contains(operator.substring(operatorLastIndex))) {",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
protected String[] extractOldCollectionCase(String phrase) {,fad5b75f13c673e999075eda9709c449b87dbb66,3,1
protected String[] extractCollectionCase(String phrase) {,fad5b75f13c673e999075eda9709c449b87dbb66,3,1
"String operatorBeginning = phrase.substring(0, phrase.indexOf(""("") + 1);",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
"temp[2] = phrase.substring(startsWithIndex + operator.length() + 1, phrase.lastIndexOf("")""));",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
} else {,fad5b75f13c673e999075eda9709c449b87dbb66,3,0
"value = value.substring(0, value.indexOf("")"")) + value.substring(value.indexOf("")"")+1, value.length());",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
"field = field.substring(field.indexOf(caseInsensitivityKey) + caseInsensitivityKey.length(), field.length()-1);",fad5b75f13c673e999075eda9709c449b87dbb66,3,0
"value = value.substring(0, caseIndex) +",fad5b75f13c673e999075eda9709c449b87dbb66,3,0
"if (field.startsWith(""!"" + caseInsensitivityKey)) {",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
"field = field.substring((""!"" + caseInsensitivityKey).length(), field.length()-1);",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
"value = value.substring(0, value.indexOf(caseInsensitivityKey)) +",fad5b75f13c673e999075eda9709c449b87dbb66,3,1
if (methodPos >= 0) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
"field = field.substring(0, methodPos);",fad5b75f13c673e999075eda9709c449b87dbb66,2,1
"if (field.matches("".*\\[\"".*?\""\\].*"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"if (field.startsWith(""MvelHelper.convertField("")) {",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
return field;,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"if (components[0].matches("".*\\[\"".*?\""\\].*"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,2,1
"if (components[0].startsWith(""MvelHelper.convertField("")) {",fad5b75f13c673e999075eda9709c449b87dbb66,2,1
"components[0] = components[0].substring(components[0].indexOf(""("") + 1, components[0].length()-1);",fad5b75f13c673e999075eda9709c449b87dbb66,2,1
"temp[0] = components[0].substring(key.length() + 1, components[0].indexOf("",""));",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"temp[2] = components[0].substring(components[0].indexOf("","") + 1, components[0].lastIndexOf("")""));",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
if (phrase.contains(COLLECTION_CASE)) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
boolean componentsExtracted = false;,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
if (phrase.startsWith(COLLECTION_CASE)) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
components = extractOldCollectionCase(phrase);,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
components = extractCollectionCase(phrase);,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
if (!componentsExtracted) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
for (String operator : STANDARD_OPERATORS) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
if (phrase.contains(operator)) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"components = extractStandardComponents(phrase, operator);",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
if (phrase.indexOf(key) >= 0) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"components = extractOldSpecialComponents(phrase, key);",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"components = extractSpecialComponents(phrase, operator);",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
components = extractProjection(components);,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
} catch (Exception e1) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"temp[0] = phrase.substring((COLLECTION_CASE + ""("").length(), phrase.indexOf("",""));",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"temp[2] = phrase.substring(phrase.indexOf(""[""), phrase.indexOf(""]"") + 1);",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"int fieldIndex = phrase.indexOf(""("", phrase.indexOf(COLLECTION_CASE)) + 1;",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"String operatorEnd = phrase.substring(phrase.lastIndexOf("")""));",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
temp[1] = operatorBeginning + operatorEnd;,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
temp[1] = operator;,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"temp[2] = phrase.substring(phrase.indexOf(operator) + operator.length(), phrase.length());",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"temp[0] = phrase.substring(phrase.indexOf(""("") + 1, phrase.indexOf("")""));",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"String operatorEnd = operator.substring(phrase.indexOf("")""));",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
temp[2] = phrase.substring(operatorLastIndex + operatorEnd.length());,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
if (operator.equals(DataDTOToMVELTranslator.EQUALS_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"if (value.equals(""null"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
if (isFieldComparison) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
if (isNegation) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
if (isIgnoreCase) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
if (phrase.startsWith(COLLECTIONCASE)) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
for (String operator : STANDARDOPERATORS) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
if (phrase.contains(operator)) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
"temp[1] = phrase.substring(phrase.indexOf(operator) + operator.length(), phrase.length());",fad5b75f13c673e999075eda9709c449b87dbb66,2,1
if (temp.length == 2) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
components[1] = operator;,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
components = temp;,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
if (components.length != 3) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
if (components[0].indexOf(key) >= 0) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
} catch (Exception e1) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
isIgnoreCase &&,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
if (phrase.contains(DataDTOToMVELTranslator.COLLECTION_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
if (phrase.startsWith(DataDTOToMVELTranslator.COLLECTION_OPERATOR)) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
components = extractCollectionCase(phrase);,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
if (!componentsExtracted) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"if (phrase.contains(operator.substring(0, operatorLastIndex))) {",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"components = extractSpecialComponents(phrase, operator);",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"temp[0] = phrase.substring(phrase.indexOf(""("") + 1, phrase.indexOf("",""));",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"String operatorBegin = operator.substring(0, operator.indexOf("")""));",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"temp[2] = phrase.substring(phrase.indexOf("","") + 1, phrase.lastIndexOf("")""));",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
if (phrase.contains(COLLECTION_CASE)) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
if (phrase.startsWith(COLLECTION_CASE)) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
components = extractOldCollectionCase(phrase);,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
components = extractCollectionCase(phrase);,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
if (!componentsExtracted) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
"components = extractSpecialComponents(phrase, operator);",fad5b75f13c673e999075eda9709c449b87dbb66,2,1
"temp[0] = phrase.substring((COLLECTION_CASE + ""("").length(), phrase.indexOf("",""));",fad5b75f13c673e999075eda9709c449b87dbb66,2,1
"int fieldIndex = phrase.indexOf(""("", phrase.indexOf(COLLECTION_CASE)) + 1;",fad5b75f13c673e999075eda9709c449b87dbb66,2,1
"temp[2] = phrase.substring(phrase.indexOf(""[""), phrase.indexOf(""]"") + 1);",fad5b75f13c673e999075eda9709c449b87dbb66,2,1
"String operatorEnd = phrase.substring(phrase.lastIndexOf("")""));",fad5b75f13c673e999075eda9709c449b87dbb66,2,1
temp[1] = operatorBeginning + operatorEnd;,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
"temp[0] = phrase.substring(phrase.indexOf(""("") + 1, phrase.indexOf("")""));",fad5b75f13c673e999075eda9709c449b87dbb66,2,1
"String operatorEnd = operator.substring(phrase.indexOf("")""));",fad5b75f13c673e999075eda9709c449b87dbb66,2,1
temp[2] = phrase.substring(operatorLastIndex + operatorEnd.length());,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
"if (value.contains(""\"")"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"if (field.startsWith(""!"") || phrase.startsWith(""!"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,2,0
if (field.contains(caseInsensitivityKey)) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,0
"if (field.startsWith(""!"")) {",fad5b75f13c673e999075eda9709c449b87dbb66,2,1
if (field.startsWith(caseInsensitivityKey)) {,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
"field = field.substring(caseInsensitivityKey.length(), field.length()-1);",fad5b75f13c673e999075eda9709c449b87dbb66,2,1
//check for NOT operator,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
isIgnoreCase = true;,fad5b75f13c673e999075eda9709c449b87dbb66,2,1
"int methodPos = field.lastIndexOf(""."");",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
int parenthesisPos = -1;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
"parenthesisPos = field.indexOf(""()"", methodPos);",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
},fad5b75f13c673e999075eda9709c449b87dbb66,1,1
components[0] = convertMapAccessSyntax(components[0]);,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return components;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
},fad5b75f13c673e999075eda9709c449b87dbb66,1,0
"field.substring(field.lastIndexOf(""]"") + 1, field.length());",fad5b75f13c673e999075eda9709c449b87dbb66,1,0
"field.substring(field.lastIndexOf("").?getValue()"") + 13, field.length());",fad5b75f13c673e999075eda9709c449b87dbb66,1,0
"field.substring(field.lastIndexOf("").?value"") + 8, field.length());",fad5b75f13c673e999075eda9709c449b87dbb66,1,0
"components[0].substring(components[0].lastIndexOf(""]"") + 1, components[0].length());",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
"components[0].substring(components[0].lastIndexOf("").?getValue()"") + 13, components[0].length());",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return components;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
"temp[1] = key.substring(37, key.length());",fad5b75f13c673e999075eda9709c449b87dbb66,1,0
int startsWithIndex = components[0].indexOf(key);,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
"temp[0] = components[0].substring(0, startsWithIndex);",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
"temp[1] = key.substring(1, key.length());",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
import org.broadleafcommerce.openadmin.web.rulebuilder.DataDTOToMVELTranslator;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
},fad5b75f13c673e999075eda9709c449b87dbb66,1,0
componentsExtracted = true;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
for (String key : OLD_SPECIAL_CASES) {,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
for (String operator: SPECIAL_CASES) {,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
"int operatorLastIndex = operator.indexOf("")"");",fad5b75f13c673e999075eda9709c449b87dbb66,1,0
try {,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
"temp[1] = phrase.substring(phrase.indexOf("".size""));",fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return temp;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
"temp[0] = phrase.substring(fieldIndex, phrase.indexOf("",""));",fad5b75f13c673e999075eda9709c449b87dbb66,1,0
int startsWithIndex = phrase.indexOf(operator);,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
"temp[0] = phrase.substring(0, startsWithIndex);",fad5b75f13c673e999075eda9709c449b87dbb66,1,0
"temp[0] = phrase.substring(0, phrase.indexOf(operator));",fad5b75f13c673e999075eda9709c449b87dbb66,1,0
int operatorLastIndex = phrase.indexOf(operatorEnd);,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.IS_NULL;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.EQUALS_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.IEQUALS;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.EQUALS;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.NOT_NULL;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.NOT_EQUAL_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.INOT_EQUAL;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.NOT_EQUAL;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.GREATER_THAN_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.GREATER_THAN;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.LESS_THAN_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.LESS_THAN;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.GREATER_OR_EQUAL_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.GREATER_OR_EQUAL;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.LESS_OR_EQUAL_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.LESS_OR_EQUAL;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.INOT_CONTAINS;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.NOT_CONTAINS;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.ICONTAINS;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.CONTAINS_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.CONTAINS;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.INOT_STARTS_WITH;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.NOT_STARTS_WITH;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.ISTARTS_WITH;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.STARTS_WITH_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.STARTS_WITH;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.INOT_ENDS_WITH;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.NOT_ENDS_WITH;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.IENDS_WITH;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.ENDS_WITH_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
return BLCOperator.ENDS_WITH;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
operator.equals(DataDTOToMVELTranslator.OLD_SIZE_GREATER_THAN_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR)){,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
operator.equals(DataDTOToMVELTranslator.OLD_SIZE_EQUAL_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR)){,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
"components[0] = phrase.substring((COLLECTIONCASE+""("").length(), phrase.indexOf("",""));",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
"components[2] = phrase.substring(((COLLECTIONCASE+""("")+components[0]+"","").length(), phrase.indexOf("").size""));",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
"components[1] = phrase.substring(phrase.indexOf("".size""));",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
components[0] = convertMapAccessSyntax(components[0]);,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return components;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
String[] temp;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
"temp[0] = phrase.substring(0, phrase.indexOf(operator));",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
temp[0] = phrase;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
},fad5b75f13c673e999075eda9709c449b87dbb66,1,1
components[0] = temp[0];,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
components[2] = temp[1];,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
break;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
for (String key : SPECIALCASES) {,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
try {,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
int startsWithIndex = components[0].indexOf(key);,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
"temp[0] = components[0].substring(0, startsWithIndex);",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
"temp[1] = key.substring(1, key.length());",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.IS_NULL;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.EQUALS_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
) {,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.IEQUALS;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.EQUALS;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.NOT_NULL;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.NOT_EQUAL_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.INOT_EQUAL;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.NOT_EQUAL;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.GREATER_THAN_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.GREATER_THAN;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.LESS_THAN_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.LESS_THAN;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.GREATER_OR_EQUAL_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.GREATER_OR_EQUAL;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.LESS_OR_EQUAL_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.LESS_OR_EQUAL;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
"operator.equals(""contains"") &&",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.INOT_CONTAINS;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.NOT_CONTAINS;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.ICONTAINS;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.CONTAINS_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.CONTAINS;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
"operator.equals(""startsWith"") &&",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.INOT_STARTS_WITH;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.NOT_STARTS_WITH;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.ISTARTS_WITH;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.STARTS_WITH_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.STARTS_WITH;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
"operator.equals(""endsWith"") &&",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.INOT_ENDS_WITH;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.NOT_ENDS_WITH;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.IENDS_WITH;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.ENDS_WITH_FIELD;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return BLCOperator.ENDS_WITH;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
componentsExtracted = true;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
break;,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
},fad5b75f13c673e999075eda9709c449b87dbb66,1,0
for (String operator: SPECIAL_CASES) {,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
"int operatorLastIndex = operator.indexOf("")"");",fad5b75f13c673e999075eda9709c449b87dbb66,1,0
int specialIndex = phrase.indexOf(operator);,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
"temp[0] = phrase.substring(0, specialIndex);",fad5b75f13c673e999075eda9709c449b87dbb66,1,0
"temp[0] = phrase.substring(operatorBegin.length(), phrase.indexOf("",""));",fad5b75f13c673e999075eda9709c449b87dbb66,1,0
},fad5b75f13c673e999075eda9709c449b87dbb66,1,1
for (String operator: SPECIAL_CASES) {,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
"int operatorLastIndex = operator.indexOf("")"");",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
componentsExtracted = true;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
"temp[0] = phrase.substring(fieldIndex, phrase.indexOf("",""));",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
return temp;,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
int startsWithIndex = phrase.indexOf(operator);,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
"temp[0] = phrase.substring(0, startsWithIndex);",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
int operatorLastIndex = phrase.indexOf(operatorEnd);,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
operator.equals(DataDTOToMVELTranslator.OLD_SIZE_GREATER_THAN_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR)){,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
operator.equals(DataDTOToMVELTranslator.OLD_SIZE_EQUAL_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR)){,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
value.substring(value.indexOf(caseInsensitivityKey) + caseInsensitivityKey.length());,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
},fad5b75f13c673e999075eda9709c449b87dbb66,1,0
"value.substring(value.indexOf(caseInsensitivityKey) + caseInsensitivityKey.length(), value.length());",fad5b75f13c673e999075eda9709c449b87dbb66,1,1
int caseIndex = value.indexOf(caseInsensitivityKey);,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
value.substring(caseIndex + caseInsensitivityKey.length());,fad5b75f13c673e999075eda9709c449b87dbb66,1,0
},fad5b75f13c673e999075eda9709c449b87dbb66,1,1
value.substring(value.indexOf(caseInsensitivityKey) + caseInsensitivityKey.length());,fad5b75f13c673e999075eda9709c449b87dbb66,1,1
"""org.apache.commons.lang3.StringUtils.startsWith"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"""org.apache.commons.lang3.StringUtils.endsWith"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"""org.apache.commons.lang3.StringUtils.contains""",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
""".startsWith"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
""".endsWith"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
""".contains""",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"""org.apache.commons.lang3.StringUtils.startsWith()"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"""org.apache.commons.lang3.StringUtils.endsWith()"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"""org.apache.commons.lang3.StringUtils.contains()"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"""org.apache.commons.lang3.StringUtils.length()>"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"""org.apache.commons.lang3.StringUtils.length()>="",",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"""org.apache.commons.lang3.StringUtils.length()<"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"""org.apache.commons.lang3.StringUtils.length()<="",",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"""org.apache.commons.lang3.StringUtils.length()==""",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
};,fad5b75f13c673e999075eda9709c449b87dbb66,0,0
//may be an old special expression,fad5b75f13c673e999075eda9709c449b87dbb66,0,0
//may be a projection,fad5b75f13c673e999075eda9709c449b87dbb66,0,0
//do nothing,fad5b75f13c673e999075eda9709c449b87dbb66,0,0
//field,fad5b75f13c673e999075eda9709c449b87dbb66,0,0
//value,fad5b75f13c673e999075eda9709c449b87dbb66,0,0
//operator,fad5b75f13c673e999075eda9709c449b87dbb66,0,0
//field,fad5b75f13c673e999075eda9709c449b87dbb66,0,1
//value,fad5b75f13c673e999075eda9709c449b87dbb66,0,1
//operator,fad5b75f13c673e999075eda9709c449b87dbb66,0,1
//may be a special expression,fad5b75f13c673e999075eda9709c449b87dbb66,0,1
//may be a projection,fad5b75f13c673e999075eda9709c449b87dbb66,0,1
//do nothing,fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"operator.equals(""=="")",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"operator.equals(""!="")",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
isNegation,fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"operator.equals(""contains"")",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"operator.equals(""startsWith"")",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"operator.equals(""endsWith"")",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"DataDTOToMVELTranslator.OLD_STARTS_WITH_OPERATOR,",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"DataDTOToMVELTranslator.OLD_ENDS_WITH_OPERATOR,",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
DataDTOToMVELTranslator.OLD_CONTAINS_OPERATOR,fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"DataDTOToMVELTranslator.STARTS_WITH_OPERATOR,",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"DataDTOToMVELTranslator.ENDS_WITH_OPERATOR,",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
DataDTOToMVELTranslator.CONTAINS_OPERATOR,fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"DataDTOToMVELTranslator.SIZE_GREATER_THAN_OPERATOR,",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"DataDTOToMVELTranslator.SIZE_GREATER_THAN_EQUALS_OPERATOR,",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"DataDTOToMVELTranslator.SIZE_LESS_THAN_OPERATOR,",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"DataDTOToMVELTranslator.SIZE_LESS_THAN_EQUALS_OPERATOR,",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"DataDTOToMVELTranslator.SIZE_EQUALS_OPERATOR,",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"DataDTOToMVELTranslator.EQUALS_OPERATOR,",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"DataDTOToMVELTranslator.NOT_EQUALS_OPERATOR,",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"DataDTOToMVELTranslator.GREATER_THAN_EQUALS_OPERATOR,",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"DataDTOToMVELTranslator.LESS_THAN_EQUALS_OPERATOR,",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
"DataDTOToMVELTranslator.GREATER_THAN_OPERATOR,",fad5b75f13c673e999075eda9709c449b87dbb66,0,0
DataDTOToMVELTranslator.LESS_THAN_OPERATOR,fad5b75f13c673e999075eda9709c449b87dbb66,0,0
//value,fad5b75f13c673e999075eda9709c449b87dbb66,0,0
""".startsWith"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
""".endsWith"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
""".contains""",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"""org.apache.commons.lang3.StringUtils.startsWith()"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"""org.apache.commons.lang3.StringUtils.endsWith()"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"""org.apache.commons.lang3.StringUtils.contains()"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"""org.apache.commons.lang3.StringUtils.length()>"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"""org.apache.commons.lang3.StringUtils.length()>="",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"""org.apache.commons.lang3.StringUtils.length()<"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"""org.apache.commons.lang3.StringUtils.length()<="",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"""org.apache.commons.lang3.StringUtils.length()==""",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
""".size()>"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
""".size()>="",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
""".size()<"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
""".size()<="",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
""".size()=="",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"""=="",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"""!="",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"""<="",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
"""<"",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
""">="",",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
""">""",fad5b75f13c673e999075eda9709c449b87dbb66,0,1
//value,fad5b75f13c673e999075eda9709c449b87dbb66,0,1
Property p = cmd.getPMap().get(bcm.getSelectizeVisibleField());,f82f5a619ac18c39c34c767f4c62c2b7f355226d,3,0
Property p = cmd.getPMap().get(atcmd.getSelectizeVisibleField());,f82f5a619ac18c39c34c767f4c62c2b7f355226d,3,0
Property p = cmd.getPMap().get(fieldName);,f82f5a619ac18c39c34c767f4c62c2b7f355226d,3,0
Property p = cmd.getPMap().get(fieldName);,f82f5a619ac18c39c34c767f4c62c2b7f355226d,3,1
"Field hf = createHeaderField(p, md);",f82f5a619ac18c39c34c767f4c62c2b7f355226d,2,0
} else {,f82f5a619ac18c39c34c767f4c62c2b7f355226d,2,0
for (Property p : cmd.getProperties()) {,f82f5a619ac18c39c34c767f4c62c2b7f355226d,2,0
} else if (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM) {,f82f5a619ac18c39c34c767f4c62c2b7f355226d,2,0
} else if (selectize && type == ListGrid.Type.BASIC) {,f82f5a619ac18c39c34c767f4c62c2b7f355226d,2,0
for (Property p : cmd.getProperties()) {,f82f5a619ac18c39c34c767f4c62c2b7f355226d,2,1
"Field hf = createHeaderField(p, md);",f82f5a619ac18c39c34c767f4c62c2b7f355226d,2,1
if (bcm.getAddMethodType().equals(AddMethodType.SELECTIZE_LOOKUP)) {,f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,0
if (p != null) {,f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,0
},f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,0
if (p.getMetadata() instanceof BasicFieldMetadata) {,f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,0
BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();,f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,0
"&& !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {",f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,0
if (atcmd.getAdornedTargetAddMethodType().equals(AdornedTargetAddMethodType.SELECTIZE_LOOKUP)) {,f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,0
selectize = true;,f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,0
for (String fieldName : atcmd.getGridVisibleFields()) {,f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,0
if (selectize && (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) {,f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,0
if (p.getMetadata() instanceof BasicFieldMetadata) {,f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,1
"&& !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {",f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,1
for (String fieldName : atcmd.getGridVisibleFields()) {,f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,1
BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();,f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,1
if (atcmd.getAdornedTargetAddMethodType().equals(AdornedTargetAddMethodType.SELECTIZE_LOOKUP)) {,f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,1
selectize = true;,f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,1
},f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,1
if (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM) {,f82f5a619ac18c39c34c767f4c62c2b7f355226d,1,1
headerFields.add(hf);,f82f5a619ac18c39c34c767f4c62c2b7f355226d,0,0
if (md.isProminent() != null && md.isProminent(),f82f5a619ac18c39c34c767f4c62c2b7f355226d,0,0
"message += "" Please configure 'selectizeVisibleField' in your @AdminPresentationAdornedTargetCollection configuration"";",f82f5a619ac18c39c34c767f4c62c2b7f355226d,0,0
"message += "" Please configure 'selectizeVisibleField' in your @AdminPresentationCollection configuration"";",f82f5a619ac18c39c34c767f4c62c2b7f355226d,0,0
if (md.isProminent() != null && md.isProminent(),f82f5a619ac18c39c34c767f4c62c2b7f355226d,0,1
headerFields.add(hf);,f82f5a619ac18c39c34c767f4c62c2b7f355226d,0,1
public Entity add(PersistencePackageRequest request) throws ServiceException;,189b8c00bc2cf3811df372ce5898c3013769d716,2,0
public Entity update(PersistencePackageRequest request) throws ServiceException;,189b8c00bc2cf3811df372ce5898c3013769d716,2,0
public DynamicResultSet inspect(PersistencePackageRequest request) throws ServiceException;,189b8c00bc2cf3811df372ce5898c3013769d716,1,0
public void remove(PersistencePackageRequest request) throws ServiceException;,189b8c00bc2cf3811df372ce5898c3013769d716,1,0
public DynamicResultSet fetch(PersistencePackageRequest request) throws ServiceException;,189b8c00bc2cf3811df372ce5898c3013769d716,1,0
import org.broadleafcommerce.openadmin.dto.CriteriaTransferObject;,189b8c00bc2cf3811df372ce5898c3013769d716,0,0
/**,189b8c00bc2cf3811df372ce5898c3013769d716,0,0
* Thin layer on top of {@link DynamicEntityService#add(org.broadleafcommerce.openadmin.dto.PersistencePackage)} that,189b8c00bc2cf3811df372ce5898c3013769d716,0,0
* swallows all {@link ValidationException}s that could be thrown and still just returns a {@link PersistenceResponse},189b8c00bc2cf3811df372ce5898c3013769d716,0,0
* with the {@link Entity} that failed validation.,189b8c00bc2cf3811df372ce5898c3013769d716,0,0
*,189b8c00bc2cf3811df372ce5898c3013769d716,0,0
* @param request,189b8c00bc2cf3811df372ce5898c3013769d716,0,0
* @return,189b8c00bc2cf3811df372ce5898c3013769d716,0,0
* @throws ServiceException if there were exceptions other than a {@link ValidationException} that was thrown as a,189b8c00bc2cf3811df372ce5898c3013769d716,0,0
* result of the attempted add,189b8c00bc2cf3811df372ce5898c3013769d716,0,0
*/,189b8c00bc2cf3811df372ce5898c3013769d716,0,0
* Thin layer on top of {@link DynamicEntityService#update(org.broadleafcommerce.openadmin.dto.PersistencePackage)},189b8c00bc2cf3811df372ce5898c3013769d716,0,0
* result of the attempted update,189b8c00bc2cf3811df372ce5898c3013769d716,0,0
* Thin layer on top of {@link DynamicEntityService#inspect(org.broadleafcommerce.openadmin.dto.PersistencePackage)},189b8c00bc2cf3811df372ce5898c3013769d716,0,0
* @throws ServiceException,189b8c00bc2cf3811df372ce5898c3013769d716,0,0
* Thin layer on top of {@link DynamicEntityService#remove(org.broadleafcommerce.openadmin.dto.PersistencePackage)},189b8c00bc2cf3811df372ce5898c3013769d716,0,0
"* Thin layer on top of {@link DynamicEntityService#fetch(org.broadleafcommerce.openadmin.dto.PersistencePackage, org.broadleafcommerce.openadmin.dto.CriteriaTransferObject)}.",189b8c00bc2cf3811df372ce5898c3013769d716,0,0
* This will glean and create a {@link CriteriaTransferObject} from {@link PersistencePackageRequest#getFilterAndSortCriteria()},189b8c00bc2cf3811df372ce5898c3013769d716,0,0
* to pass to {@link DynamicEntityService}.,189b8c00bc2cf3811df372ce5898c3013769d716,0,0
},189b8c00bc2cf3811df372ce5898c3013769d716,0,0
},189b8c00bc2cf3811df372ce5898c3013769d716,0,1
if (!status.isRollbackOnly()) {,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,3,1
if (isActive) {,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,3,1
} catch (Exception e) {,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,2,1
if (isError) {,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,2,1
} else {,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,2,1
if (!CollectionUtils.isEmpty(documents) && solrServer != null) {,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,2,0
if (LOG.isDebugEnabled()) {,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,2,0
if (!CollectionUtils.isEmpty(documents)) {,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,2,1
if (LOG.isDebugEnabled()) {,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,2,1
import org.broadleafcommerce.common.util.TransactionUtils;,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,1,0
"TransactionStatus status = TransactionUtils.createTransaction(""readProducts"",",43a8dc6bed524e48c1dffdf94b069cc751e7cdac,1,0
import org.broadleafcommerce.common.classloader.release.ThreadLocalManager;,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,1,1
import org.springframework.transaction.support.DefaultTransactionDefinition;,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,1,1
DefaultTransactionDefinition def = new DefaultTransactionDefinition();,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,1,1
"def.setName(""saveOrder"");",43a8dc6bed524e48c1dffdf94b069cc751e7cdac,1,1
TransactionStatus status = transactionManager.getTransaction(def);,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,1,1
"protected void finalizeTransaction(TransactionStatus status, boolean isError) {",43a8dc6bed524e48c1dffdf94b069cc751e7cdac,1,1
boolean isActive = false;,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,1,1
try {,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,1,1
isActive = true;,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,1,1
},43a8dc6bed524e48c1dffdf94b069cc751e7cdac,1,1
"public Collection<SolrInputDocument> buildIncrementalIndex(List<? extends Indexable> indexables, SolrServer solrServer) throws ServiceException {",43a8dc6bed524e48c1dffdf94b069cc751e7cdac,1,0
},43a8dc6bed524e48c1dffdf94b069cc751e7cdac,1,0
"public void buildIncrementalIndex(List<? extends Indexable> indexables, SolrServer solrServer) throws ServiceException {",43a8dc6bed524e48c1dffdf94b069cc751e7cdac,1,1
},43a8dc6bed524e48c1dffdf94b069cc751e7cdac,1,1
"TransactionDefinition.PROPAGATION_REQUIRED, transactionManager, true);",43a8dc6bed524e48c1dffdf94b069cc751e7cdac,0,0
"TransactionUtils.finalizeTransaction(status, transactionManager, false);",43a8dc6bed524e48c1dffdf94b069cc751e7cdac,0,0
"TransactionUtils.finalizeTransaction(status, transactionManager, true);",43a8dc6bed524e48c1dffdf94b069cc751e7cdac,0,0
def.setReadOnly(true);,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,0,1
def.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRED);,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,0,1
"finalizeTransaction(status, false);",43a8dc6bed524e48c1dffdf94b069cc751e7cdac,0,1
"finalizeTransaction(status, true);",43a8dc6bed524e48c1dffdf94b069cc751e7cdac,0,1
//do nothing,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,0,1
transactionManager.rollback(status);,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,0,1
transactionManager.commit(status);,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,0,1
"LOG.debug(String.format(""Built incremental product index - pageSize: [%s] in [%s]"", indexables.size(), s.toLapString()));",43a8dc6bed524e48c1dffdf94b069cc751e7cdac,0,0
return documents;,43a8dc6bed524e48c1dffdf94b069cc751e7cdac,0,0
"LOG.debug(String.format(""Built incremental product index - pageSize: [%s] in [%s]"", indexables.size(), s.toLapString()));",43a8dc6bed524e48c1dffdf94b069cc751e7cdac,0,1
Property p = new Property();,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,4,1
Property p = collectionMetadata.getPMap().get(targetFieldName);,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,3,0
Property p = collectionMetadata.getPMap().get(targetFieldName);,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,3,1
List<Property> properties = new ArrayList<Property>();,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,3,1
import javax.annotation.Resource;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
"public PersistenceResponse addEntity(EntityForm entityForm, String[] customCriteria) throws ServiceException {",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
"public PersistenceResponse updateEntity(EntityForm entityForm, String[] customCriteria) throws ServiceException {",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
return new PersistenceResponse().withEntity(e.getEntity());,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
import javax.annotation.Resource;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,1
import javax.annotation.Resource;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
List<Class<?>> testClasses = new ArrayList<Class<?>>();,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
String overrideClass = listClass.getName();,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
} catch (NoSuchBeanDefinitionException e) {,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
import javax.annotation.Resource;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,1
"String parentId, boolean isViewCollectionItem, EntityForm ef)",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
"String parentId, EntityForm ef)",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,1
"String parentId, boolean isViewCollectionItem, EntityForm ef)",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
} else {,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
// We want our entity form to only render the maintained adorned target fields,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
if (p.getMetadata() instanceof BasicFieldMetadata) {,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
"String parentId, EntityForm ef)",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,1
// We want our entity form to only render the maintained adorned target fields,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,1
if (p.getMetadata() instanceof BasicFieldMetadata) {,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,1
import javax.annotation.Resource;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
"SimpleDateFormat formatter = new SimpleDateFormat(""MMM d, Y @ hh:mma"");",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
DateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
"Date date = new SimpleDateFormat(""yyyy.MM.dd HH:mm:ss"").parse(recordField.getValue());",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
String newValue = formatter.format(date);,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
} catch (Exception ex) {,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
} else {,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
import javax.annotation.Resource;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,1
List<Property> properties = getPropertiesFromEntityForm(entityForm);,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,2,0
import java.util.ArrayList;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import java.util.Arrays;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import java.util.HashMap;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import java.util.List;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import java.util.ListIterator;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import java.util.Map;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import java.util.Map.Entry;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import javax.persistence.EntityManager;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import javax.persistence.NoResultException;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import javax.persistence.PersistenceContext;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import org.apache.commons.collections.MapUtils;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.ArrayList;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.Arrays;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.HashMap;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.List;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.ListIterator;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.Map;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.Map.Entry;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import javax.persistence.EntityManager;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import javax.persistence.NoResultException;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import javax.persistence.PersistenceContext;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
"public PersistenceResponse addEntity(EntityForm entityForm, String[] customCriteria)",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
throws ServiceException {,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
"public PersistenceResponse updateEntity(EntityForm entityForm, String[] customCriteria)",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
return e.getEntity();,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.ArrayList;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import java.util.Arrays;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import java.util.HashMap;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import java.util.List;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import java.util.ListIterator;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import java.util.Map;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import java.util.Map.Entry;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import javax.persistence.EntityManager;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import javax.persistence.NoResultException;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import javax.persistence.PersistenceContext;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import org.broadleafcommerce.common.persistence.EntityConfiguration;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import org.springframework.beans.factory.NoSuchBeanDefinitionException;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
"@Resource(name = ""blEntityConfiguration"")",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
protected EntityConfiguration entityConfiguration;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
Class<?> listClass = Class.forName(fmd.getCollectionCeilingEntity());,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
if (!listClass.isInterface()) {,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
},e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
for (Class<?> clazz : testClasses) {,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
try {,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
overrideClass = entityConfiguration.lookupEntityClass(clazz.getName()).getName();,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
ppr.getEntity().setType(new String[] { overrideClass });,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import java.util.ArrayList;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.Arrays;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.HashMap;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.List;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.ListIterator;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.Map;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.Map.Entry;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import javax.persistence.EntityManager;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import javax.persistence.NoResultException;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import javax.persistence.PersistenceContext;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
ppr.getEntity().setType(new String[] { fmd.getCollectionCeilingEntity() });,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
"String parentId, boolean isViewCollectionItem)",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
String parentId),e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.Collections;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
"String parentId, boolean isViewCollectionItem)",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
"return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef);",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
if (isViewCollectionItem) {,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
for (String targetFieldName : adornedMd.getMaintainedAdornedTargetFields()) {,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
},e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
String parentId),e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
"return buildAdornedListForm(adornedMd, adornedList, parentId, ef);",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
for (String targetFieldName : adornedMd.getMaintainedAdornedTargetFields()) {,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import com.fasterxml.jackson.core.Version;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import com.fasterxml.jackson.databind.ObjectMapper;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import com.fasterxml.jackson.databind.module.SimpleModule;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import org.broadleafcommerce.common.presentation.client.*;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import org.broadleafcommerce.openadmin.dto.*;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import org.broadleafcommerce.openadmin.web.form.component.*;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import org.broadleafcommerce.openadmin.web.form.entity.*;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import javax.persistence.ManyToOne;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import javax.persistence.OneToOne;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import javax.servlet.http.HttpServletRequest;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import java.text.DateFormatSymbols;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import java.text.SimpleDateFormat;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import java.util.*;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
// format date list grid cells,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
"symbols.setAmPmStrings(new String[] { ""am"", ""pm"" });",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
"if (headerField.getFieldType().equals(""DATE"")) {",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
try {,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
},e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,0
import org.broadleafcommerce.common.presentation.client.AddMethodType;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.common.presentation.client.AdornedTargetAddMethodType;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.common.presentation.client.LookupType;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.common.presentation.client.SupportedFieldType;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.common.presentation.client.VisibilityEnum;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.dto.AdornedTargetList;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.dto.ClassMetadata;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.dto.ClassTree;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.dto.CollectionMetadata;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.dto.DynamicResultSet;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.dto.Entity;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.dto.FieldMetadata;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.dto.ForeignKey;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.dto.MapMetadata;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.dto.MapStructure;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.dto.Property;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.dto.SectionCrumb;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.dto.TabMetadata;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.web.form.component.ListGrid;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.web.form.component.ListGridAction;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.web.form.component.ListGridRecord;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.web.form.component.MediaField;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.web.form.component.RuleBuilderField;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.web.form.entity.CodeField;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.web.form.entity.ComboField;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.web.form.entity.DynamicEntityFormInfo;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import org.broadleafcommerce.openadmin.web.form.entity.Field;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import com.fasterxml.jackson.core.Version;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import com.fasterxml.jackson.databind.ObjectMapper;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import com.fasterxml.jackson.databind.module.SimpleModule;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.ArrayList;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.Arrays;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.Collections;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.Date;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.HashMap;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.List;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.Map;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import java.util.Set;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import javax.persistence.ManyToOne;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import javax.persistence.OneToOne;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
import javax.servlet.http.HttpServletRequest;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
"for (Entry<String, Field> entry : entityForm.getFields().entrySet()) {",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
},e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,1,1
"//try to find an override, if available",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,0
testClasses.add(listClass);,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,0
testClasses.addAll(Arrays.asList(listClass.getInterfaces()));,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,0
break;,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,0
//no override defined,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,0
* @param isViewCollectionItem,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,0
"Collections.addAll(entityFormProperties, collectionMetadata.getProperties());",e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,0
((BasicFieldMetadata) p.getMetadata()).setVisibility(VisibilityEnum.VISIBLE_ALL);,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,0
entityFormProperties.add(p);,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,0
((BasicFieldMetadata) p.getMetadata()).setVisibility(VisibilityEnum.VISIBLE_ALL);,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,1
entityFormProperties.add(p);,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,1
formatter.setDateFormatSymbols(symbols);,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,0
recordField.setValue(newValue);,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,0
recordField.setValue(p.getValue());,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,0
recordField.setValue(p.getValue());,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,1
p.setName(entry.getKey());,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,1
p.setValue(entry.getValue().getValue());,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,1
properties.add(p);,e90f2c78a1c151c0cc049dc1cd9ee4cdd2556703,0,1
"* consider an item that costs 9.99 and has a 50% promotion. To be precise, the offer value is 4.995,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,15,0
"* consider an item that costs 9.99 and has a 50% promotion. To be precise, the offer value is 4.995,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,15,0
* sorting for which target items the promotion should be attempted to be applied to first. Default behavior is to,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,13,1
// item offer. There could be other order offers that are not totalitarian that also qualify.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,11,0
* sorting for which qualifier items should be attempted to be used first for a promotion. Default behavior,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,11,1
* @param applyToSalePrice - whether or not the Comparator should use the sale price for comparison,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,11,1
// item offer. There could be other order offers that are not totalitarian that also qualify.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,11,0
// item offer. There could be other order offers that are not totalitarian that also qualify.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,11,1
* but this may be a strange value to display to the user depending on the currency being used.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,11,0
* but this may be a strange value to display to the user depending on the currency being used.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,11,0
"// We need to make sure that this item is either a parent, child, or the same as the qualifier root",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,10,0
"// Now, we need to see if there exists a target(s) that is suitable for this qualifier due to",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,10,0
* will be used as the tie-breaker to determine the order to apply promotions.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,10,1
* Returns true if the core processing should still be performed for the passed in offer.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,10,0
"// We need to make sure that this item is either a parent, child, or the same as the qualifier root",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,10,1
"// Now, we need to see if there exists a target(s) that is suitable for this qualifier due to",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,10,1
* Calculates the value of the adjustment for both retail and sale prices.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,10,1
"* If either adjustment is greater than the item value, it will be set to the",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,10,1
* Calculates the value of the adjustment for both retail and sale prices.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,10,1
"* If either adjustment is greater than the item value, it will be set to the",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,10,1
"* It is sometimes problematic to offer percentage-off offers with regards to rounding. For example,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,10,0
// default scale to currency if currency is not null,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,10,0
"* It is sometimes problematic to offer percentage-off offers with regards to rounding. For example,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,10,0
"// We continue because this could be the first offer and marked as totalitarian, but not as good as an",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,9,0
* This method makes a good approximation of the promotion value as determining the exact value,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,9,1
* Return false if a totalitarian offer has already been applied and this order already has,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,9,1
"// We continue because this could be the first offer and marked as totalitarian, but not as good as an",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,9,0
"// We continue because this could be the first offer and marked as totalitarian, but not as good as an",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,9,1
"@OneToMany(mappedBy = ""fulfillmentGroup"", targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CascadeType.ALL },",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,9,0
"@OneToMany(mappedBy = ""fulfillmentGroup"", targetEntity = CandidateFulfillmentGroupOfferImpl.class, cascade = { CascadeType.ALL },",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,9,0
"@OneToMany(mappedBy = ""fulfillmentGroup"", targetEntity = FulfillmentGroupAdjustmentImpl.class, cascade = { CascadeType.ALL },",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,9,0
"@OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,9,0
"@OneToMany(mappedBy = ""fulfillmentGroup"", targetEntity = FulfillmentGroupFeeImpl.class, cascade = { CascadeType.ALL },",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,9,1
"@OneToMany(mappedBy = ""fulfillmentGroup"", targetEntity = CandidateFulfillmentGroupOfferImpl.class, cascade = { CascadeType.ALL },",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,9,1
"@OneToMany(mappedBy = ""fulfillmentGroup"", targetEntity = FulfillmentGroupAdjustmentImpl.class, cascade = { CascadeType.ALL },",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,9,1
"@OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,9,1
// This will just set to a Money value of zero in the correct currency.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,8,0
// This will just set to a Money value of zero in the correct currency.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,8,0
// We want to find the root of the related qualifier so we can appropriately walk the tree later,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,8,0
"// the relationship flag. If we are on the last qualifier required for this offer, we want to",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,8,0
"* If two promotions have the same priority, the one with the highest potential savings",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,8,1
"// If the extensionHandler added a savings element to the map, then return it",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,8,0
"// If the extensionHandler added a quantity element to the map, then return it",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,8,0
* @param orderOffer a CandidateOrderOffer to apply to an Order,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,8,1
// A totalitarian offer has already been applied or this offer is totalitarian,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,8,1
"// the relationship flag. If we are on the last qualifier required for this offer, we want to",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,8,1
// We found a target. Let's save this related order item used as the qualifier in case,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,8,1
* Gets rid of totalitarian and nonCombinable item offers that can't possibly be applied.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,8,1
if (reason == null && offer != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,8,0
if (reason == null && offer != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,8,1
* Returns the rounding mode to use for rounding operations.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,8,1
"* When the {@link Offer#getRequiresRelatedTargetAndQualifiers()} flag is set to true, we must make sure that we",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,0
// Calculate the number of qualifiers needed that will not receive the promotion.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,0
"// We have found a qualifier that meets this offer criteria. First, we'll save some state that we",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,0
"// If we didn't find a target, we need to roll back how we marked this item as a qualifier.",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,0
"// actually go ahead and mark the target that we'll be using. Otherwise, we just want to check",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,0
* This method determines how much the customer might save using this promotion for the,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,1
* purpose of sorting promotions with the same priority. The assumption is that any possible,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,1
* Private method used by applyAdjustments to create an OrderItemAdjustment from a CandidateOrderOffer,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,1
* The adjustment might not be better than the sale price.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,1
// A nonCombinable offer has been applied or this is a non-combinable offer,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,1
// Calculate the number of qualifiers needed that will not receive the promotion.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,1
"// We have found a qualifier that meets this offer criteria. First, we'll save some state that we",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,1
"// actually go ahead and mark the target that we'll be using. Otherwise, we just want to check",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,1
"// If we didn't find a target, we need to roll back how we marked this item as a qualifier.",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,1
// Remove Totalitarian offers that aren't the first offer.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,1
"LOG.trace(""Non-Combinable Order Offer Applied with id=["" + orderOffer.getOffer().getId() + ""].  No other order offers can be applied"");",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,0
"LOG.trace(""Non-Combinable Order Offer Applied with id=["" + orderOffer.getOffer().getId() +""].  No other order offers can be applied"");",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,1
"LOG.debug(""Updating value for order adjustment with offer Id "" + offerId + "" to "" +",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,0
"LOG.debug(""Updating value for order adjustment with offer Id "" + offerId + "" to "" +",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,1
* Public only for unit testing - not intended to be called,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,1
* Returns the scale to use when rounding.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,1
* between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,0
"@OneToMany(mappedBy = ""fulfillmentGroup"", targetEntity = FulfillmentGroupItemImpl.class, cascade = CascadeType.ALL,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,0
* between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,1
"@OneToMany(mappedBy = ""fulfillmentGroup"", targetEntity = FulfillmentGroupItemImpl.class, cascade = CascadeType.ALL,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,7,1
"* identify qualifiers and targets together, as they must be related to each other based on the",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,0
// These will be reserved first before the target is assigned.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,0
"protected HashMap<OfferItemCriteria, List<PromotableOrderItem>> candidateQualifiersMap = new HashMap<OfferItemCriteria, List<PromotableOrderItem>>();",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
* would require all permutations of promotions to be run resulting in a costly,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
* Provide an opportunity to for modules to override the potentialSavingsCalculation,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,0
// We've decided to apply this adjustment but if it doesn't actually reduce,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
// the value of the item,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
// These will be reserved first before the target is assigned.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
"* is to sort descending, so higher-value items are attempted to be qualified first.",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
* lower-valued items can be used to qualify a higher-valued target.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
// Remove nonCombinable offers that aren't the first offer,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
// Remove adjustments that were on the order item but no longer needed.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
"// Choosing an arbitrary large value.    The retail / sale price will be less than this,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,0
"LOG.trace(""Totalitarian Order Offer Applied.   Comparing order and item offers for best outcome."");",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,0
"LOG.trace(""Totalitarian Order Offer Applied.   Comparing order and item offers for best outcome."");",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
"LOG.debug(""Updating isFutureCredit for order adjustment with offer Id "" + offerId + "" to "" +",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,0
"// Choosing an arbitrary large value.    The retail / sale price will be less than this,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
"promotableOrder = new PromotableOrderImpl(order, new PromotableItemFactoryImpl(promotableOfferUtility), false);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,0
"promotableOrder = new PromotableOrderImpl(order, new PromotableItemFactoryImpl(), false);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
"PromotableOrder promotableOrder = new PromotableOrderImpl(new OrderImpl(), new PromotableItemFactoryImpl(promotableOfferUtility), false);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,0
"PromotableOrder promotableOrder = new PromotableOrderImpl(new OrderImpl(), new PromotableItemFactoryImpl(), false);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
"* Licensed under the Broadleaf Fair Use License Agreement, Version 1.0",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,0
"* Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the ""Custom License"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,0
* @deprecated use the phonePrimary property on the related Address instead,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,0
"return total == null ? null : BroadleafCurrencyUtils.getMoney(total, getOrder().getCurrency());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,0
result = prime * result + ((address == null) ? 0 : address.hashCode());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,0
result = prime * result + ((fulfillmentGroupItems == null) ? 0 : fulfillmentGroupItems.hashCode());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,0
"* Licensed under the Broadleaf Fair Use License Agreement, Version 1.0",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
"* Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the ""Custom License"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
* @deprecated use the phonePrimary property on the related Address instead,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
"return total == null ? null : BroadleafCurrencyUtils.getMoney(total, getOrder().getCurrency());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
result = prime * result + ((address == null) ? 0 : address.hashCode());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
result = prime * result + ((fulfillmentGroupItems == null) ? 0 : fulfillmentGroupItems.hashCode());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,6,1
"protected boolean markTargets(PromotableCandidateItemOffer itemOffer, PromotableOrder order, OrderItem relatedQualifier) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
* @return whether or not a suitable qualifier/target pair was found and marked,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
// Go ahead and mark this item as a qualifier,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
"protected boolean markTargets(PromotableCandidateItemOffer itemOffer, PromotableOrder order, OrderItem relatedQualifier) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
"protected boolean markTargets(PromotableCandidateItemOffer itemOffer, PromotableOrder order, OrderItem relatedQualifier) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
* target specified for BOGO style offers are of equal or lesser value. We are using,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
* a calculation based on the qualifiers here strictly for rough comparative purposes.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
// TODO:  BCP - Transferred the original logic but it looks like there is a bug here,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
"protected boolean itemOfferCanBeApplied(PromotableOrder order, PromotableCandidateItemOffer itemOffer) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
// Go ahead and mark this item as a qualifier,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
"* Note: By default, both the {@link #getQualifierItemComparator(boolean)} and this target comparator are sorted",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
* items can be paired with lower-valued items. This also ensures that you will <b>not</b> have the scenario where 2,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
// Add a new adjustment,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
// so the offer will not get selected.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
"protected boolean orderMeetsQualifyingSubtotalRequirements(PromotableOrder order, PromotableCandidateItemOffer itemOffer) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
"protected boolean orderMeetsSubtotalRequirements(PromotableOrder order, PromotableCandidateItemOffer itemOffer) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
"protected boolean offerMeetsSubtotalRequirements(PromotableOrder order, PromotableCandidateItemOffer itemOffer) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
if (reason == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
"protected boolean orderMeetsQualifyingSubtotalRequirements(PromotableOrder order, PromotableCandidateItemOffer itemOffer) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
"protected boolean orderMeetsQualifyingSubtotalRequirements(PromotableOrder order, PromotableCandidateItemOffer itemOffer) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
"protected boolean orderMeetsQualifyingSubtotalRequirements(PromotableOrder order, PromotableCandidateOrderOffer orderOffer) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
"protected boolean orderMeetsSubtotalRequirements(PromotableOrder order, PromotableCandidateOrderOffer orderOffer) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
} else if (this.offerName != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
if (reason == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
} else if (this.offerName != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
if (reason == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
} else if (this.offerName != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
for (FulfillmentGroup fg : order.getFulfillmentGroups()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
"public Money calculateSavingsForOrderItem(PromotableOrderItem orderItem, int qtyToReceiveSavings);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
"public Money calculateSavingsForOrderItem(PromotableOrderItem orderItem, int qtyToReceiveSavings) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
* Provides shared code for the default implementations of PromotableOrderItemPriceDetailAdjustmentImpl and,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
"public static Money computeAdjustmentValue(Money currentPriceDetailValue, BigDecimal offerUnitValue, OfferHolder offerHolder, PromotionRounding rounding) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
"public static BigDecimal determineOfferUnitValue(Offer offer, PromotableCandidateItemOffer promotableCandidateItemOffer) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
// so the offer will not get selected.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
// override scale from rounding settings if set,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
* unless the restrictions on use therein are violated and require payment to Broadleaf in which case,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
"@ManyToOne(targetEntity = PersonalMessageImpl.class, cascade = { CascadeType.ALL })",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
return retailFulfillmentPrice == null ? null :,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
this.type = type == null ? null : type.getType();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
"return saleFulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(saleFulfillmentPrice,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
"return fulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(fulfillmentPrice,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
"return totalTax == null ? null : BroadleafCurrencyUtils.getMoney(totalTax, getOrder().getCurrency());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
"return totalItemTax == null ? null : BroadleafCurrencyUtils.getMoney(totalItemTax, getOrder().getCurrency());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
"return totalFeeTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFeeTax, getOrder().getCurrency());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
"return totalFulfillmentGroupTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFulfillmentGroupTax,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
"return merchandiseTotal == null ? null : BroadleafCurrencyUtils.getMoney(merchandiseTotal,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
return shippingOverride == null ? false : shippingOverride;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
cloned.setFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
cloned.setMerchandiseTotal(merchandiseTotal == null ? null : new Money(merchandiseTotal));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
cloned.setRetailFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
cloned.setTotalItemTax(totalItemTax == null ? null : new Money(totalItemTax));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
cloned.setTotalFulfillmentGroupTax(totalFulfillmentGroupTax == null ? null : new Money(totalFulfillmentGroupTax));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
cloned.setTotalFeeTax(totalFeeTax == null ? null : new Money(totalFeeTax));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
cloned.setTotalTax(totalTax == null ? null : new Money(totalTax));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
cloned.setRetailFulfillmentPrice(retailFulfillmentPrice == null ? null : new Money(retailFulfillmentPrice));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
cloned.setSaleFulfillmentPrice(saleFulfillmentPrice == null ? null : new Money(saleFulfillmentPrice));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
cloned.setTotal(total == null ? null : new Money(total));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
if (id != null && other.id != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
public static class Presentation {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
public static class Name {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
public static class Order {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
public static final int Items = 2000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
public static final int Pricing = 3000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
public static class Group {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
public static final int Pricing = 2000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
public static final int SALE = 2000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,0
* unless the restrictions on use therein are violated and require payment to Broadleaf in which case,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
"@ManyToOne(targetEntity = PersonalMessageImpl.class, cascade = { CascadeType.ALL })",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
return retailFulfillmentPrice == null ? null :,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
this.type = type == null ? null : type.getType();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
"return saleFulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(saleFulfillmentPrice,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
"return fulfillmentPrice == null ? null : BroadleafCurrencyUtils.getMoney(fulfillmentPrice,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
"return totalTax == null ? null : BroadleafCurrencyUtils.getMoney(totalTax, getOrder().getCurrency());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
"return totalItemTax == null ? null : BroadleafCurrencyUtils.getMoney(totalItemTax, getOrder().getCurrency());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
"return totalFeeTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFeeTax, getOrder().getCurrency());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
"return totalFulfillmentGroupTax == null ? null : BroadleafCurrencyUtils.getMoney(totalFulfillmentGroupTax,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
"return merchandiseTotal == null ? null : BroadleafCurrencyUtils.getMoney(merchandiseTotal,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
return shippingOverride == null ? false : shippingOverride;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
cloned.setFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
cloned.setMerchandiseTotal(merchandiseTotal == null ? null : new Money(merchandiseTotal));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
cloned.setRetailFulfillmentPrice(fulfillmentPrice == null ? null : new Money(fulfillmentPrice));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
cloned.setTotalItemTax(totalItemTax == null ? null : new Money(totalItemTax));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
cloned.setTotalFulfillmentGroupTax(totalFulfillmentGroupTax == null ? null : new Money(totalFulfillmentGroupTax));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
cloned.setTotalFeeTax(totalFeeTax == null ? null : new Money(totalFeeTax));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
cloned.setTotalTax(totalTax == null ? null : new Money(totalTax));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
cloned.setRetailFulfillmentPrice(retailFulfillmentPrice == null ? null : new Money(retailFulfillmentPrice));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
cloned.setSaleFulfillmentPrice(saleFulfillmentPrice == null ? null : new Money(saleFulfillmentPrice));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
cloned.setTotal(total == null ? null : new Money(total));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
if (id != null && other.id != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
public static class Presentation {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
public static class Name {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
public static class Order {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
public static final int Items = 2000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
public static final int Pricing = 3000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
public static class Group {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
public static final int Pricing = 2000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
public static final int SALE = 2000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,5,1
"public PromotionQualifier addPromotionQualifier(PromotableCandidateItemOffer itemOffer, OfferItemCriteria itemCriteria, int qtyToMarkAsQualifier) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
"public void addPromotionQualifier(PromotableCandidateItemOffer itemOffer, OfferItemCriteria itemCriteria, int qtyToMarkAsQualifier) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
"protected boolean markRelatedQualifiersAndTargets(PromotableCandidateItemOffer itemOffer, PromotableOrder order) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
"for (Entry<OfferItemCriteria, List<PromotableOrderItem>> entry : itemOffer.getCandidateQualifiersMap().entrySet()) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (qualifierQtyNeeded == 0) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
"protected boolean markTargets(PromotableCandidateItemOffer itemOffer, PromotableOrder order) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
for (PromotableFulfillmentGroup fg : getFulfillmentGroups()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
for (PromotableFulfillmentGroup fg : getFulfillmentGroups()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
"protected boolean markTargets(PromotableCandidateItemOffer itemOffer, PromotableOrder order, OrderItem relatedQualifier,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
// that there is an eligible target(s) and continue on.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if ((promotion.getMaxUses() == 0) || (itemOffer.getUses() < promotion.getMaxUses())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
"protected HashMap<OfferItemCriteria, List<PromotableOrderItem>> candidateQualifiersMap =",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
"protected HashMap<OfferItemCriteria, List<PromotableOrderItem>> candidateTargetsMap =",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
for (OfferItemCriteria itemCriteria : getCandidateQualifiersMap().keySet()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
"public HashMap<OfferItemCriteria, List<PromotableOrderItem>> getCandidateTargetsMap() {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
"public void setCandidateTargetsMap(HashMap<OfferItemCriteria, List<PromotableOrderItem>> candidateItemsMap) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
Money savings = new Money(0D);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
//        when a targetItemCriteria has a quantity > 1.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
"public void addPromotionDiscount(PromotableCandidateItemOffer itemOffer, OfferItemCriteria itemCriteria, int qtyToMarkAsTarget) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
"public void addPromotionDiscount(PromotableCandidateItemOffer itemOffer, Set<OfferItemCriteria> itemCriteria, int qtyToMarkAsTarget) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
for (PromotableOrderItem item : itemOffer.getLegacyCandidateTargets()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
for (OfferItemCriteria itemCriteria : itemOffer.getCandidateTargetsMap().keySet()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (targetQtyNeeded == 0) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
for (PromotableOrderItem item : itemOffer.getCandidateTargets()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
if (receiveQtyNeeded == 0) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
"public boolean markTargets(PromotableCandidateItemOffer itemOffer, PromotableOrder order, OrderItem relatedQualifier,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (o != null && o instanceof Money) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (o != null && o instanceof Integer) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
* and associates the OrderItemAdjustment to the OrderItem.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
for (PromotionDiscount discount : itemPriceDetail.getPromotionDiscounts()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
for (PromotableOrderItemPriceDetailAdjustment adjustment : detail.getCandidateItemAdjustments()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
// and another offer was already applied.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
} else if (itemOffer.isLegacyOffer()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
} else if (!adjustment.isCombinable() || !itemOffer.getOffer().isCombinableWithOtherOffers()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
if (qualifierQtyNeeded == 0) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
"protected boolean markTargets(PromotableCandidateItemOffer itemOffer, PromotableOrder order, OrderItem relatedQualifier,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
if (targetQtyNeeded == 0) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
// that there is an eligible target(s) and continue on.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
"* Used in {@link #applyItemQualifiersAndTargets(PromotableCandidateItemOffer, PromotableOrder)} allow for customized",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
"* sort descending, so higher-value items get the promotion over lesser-valued items.",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
* in descending order.  This means that higher-valued items can be paired with higher-valued items and lower-valued,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
for (PromotableOrderItem item : promotableOrder.getDiscountableOrderItems()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
for (PromotableOrderItemPriceDetailAdjustment adjustment : promotableDetail.getCandidateItemAdjustments()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
for (OrderItemPriceDetailAdjustment adjustment : itemDetail.getOrderItemPriceDetailAdjustments()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
if (weightedPercentSaved == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (weightedPercentSaved == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (qualifyingItemSubTotal == null || qualifyingItemSubTotal.lessThanOrEqual(Money.ZERO)) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
for (OfferItemCriteria itemCriteria : itemOffer.getCandidateQualifiersMap().keySet()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
for (PromotableOrderItem item : promotableItems) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
"public Money getPriceBeforeAdjustments(boolean allowSalesPrice, boolean includeChildren) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (deproxiedOffer == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
} else if (offer instanceof HibernateProxy) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (reason != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (deproxiedOffer == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
} else if (offer instanceof HibernateProxy) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (reason != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (deproxiedOffer == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
} else if (offer instanceof HibernateProxy) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (reason != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
"protected void updateAdjustmentIfChangesDetected(OrderAdjustment adjustment, PromotableOrderAdjustment promotableAdjustment) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
"public PromotableCandidateItemOfferImpl(PromotableOrder promotableOrder, Offer offer, boolean useQtyOnlyTierCalculation) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
for (OfferItemCriteria itemCriteria : getCandidateTargetsMap().keySet()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (returnQty == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
for (OfferItemCriteria itemCriteria : getCandidateTargetsMap().keySet()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
"public interface PromotableCandidateItemOffer extends PromotionRounding, Serializable {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public interface PromotableCandidateItemOffer extends Serializable {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
"protected HashMap<OfferPriceData, List<PromotableOrderItem>> candidateFixedTargetsMap = new HashMap<>();",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
"public void setCandidateFixedTargetsMap(HashMap<OfferPriceData, List<PromotableOrderItem>> candidateFixedTargetsMap) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
Money savings = new Money(promotableOrder.getOrderCurrency());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
* currentItemValue (e.g. no adjustment can cause a negative value).,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
if (offer.getApplyDiscountToSalePrice() == true) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
* currentItemValue (e.g. no adjustment can cause a negative value).,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
if (currentPriceDetailSalesValue == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
if (offer.getApplyDiscountToSalePrice() == true) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
"promotableOrderItem = new PromotableOrderItemImpl(orderItem1, null, new PromotableItemFactoryImpl(promotableOfferUtility), false);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
"promotableOrderItem = new PromotableOrderItemImpl(orderItem1, null, new PromotableItemFactoryImpl(), false);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
protected int roundingScale = 2;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
protected RoundingMode roundingMode = RoundingMode.HALF_EVEN;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
"* the Broadleaf End User License Agreement (EULA), Version 1.1",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
* @deprecated uses the phonePrimary property on AddressImpl instead,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
} else if (orderItem instanceof DiscreteOrderItem) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (this.fulfillmentGroupItems == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
for (CandidateFulfillmentGroupOffer offer : candidateOffers) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
for (FulfillmentGroupAdjustment adjustment : getFutureCreditFulfillmentGroupAdjustments()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (fulfillmentGroupFees == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
cloned.setAddress(address == null ? null : address.createOrRetrieveCopyInstance(context).getClone());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
cloned.setIsShippingPriceTaxable(isShippingPriceTaxable == null ? null : isShippingPriceTaxable);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (obj == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (address == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
} else if (!address.equals(other.address)) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
if (fulfillmentGroupItems == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
} else if (!fulfillmentGroupItems.equals(other.fulfillmentGroupItems)) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static class Tab {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
"public static final String Items = ""FulfillmentGroupImpl_Items_Tab"";",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
"public static final String Pricing = ""FulfillmentGroupImpl_Pricing_Tab"";",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int Address = 4000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int Advanced = 5000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
"public static final String Pricing = ""FulfillmentGroupImpl_Pricing"";",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int General = 1000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static class FieldOrder {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int REFNUMBER = 3000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int STATUS = 4000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int TYPE = 5000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int DELIVERINSTRUCTION = 6000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int PRIMARY = 7000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int PHONE = 8000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int RETAIL = 1000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int PRICE = 3000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int ITEMTAX = 4000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int FEETAX = 5000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int FGTAX = 6000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int TOTALTAX = 7000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int MERCHANDISETOTAL = 8000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int TOTAL = 9000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
public static final int TAXABLE = 10000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,0
"* the Broadleaf End User License Agreement (EULA), Version 1.1",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
* @deprecated uses the phonePrimary property on AddressImpl instead,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
} else if (orderItem instanceof DiscreteOrderItem) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
if (this.fulfillmentGroupItems == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
for (CandidateFulfillmentGroupOffer offer : candidateOffers) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
for (FulfillmentGroupAdjustment adjustment : fulfillmentGroupAdjustments) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
for (FulfillmentGroupAdjustment adjustment : getFutureCreditFulfillmentGroupAdjustments()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
if (fulfillmentGroupFees == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
cloned.setAddress(address == null ? null : address.createOrRetrieveCopyInstance(context).getClone());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
cloned.setIsShippingPriceTaxable(isShippingPriceTaxable == null ? null : isShippingPriceTaxable);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
if (obj == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
if (address == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
} else if (!address.equals(other.address)) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
if (fulfillmentGroupItems == null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
} else if (!fulfillmentGroupItems.equals(other.fulfillmentGroupItems)) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static class Tab {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
"public static final String Items = ""FulfillmentGroupImpl_Items_Tab"";",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
"public static final String Pricing = ""FulfillmentGroupImpl_Pricing_Tab"";",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int Address = 4000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int Advanced = 5000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
"public static final String Pricing = ""FulfillmentGroupImpl_Pricing"";",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int General = 1000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static class FieldOrder {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int REFNUMBER = 3000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int STATUS = 4000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int TYPE = 5000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int DELIVERINSTRUCTION = 6000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int PRIMARY = 7000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int PHONE = 8000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int RETAIL = 1000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int PRICE = 3000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int ITEMTAX = 4000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int FEETAX = 5000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int FGTAX = 6000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int TOTALTAX = 7000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int MERCHANDISETOTAL = 8000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int TOTAL = 9000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
public static final int TAXABLE = 10000;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,4,1
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (relatedQualifier != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (!relatedQualifierRoot.isAParentOf(thisItem) && !thisItem.isAParentOf(relatedQualifierRoot) &&,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
* {@link OrderItem#getParentOrderItem()} / {@link OrderItem#getChildOrderItems()} attributes.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
* @param itemOffer,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
* @param order,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
for (PromotableOrderItemPriceDetail detail : priceDetails) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (qualifierQtyNeeded > 0) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (itemQtyAvailableToBeUsedAsQualifier > 0) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
for (PromotionQualifier possibleQualifier : detail.getPromotionQualifiers()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"if (!markTargets(itemOffer, order, oi)) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (pq.getQuantity() == qtyToMarkAsQualifier) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (qualifierQtyNeeded != 0) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"boolean qualifiersAndTargetsFound = markRelatedQualifiersAndTargets(itemOffer, order);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"boolean qualifiersFound = markQualifiers(itemOffer, order);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"boolean targetsFound = markTargets(itemOffer, order);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public boolean isTotalitarianOrderOfferApplied() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public boolean isTotalitarianItemOfferApplied() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
for (PromotableOrderItemPriceDetail itemPriceDetail : getAllPromotableOrderItemPriceDetails()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public boolean isTotalitarianFgOfferApplied() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
for (PromotableOrderItemPriceDetail itemPriceDetail : getAllPromotableOrderItemPriceDetails()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"return markTargets(itemOffer, order, relatedQualifier, false);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
boolean lastQualifier = curQualifier == itemOffer.getCandidateQualifiersMap().entrySet().size();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"if (!markTargets(itemOffer, order, oi, !lastQualifier)) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"if (!markTargets(itemOffer, order, oi)) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
protected List<PromotableOrderItem> legacyCandidateTargets = new ArrayList<PromotableOrderItem>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
for (PromotableOrderItem promotableOrderItem : candidateTargets) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setLegacyCandidateTargets(List<PromotableOrderItem> candidateTargets) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
protected List<PromotableOrderItem> candidateTargets = new ArrayList<PromotableOrderItem>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Money calculatePotentialSavings() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
for (PromotableOrderItem chgItem : candidateTargets) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
for (PromotableOrderItem promotableOrderItem : candidateTargets) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setCandidateTargets(List<PromotableOrderItem> candidateTargets) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
for (PromotableOrderItemPriceDetail detail : priceDetails) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (targetQtyNeeded != 0) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
for (OfferItemCriteria targetCriteria : itemOffer.getOffer().getTargetItemCriteria()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
for (PromotableOrderItemPriceDetail priceDetail : priceDetails) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (receiveQtyNeeded > 0) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"public class ItemOfferProcessorImpl extends OrderOfferProcessorImpl implements ItemOfferProcessor, ItemOfferMarkTargets {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"protected Boolean applyItemOfferExtension(PromotableOrder order,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (extensionManager != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (contextMap.get(OfferServiceExtensionManager.STOP_PROCESSING) != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"int qualifierQtyNeeded = offerServiceUtilities.markRelatedQualifiersAndTargetsForItemCriteria(itemOffer, order,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"return markTargets(itemOffer, order, orderItemHolder.getOrderItem(), false);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
* @param itemOffer,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
* @param item,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
* @param quantity,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
protected void restPriceDetails(PromotableOrderItem item) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public class ItemOfferProcessorImpl extends OrderOfferProcessorImpl implements ItemOfferProcessor {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"protected void applyOrderItemAdjustment(PromotableCandidateItemOffer itemOffer, PromotableOrderItemPriceDetail itemPriceDetail) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
for (PromotableOrderItemPriceDetail itemPriceDetail : itemPriceDetails) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
* @param itemOffer,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"Money savings = itemOffer.calculateSavingsForOrderItem(detail.getPromotableOrderItem(), 1);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (salePrice != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
for (PromotableOrderItemPriceDetail detail : order.getAllPromotableOrderItemPriceDetails()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
// and adjustments have already been applied.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
for (PromotableOrderItemPriceDetail detail : priceDetails) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
// Mark Qualifiers,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (qualifierQtyNeeded > 0) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (itemQtyAvailableToBeUsedAsQualifier > 0) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (relatedQualifier != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
for (PromotableOrderItemPriceDetail priceDetail : priceDetails) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (!relatedQualifierRoot.isAParentOf(thisItem) && !thisItem.isAParentOf(relatedQualifierRoot) &&,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (itemQtyAvailableToBeUsedAsTarget > 0) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
for (PromotionQualifier possibleQualifier : detail.getPromotionQualifiers()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"if (markTargets(itemOffer, order, oi, true)) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (pq.getQuantity() == qtyToMarkAsQualifier) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"return markTargets(itemOffer, order, relatedOrderItem, false);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
protected Comparator<PromotableOrderItemPriceDetail> getQualifierItemComparator(final boolean applyToSalePrice) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
return new Comparator<PromotableOrderItemPriceDetail>() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"public int compare(PromotableOrderItemPriceDetail o1, PromotableOrderItemPriceDetail o2) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
Money price = o1.getPromotableOrderItem().getPriceBeforeAdjustments(applyToSalePrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
// highest amount first,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
protected Comparator<PromotableOrderItemPriceDetail> getTargetItemComparator(final boolean applyToSalePrice) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
boolean first = true;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
// ignore the first one.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
PromotableCandidateItemOffer itemOffer = offerIterator.next();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (!itemOffer.isLegacyOffer() && !itemOffer.getOffer().isCombinableWithOtherOffers()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (extensionManager != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setOfferServiceUtilities(OfferServiceUtilities offerServiceUtilities) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
for (OrderItem currentItem : order.getOrderItems()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
for (OrderItem containedItem : container.getOrderItems()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (itemAdjustment != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (itemAdjustmentMap.size() > 0) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
for (OrderItemPriceDetailAdjustment adjustmentToRemove : itemAdjustmentMap.values()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"protected Map<Long, OrderItemPriceDetailAdjustment> buildItemDetailAdjustmentMap(OrderItemPriceDetail itemDetail) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"Map<Long, OrderItemPriceDetailAdjustment> itemAdjustmentMap = new HashMap<Long, OrderItemPriceDetailAdjustment>();",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"protected PromotableOrderItemPriceDetail split(int discountQty, Long offerId, boolean hasQualifiers) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (qualifierOfferId.equals(offerId) && currentQualifier.getQuantity() <= splitItemQty) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
// Remove this one from the original detail,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (qualifierOfferId.equals(offerId) && currentQualifier.getQuantity() <= splitItemQty) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
// Remove this one from the original detail,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"protected PromotableOrderItemPriceDetail split(int discountQty, Long offerId, boolean hasQualifiers) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (qualifierOfferId.equals(offerId) && currentQualifier.getQuantity() <= splitItemQty) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
// Remove this one from the original detail,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (qualifierOfferId.equals(offerId) && currentQualifier.getQuantity() <= splitItemQty) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
// Remove this one from the original detail,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"if (orderMeetsQualifyingSubtotalRequirements(order, itemOffer) && orderMeetsSubtotalRequirements(order, itemOffer)) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (itemOffer.getOffer().getOrderMinSubTotal() == null ||,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
this.reason = reason;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
this.reason = reason;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
PromotableFulfillmentGroup fulfillmentGroup = fulfillmentGroupMember;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public BigDecimal getWeightedPercentSaved() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setWeightedPercentSaved(BigDecimal weightedPercentSaved) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Money getOriginalPrice() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setOriginalPrice(Money originalPrice) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
Money price = orderItem.getPriceBeforeAdjustments(getOffer().getApplyDiscountToSalePrice());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
protected void initializePriceDetails() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public BigDecimal getWeightedPercentSaved() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setWeightedPercentSaved(BigDecimal weightedPercentSaved) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Money getOriginalPrice() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setOriginalPrice(Money originalPrice) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
Money price = orderItem.getPriceBeforeAdjustments(getOffer().getApplyDiscountToSalePrice());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
protected void initializePriceDetails() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (itemOffer.getOffer().getOrderMinSubTotal() == null ||,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"if (orderMeetsQualifyingSubtotalRequirements(promotableOrder, orderOffer) && orderMeetsSubtotalRequirements(promotableOrder, orderOffer)) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
for (OrderItem child : getChildOrderItems()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (postLoaderDao != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
this.reason = reason;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
this.reason = reason;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (postLoaderDao != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
this.reason = reason;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
this.reason = reason;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
* Copyright (C) 2009 - 2013 Broadleaf Commerce,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (postLoaderDao != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
this.reason = reason;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
* Copyright (C) 2009 - 2016 Broadleaf Commerce,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
this.reason = reason;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
protected boolean fgContainsFutureCreditAdjustment(FulfillmentGroup fg) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
protected void syncFulfillmentPrice(FulfillmentGroup fg) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
protected boolean useQtyOnlyTierCalculation = false;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
for (PromotableOrderItem promotableOrderItem : candidateTargets) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (itemCriteria.getQuantity() <= 0) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public boolean isUseQtyOnlyTierCalculation() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setUseQtyOnlyTierCalculation(boolean useQtyOnlyTierCalculation) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
for (PromotableOrderItem promotableOrderItem : candidateTargets) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
protected boolean useQtyOnlyTierCalculation = false;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"return new PromotableCandidateItemOfferImpl(promotableOrder, offer);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"public HashMap<OfferPriceData, List<PromotableOrderItem>> getCandidateFixedTargetsMap() {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
protected void computeAdjustmentValues() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
Offer offer = promotableCandidateFulfillmentGroupOffer.getOffer();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"return new PromotableFulfillmentGroupAdjustmentImpl(promotableCandidateFulfillmentGroupOffer, fulfillmentGroup,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
* Copyright (C) 2009 - 2018 Broadleaf Commerce,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public interface PromotableOfferUtility {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"Money computeAdjustmentValue(PromotableCandidateFulfillmentGroupOffer promotableCandidateFulfillmentGroupOffer, PromotableFulfillmentGroup promotableFulfillmentGroup, boolean allowSalePrice);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"Money calculateSavingsForOrderItem(PromotableCandidateItemOffer promotableCandidateItemOffer, PromotableOrderItem orderItem, int qtyToReceiveSavings);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
* Copyright (C) 2009 - 2016 Broadleaf Commerce,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public class PromotableOfferUtility {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
Offer offer = offerHolder.getOffer();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
BroadleafCurrency currency = offerHolder.getCurrency();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (currency != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
int quantity = promotableCandidateItemOffer.calculateTargetQuantityForTieredOffer();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
for (OfferTier currentTier : offerTiers) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (maxTier != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
protected void computeAdjustmentValues() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"Money savings = promotableOfferUtility.calculateSavingsForOrderItem(promotableCandidate, promotableOrderItem, 1);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"Money savings = promotableCandidate.calculateSavingsForOrderItem(promotableOrderItem, 1);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
protected RoundingMode roundingMode;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (roundingMode != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
} else {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
protected boolean roundOfferValues = true;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public boolean isRoundOfferValues() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public int getRoundingScale() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
int scale = 2;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (getCurrency() != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (roundingScale != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
scale = roundingScale;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"adjustmentValue = new Money(offerValue, getCurrency(), scale);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
* Copyright (C) 2009 - 2022 Broadleaf Commerce,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"@AdminPresentationMergeOverride(name = ""personalMessage"", mergeEntries = {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"@AdminPresentationMergeOverride(name = ""address"", mergeEntries = {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"@AdminPresentationMergeOverride(name = ""address.isDefault"", mergeEntries = {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"@AdminPresentationMergeOverride(name = ""address.isActive"", mergeEntries = {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"@AdminPresentationMergeOverride(name = ""address.isBusiness"", mergeEntries = {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"@AdminPresentationMergeOverride(name = ""phone"", mergeEntries = {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"@AdminPresentationMergeOverride(name = ""phone.phoneNumber"", mergeEntries = {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"public class FulfillmentGroupImpl implements FulfillmentGroup, CurrencyCodeIdentifiable {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
@AdminPresentation(excluded = true),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
protected boolean primary = false;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
protected Boolean isShippingPriceTaxable = Boolean.FALSE;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"@ManyToOne(targetEntity = FulfillmentOptionImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"@ManyToOne(targetEntity = AddressImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"@ManyToOne(targetEntity = PhoneImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
protected List<FulfillmentGroupItem> fulfillmentGroupItems = new ArrayList<FulfillmentGroupItem>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
protected List<FulfillmentGroupFee> fulfillmentGroupFees = new ArrayList<FulfillmentGroupFee>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
protected List<CandidateFulfillmentGroupOffer> candidateOffers = new ArrayList<CandidateFulfillmentGroupOffer>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
protected List<FulfillmentGroupAdjustment> fulfillmentGroupAdjustments = new ArrayList<FulfillmentGroupAdjustment>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"@JoinTable(name = ""BLC_FG_FG_TAX_XREF"", joinColumns = @JoinColumn(name = ""FULFILLMENT_GROUP_ID""),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
protected List<TaxDetail> taxes = new ArrayList<TaxDetail>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setId(Long id) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Order getOrder() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setOrder(Order order) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setFulfillmentOption(FulfillmentOption fulfillmentOption) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setReferenceNumber(String referenceNumber) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
for (FulfillmentGroupItem fgItem : fulfillmentGroupItems) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
for (DiscreteOrderItem discreteOrderItem : bundleOrderItem.getDiscreteOrderItems()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setFulfillmentGroupItems(List<FulfillmentGroupItem> fulfillmentGroupItems) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void addFulfillmentGroupItem(FulfillmentGroupItem fulfillmentGroupItem) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setAddress(Address address) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setPhone(Phone phone) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setMethod(String fulfillmentMethod) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Money getRetailFulfillmentPrice() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setRetailFulfillmentPrice(Money retailFulfillmentPrice) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Money getRetailShippingPrice() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setRetailShippingPrice(Money retailShippingPrice) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setType(FulfillmentType type) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void addCandidateFulfillmentGroupOffer(CandidateFulfillmentGroupOffer candidateOffer) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setCandidateFulfillmentGroupOffer(List<CandidateFulfillmentGroupOffer> candidateOffers) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void removeAllCandidateOffers() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (candidateOffers != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Money getFulfillmentGroupAdjustmentsValue() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Money getFutureCreditFulfillmentGroupAdjustmentsValue() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void removeAllAdjustments() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (fulfillmentGroupAdjustments != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setFulfillmentGroupAdjustments(List<FulfillmentGroupAdjustment> fulfillmentGroupAdjustments) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Money getSaleFulfillmentPrice() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setSaleFulfillmentPrice(Money saleFulfillmentPrice) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Money getSaleShippingPrice() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setSaleShippingPrice(Money saleShippingPrice) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Money getFulfillmentPrice() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setFulfillmentPrice(Money fulfillmentPrice) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Money getShippingPrice() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setShippingPrice(Money shippingPrice) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setTaxes(List<TaxDetail> taxes) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Money getTotalTax() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setTotalTax(Money totalTax) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Money getTotalItemTax() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setTotalItemTax(Money totalItemTax) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Money getTotalFeeTax() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setTotalFeeTax(Money totalFeeTax) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Money getTotalFulfillmentGroupTax() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setTotalFulfillmentGroupTax(Money totalFulfillmentGroupTax) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setDeliveryInstruction(String deliveryInstruction) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setPersonalMessage(PersonalMessage personalMessage) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public boolean isPrimary() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setPrimary(boolean primary) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Money getMerchandiseTotal() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setMerchandiseTotal(Money merchandiseTotal) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Money getTotal() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setTotal(Money orderTotal) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setStatus(FulfillmentGroupStatusType status) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setFulfillmentGroupFees(List<FulfillmentGroupFee> fulfillmentGroupFees) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void addFulfillmentGroupFee(FulfillmentGroupFee fulfillmentGroupFee) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void removeAllFulfillmentGroupFees() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (fulfillmentGroupFees != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Boolean isShippingPriceTaxable() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setIsShippingPriceTaxable(Boolean isShippingPriceTaxable) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setSequence(Integer sequence) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setService(String service) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (getOrder().getCurrency() != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public Boolean getShippingOverride() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public void setShippingOverride(Boolean shippingOverride) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public int hashCode() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"protected void cloneTaxDetails(MultiTenantCopyContext context, FulfillmentGroup cloned) throws CloneNotSupportedException {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
for (TaxDetail taxDetail : getTaxes()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
public boolean equals(Object obj) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (this == obj) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (other.address != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
if (other.fulfillmentGroupItems != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"public static final String Address = ""FulfillmentGroupImpl_Address_Tab"";",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
"public static final String Advanced = ""FulfillmentGroupImpl_Advanced_Tab"";",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,0
* Copyright (C) 2009 - 2016 Broadleaf Commerce,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"@AdminPresentationMergeOverride(name = ""personalMessage"", mergeEntries = {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"@AdminPresentationMergeOverride(name = ""address"", mergeEntries = {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"@AdminPresentationMergeOverride(name = ""address.isDefault"", mergeEntries = {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"@AdminPresentationMergeOverride(name = ""address.isActive"", mergeEntries = {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"@AdminPresentationMergeOverride(name = ""address.isBusiness"", mergeEntries = {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"@AdminPresentationMergeOverride(name = ""phone"", mergeEntries = {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"@AdminPresentationMergeOverride(name = ""phone.phoneNumber"", mergeEntries = {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"public class FulfillmentGroupImpl implements FulfillmentGroup, CurrencyCodeIdentifiable {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
@AdminPresentation(excluded = true),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"group = Presentation.Group.Name.Pricing, groupOrder = Presentation.Group.Order.Pricing,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
protected boolean primary = false;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
protected Boolean isShippingPriceTaxable = Boolean.FALSE;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"@ManyToOne(targetEntity = FulfillmentOptionImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"@ManyToOne(targetEntity = AddressImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"@ManyToOne(targetEntity = PhoneImpl.class, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
protected List<FulfillmentGroupItem> fulfillmentGroupItems = new ArrayList<FulfillmentGroupItem>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
protected List<FulfillmentGroupFee> fulfillmentGroupFees = new ArrayList<FulfillmentGroupFee>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
protected List<CandidateFulfillmentGroupOffer> candidateOffers = new ArrayList<CandidateFulfillmentGroupOffer>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
protected List<FulfillmentGroupAdjustment> fulfillmentGroupAdjustments = new ArrayList<FulfillmentGroupAdjustment>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"@JoinTable(name = ""BLC_FG_FG_TAX_XREF"", joinColumns = @JoinColumn(name = ""FULFILLMENT_GROUP_ID""),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
protected List<TaxDetail> taxes = new ArrayList<TaxDetail>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setId(Long id) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Order getOrder() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setOrder(Order order) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setFulfillmentOption(FulfillmentOption fulfillmentOption) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setReferenceNumber(String referenceNumber) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
for (FulfillmentGroupItem fgItem : fulfillmentGroupItems) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
for (DiscreteOrderItem discreteOrderItem : bundleOrderItem.getDiscreteOrderItems()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setFulfillmentGroupItems(List<FulfillmentGroupItem> fulfillmentGroupItems) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void addFulfillmentGroupItem(FulfillmentGroupItem fulfillmentGroupItem) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setAddress(Address address) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setPhone(Phone phone) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setMethod(String fulfillmentMethod) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Money getRetailFulfillmentPrice() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setRetailFulfillmentPrice(Money retailFulfillmentPrice) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Money getRetailShippingPrice() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setRetailShippingPrice(Money retailShippingPrice) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setType(FulfillmentType type) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void addCandidateFulfillmentGroupOffer(CandidateFulfillmentGroupOffer candidateOffer) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setCandidateFulfillmentGroupOffer(List<CandidateFulfillmentGroupOffer> candidateOffers) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void removeAllCandidateOffers() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (candidateOffers != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Money getFulfillmentGroupAdjustmentsValue() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Money getFutureCreditFulfillmentGroupAdjustmentsValue() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void removeAllAdjustments() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (fulfillmentGroupAdjustments != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setFulfillmentGroupAdjustments(List<FulfillmentGroupAdjustment> fulfillmentGroupAdjustments) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Money getSaleFulfillmentPrice() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setSaleFulfillmentPrice(Money saleFulfillmentPrice) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Money getSaleShippingPrice() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setSaleShippingPrice(Money saleShippingPrice) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Money getFulfillmentPrice() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setFulfillmentPrice(Money fulfillmentPrice) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Money getShippingPrice() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setShippingPrice(Money shippingPrice) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setTaxes(List<TaxDetail> taxes) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Money getTotalTax() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setTotalTax(Money totalTax) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Money getTotalItemTax() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setTotalItemTax(Money totalItemTax) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Money getTotalFeeTax() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setTotalFeeTax(Money totalFeeTax) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Money getTotalFulfillmentGroupTax() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setTotalFulfillmentGroupTax(Money totalFulfillmentGroupTax) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setDeliveryInstruction(String deliveryInstruction) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setPersonalMessage(PersonalMessage personalMessage) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public boolean isPrimary() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setPrimary(boolean primary) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Money getMerchandiseTotal() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setMerchandiseTotal(Money merchandiseTotal) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Money getTotal() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setTotal(Money orderTotal) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setStatus(FulfillmentGroupStatusType status) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setFulfillmentGroupFees(List<FulfillmentGroupFee> fulfillmentGroupFees) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void addFulfillmentGroupFee(FulfillmentGroupFee fulfillmentGroupFee) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void removeAllFulfillmentGroupFees() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (fulfillmentGroupFees != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Boolean isShippingPriceTaxable() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setIsShippingPriceTaxable(Boolean isShippingPriceTaxable) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setSequence(Integer sequence) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setService(String service) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (getOrder().getCurrency() != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public Boolean getShippingOverride() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public void setShippingOverride(Boolean shippingOverride) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public int hashCode() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"protected void cloneTaxDetails(MultiTenantCopyContext context, FulfillmentGroup cloned) throws CloneNotSupportedException {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
for (TaxDetail taxDetail : getTaxes()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
public boolean equals(Object obj) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (this == obj) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (other.address != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (other.fulfillmentGroupItems != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"public static final String Address = ""FulfillmentGroupImpl_Address_Tab"";",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
"public static final String Advanced = ""FulfillmentGroupImpl_Advanced_Tab"";",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,3,1
if (itemAdjustment.isAppliedToSalePrice()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (itemAdjustment.isAppliedToSalePrice()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
* @return,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"PromotionQualifier addPromotionQualifier(PromotableCandidateItemOffer itemOffer, OfferItemCriteria itemCriteria, int qtyToMarkAsQualifier);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"void addPromotionQualifier(PromotableCandidateItemOffer itemOffer, OfferItemCriteria itemCriteria, int qtyToMarkAsQualifier);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
OrderItem relatedQualifierRoot = null;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
while (relatedQualifierRoot.getParentOrderItem() != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
OfferItemCriteria itemCriteria = entry.getKey();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
int qualifierQtyNeeded = itemCriteria.getQuantity();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
int itemQtyAvailableToBeUsedAsQualifier = detail.getQuantityAvailableToBeUsedAsQualifier(itemOffer);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
// might need in the future.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
OfferItemCriteria previousQualifierCriteria = null;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (possibleQualifier.getPromotion().equals(itemOffer.getOffer())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"int qtyToMarkAsQualifier = Math.min(qualifierQtyNeeded, itemQtyAvailableToBeUsedAsQualifier);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"PromotionQualifier pq = detail.addPromotionQualifier(itemOffer, itemCriteria, qtyToMarkAsQualifier);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
// the relationship flag.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
boolean qualifiersFound = false;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
boolean targetsFound = false;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (itemOffer.getOffer().getRequiresRelatedTargetAndQualifiers()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"qualifiersFound = markQualifiers(itemOffer, order);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"targetsFound = markTargets(itemOffer, order, null);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (saleAdjustmentPrice.lessThanOrEqual(retailAdjustmentPrice)) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (saleAdjustmentPrice.lessThan(retailAdjustmentPrice)) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (itemPriceDetail.isTotalitarianOfferApplied()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (fg.isTotalitarianOfferApplied()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
boolean totalitarianOfferApplied = false;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (!totalitarianOfferApplied) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (fg.isTotalitarianOfferApplied()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (isTotalitarianOfferApplied()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (orderOffer.isTotalitarian() || promotableOrder.isTotalitarianItemOfferApplied()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (orderOffer.isTotalitarian()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
boolean checkOnly) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (!checkOnly) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
int curQualifier = 0;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
// the relationship flag.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if ((promotion.isUnlimitedUsePerOrder()) || (itemOffer.getUses() < promotion.getMaxUsesPerOrder())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"new HashMap<OfferItemCriteria, List<PromotableOrderItem>>();",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public List<PromotableOrderItem> getLegacyCandidateTargets() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
* @return,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
int maxUses = calculateMaximumNumberOfUses();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
int appliedCount = 0;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"int qtyToReceiveSavings = Math.min(chgItem.getQuantity(), maxUses);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"savings = savings.add(calculateSavingsForOrderItem(chgItem, qtyToReceiveSavings));",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (appliedCount >= maxUses) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public List<PromotableOrderItem> getCandidateTargets() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"void addPromotionDiscount(PromotableCandidateItemOffer itemOffer, OfferItemCriteria itemCriteria, int qtyToMarkAsTarget);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"void addPromotionDiscount(PromotableCandidateItemOffer itemOffer, Set<OfferItemCriteria> itemCriteria, int qtyToMarkAsTarget);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (!candidate.getLegacyCandidateTargets().contains(promotableOrderItem)) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (itemOffer.getCandidateTargetsMap().keySet().isEmpty()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
int targetQtyNeeded = itemCriteria.getQuantity();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
int itemQtyAvailableToBeUsedAsTarget = detail.getQuantityAvailableToBeUsedAsTarget(itemOffer);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"int qtyToMarkAsTarget = Math.min(targetQtyNeeded, itemQtyAvailableToBeUsedAsTarget);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (!candidate.getCandidateTargets().contains(promotableOrderItem)) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
int receiveQtyNeeded = 0;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
int itemQtyAvailableToBeUsedAsTarget = priceDetail.getQuantityAvailableToBeUsedAsTarget(itemOffer);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"int qtyToMarkAsTarget = Math.min(receiveQtyNeeded, itemQtyAvailableToBeUsedAsTarget);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
return (receiveQtyNeeded == 0);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
import java.util.HashMap;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
* Call out to extension managers.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
PromotableCandidateItemOffer itemOffer) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"Map<String, Object> contextMap = new HashMap<String, Object>();",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
// Returning false,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"if (applyItemOfferExtension(order, itemOffer)) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"if (offerServiceUtilities.itemOfferCanBeApplied(itemOffer, order.getAllPromotableOrderItemPriceDetails())) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (itemOffer.isLegacyOffer()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"int qualifierQtyNeeded = offerServiceUtilities.markQualifiersForCriteria(itemOffer, itemCriteria, priceDetails);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
OrderItemHolder orderItemHolder = new OrderItemHolder(null);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
* @return,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"protected Money calculatePotentialSavingsForOrderItem(PromotableCandidateItemOffer itemOffer,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"PromotableOrderItem item, int quantity) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"Map<String,Object> contextMap = new HashMap<String,Object>();",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
quantity = ((Integer) o).intValue();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"Money itemSavings = calculatePotentialSavingsForOrderItem(itemOffer, item, discount.getQuantity());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
potentialSavings = potentialSavings.add(itemSavings);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (discount.getPromotion().equals(itemOffer.getOffer())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (itemOffer.getOffer().isTotalitarianOffer() || !itemOffer.getOffer().isCombinableWithOtherOffers()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"if (adjustmentIsNotGoodEnoughToBeApplied(itemOffer, itemPriceDetail)) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
* @param detail,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
* @return,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"protected boolean adjustmentIsNotGoodEnoughToBeApplied(PromotableCandidateItemOffer itemOffer,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (!itemOffer.getOffer().getApplyDiscountToSalePrice()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
Money salePrice = detail.getPromotableOrderItem().getSalePriceBeforeAdjustments();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
Money retailPrice = detail.getPromotableOrderItem().getRetailPriceBeforeAdjustments();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (salePrice.lessThan(retailPrice.subtract(savings))) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
* item adjustments.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (adjustment.isTotalitarian() || itemOffer.getOffer().isTotalitarianOffer()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"if (itemOfferCanBeApplied(order, itemOffer)) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (itemOffer.isLegacyOffer()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
int qualifierQtyNeeded = itemCriteria.getQuantity();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
int itemQtyAvailableToBeUsedAsQualifier = detail.getQuantityAvailableToBeUsedAsQualifier(itemOffer);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"int qtyToMarkAsQualifier = Math.min(qualifierQtyNeeded, itemQtyAvailableToBeUsedAsQualifier);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
OrderItem relatedQualifierRoot = null;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
while (relatedQualifierRoot.getParentOrderItem() != null) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
int itemQtyAvailableToBeUsedAsTarget = priceDetail.getQuantityAvailableToBeUsedAsTarget(itemOffer);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (promotion.isUnlimitedUsePerOrder() || (itemOffer.getUses() < promotion.getMaxUsesPerOrder())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"int qtyToMarkAsTarget = Math.min(targetQtyNeeded, itemQtyAvailableToBeUsedAsTarget);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (!checkOnly) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
OrderItem relatedOrderItem = null;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
// might need in the future.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
OfferItemCriteria previousQualifierCriteria = null;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (possibleQualifier.getPromotion().equals(itemOffer.getOffer())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"PromotionQualifier pq = detail.addPromotionQualifier(itemOffer, itemCriteria, qtyToMarkAsQualifier);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
Money price2 = o2.getPromotableOrderItem().getPriceBeforeAdjustments(applyToSalePrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
potentialSavings = potentialSavings.add(,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
* @param qualifiedItemOffers,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
private void removeTrailingNonCombinableOrTotalitarianOffers(List<PromotableCandidateItemOffer> qualifiedItemOffers) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (offerIterator.hasNext()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (itemOffer.getOffer().isTotalitarianOffer()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"Map<Long, OrderItemPriceDetailAdjustment> itemAdjustmentMap =",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public OfferServiceUtilities getOfferServiceUtilities() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
protected List<OrderItem> buildOrderItemList(Order order) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
List<OrderItem> orderItemList = new ArrayList<OrderItem>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (currentItem instanceof OrderItemContainer) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (container.isPricingAtContainerLevel()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"protected Map<OrderItem, PromotableOrderItem> buildPromotableItemMap(PromotableOrder promotableOrder) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"Map<OrderItem, PromotableOrderItem> promotableItemMap = new HashMap<OrderItem, PromotableOrderItem>();",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (unmatchedDetailsMap.containsKey(currentDetail.getId())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (unmatchedQualifiersMap.containsKey(currentQualifier.getId())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"protected void updatePriceDetail(OrderItemPriceDetail itemDetail,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"Map<Long, OrderItemPriceDetailAdjustment> itemAdjustmentMap = buildItemDetailAdjustmentMap(itemDetail);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (itemDetail.getQuantity() != promotableDetail.getQuantity()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (promotableDetail.isAdjustmentsFinalized()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
// Update existing adjustment,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (!itemAdjustment.getValue().equals(adjustment.getAdjustmentValue())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
List<Long> adjustmentIdsToRemove = new ArrayList<Long>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
Iterator<OrderItemPriceDetailAdjustment> iterator = itemDetail.getOrderItemPriceDetailAdjustments().iterator();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (adjustmentIdsToRemove.contains(adj.getOffer().getId())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"protected void updateItemAdjustment(OrderItemPriceDetailAdjustment itemAdjustment,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (hasQualifiers) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
PromotionQualifier currentQualifier = qualifiers.next();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
PromotionQualifier newQualifier = currentQualifier.split(splitItemQty);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"protected PromotableOrderItemPriceDetail split(int discountQty, Long offerId) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
PromotionQualifier currentQualifier = qualifiers.next();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
PromotionQualifier newQualifier = currentQualifier.split(splitItemQty);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (hasQualifiers) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
PromotionQualifier currentQualifier = qualifiers.next();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
PromotionQualifier newQualifier = currentQualifier.split(splitItemQty);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"protected PromotableOrderItemPriceDetail split(int discountQty, Long offerId) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
PromotionQualifier currentQualifier = qualifiers.next();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
PromotionQualifier newQualifier = currentQualifier.split(splitItemQty);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (OfferDiscountType.FIX_PRICE.equals(offer.getDiscountType())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"if (offerMeetsSubtotalRequirements(order, itemOffer)) {",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
FulfillmentGroup fulfillmentGroup = fulfillmentGroupMember.getFulfillmentGroup();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (fulfillmentGroup.getShippingOverride()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
Money fulfillmentCharges = fulfillmentGroup.getFinalizedPriceWithAdjustments();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
protected BigDecimal weightedPercentSaved;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
protected Money originalPrice;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"savings = PromotableOfferUtility.computeAdjustmentValue(originalPrice, offerUnitValue, this, this);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
return new BigDecimal(0);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"savings = PromotableOfferUtility.computeAdjustmentValue(price, offerUnitValue, this, this);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
private void initializePriceDetails() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
protected BigDecimal weightedPercentSaved;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
protected Money originalPrice;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"savings = PromotableOfferUtility.computeAdjustmentValue(originalPrice, offerUnitValue, this, this);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
return new BigDecimal(0);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"savings = PromotableOfferUtility.computeAdjustmentValue(price, offerUnitValue, this, this);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
private void initializePriceDetails() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
Money qualifyingItemSubTotal = itemOffer.getOffer().getQualifyingItemSubTotal();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
Money subtotal = Money.ZERO;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
Money lineItemAmount = item.getPriceBeforeAdjustments(itemOffer.getOffer().getApplyDiscountToSalePrice()).multiply(item.getQuantity());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (subtotal.greaterThanOrEqual(qualifyingItemSubTotal)) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (orderOffer.isTotalitarian() || promotableOrder.isTotalitarianItemOfferApplied()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (LOG.isTraceEnabled()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (!orderOffer.isCombinable()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (orderOffer.isTotalitarian() || promotableOrder.isTotalitarianItemOfferApplied()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (LOG.isTraceEnabled()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (!orderOffer.isCombinable()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"return getPriceBeforeAdjustments(allowSalesPrice, false);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
Money returnPrice = Money.ZERO;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (includeChildren) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
protected Offer deproxiedOffer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
deproxiedOffer = offer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
this.reason = this.offerName;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
deproxiedOffer = null;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
this.reason = offer.getName();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
return offer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
protected Offer deproxiedOffer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
deproxiedOffer = offer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
this.reason = this.offerName;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
deproxiedOffer = null;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
this.reason = offer.getName();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
return offer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
protected Offer deproxiedOffer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
deproxiedOffer = offer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
this.reason = this.offerName;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
deproxiedOffer = null;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
this.reason = offer.getName();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
return offer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (!adjustment.getValue().equals(promotableAdjustment.getAdjustmentValue())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (LOG.isDebugEnabled()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (!adjustment.isFutureCredit().equals(promotableAdjustment.getOffer().isFutureCredit())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
boolean syncNeededOnTotal = false;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
boolean syncNeeded = fgContainsFutureCreditAdjustment(fg);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (syncNeeded) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (syncNeededOnTotal) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
Money syncFulfillmentPrice = Money.ZERO;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
Money retailPrice = fg.getRetailFulfillmentPrice();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
Money orderDiscountFulfillmentGroupAdjustmentsValue = fg.getFulfillmentGroupAdjustmentsValue();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
Money fulfillmentPrice = retailPrice.subtract(orderDiscountFulfillmentGroupAdjustmentsValue);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (!adjustment.getValue().equals(promotableAdjustment.getAdjustmentValue())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (LOG.isDebugEnabled()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
import javax.annotation.Resource;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (isUseQtyOnlyTierCalculation()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
int returnQty = 0;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
Integer returnQty = null;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
int iterationQty = 0;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
int returnQty = 0;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"return new PromotableCandidateItemOfferImpl(promotableOrder, offer, useQtyOnlyTierCalculation);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"void setCandidateFixedTargetsMap(HashMap<OfferPriceData, List<PromotableOrderItem>> candidateFixedTargetsMap);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"BigDecimal offerUnitValue = PromotableOfferUtility.determineOfferUnitValue(offer, this);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"savings = PromotableOfferUtility.computeAdjustmentValue(originalPrice, offerUnitValue, this, this);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"PromotableFulfillmentGroup fulfillmentGroup,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
Money saleAdjustmentValue) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
PromotableFulfillmentGroup fulfillmentGroup) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
saleAdjustmentValue = new Money(getCurrency());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
retailAdjustmentValue = new Money(getCurrency());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
Money currentPriceDetailSalesValue = promotableFulfillmentGroup.calculatePriceWithAdjustments(true);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
Money currentPriceDetailRetailValue = promotableFulfillmentGroup.calculatePriceWithAdjustments(false);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public PromotableItemFactoryImpl(PromotableOfferUtility promotableOfferUtility) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"return new PromotableOrderItemPriceDetailAdjustmentImpl(promotableCandidateItemOffer, orderItemPriceDetail,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"return new PromotableOrderItemPriceDetailAdjustmentImpl(promotableCandidateItemOffer, orderItemPriceDetail);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"return new PromotableFulfillmentGroupAdjustmentImpl(promotableCandidateFulfillmentGroupOffer, fulfillmentGroup);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"Money computeRetailAdjustmentValue(PromotableCandidateFulfillmentGroupOffer promotableCandidateFulfillmentGroupOffer, PromotableFulfillmentGroup promotableFulfillmentGroup);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"Money computeSalesAdjustmentValue(PromotableCandidateFulfillmentGroupOffer promotableCandidateFulfillmentGroupOffer, PromotableFulfillmentGroup promotableFulfillmentGroup);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"Money computeAdjustmentValue(PromotableCandidateItemOffer promotableCandidateItemOffer, PromotableOrderItemPriceDetail orderItemPriceDetail, boolean allowSalePrice);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
import org.broadleafcommerce.common.currency.domain.BroadleafCurrency;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
import org.broadleafcommerce.core.offer.domain.Offer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
import java.math.BigDecimal;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
import java.util.List;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
adjustmentValue = new Money(currency);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
adjustmentValue = new Money();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (OfferDiscountType.AMOUNT_OFF.equals(discountType)) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"adjustmentValue = new Money(offerUnitValue, currency);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (OfferDiscountType.FIX_PRICE.equals(discountType)) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (OfferDiscountType.PERCENT_OFF.equals(discountType)) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"BigDecimal offerValue = currentPriceDetailValue.getAmount().multiply(offerUnitValue.divide(new BigDecimal(""100""), 5, RoundingMode.HALF_EVEN));",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (rounding.isRoundOfferValues()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"adjustmentValue = new Money(offerValue, currency);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (currentPriceDetailValue.lessThan(adjustmentValue)) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (offer instanceof AdvancedOffer) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
AdvancedOffer advancedOffer = (AdvancedOffer) offer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (advancedOffer.isTieredOffer()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
OfferTier maxTier = null;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
//assuming that promotableOffer.getOffer()).getOfferTiers() is sorted already,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (quantity >= currentTier.getMinQuantity()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (OfferDiscountType.FIX_PRICE.equals(offer.getDiscountType())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
Money saleAdjustmentValue) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
import java.math.BigDecimal;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
saleAdjustmentValue = new Money(getCurrency());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
retailAdjustmentValue = new Money(getCurrency());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
Money currentPriceDetailRetailValue = promotableOrderItemPriceDetail.calculateItemUnitPriceWithAdjustments(false);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
Money currentPriceDetailSalesValue = promotableOrderItemPriceDetail.calculateItemUnitPriceWithAdjustments(true);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"BigDecimal offerUnitValue = PromotableOfferUtility.determineOfferUnitValue(offer, promotableCandidateItemOffer);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
promotableOfferUtility = new PromotableOfferUtilityImpl();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"savings = promotableOfferUtility.calculateSavingsForOrderItem(promotableCandidate, promotableOrderItem, 1);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"savings = promotableCandidate.calculateSavingsForOrderItem(promotableOrderItem, 1);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
PromotableOfferUtility promotableOfferUtility = new PromotableOfferUtilityImpl();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"new PromotableItemFactoryImpl(promotableOfferUtility), false);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"new PromotableItemFactoryImpl(), false);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
protected Integer roundingScale;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
return roundingMode;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public Integer getRoundingScale() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
* @see #isRoundOfferValues(),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
return roundingMode;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
BigDecimal offerValue = currentPriceDetailValue.getAmount().multiply(,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
scale = getCurrency().getJavaCurrency().getDefaultFractionDigits();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"BigDecimal offerValue = currentPriceDetailValue.getAmount().multiply(offer.getValue().divide(new BigDecimal(""100""), 5, RoundingMode.HALF_EVEN));",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (isRoundOfferValues()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"adjustmentValue = new Money(offerValue, getCurrency(), 5);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
* @return,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"* (the ""Fair Use License"" located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
import org.broadleafcommerce.common.money.Money;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
import java.math.BigDecimal;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
import java.util.ArrayList;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
import java.util.List;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = ""blOrderElements"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentationMergeOverride(name = """", mergeEntries =",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentationMergeOverride(name = ""currency"", mergeEntries =",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
booleanOverrideValue = true),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentationClass(populateToOneFields = PopulateToOneFieldsEnum.TRUE, friendlyName = ""FulfillmentGroupImpl_baseFulfillmentGroup"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
private static final long serialVersionUID = 1L;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
parameters = {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Reference_Number"", order=Presentation.FieldOrder.REFNUMBER,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Retail_Shipping_Price"", order=Presentation.FieldOrder.RETAIL,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
protected BigDecimal retailFulfillmentPrice;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Sale_Shipping_Price"", order=Presentation.FieldOrder.SALE,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
protected BigDecimal saleFulfillmentPrice;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Shipping_Price"", order=Presentation.FieldOrder.PRICE,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
protected BigDecimal fulfillmentPrice;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Type"", order=Presentation.FieldOrder.TYPE,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"prominent = true, gridOrder = 3000)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total_Tax"", order=Presentation.FieldOrder.TOTALTAX,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
protected BigDecimal totalTax;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total_Item_Tax"", order=Presentation.FieldOrder.ITEMTAX,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
protected BigDecimal totalItemTax;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total_Fee_Tax"", order=Presentation.FieldOrder.FEETAX,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
protected BigDecimal totalFeeTax;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total_FG_Tax"", order=Presentation.FieldOrder.FGTAX,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
protected BigDecimal totalFulfillmentGroupTax;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Delivery_Instruction"", order=Presentation.FieldOrder.DELIVERINSTRUCTION)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Primary_FG"", order=Presentation.FieldOrder.PRIMARY)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Merchandise_Total"", order=Presentation.FieldOrder.MERCHANDISETOTAL,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
protected BigDecimal merchandiseTotal;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total"", order=Presentation.FieldOrder.TOTAL,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"fieldType= SupportedFieldType.MONEY, prominent = true, gridOrder = 2000)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
protected BigDecimal total;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Status"", order=Presentation.FieldOrder.STATUS,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"prominent = true, gridOrder = 4000)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Shipping_Price_Taxable"", order=Presentation.FieldOrder.TAXABLE,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
protected Order order;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
orphanRemoval = true),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"tab = Presentation.Tab.Name.Items, tabOrder = Presentation.Tab.Order.Items)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"inverseJoinColumns = @JoinColumn(name = ""TAX_DETAIL_ID""))",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
protected Boolean shippingOverride;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public Long getId() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public FulfillmentOption getFulfillmentOption() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public String getReferenceNumber() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public List<FulfillmentGroupItem> getFulfillmentGroupItems() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public List<DiscreteOrderItem> getDiscreteOrderItems() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
List<DiscreteOrderItem> discreteOrderItems = new ArrayList<DiscreteOrderItem>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (orderItem instanceof BundleOrderItem) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
this.fulfillmentGroupItems = new Vector<FulfillmentGroupItem>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public Address getAddress() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public Phone getPhone() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public String getMethod() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public FulfillmentType getType() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public List<CandidateFulfillmentGroupOffer> getCandidateFulfillmentGroupOffers() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public List<FulfillmentGroupAdjustment> getFulfillmentGroupAdjustments() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public List<FulfillmentGroupAdjustment> getFutureCreditFulfillmentGroupAdjustments() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
List<FulfillmentGroupAdjustment> futureCreditAdjustments = new ArrayList<>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (adjustment.isFutureCredit()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (!adjustment.isFutureCredit()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public List<TaxDetail> getTaxes() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public String getDeliveryInstruction() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public PersonalMessage getPersonalMessage() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public FulfillmentGroupStatusType getStatus() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public List<FulfillmentGroupFee> getFulfillmentGroupFees() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
fulfillmentGroupFees = new ArrayList<FulfillmentGroupFee>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public Integer getSequence() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public String getService() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public String getCurrencyCode() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
return null;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
final int prime = 31;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
int result = 1;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
public <G extends FulfillmentGroup> CreateResponse<G> createOrRetrieveCopyInstance(MultiTenantCopyContext context) throws CloneNotSupportedException {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (createResponse.isAlreadyPopulated()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
for (FulfillmentGroupItem fgi: fulfillmentGroupItems) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
if (!getClass().isAssignableFrom(obj.getClass())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,0
"* (the ""Fair Use License"" located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
import org.broadleafcommerce.common.money.Money;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
import java.math.BigDecimal;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
import java.util.ArrayList;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
import java.util.List;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = ""blOrderElements"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentationMergeOverride(name = """", mergeEntries =",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentationMergeOverride(name = ""currency"", mergeEntries =",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
booleanOverrideValue = true),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentationClass(populateToOneFields = PopulateToOneFieldsEnum.TRUE, friendlyName = ""FulfillmentGroupImpl_baseFulfillmentGroup"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
private static final long serialVersionUID = 1L;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
parameters = {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Reference_Number"", order=Presentation.FieldOrder.REFNUMBER,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Retail_Shipping_Price"", order=Presentation.FieldOrder.RETAIL,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
protected BigDecimal retailFulfillmentPrice;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Sale_Shipping_Price"", order=Presentation.FieldOrder.SALE,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
protected BigDecimal saleFulfillmentPrice;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Shipping_Price"", order=Presentation.FieldOrder.PRICE,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
protected BigDecimal fulfillmentPrice;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Type"", order=Presentation.FieldOrder.TYPE,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"prominent = true, gridOrder = 3000)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total_Tax"", order=Presentation.FieldOrder.TOTALTAX,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
protected BigDecimal totalTax;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total_Item_Tax"", order=Presentation.FieldOrder.ITEMTAX,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
protected BigDecimal totalItemTax;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total_Fee_Tax"", order=Presentation.FieldOrder.FEETAX,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
protected BigDecimal totalFeeTax;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total_FG_Tax"", order=Presentation.FieldOrder.FGTAX,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
protected BigDecimal totalFulfillmentGroupTax;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Delivery_Instruction"", order=Presentation.FieldOrder.DELIVERINSTRUCTION)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Primary_FG"", order=Presentation.FieldOrder.PRIMARY)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Merchandise_Total"", order=Presentation.FieldOrder.MERCHANDISETOTAL,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
protected BigDecimal merchandiseTotal;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Total"", order=Presentation.FieldOrder.TOTAL,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"fieldType= SupportedFieldType.MONEY, prominent = true, gridOrder = 2000)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
protected BigDecimal total;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_FG_Status"", order=Presentation.FieldOrder.STATUS,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"prominent = true, gridOrder = 4000)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupImpl_Shipping_Price_Taxable"", order=Presentation.FieldOrder.TAXABLE,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"tab = Presentation.Tab.Name.Pricing, tabOrder = Presentation.Tab.Order.Pricing)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
protected Order order;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
orphanRemoval = true),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"tab = Presentation.Tab.Name.Items, tabOrder = Presentation.Tab.Order.Items)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"tab = Presentation.Tab.Name.Advanced, tabOrder = Presentation.Tab.Order.Advanced)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"inverseJoinColumns = @JoinColumn(name = ""TAX_DETAIL_ID""))",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
protected Boolean shippingOverride;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public Long getId() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public FulfillmentOption getFulfillmentOption() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public String getReferenceNumber() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public List<FulfillmentGroupItem> getFulfillmentGroupItems() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public List<DiscreteOrderItem> getDiscreteOrderItems() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
List<DiscreteOrderItem> discreteOrderItems = new ArrayList<DiscreteOrderItem>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (orderItem instanceof BundleOrderItem) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
this.fulfillmentGroupItems = new Vector<FulfillmentGroupItem>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public Address getAddress() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public Phone getPhone() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public String getMethod() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public FulfillmentType getType() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public List<CandidateFulfillmentGroupOffer> getCandidateFulfillmentGroupOffers() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public List<FulfillmentGroupAdjustment> getFulfillmentGroupAdjustments() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public List<FulfillmentGroupAdjustment> getFutureCreditFulfillmentGroupAdjustments() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
List<FulfillmentGroupAdjustment> futureCreditAdjustments = new ArrayList<>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (adjustment.isFutureCredit()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
"Money adjustmentsValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getOrder().getCurrency());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (!adjustment.isFutureCredit()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public List<TaxDetail> getTaxes() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public String getDeliveryInstruction() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public PersonalMessage getPersonalMessage() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public FulfillmentGroupStatusType getStatus() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public List<FulfillmentGroupFee> getFulfillmentGroupFees() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
fulfillmentGroupFees = new ArrayList<FulfillmentGroupFee>();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public Integer getSequence() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public String getService() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public String getCurrencyCode() {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
return null;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
final int prime = 31;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
int result = 1;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
public <G extends FulfillmentGroup> CreateResponse<G> createOrRetrieveCopyInstance(MultiTenantCopyContext context) throws CloneNotSupportedException {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (createResponse.isAlreadyPopulated()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
for (FulfillmentGroupItem fgi: fulfillmentGroupItems) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
if (!getClass().isAssignableFrom(obj.getClass())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,2,1
saleAdjustmentValue = itemAdjustment.getValue();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
retailAdjustmentValue = itemAdjustment.getRetailPriceValue();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
retailAdjustmentValue = itemAdjustment.getValue();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
saleAdjustmentValue = itemAdjustment.getSalesPriceValue();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
saleAdjustmentValue = itemAdjustment.getSalesPriceValue();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
retailAdjustmentValue = itemAdjustment.getRetailPriceValue();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
saleAdjustmentValue = itemAdjustment.getValue();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
retailAdjustmentValue = itemAdjustment.getRetailPriceValue();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
retailAdjustmentValue = itemAdjustment.getValue();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
saleAdjustmentValue = itemAdjustment.getSalesPriceValue();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
saleAdjustmentValue = itemAdjustment.getSalesPriceValue();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
retailAdjustmentValue = itemAdjustment.getRetailPriceValue();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return pq;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.apache.commons.collections.CollectionUtils;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.offer.service.discount.PromotionQualifier;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.order.domain.OrderItem;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import java.util.Map.Entry;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
relatedQualifierRoot = relatedQualifier;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
relatedQualifierRoot = relatedQualifierRoot.getParentOrderItem();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
OrderItem thisItem = priceDetail.getPromotableOrderItem().getOrderItem();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
!thisItem.equals(relatedQualifierRoot)) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
/**,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
*,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
*/,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
List<PromotableOrderItem> promotableItems = entry.getValue();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
List<PromotableOrderItemPriceDetail> priceDetails = buildPriceDetailListFromOrderItems(promotableItems);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
OrderItem oi = detail.getPromotableOrderItem().getOrderItem();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
previousQualifierCriteria = possibleQualifier.getItemCriteria();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
qualifierQtyNeeded += qtyToMarkAsQualifier;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
pq.setQuantity(pq.getQuantity() - qtyToMarkAsQualifier);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return false;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return true;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
qualifiersFound = qualifiersAndTargetsFound;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
targetsFound = qualifiersAndTargetsFound;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.springframework.util.CollectionUtils;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return isTotalitarianFgOfferApplied() || isTotalitarianItemOfferApplied() || isTotalitarianOrderOfferApplied();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
@Override,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return true;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return false;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
totalitarianOfferApplied = true;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
totalitarianOfferApplied = itemPriceDetail.isTotalitarianOfferApplied();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return true;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return totalitarianOfferApplied;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return false;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
@Override,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
List<PromotableOrderItem> candidateTargets = getCandidateTargetsMap().get(itemCriteria);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
returnQty += promotableOrderItem.getQuantity();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return candidateTargetsMap;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.candidateTargetsMap = candidateItemsMap;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
@Override,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return legacyCandidateTargets;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.legacyCandidateTargets = candidateTargets;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
/**,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
*,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
* operation.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
*/,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
appliedCount = appliedCount + qtyToReceiveSavings;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return savings;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
returnQty += promotableOrderItem.getQuantity();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return candidateTargets;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.candidateTargets = candidateTargets;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import java.util.Set;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import java.util.Set;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return false;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
List<PromotableOrderItem> promotableItems = itemOffer.getCandidateTargetsMap().get(itemCriteria);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
List<PromotableOrderItemPriceDetail> priceDetails = buildPriceDetailListFromOrderItems(promotableItems);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return true;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
List<PromotableOrderItem> promotableItems = itemOffer.getCandidateTargets();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
List<PromotableOrderItemPriceDetail> priceDetails = buildPriceDetailListFromOrderItems(promotableItems);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
receiveQtyNeeded += targetCriteria.getQuantity();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.core.offer.service.OfferServiceExtensionManager;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.order.domain.dto.OrderItemHolder;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import java.util.Map;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
*,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return !Boolean.TRUE.equals(contextMap.get(OfferServiceExtensionManager.STOP_PROCESSING));,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return Boolean.TRUE;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"applyItemQualifiersAndTargets(itemOffer, order);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
OrderItem relatedQualifierRoot = offerServiceUtilities.findRelatedQualifierRoot(relatedQualifier);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"targetQtyNeeded = offerServiceUtilities.markTargetsForCriteria(itemOffer, relatedQualifier, checkOnly, promotion, relatedQualifierRoot, itemCriteria, priceDetails, targetQtyNeeded);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
/**,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
*/,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"Object o = contextMap.get(""savings"");",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return (Money) o;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"o = contextMap.get(""quantity"");",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"return itemOffer.calculateSavingsForOrderItem(item, quantity);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.offer.service.discount.PromotionQualifier;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOrderItemPriceDetailAdjustment;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import java.util.Comparator;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
/**,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
*,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
*/,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"PromotableOrderItemPriceDetailAdjustment promotableOrderItemPriceDetailAdjustment = promotableItemFactory.createPromotableOrderItemPriceDetailAdjustment(itemOffer, itemPriceDetail);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
PromotableOrderItemPriceDetail detail) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
// Not good enough,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return true;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return false;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"applyItemQualifiersAndTargets(itemOffer, order);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
relatedQualifierRoot = relatedQualifier;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
relatedQualifierRoot = relatedQualifierRoot.getParentOrderItem();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
OrderItem thisItem = priceDetail.getPromotableOrderItem().getOrderItem();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
!thisItem.equals(relatedQualifierRoot)) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
OrderItem oi = detail.getPromotableOrderItem().getOrderItem();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
previousQualifierCriteria = possibleQualifier.getItemCriteria();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
// we succeed,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
relatedOrderItem = oi;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
qualifierQtyNeeded += qtyToMarkAsQualifier;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
pq.setQuantity(pq.getQuantity() - qtyToMarkAsQualifier);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
@Override,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return price2.compareTo(price);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
* <p>,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
* </p>,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
//qualifiedOrderOffers = removeTrailingNotCombinableOrderOffers(qualifiedOrderOffers);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
Iterator<PromotableCandidateItemOffer> offerIterator = qualifiedItemOffers.iterator();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
while (offerIterator.hasNext()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.core.offer.service.OfferServiceUtilities;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Resource(name = ""blOrderItemDao"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
protected OrderItemDao orderItemDao;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Resource(name = ""blOfferServiceUtilities"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
protected OfferServiceUtilities offerServiceUtilities;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"Map<OrderItem, PromotableOrderItem> promotableItemMap = offerServiceUtilities.buildPromotableItemMap(promotableOrder);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
List<OrderItem> orderItemList = offerServiceUtilities.buildOrderItemList(order);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return offerServiceUtilities;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.offerServiceUtilities = offerServiceUtilities;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.order.domain.OrderItemContainer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Resource(name = ""blOrderItemDao"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
protected OrderItemDao orderItemDao;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
OrderItemContainer container = (OrderItemContainer) currentItem;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return orderItemList;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"Map<OrderItem, PromotableOrderItem> promotableItemMap = buildPromotableItemMap(promotableOrder);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
List<OrderItem> orderItemList = buildOrderItemList(order);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return promotableItemMap;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
while (pdIterator.hasNext()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
OrderItemPriceDetail currentDetail = pdIterator.next();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
while (qIterator.hasNext()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
OrderItemQualifier currentQualifier = qIterator.next();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
PromotableOrderItemPriceDetail promotableDetail) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
OrderItemPriceDetailAdjustment itemAdjustment = itemAdjustmentMap.remove(adjustment.getOfferId());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
OrderItemPriceDetailAdjustment newItemAdjustment = offerDao.createOrderItemPriceDetailAdjustment();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
while (iterator.hasNext()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
OrderItemPriceDetailAdjustment adj = iterator.next();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
PromotableOrderItemPriceDetailAdjustment promotableAdjustment) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return itemAdjustmentMap;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.apache.commons.collections.CollectionUtils;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
Iterator<PromotionQualifier> qualifiers = promotionQualifiers.iterator();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
while (qualifiers.hasNext()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
Long qualifierOfferId = currentQualifier.getPromotion().getId();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"return this.split(discount.getQuantity(), offerId, !CollectionUtils.isEmpty(discount.getCandidateItemOffer().getOffer().getQualifyingItemCriteria()));",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
Iterator<PromotionQualifier> qualifiers = promotionQualifiers.iterator();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
while (qualifiers.hasNext()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
Long qualifierOfferId = currentQualifier.getPromotion().getId();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"return this.split(discount.getQuantity(), offerId);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.apache.commons.collections.CollectionUtils;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
Iterator<PromotionQualifier> qualifiers = promotionQualifiers.iterator();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
while (qualifiers.hasNext()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
Long qualifierOfferId = currentQualifier.getPromotion().getId();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"return this.split(discount.getQuantity(), offerId, !CollectionUtils.isEmpty(discount.getCandidateItemOffer().getOffer().getQualifyingItemCriteria()));",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
Iterator<PromotionQualifier> qualifiers = promotionQualifiers.iterator();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
while (qualifiers.hasNext()) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
Long qualifierOfferId = currentQualifier.getPromotion().getId();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"return this.split(discount.getQuantity(), offerId);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return BigDecimal.valueOf(Integer.MAX_VALUE);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return BigDecimal.ZERO;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return BigDecimal.ZERO;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
itemOffer.getOffer().getOrderMinSubTotal().lessThanOrEqual(order.getOrder().getSubTotal())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return true;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return false;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.offerName = offerName;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.offerName = offer.getName();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
// dont clone,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.core.order.domain.FulfillmentGroup;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
Money fulfillmentCharges;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
fulfillmentCharges = fulfillmentGroup.getFulfillmentPrice();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
fulfillmentCharges = fulfillmentGroupMember.getFinalizedPriceWithAdjustments();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
originalPrice = orderItem.getPriceBeforeAdjustments(getOffer().getApplyDiscountToSalePrice());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
@Override,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return weightedPercentSaved;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.weightedPercentSaved = weightedPercentSaved;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return originalPrice;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.originalPrice = originalPrice;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
originalPrice = orderItem.getPriceBeforeAdjustments(getOffer().getApplyDiscountToSalePrice());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
@Override,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return weightedPercentSaved;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.weightedPercentSaved = weightedPercentSaved;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return originalPrice;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.originalPrice = originalPrice;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"return offerServiceUtilities.orderMeetsQualifyingSubtotalRequirements(order, itemOffer.getOffer(), itemOffer.getCandidateQualifiersMap());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"return offerServiceUtilities.orderMeetsSubtotalRequirements(order, itemOffer.getOffer());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return true;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
List<PromotableOrderItem> promotableItems = itemOffer.getCandidateQualifiersMap().get(itemCriteria);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
subtotal = subtotal.add(lineItemAmount);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return false;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
itemOffer.getOffer().getOrderMinSubTotal().lessThanOrEqual(order.getOrder().getSubTotal())) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.core.offer.domain.OfferItemCriteria;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableCandidateItemOffer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"return offerServiceUtilities.orderMeetsQualifyingSubtotalRequirements(order, orderOffer.getOffer(), orderOffer.getCandidateQualifiersMap());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"return offerServiceUtilities.orderMeetsSubtotalRequirements(order, orderOffer.getOffer());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
@Override,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"returnPrice = returnPrice.add(child.getPriceBeforeAdjustments(allowSalesPrice, true));",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return getSalePrice().add(returnPrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return getRetailPrice().add(returnPrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return getSalePrice();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return getRetailPrice();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.persistence.DefaultPostLoaderDao;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.persistence.PostLoaderDao;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.util.HibernateUtils;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.hibernate.proxy.HibernateProxy;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
PostLoaderDao postLoaderDao = DefaultPostLoaderDao.getPostLoaderDao();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
Long id = offer.getId();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"deproxiedOffer = postLoaderDao.find(OfferImpl.class, id);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
deproxiedOffer = HibernateUtils.deproxy(offer);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return deproxiedOffer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.orderItemPriceDetail = orderItemPriceDetail;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.persistence.DefaultPostLoaderDao;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.persistence.PostLoaderDao;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.util.HibernateUtils;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.hibernate.proxy.HibernateProxy;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
PostLoaderDao postLoaderDao = DefaultPostLoaderDao.getPostLoaderDao();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
Long id = offer.getId();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"deproxiedOffer = postLoaderDao.find(OfferImpl.class, id);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
deproxiedOffer = HibernateUtils.deproxy(offer);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return deproxiedOffer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.orderItemPriceDetail = orderItemPriceDetail;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.persistence.DefaultPostLoaderDao;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.persistence.PostLoaderDao;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.util.HibernateUtils;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.hibernate.proxy.HibernateProxy;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
PostLoaderDao postLoaderDao = DefaultPostLoaderDao.getPostLoaderDao();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
Long id = offer.getId();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"deproxiedOffer = postLoaderDao.find(OfferImpl.class, id);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
deproxiedOffer = HibernateUtils.deproxy(offer);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return deproxiedOffer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.orderItemPriceDetail = orderItemPriceDetail;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
Long offerId = adjustment.getOffer().getId();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
syncNeededOnTotal = true;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
syncFulfillmentPrice = fg.getFulfillmentPrice();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return !fg.getFutureCreditFulfillmentGroupAdjustmentsValue().equals(Money.ZERO);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.offer.domain.OfferItemCriteria;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableCandidateItemOffer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.config.service.SystemPropertiesService;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.springframework.beans.factory.annotation.Value;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"this(promotableOrder, offer);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.useQtyOnlyTierCalculation = useQtyOnlyTierCalculation;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
List<PromotableOrderItem> candidateTargets = getCandidateTargetsMap().get(itemCriteria);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
returnQty += promotableOrderItem.getQuantity();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return returnQty;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
iterationQty += promotableOrderItem.getQuantity();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
int tmpReturnQty;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
tmpReturnQty = 0;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
tmpReturnQty = (int)Math.floor(iterationQty / itemCriteria.getQuantity());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
returnQty = tmpReturnQty;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"returnQty = Math.min(tmpReturnQty, returnQty);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
returnQty = 0;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
@Override,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return useQtyOnlyTierCalculation;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
List<PromotableOrderItem> candidateTargets = getCandidateTargetsMap().get(itemCriteria);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
returnQty += promotableOrderItem.getQuantity();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return returnQty;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.springframework.beans.factory.annotation.Value;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.offer.domain.OfferPriceData;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"HashMap<OfferPriceData, List<PromotableOrderItem>> getCandidateFixedTargetsMap();",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
/**,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
*/,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.core.offer.domain.OfferPriceData;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
@Override,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return candidateFixedTargetsMap;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.candidateFixedTargetsMap = candidateFixedTargetsMap;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
@Override,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
originalPrice = orderItem.getPriceBeforeAdjustments(getOffer().getApplyDiscountToSalePrice());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return savings.multiply(qtyToReceiveSavings);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"Money retailAdjustmentValue,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.retailAdjustmentValue = retailAdjustmentValue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.saleAdjustmentValue = saleAdjustmentValue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
*/,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"retailAdjustmentValue = PromotableOfferUtility.computeAdjustmentValue(currentPriceDetailRetailValue, offer.getValue(), this, this);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"saleAdjustmentValue = PromotableOfferUtility.computeAdjustmentValue(currentPriceDetailSalesValue, offer.getValue(), this, this);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
protected final PromotableOfferUtility promotableOfferUtility;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.promotableOfferUtility = promotableOfferUtility;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.offer.domain.OfferPriceData;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
* @author Nick Crum ncrum,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"boolean itemMatchesOfferPriceData(OfferPriceData offerPriceData, PromotableOrderItem promotableOrderItem);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"Money computeRetailAdjustmentValue(PromotableCandidateItemOffer promotableCandidateItemOffer, PromotableOrderItemPriceDetail orderItemPriceDetail);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"Money computeSalesAdjustmentValue(PromotableCandidateItemOffer promotableCandidateItemOffer, PromotableOrderItemPriceDetail orderItemPriceDetail);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.apache.commons.beanutils.BeanComparator;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.core.offer.domain.AdvancedOffer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.core.offer.domain.OfferTier;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.core.offer.service.type.OfferDiscountType;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import java.math.RoundingMode;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import java.util.Collections;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
* PromotableCandidateItemOfferImpl,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
* @author bpolster,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
*,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
OfferDiscountType discountType = offer.getDiscountType();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
Money adjustmentValue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"adjustmentValue = currentPriceDetailValue.subtract(new Money(offerUnitValue, currency));",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"offerValue = offerValue.setScale(rounding.getRoundingScale(), rounding.getRoundingMode());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
adjustmentValue = currentPriceDetailValue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return adjustmentValue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
List<OfferTier> offerTiers = advancedOffer.getOfferTiers();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"Collections.sort(offerTiers, new BeanComparator(""minQuantity""));",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
maxTier = currentTier;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return maxTier.getAmount();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return BigDecimal.valueOf(Integer.MAX_VALUE);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return BigDecimal.ZERO;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return offer.getValue();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"Money retailAdjustmentValue,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.retailAdjustmentValue = retailAdjustmentValue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.saleAdjustmentValue = saleAdjustmentValue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
PromotableOrderItemPriceDetail orderItemPriceDetail) {,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
*/,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
currentPriceDetailSalesValue = currentPriceDetailRetailValue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"retailAdjustmentValue = PromotableOfferUtility.computeAdjustmentValue(currentPriceDetailRetailValue, offerUnitValue, this, this);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"saleAdjustmentValue = PromotableOfferUtility.computeAdjustmentValue(currentPriceDetailSalesValue, offerUnitValue, this, this);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtility;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtilityImpl;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtility;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtilityImpl;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
*,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return RoundingMode.HALF_EVEN;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
*/,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return roundOfferValues;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
/**,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
*,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
adjustmentValue = Money.trimUnnecessaryScaleToCurrency(adjustmentValue);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"offerValue = offerValue.setScale(roundingScale, roundingMode);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
boolean isRoundOfferValues();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
/**,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
*/,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
int getRoundingScale();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
* #%L,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
* BroadleafCommerce Framework,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
* %%,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"* (the ""Commercial License"" located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
* shall apply.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
*,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
* #L%,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
*/,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
package org.broadleafcommerce.core.order.domain;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.copy.CreateResponse;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.copy.MultiTenantCopyContext;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.currency.util.BroadleafCurrencyUtils;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.currency.util.CurrencyCodeIdentifiable;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransform;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformMember;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformTypes;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.presentation.AdminPresentation;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.presentation.AdminPresentationClass;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.presentation.AdminPresentationCollection;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.presentation.PopulateToOneFieldsEnum;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.presentation.client.SupportedFieldType;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeEntry;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverride;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverrides;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.common.presentation.override.PropertyType;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOffer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOfferImpl;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustment;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustmentImpl;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.core.order.service.type.FulfillmentType;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.profile.core.domain.Address;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.profile.core.domain.AddressImpl;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.profile.core.domain.Phone;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.broadleafcommerce.profile.core.domain.PhoneImpl;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.hibernate.annotations.Cache;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.hibernate.annotations.CacheConcurrencyStrategy;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.hibernate.annotations.GenericGenerator;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.hibernate.annotations.Index;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import org.hibernate.annotations.Parameter;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import java.util.Vector;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import javax.persistence.CascadeType;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import javax.persistence.Column;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import javax.persistence.Entity;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import javax.persistence.FetchType;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import javax.persistence.GeneratedValue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import javax.persistence.Id;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import javax.persistence.Inheritance;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import javax.persistence.InheritanceType;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import javax.persistence.JoinColumn;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import javax.persistence.JoinTable;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import javax.persistence.ManyToOne;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import javax.persistence.OneToMany;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
import javax.persistence.Table;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
@Inheritance(strategy = InheritanceType.JOINED),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Table(name = ""BLC_FULFILLMENT_GROUP"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
{,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.READONLY,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"booleanOverrideValue = true)),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.PROMINENT,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"booleanOverrideValue = false)),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TAB,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Advanced),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TABORDER,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Advanced),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Address),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Address),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"booleanOverrideValue = false),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.ORDER,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"intOverrideValue = FulfillmentGroupImpl.Presentation.FieldOrder.PHONE),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.GROUP,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"overrideValue = ""General""),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.REQUIREDOVERRIDE,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"overrideValue = ""NOT_REQUIRED"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
@DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.MULTITENANT_SITE),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@GeneratedValue(generator = ""FulfillmentGroupId"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""FULFILLMENT_GROUP_ID"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
protected Long id;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""REFERENCE_NUMBER"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
groupOrder = Presentation.Group.Order.General),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
protected String referenceNumber;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""METHOD"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
protected String method;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""SERVICE"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
protected String service;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""RETAIL_PRICE"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""SALE_PRICE"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""PRICE"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""TYPE"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
protected String type;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""TOTAL_TAX"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""TOTAL_ITEM_TAX"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""TOTAL_FEE_TAX"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""TOTAL_FG_TAX"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""DELIVERY_INSTRUCTION"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
protected String deliveryInstruction;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""IS_PRIMARY"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""MERCHANDISE_TOTAL"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""TOTAL"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""STATUS"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
protected String status;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""SHIPPING_PRICE_TAXABLE"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@JoinColumn(name = ""FULFILLMENT_OPTION_ID"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
protected FulfillmentOption fulfillmentOption;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@ManyToOne(targetEntity = OrderImpl.class, optional=false)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@JoinColumn(name = ""ORDER_ID"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""FULFILLMENT_GROUP_SEQUNCE"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
protected Integer sequence;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@JoinColumn(name = ""ADDRESS_ID"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
protected Address address;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
/**,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@JoinColumn(name = ""PHONE_ID"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
protected Phone phone;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@JoinColumn(name = ""PERSONAL_MESSAGE_ID"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
protected PersonalMessage personalMessage;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
"@Column(name = ""SHIPPING_OVERRIDE"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
@Override,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return id;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.id = id;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return order;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.order = order;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return fulfillmentOption;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.fulfillmentOption = fulfillmentOption;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return referenceNumber;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.referenceNumber = referenceNumber;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return fulfillmentGroupItems;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
OrderItem orderItem = fgItem.getOrderItem();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
BundleOrderItemImpl bundleOrderItem = (BundleOrderItemImpl)orderItem;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
DiscreteOrderItem discreteOrderItem = (DiscreteOrderItem)orderItem;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return discreteOrderItems;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.fulfillmentGroupItems = fulfillmentGroupItems;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return address;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.address = address;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return phone;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.phone = phone;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return method;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.method = fulfillmentMethod;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.retailFulfillmentPrice = Money.toAmount(retailFulfillmentPrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return getRetailFulfillmentPrice();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return FulfillmentType.getInstance(type);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return candidateOffers;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.candidateOffers = candidateOffers;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return this.fulfillmentGroupAdjustments;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return futureCreditAdjustments;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
adjustmentsValue = adjustmentsValue.add(adjustment.getValue());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return adjustmentsValue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.fulfillmentGroupAdjustments = fulfillmentGroupAdjustments;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.saleFulfillmentPrice = Money.toAmount(saleFulfillmentPrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return getSaleFulfillmentPrice();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.fulfillmentPrice = Money.toAmount(fulfillmentPrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return getFulfillmentPrice();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return taxes;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.taxes = taxes;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.totalTax = Money.toAmount(totalTax);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.totalItemTax = Money.toAmount(totalItemTax);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.totalFeeTax = Money.toAmount(totalFeeTax);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.totalFulfillmentGroupTax = Money.toAmount(totalFulfillmentGroupTax);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return deliveryInstruction;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.deliveryInstruction = deliveryInstruction;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return personalMessage;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.personalMessage = personalMessage;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return primary;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.primary = primary;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.merchandiseTotal = Money.toAmount(merchandiseTotal);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.total = Money.toAmount(orderTotal);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return FulfillmentGroupStatusType.getInstance(status);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.status = status.getType();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return fulfillmentGroupFees;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.fulfillmentGroupFees = fulfillmentGroupFees;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return isShippingPriceTaxable;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.isShippingPriceTaxable = isShippingPriceTaxable;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.sequence = sequence;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return this.sequence;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return service;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.service = service;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return getOrder().getCurrency().getCurrencyCode();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
this.shippingOverride = shippingOverride;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return result;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
CreateResponse<G> createResponse = context.createOrRetrieveCopyInstance(this);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return createResponse;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
FulfillmentGroup cloned = createResponse.getClone();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
FulfillmentGroupItem fulfillmentGroupItem = fgi.createOrRetrieveCopyInstance(context).getClone();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return  createResponse;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
TaxDetail clonedTaxDetail = taxDetail.createOrRetrieveCopyInstance(context).getClone();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return true;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return false;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
FulfillmentGroupImpl other = (FulfillmentGroupImpl) obj;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
return id.equals(other.id);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,0
* #%L,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
* BroadleafCommerce Framework,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
* %%,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"* (the ""Commercial License"" located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
* shall apply.,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
*,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
* #L%,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
*/,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
package org.broadleafcommerce.core.order.domain;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.copy.CreateResponse;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.copy.MultiTenantCopyContext;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.currency.util.BroadleafCurrencyUtils;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.currency.util.CurrencyCodeIdentifiable;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransform;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformMember;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformTypes;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.presentation.AdminPresentation;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.presentation.AdminPresentationClass;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.presentation.AdminPresentationCollection;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.presentation.PopulateToOneFieldsEnum;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.presentation.client.SupportedFieldType;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeEntry;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverride;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.presentation.override.AdminPresentationMergeOverrides;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.common.presentation.override.PropertyType;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOffer;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.core.offer.domain.CandidateFulfillmentGroupOfferImpl;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustment;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.core.offer.domain.FulfillmentGroupAdjustmentImpl;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.core.order.service.type.FulfillmentType;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.profile.core.domain.Address;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.profile.core.domain.AddressImpl;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.profile.core.domain.Phone;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.broadleafcommerce.profile.core.domain.PhoneImpl;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.hibernate.annotations.Cache;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.hibernate.annotations.CacheConcurrencyStrategy;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.hibernate.annotations.GenericGenerator;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.hibernate.annotations.Index;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import org.hibernate.annotations.Parameter;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import java.util.Vector;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import javax.persistence.CascadeType;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import javax.persistence.Column;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import javax.persistence.Entity;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import javax.persistence.FetchType;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import javax.persistence.GeneratedValue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import javax.persistence.Id;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import javax.persistence.Inheritance;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import javax.persistence.InheritanceType;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import javax.persistence.JoinColumn;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import javax.persistence.JoinTable;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import javax.persistence.ManyToOne;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import javax.persistence.OneToMany;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
import javax.persistence.Table;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
@Inheritance(strategy = InheritanceType.JOINED),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Table(name = ""BLC_FULFILLMENT_GROUP"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
{,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.READONLY,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"booleanOverrideValue = true)),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.PROMINENT,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"booleanOverrideValue = false)),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TAB,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Advanced),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.TABORDER,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Advanced),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"overrideValue = FulfillmentGroupImpl.Presentation.Tab.Name.Address),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
intOverrideValue = FulfillmentGroupImpl.Presentation.Tab.Order.Address),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.EXCLUDED,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"booleanOverrideValue = false),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.ORDER,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"intOverrideValue = FulfillmentGroupImpl.Presentation.FieldOrder.PHONE),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.GROUP,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"overrideValue = ""General""),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.REQUIREDOVERRIDE,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"overrideValue = ""NOT_REQUIRED"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
},b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
@DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.MULTITENANT_SITE),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@GeneratedValue(generator = ""FulfillmentGroupId"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""FULFILLMENT_GROUP_ID"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
protected Long id;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""REFERENCE_NUMBER"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
groupOrder = Presentation.Group.Order.General),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
protected String referenceNumber;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""METHOD"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
protected String method;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""SERVICE"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
protected String service;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""RETAIL_PRICE"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""SALE_PRICE"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""PRICE"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""TYPE"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
protected String type;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""TOTAL_TAX"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""TOTAL_ITEM_TAX"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""TOTAL_FEE_TAX"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""TOTAL_FG_TAX"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""DELIVERY_INSTRUCTION"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
protected String deliveryInstruction;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""IS_PRIMARY"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""MERCHANDISE_TOTAL"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""TOTAL"", precision=19, scale=5)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""STATUS"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
protected String status;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""SHIPPING_PRICE_TAXABLE"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@JoinColumn(name = ""FULFILLMENT_OPTION_ID"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
protected FulfillmentOption fulfillmentOption;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@ManyToOne(targetEntity = OrderImpl.class, optional=false)",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@JoinColumn(name = ""ORDER_ID"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""FULFILLMENT_GROUP_SEQUNCE"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
protected Integer sequence;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@JoinColumn(name = ""ADDRESS_ID"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
protected Address address;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
/**,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@JoinColumn(name = ""PHONE_ID"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
protected Phone phone;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@JoinColumn(name = ""PERSONAL_MESSAGE_ID"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
protected PersonalMessage personalMessage;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
"@Column(name = ""SHIPPING_OVERRIDE"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
@Override,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return id;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.id = id;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return order;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.order = order;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return fulfillmentOption;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.fulfillmentOption = fulfillmentOption;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return referenceNumber;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.referenceNumber = referenceNumber;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return fulfillmentGroupItems;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
OrderItem orderItem = fgItem.getOrderItem();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
BundleOrderItemImpl bundleOrderItem = (BundleOrderItemImpl)orderItem;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
DiscreteOrderItem discreteOrderItem = (DiscreteOrderItem)orderItem;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return discreteOrderItems;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.fulfillmentGroupItems = fulfillmentGroupItems;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return address;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.address = address;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return phone;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.phone = phone;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return method;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.method = fulfillmentMethod;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.retailFulfillmentPrice = Money.toAmount(retailFulfillmentPrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return getRetailFulfillmentPrice();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return FulfillmentType.getInstance(type);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return candidateOffers;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.candidateOffers = candidateOffers;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return this.fulfillmentGroupAdjustments;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return futureCreditAdjustments;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
adjustmentsValue = adjustmentsValue.add(adjustment.getValue());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return adjustmentsValue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.fulfillmentGroupAdjustments = fulfillmentGroupAdjustments;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.saleFulfillmentPrice = Money.toAmount(saleFulfillmentPrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return getSaleFulfillmentPrice();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.fulfillmentPrice = Money.toAmount(fulfillmentPrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return getFulfillmentPrice();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return taxes;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.taxes = taxes;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.totalTax = Money.toAmount(totalTax);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.totalItemTax = Money.toAmount(totalItemTax);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.totalFeeTax = Money.toAmount(totalFeeTax);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.totalFulfillmentGroupTax = Money.toAmount(totalFulfillmentGroupTax);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return deliveryInstruction;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.deliveryInstruction = deliveryInstruction;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return personalMessage;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.personalMessage = personalMessage;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return primary;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.primary = primary;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.merchandiseTotal = Money.toAmount(merchandiseTotal);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.total = Money.toAmount(orderTotal);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return FulfillmentGroupStatusType.getInstance(status);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.status = status.getType();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return fulfillmentGroupFees;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.fulfillmentGroupFees = fulfillmentGroupFees;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return isShippingPriceTaxable;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.isShippingPriceTaxable = isShippingPriceTaxable;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.sequence = sequence;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return this.sequence;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return service;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.service = service;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return getOrder().getCurrency().getCurrencyCode();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
this.shippingOverride = shippingOverride;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return result;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
CreateResponse<G> createResponse = context.createOrRetrieveCopyInstance(this);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return createResponse;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
FulfillmentGroup cloned = createResponse.getClone();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
FulfillmentGroupItem fulfillmentGroupItem = fgi.createOrRetrieveCopyInstance(context).getClone();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return  createResponse;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
TaxDetail clonedTaxDetail = taxDetail.createOrRetrieveCopyInstance(context).getClone();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return true;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return false;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
FulfillmentGroupImpl other = (FulfillmentGroupImpl) obj;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
return id.equals(other.id);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,1,1
continue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"Collections.sort(priceDetails, getQualifierItemComparator(itemOffer.getOffer().getApplyDiscountToSalePrice()));",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
break;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
qualifierQtyNeeded -= qtyToMarkAsQualifier;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
detail.getPromotionQualifiers().remove(pq);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
pq.setItemCriteria(previousQualifierCriteria);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
break;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
continue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
continue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"priceDetail.addPromotionDiscount(itemOffer, itemOffer.getOffer().getTargetItemCriteria(), qtyToMarkAsTarget);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
itemOffer.addUse();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
curQualifier++;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"priceDetail.addPromotionDiscount(itemOffer, itemOffer.getOffer().getTargetItemCriteria(), qtyToMarkAsTarget);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
itemOffer.addUse();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
candidate.getLegacyCandidateTargets().add(promotableOrderItem);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
candidateOffer.getCandidateTargetsMap().putAll(candidates.getCandidateTargetsMap());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"Collections.sort(priceDetails, getTargetItemComparator(itemOffer.getOffer().getApplyDiscountToSalePrice()));",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
targetQtyNeeded -= qtyToMarkAsTarget;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"detail.addPromotionDiscount(itemOffer, itemCriteria, qtyToMarkAsTarget);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
break;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
candidate.getCandidateTargets().add(promotableOrderItem);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
candidateOffer.getCandidateTargets().addAll(candidates.getCandidateTargets());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"Collections.sort(priceDetails, getTargetItemComparator(promotion.getApplyDiscountToSalePrice()));",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
receiveQtyNeeded -= qtyToMarkAsTarget;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"priceDetail.addPromotionDiscount(itemOffer, itemOffer.getOffer().getTargetItemCriteria(), qtyToMarkAsTarget);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
itemOffer.addUse();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
break;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"offerServiceUtilities.applyAdjustmentsForItemPriceDetails(itemOffer, itemPriceDetails);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"offerServiceUtilities.applyOrderItemAdjustment(itemOffer, itemPriceDetail);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"extensionManager.getProxy().applyItemOffer(order, itemOffer, contextMap);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"applyLegacyAdjustments(order, itemOffer);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"applyAdjustments(order, itemOffer);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"offerServiceUtilities.sortTargetItemDetails(priceDetails, itemOffer.getOffer().getApplyDiscountToSalePrice());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"orderItemHolder, itemCriteria, priceDetails, this);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"extensionManager.getProxy().calculatePotentialSavings(itemOffer, item, quantity, contextMap);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
item.resetPriceDetails();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
extensionManager.getProxy().resetPriceDetails(item);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
extensionManager.getProxy().chooseSaleOrRetailAdjustments(order);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
itemPriceDetail.addCandidateItemPriceDetailAdjustment(promotableOrderItemPriceDetailAdjustment);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
break;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"applyOrderItemAdjustment(itemOffer, itemPriceDetail);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
continue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"applyLegacyAdjustments(order, itemOffer);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"applyAdjustments(order, itemOffer);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"Collections.sort(priceDetails, getQualifierItemComparator(itemOffer.getOffer().getApplyDiscountToSalePrice()));",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
qualifierQtyNeeded -= qtyToMarkAsQualifier;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"detail.addPromotionQualifier(itemOffer, itemCriteria, qtyToMarkAsQualifier);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"Collections.sort(priceDetails, getTargetItemComparator(itemOffer.getOffer().getApplyDiscountToSalePrice()));",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
targetQtyNeeded -= qtyToMarkAsTarget;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"priceDetail.addPromotionDiscount(itemOffer, itemCriteria, qtyToMarkAsTarget);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
detail.getPromotionQualifiers().remove(pq);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
pq.setItemCriteria(previousQualifierCriteria);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
};,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"itemOffer.calculateSavingsForOrderItem(item, discount.getQuantity()));",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
offerIterator.next();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
offerIterator.remove();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"offerServiceUtilities.updatePriceDetail(existingDetail, priceDetail);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"offerServiceUtilities.updatePriceDetail(newPriceDetail, priceDetail);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"offerServiceUtilities.removeUnmatchedPriceDetails(unmatchedDetailsMap, pdIterator);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"offerServiceUtilities.removeUnmatchedQualifiers(unmatchedQualifiersMap, qIterator);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
offerServiceUtilities.buildItemDetailAdjustmentMap(itemDetail);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
extensionManager.getProxy().synchronizeAdjustmentsAndPrices(promotableOrder);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
orderItemList.add(currentItem);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
orderItemList.add(containedItem);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"promotableItemMap.put(item.getOrderItem(), item);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"updatePriceDetail(existingDetail, priceDetail);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"updatePriceDetail(newPriceDetail, priceDetail);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
pdIterator.remove();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
qIterator.remove();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
itemDetail.setQuantity(promotableDetail.getQuantity());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
itemDetail.setUseSalePrice(promotableDetail.useSaleAdjustments());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"updateItemAdjustment(itemAdjustment, adjustment);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"newItemAdjustment.init(itemDetail, adjustment.getOffer(), null);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"updateItemAdjustment(newItemAdjustment, adjustment);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
itemDetail.getOrderItemPriceDetailAdjustments().add(newItemAdjustment);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
adjustmentIdsToRemove.add(adjustmentToRemove.getOffer().getId());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
iterator.remove();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
itemAdjustment.setValue(promotableAdjustment.getAdjustmentValue());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
itemAdjustment.setSalesPriceValue(promotableAdjustment.getSaleAdjustmentValue());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
itemAdjustment.setRetailPriceValue(promotableAdjustment.getRetailAdjustmentValue());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
itemAdjustment.setAppliedToSalePrice(promotableAdjustment.isAppliedToSalePrice());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"itemAdjustmentMap.put(adjustment.getOffer().getId(), adjustment);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
qualifiers.remove();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
newDetail.getPromotionQualifiers().add(currentQualifier);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
newDetail.getPromotionQualifiers().add(newQualifier);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
qualifiers.remove();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
newDetail.getPromotionQualifiers().add(currentQualifier);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
newDetail.getPromotionQualifiers().add(newQualifier);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
qualifiers.remove();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
newDetail.getPromotionQualifiers().add(currentQualifier);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
newDetail.getPromotionQualifiers().add(newQualifier);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
qualifiers.remove();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
newDetail.getPromotionQualifiers().add(currentQualifier);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
newDetail.getPromotionQualifiers().add(newQualifier);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"offerService.applyAndSaveOffersToOrder(offers, promotableOrder.getOrder());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"offerService.applyOffersToOrder(offers, promotableOrder.getOrder());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
itemOffer.getOffer().getOrderMinSubTotal().lessThanOrEqual(Money.ZERO) ||,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"cloned.init(orderItemPriceDetail, offer, reason);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
cloned.setOrderItemPriceDetail(orderItemPriceDetail);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
cloned.setReason(reason);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
fulfillmentGroupMember.getFulfillmentGroup().setFulfillmentPrice(fulfillmentCharges);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
fulfillmentGroup.getFulfillmentGroup().setFulfillmentPrice(fulfillmentCharges);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
poid.chooseSaleOrRetailAdjustments();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
poid.chooseSaleOrRetailAdjustments();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
itemOffer.getOffer().getOrderMinSubTotal().lessThanOrEqual(Money.ZERO) ||,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"applyOrderOffer(promotableOrder, orderOffer);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
compareAndAdjustOrderAndItemOffers(promotableOrder);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
continue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
break;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"applyOrderOffer(promotableOrder, orderOffer);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
compareAndAdjustOrderAndItemOffers(promotableOrder);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
continue;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
break;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
@Transient,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
setOrderItemPriceDetail(orderItemPriceDetail);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
setReason(reason);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
@Transient,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
setOrderItemPriceDetail(orderItemPriceDetail);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
setReason(reason);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
@Transient,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
setOrderItemPriceDetail(orderItemPriceDetail);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
setReason(reason);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"updateAdjustmentIfChangesDetected(adjustment, promotableAdjustment);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
promotableAdjustment.getAdjustmentValue());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
adjustment.setValue(promotableAdjustment.getAdjustmentValue());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
promotableAdjustment.isFutureCredit());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
adjustment.setFutureCredit(promotableAdjustment.isFutureCredit());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
syncFulfillmentPrice(fg);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
order.setTotalFulfillmentCharges(syncFulfillmentPrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
fg.setFulfillmentPrice(fulfillmentPrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
promotableAdjustment.getAdjustmentValue());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
adjustment.setValue(promotableAdjustment.getAdjustmentValue());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"@Value(""${use.quantity.only.tier.calculation:false}"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
computeAdjustmentValues();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
/*,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"promotableOfferUtility.computeRetailAdjustmentValue(promotableCandidateItemOffer, orderItemPriceDetail),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"promotableOfferUtility.computeSalesAdjustmentValue(promotableCandidateItemOffer, orderItemPriceDetail));",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"promotableOfferUtility.computeRetailAdjustmentValue(promotableCandidateFulfillmentGroupOffer, fulfillmentGroup),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"promotableOfferUtility.computeSalesAdjustmentValue(promotableCandidateFulfillmentGroupOffer, fulfillmentGroup));",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"@SuppressWarnings(""unchecked"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
break;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"PromotableOrderItemPriceDetail orderItemPriceDetail,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"promotableCandidateItemOffer, promotableOrderItemPriceDetail, retailAdjustmentValue, saleAdjustmentValue);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
computeAdjustmentValues();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
/*,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"promotableCandidateItemOffer, promotableOrderItemPriceDetail);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
private PromotableOfferUtility promotableOfferUtility;,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"offer.getValue().divide(new BigDecimal(""100""), 5, RoundingMode.HALF_EVEN));",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
Integer getRoundingScale();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
/*-,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
@Entity,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
@AdminPresentationMergeOverrides(,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"}),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
}),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
@DirectCopyTransform({,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
@Id,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
@GenericGenerator(,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"name=""FulfillmentGroupId"",",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"strategy=""org.broadleafcommerce.common.persistence.IdOverrideTableGenerator"",",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"@Parameter(name=""segment_value"", value=""FulfillmentGroupImpl""),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"@Parameter(name=""entity_name"", value=""org.broadleafcommerce.core.order.domain.FulfillmentGroupImpl"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"@Index(name=""FG_REFERENCE_INDEX"", columnNames={""REFERENCE_NUMBER""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"@Index(name=""FG_METHOD_INDEX"", columnNames={""METHOD""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
@Deprecated,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"@Index(name=""FG_SERVICE_INDEX"", columnNames={""SERVICE""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
fieldType=SupportedFieldType.MONEY),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"fieldType=SupportedFieldType.BROADLEAF_ENUMERATION,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"broadleafEnumeration=""org.broadleafcommerce.core.order.service.type.FulfillmentType"",",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"@Index(name=""FG_PRIMARY_INDEX"", columnNames={""IS_PRIMARY""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"@Index(name=""FG_STATUS_INDEX"", columnNames={""STATUS""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"broadleafEnumeration=""org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType"",",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"@Index(name=""FG_ORDER_INDEX"", columnNames={""ORDER_ID""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"@Index(name=""FG_ADDRESS_INDEX"", columnNames={""ADDRESS_ID""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"@Index(name=""FG_PHONE_INDEX"", columnNames={""PHONE_ID""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"@Index(name=""FG_MESSAGE_INDEX"", columnNames={""PERSONAL_MESSAGE_ID""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"@AdminPresentationCollection(friendlyName=""FulfillmentGroupImpl_Items"",",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"@AdminPresentationCollection(friendlyName=""FulfillmentGroupImpl_Fees"",",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"@AdminPresentationCollection(friendlyName=""FulfillmentGroupImpl_Adjustments"",",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
discreteOrderItems.add(discreteOrderItem);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
this.fulfillmentGroupItems.add(fulfillmentGroupItem);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"BroadleafCurrencyUtils.getMoney(retailFulfillmentPrice, getOrder().getCurrency());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
setRetailFulfillmentPrice(retailShippingPrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
candidateOffers.add(candidateOffer);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
offer.setFulfillmentGroup(null);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
candidateOffers.clear();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
futureCreditAdjustments.add(adjustment);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
adjustment.setFulfillmentGroup(null);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
fulfillmentGroupAdjustments.clear();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
getOrder().getCurrency());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
setSaleFulfillmentPrice(saleShippingPrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
setFulfillmentPrice(shippingPrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
fulfillmentGroupFees.add(fulfillmentGroupFee);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
fulfillmentGroupFees.clear();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
cloned.setDeliveryInstruction(deliveryInstruction);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
cloned.setFulfillmentOption(fulfillmentOption);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
"cloneTaxDetails(context, cloned);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
cloned.setOrder(order);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
cloned.setPrimary(primary);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
cloned.setType(getType());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
fulfillmentGroupItem.setFulfillmentGroup(cloned);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
cloned.getFulfillmentGroupItems().add(fulfillmentGroupItem);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
cloned.getTaxes().add(clonedTaxDetail);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,0
/*,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
@Entity,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
@AdminPresentationMergeOverrides(,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"}),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
}),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
@DirectCopyTransform({,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
@Id,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
@GenericGenerator(,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"name=""FulfillmentGroupId"",",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"strategy=""org.broadleafcommerce.common.persistence.IdOverrideTableGenerator"",",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"@Parameter(name=""segment_value"", value=""FulfillmentGroupImpl""),",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"@Parameter(name=""entity_name"", value=""org.broadleafcommerce.core.order.domain.FulfillmentGroupImpl"")",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"@Index(name=""FG_REFERENCE_INDEX"", columnNames={""REFERENCE_NUMBER""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"@Index(name=""FG_METHOD_INDEX"", columnNames={""METHOD""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
@Deprecated,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"@Index(name=""FG_SERVICE_INDEX"", columnNames={""SERVICE""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
fieldType=SupportedFieldType.MONEY),b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"fieldType=SupportedFieldType.BROADLEAF_ENUMERATION,",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"broadleafEnumeration=""org.broadleafcommerce.core.order.service.type.FulfillmentType"",",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"@Index(name=""FG_PRIMARY_INDEX"", columnNames={""IS_PRIMARY""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"@Index(name=""FG_STATUS_INDEX"", columnNames={""STATUS""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"broadleafEnumeration=""org.broadleafcommerce.core.order.service.type.FulfillmentGroupStatusType"",",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"@Index(name=""FG_ORDER_INDEX"", columnNames={""ORDER_ID""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"@Index(name=""FG_ADDRESS_INDEX"", columnNames={""ADDRESS_ID""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"@Index(name=""FG_PHONE_INDEX"", columnNames={""PHONE_ID""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"@Index(name=""FG_MESSAGE_INDEX"", columnNames={""PERSONAL_MESSAGE_ID""})",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"@AdminPresentationCollection(friendlyName=""FulfillmentGroupImpl_Items"",",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"@AdminPresentationCollection(friendlyName=""FulfillmentGroupImpl_Fees"",",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"@AdminPresentationCollection(friendlyName=""FulfillmentGroupImpl_Adjustments"",",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
discreteOrderItems.add(discreteOrderItem);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
this.fulfillmentGroupItems.add(fulfillmentGroupItem);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"BroadleafCurrencyUtils.getMoney(retailFulfillmentPrice, getOrder().getCurrency());",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
setRetailFulfillmentPrice(retailShippingPrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
candidateOffers.add(candidateOffer);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
offer.setFulfillmentGroup(null);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
candidateOffers.clear();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
futureCreditAdjustments.add(adjustment);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
adjustment.setFulfillmentGroup(null);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
fulfillmentGroupAdjustments.clear();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
getOrder().getCurrency());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
setSaleFulfillmentPrice(saleShippingPrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
setFulfillmentPrice(shippingPrice);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
fulfillmentGroupFees.add(fulfillmentGroupFee);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
fulfillmentGroupFees.clear();,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
cloned.setDeliveryInstruction(deliveryInstruction);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
cloned.setFulfillmentOption(fulfillmentOption);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"cloneTaxDetails(context, cloned);",b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
cloned.setOrder(order);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
cloned.setPrimary(primary);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
cloned.setType(getType());,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
fulfillmentGroupItem.setFulfillmentGroup(cloned);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
cloned.getFulfillmentGroupItems().add(fulfillmentGroupItem);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
cloned.getTaxes().add(clonedTaxDetail);,b842e4ba7fb4745f6ecfee6ababf1fdd8edac0f7,0,1
"public void addListGrid(ClassMetadata cmd, ListGrid listGrid, String tabName, Integer tabOrder, String groupName, boolean isTabPresent) {",3a934b634c67330fda4b28d88f2dc865cff4356b,6,0
"public PersistenceResponse removeSubCollectionEntity(ClassMetadata mainMetadata, Property field, Entity parentEntity, String itemId,",3a934b634c67330fda4b28d88f2dc865cff4356b,5,0
"public Entity getRecord(PersistencePackageRequest request, String id, ClassMetadata cmd, boolean isCollectionRequest)",3a934b634c67330fda4b28d88f2dc865cff4356b,5,1
"public Entity addSubCollectionEntity(EntityForm entityForm, ClassMetadata mainMetadata, Property field,",3a934b634c67330fda4b28d88f2dc865cff4356b,5,1
"public Entity updateSubCollectionEntity(EntityForm entityForm, ClassMetadata mainMetadata, Property field,",3a934b634c67330fda4b28d88f2dc865cff4356b,5,1
"public void removeSubCollectionEntity(ClassMetadata mainMetadata, Property field, Entity parentEntity, String itemId,",3a934b634c67330fda4b28d88f2dc865cff4356b,5,1
"public PersistenceResponse removeSubCollectionEntity(ClassMetadata mainMetadata, Property field, Entity parentEntity, String itemId,",3a934b634c67330fda4b28d88f2dc865cff4356b,5,0
"public Entity getRecord(PersistencePackageRequest request, String id, ClassMetadata cmd, boolean isCollectionRequest)",3a934b634c67330fda4b28d88f2dc865cff4356b,5,1
"public Entity addSubCollectionEntity(EntityForm entityForm, ClassMetadata mainMetadata, Property field,",3a934b634c67330fda4b28d88f2dc865cff4356b,5,1
"public Entity updateSubCollectionEntity(EntityForm entityForm, ClassMetadata mainMetadata, Property field,",3a934b634c67330fda4b28d88f2dc865cff4356b,5,1
"public void removeSubCollectionEntity(ClassMetadata mainMetadata, Property field, Entity parentEntity, String itemId,",3a934b634c67330fda4b28d88f2dc865cff4356b,5,1
} else if (containingTab != null && containingTab.getListGrids().size() == 0 && containingTab.getFields().size() == 0) {,3a934b634c67330fda4b28d88f2dc865cff4356b,5,0
"public PersistenceResponse getRecord(PersistencePackageRequest request, String id, ClassMetadata cmd, boolean isCollectionRequest)",3a934b634c67330fda4b28d88f2dc865cff4356b,4,0
"public PersistenceResponse addSubCollectionEntity(EntityForm entityForm, ClassMetadata mainMetadata, Property field,",3a934b634c67330fda4b28d88f2dc865cff4356b,4,0
"public PersistenceResponse updateSubCollectionEntity(EntityForm entityForm, ClassMetadata mainMetadata, Property field,",3a934b634c67330fda4b28d88f2dc865cff4356b,4,0
"public PersistenceResponse getRecord(PersistencePackageRequest request, String id, ClassMetadata cmd, boolean isCollectionRequest)",3a934b634c67330fda4b28d88f2dc865cff4356b,4,0
"public PersistenceResponse addSubCollectionEntity(EntityForm entityForm, ClassMetadata mainMetadata, Property field,",3a934b634c67330fda4b28d88f2dc865cff4356b,4,0
"public PersistenceResponse updateSubCollectionEntity(EntityForm entityForm, ClassMetadata mainMetadata, Property field,",3a934b634c67330fda4b28d88f2dc865cff4356b,4,0
"public void addListGrid(ListGrid listGrid, String tabName, Integer tabOrder, String groupName, Integer groupOrder) {",3a934b634c67330fda4b28d88f2dc865cff4356b,4,0
// Add new group for the field to be placed into,3a934b634c67330fda4b28d88f2dc865cff4356b,4,0
} else if (fieldGroup == null && tab != null) {,3a934b634c67330fda4b28d88f2dc865cff4356b,4,0
"public void addListGrid(ListGrid listGrid, String tabName, Integer tabOrder, String groupName, boolean isTabPresent) {",3a934b634c67330fda4b28d88f2dc865cff4356b,4,1
} else if (lgToRemove != null && containingGroup == null) {,3a934b634c67330fda4b28d88f2dc865cff4356b,4,0
if (containingGroup != null && containingGroup.getListGrids().size() == 0 && containingGroup.getFields().size() == 0) {,3a934b634c67330fda4b28d88f2dc865cff4356b,4,0
if (containingTab != null && containingTab.getListGrids().size() == 0 && containingTab.getFields().size() == 0) {,3a934b634c67330fda4b28d88f2dc865cff4356b,4,1
"public Entity getAdvancedCollectionRecord(ClassMetadata containingClassMetadata, Entity containingEntity,",3a934b634c67330fda4b28d88f2dc865cff4356b,3,1
ClassMetadata cmd = response.getDynamicResultSet().getClassMetaData();,3a934b634c67330fda4b28d88f2dc865cff4356b,3,0
Entity[] entities = response.getDynamicResultSet().getRecords();,3a934b634c67330fda4b28d88f2dc865cff4356b,3,0
ClassMetadata cmd = inspect(request).getClassMetaData();,3a934b634c67330fda4b28d88f2dc865cff4356b,3,1
Entity[] entities = fetch(request).getRecords();,3a934b634c67330fda4b28d88f2dc865cff4356b,3,1
"public Entity getAdvancedCollectionRecord(ClassMetadata containingClassMetadata, Entity containingEntity,",3a934b634c67330fda4b28d88f2dc865cff4356b,3,1
Entity[] entities = fetch(ppr).getRecords();,3a934b634c67330fda4b28d88f2dc865cff4356b,3,1
ClassMetadata cmd = getClassMetadata(ppr);,3a934b634c67330fda4b28d88f2dc865cff4356b,3,1
} else if (fieldGroup == null && tab != null){,3a934b634c67330fda4b28d88f2dc865cff4356b,3,0
public String addTabFromTabMetadata(TabMetadata tabMetadata) {,3a934b634c67330fda4b28d88f2dc865cff4356b,3,0
"public void addGroupFromGroupMetadata(GroupMetadata groupMetadata, String processedTabName) {",3a934b634c67330fda4b28d88f2dc865cff4356b,3,0
"public void addListGrid(ListGrid listGrid, String tabName, Integer tabOrder) {",3a934b634c67330fda4b28d88f2dc865cff4356b,3,1
} else if (fieldGroup == null && tab != null){,3a934b634c67330fda4b28d88f2dc865cff4356b,3,1
for (FieldGroup group : tab.getFieldGroups()) {,3a934b634c67330fda4b28d88f2dc865cff4356b,3,0
"public void addGroupFromGroupMetadata(GroupMetadata groupMetadata, String unprocessedTabName) {",3a934b634c67330fda4b28d88f2dc865cff4356b,3,0
public String processMessageString(String message) {,3a934b634c67330fda4b28d88f2dc865cff4356b,3,1
"public void addGroupFromGroupMetadata(GroupMetadata groupMetadata, String processedTabName) {",3a934b634c67330fda4b28d88f2dc865cff4356b,3,1
"public PersistenceResponse getAdvancedCollectionRecord(ClassMetadata containingClassMetadata, Entity containingEntity,",3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
"public PersistenceResponse getRecordsForCollection(ClassMetadata containingClassMetadata, Entity containingEntity,",3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
* @return the PersistenceResponse,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
public ClassMetadata getClassMetadata(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
"public Entity addEntity(EntityForm entityForm, String[] customCriteria)",3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
"public Entity updateEntity(EntityForm entityForm, String[] customCriteria)",3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
"public DynamicResultSet getRecordsForCollection(ClassMetadata containingClassMetadata, Entity containingEntity,",3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
* @return the DynamicResultSet,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
public PersistenceResponse getRecords(PersistencePackageRequest request) throws ServiceException {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
Entity dynamicFormEntity = update(ppr).getEntity();,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
"public PersistenceResponse getAdvancedCollectionRecord(ClassMetadata containingClassMetadata, Entity containingEntity,",3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
if (response == null) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
"public PersistenceResponse getRecordsForCollection(ClassMetadata containingClassMetadata, Entity containingEntity,",3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
"String sectionField = """";",3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
public ClassMetadata getClassMetadata(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
public DynamicResultSet getRecords(PersistencePackageRequest request) throws ServiceException {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
Entity entity = entities[0];,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
"public Entity addEntity(EntityForm entityForm, String[] customCriteria)",3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
"public Entity updateEntity(EntityForm entityForm, String[] customCriteria)",3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
Entity dynamicFormEntity = update(ppr);,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
Entity returnEntity = update(ppr);,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
Entity entity = null;,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
if (entity == null) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
"public DynamicResultSet getRecordsForCollection(ClassMetadata containingClassMetadata, Entity containingEntity,",3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
"public PersistencePackageRequest addSubRequest(String infoPropertyName, PersistencePackageRequest subRequest) {",3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
"public Map<String, PersistencePackageRequest> getSubRequests() {",3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
"public void setSubRequests(Map<String, PersistencePackageRequest> subRequests) {",3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
"public PersistencePackageRequest addSubRequest(String infoPropertyName, PersistencePackageRequest subRequest) {",3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
"public Map<String, PersistencePackageRequest> getSubRequests() {",3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
"public void setSubRequests(Map<String, PersistencePackageRequest> subRequests) {",3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
public Entity add(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
public Entity update(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
public static final Integer DEFAULT_COLUMN = 0;,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
FieldGroup fieldGroup = findGroup(groupName);,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
if (tab == null) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
fieldGroup = tab.findGroup(groupName);,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
if (fieldGroup == null) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
fieldGroup = new FieldGroup();,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
private FieldGroup findGroup(String groupName) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
FieldGroup fieldGroup = null;,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
for (Tab tab : tabs) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
"groupName = context.getMessageSource().getMessage(groupName, null, groupName, context.getJavaLocale());",3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
} else {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
if (context != null && context.getMessageSource() != null) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
if (tab == null) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
FieldGroup fieldGroup = tab.findGroup(groupName);,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
fieldGroup = new FieldGroup();,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
"// If group exists, this code will not run",3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
fieldGroup = new FieldGroup();,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
for (String tabKey : tabMetadataMap.keySet()) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
for (String groupKey : groupMetadataMap.keySet()) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
groupName = groupMetadataMap.get(groupKey).getGroupName();,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
fieldGroup = tab.findGroup(groupName);,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
if (fieldGroup == null) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
fieldGroup = new FieldGroup();,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
if (tab.getUnprocessedTitle() != null && tab.getUnprocessedTitle().equals(tabTitle)) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
public void removeGroup(FieldGroup group) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
for (Tab tab : getTabs()) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
for (ListGrid lg : group.getListGrids()) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
if (lgToRemove != null && containingGroup != null) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
FieldGroup fieldGroup = tab.findGroupByUnprocessedTitle(groupName);,3a934b634c67330fda4b28d88f2dc865cff4356b,2,0
if (tab.getTitle() != null && tab.getTitle().equals(tabTitle)) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
if (context != null && context.getMessageSource() != null) {,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
// When displayed on the form the duplicate groups and tabs look funny,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
groupName = processMessageString(groupName);,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
FieldGroup fieldGroup = null;,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
fieldGroup = tab.findGroup(groupName);,3a934b634c67330fda4b28d88f2dc865cff4356b,2,1
import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceResponse;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
public PersistenceResponse getClassMetadata(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
public PersistenceResponse getRecords(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
"public PersistenceResponse addEntity(EntityForm entityForm, String[] customCriteria)",3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
"public PersistenceResponse updateEntity(EntityForm entityForm, String[] customCriteria)",3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
"public PersistenceResponse removeEntity(EntityForm entityForm, String[] customCriteria)",3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
public DynamicResultSet getRecords(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
"public void removeEntity(EntityForm entityForm, String[] customCriteria)",3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceResponse;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import javax.annotation.Resource;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import javax.persistence.NoResultException;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
public PersistenceResponse getClassMetadata(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
PersistenceResponse response = inspect(request);,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
return response;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
PersistenceResponse response = fetch(request);,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
"public PersistenceResponse addEntity(EntityForm entityForm, String[] customCriteria)",3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
"public PersistenceResponse updateEntity(EntityForm entityForm, String[] customCriteria)",3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
PersistenceResponse response = update(ppr);,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
"public PersistenceResponse removeEntity(EntityForm entityForm, String[] customCriteria)",3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
return remove(ppr);,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
response = fetch(ppr);,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
PersistenceResponse response = getClassMetadata(ppr);,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
"PersistenceResponse response2 = getRecordsForCollection(cmd, containingEntity, p, null, null, null);",3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
"if (sectionField.contains(""."")) {",3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
"sectionField = sectionField.substring(0, sectionField.lastIndexOf("".""));",3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
},3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
return service.remove(pkg);,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import javax.annotation.Resource;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import javax.persistence.NoResultException;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
return cmd;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
return entity;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
return returnEntity;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
"public void removeEntity(EntityForm entityForm, String[] customCriteria)",3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
entity = entities[0];,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
entity = e;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
"DynamicResultSet drs = getRecordsForCollection(cmd, containingEntity, p, null, null, null);",3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
protected Entity add(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
protected Entity update(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
},3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import java.util.ArrayList;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import java.util.Arrays;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import java.util.LinkedHashMap;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import java.util.List;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import java.util.Map;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
"protected Map<String, PersistencePackageRequest> subRequests = new LinkedHashMap<String, PersistencePackageRequest>();",3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
return this;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
},3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
return subRequests;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
this.subRequests = subRequests;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import java.util.ArrayList;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import java.util.Arrays;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import java.util.List;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import java.util.ArrayList;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import java.util.Arrays;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import java.util.LinkedHashMap;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import java.util.List;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import java.util.Map;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
"protected Map<String, PersistencePackageRequest> subRequests = new LinkedHashMap<String, PersistencePackageRequest>();",3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
return this;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
},3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
return subRequests;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
this.subRequests = subRequests;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import java.util.ArrayList;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import java.util.Arrays;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import java.util.List;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
this.additionalForeignKeys = Arrays.asList(additionalForeignKeys);,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
this.customCriteria = Arrays.asList(customCriteria);,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
this.additionalForeignKeys = Arrays.asList(additionalForeignKeys);,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
this.customCriteria = Arrays.asList(customCriteria);,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import java.util.ArrayList;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import java.util.Arrays;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import java.util.HashMap;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import java.util.List;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import java.util.ListIterator;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import java.util.Map;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import java.util.Map.Entry;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import javax.annotation.Resource;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import javax.persistence.EntityManager;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import javax.persistence.NoResultException;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import javax.persistence.PersistenceContext;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
public DynamicResultSet inspect(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
public void remove(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
public DynamicResultSet fetch(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import java.util.ArrayList;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import java.util.Arrays;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import java.util.HashMap;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import java.util.List;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import java.util.ListIterator;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import java.util.Map;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import java.util.Map.Entry;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import javax.annotation.Resource;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import javax.persistence.EntityManager;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import javax.persistence.NoResultException;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import javax.persistence.PersistenceContext;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
protected Entity add(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
protected Entity update(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import org.apache.commons.lang3.ArrayUtils;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
&& p.getMetadata() instanceof CollectionMetadata) {,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
if (p.getMetadata() instanceof CollectionMetadata) {,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import org.broadleafcommerce.openadmin.dto.GroupMetadata;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import org.broadleafcommerce.openadmin.dto.TabMetadata;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
Tab tab = findTab(tabName);,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
tab = new Tab();,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
},3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
if (fieldGroup != null) {,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
break;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
return fieldGroup;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
Tab newTab = new Tab();,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
return newTab.getTitle();,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
FieldGroup newGroup = new FieldGroup();,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
Tab tab = findTab(processedTabName);,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
if (groupMetadata.getColumn() != DEFAULT_COLUMN) {,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
Tab tab = findTab(tabName);,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
tab = new Tab();,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
},3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import org.broadleafcommerce.openadmin.dto.ClassMetadata;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
// Check CMD for Tab/Group name overrides so that Tabs/Groups can be properly found by their display names,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
"Map<String, TabMetadata> tabMetadataMap = cmd.getTabAndGroupMetadata();",3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
if (tabKey.equals(tabName)) {,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
tabName = tabMetadataMap.get(tabKey).getTabName();,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
},3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
"Map<String, GroupMetadata> groupMetadataMap = tabMetadataMap.get(tabKey).getGroupMetadata();",3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
if (groupKey.equals(groupName)) {,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
break;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import org.broadleafcommerce.common.audit.Auditable;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
},3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
import org.broadleafcommerce.common.util.BLCMessageUtils;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
},3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
|| tabName.equals(currentTab.getProcessedTitle())) {,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
FieldGroup containingGroup = null;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
{,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
if (subCollectionFieldName.equals(lg.getSubCollectionFieldName())) {,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
lgToRemove = lg;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
containingTab = tab;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
containingGroup = group;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
break findLg;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
return fieldGroup;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
return null;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
return newTab.getUnprocessedTitle();,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
Tab tab = findTab(unprocessedTabName);,3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
import org.broadleafcommerce.common.web.BroadleafRequestContext;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
if (tabName.equals(currentTab.getTitle())) {,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
findLg: {,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
if (lgToRemove != null) {,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
"return context.getMessageSource().getMessage(message, null, message, context.getJavaLocale());",3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
},3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
return message;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
"// Tabs and groups should be looked up by their display, translated name since 2 unique strings can display the same",3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
tabName = processMessageString(tabName);,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
break;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
return fieldGroup;,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
return newTab.getTitle();,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
Tab tab = findTab(processedTabName);,3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
"String parentId, boolean isViewCollectionItem, List<SectionCrumb> sectionCrumbs, boolean isAdd)",3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
"return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef, sectionCrumbs, isAdd);",3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
"String parentId, boolean isViewCollectionItem, EntityForm ef, List<SectionCrumb> sectionCrumbs, boolean isAdd)",3a934b634c67330fda4b28d88f2dc865cff4356b,1,0
"String parentId, boolean isViewCollectionItem)",3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
"return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef);",3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
"String parentId, boolean isViewCollectionItem, EntityForm ef)",3a934b634c67330fda4b28d88f2dc865cff4356b,1,1
PersistenceResponse response;,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
response.setEntity(e);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
"map.put(p.getName(), response2.getDynamicResultSet());",3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
ppr.setSectionEntityClassname(mainMetadata.getCeilingType());,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
"ppr.setSectionEntityIdValue(getContextSpecificRelationshipId(mainMetadata, parentEntity, """"));",3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
ppr.setSectionEntityField(sectionField);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
protected PersistenceResponse add(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
protected PersistenceResponse update(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
protected PersistenceResponse inspect(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
protected PersistenceResponse remove(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
protected PersistenceResponse fetch(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
remove(ppr);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
"map.put(p.getName(), drs);",3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
protected DynamicResultSet inspect(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
protected void remove(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
service.remove(pkg);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
protected DynamicResultSet fetch(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
"subRequests.put(infoPropertyName, subRequest);",3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
"subRequests.put(infoPropertyName, subRequest);",3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
request.setCustomCriteria(fmd.getCustomCriteria());,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
this.additionalForeignKeys.addAll(Arrays.asList(additionalForeignKeys));,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
this.customCriteria.addAll(Arrays.asList(customCriteria));,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
request.setCustomCriteria(fmd.getCustomCriteria());,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
this.additionalForeignKeys.addAll(Arrays.asList(additionalForeignKeys));,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
this.customCriteria.addAll(Arrays.asList(customCriteria));,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
@Override,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
protected DynamicResultSet inspect(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
protected void remove(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
protected DynamicResultSet fetch(PersistencePackageRequest request),3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
"if (ArrayUtils.contains(p.getMetadata().getAvailableToTypes(), containingEntity.getType()[0])",3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
tab.setTitle(tabName);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
tab.setOrder(tabOrder);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
tabs.add(tab);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
fieldGroup.setTitle(groupName);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
fieldGroup.setOrder(groupOrder);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
tab.getFieldGroups().add(fieldGroup);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
fieldGroup.getListGrids().add(listGrid);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
tab.getListGrids().add(listGrid);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
newTab.setTitle(tabMetadata.getTabName());,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
newTab.setOrder(tabMetadata.getTabOrder());,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
"newTab.setTitle(context.getMessageSource().getMessage(tabMetadata.getTabName(), null, tabMetadata.getTabName(), context.getJavaLocale()));",3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
tabs.add(newTab);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
newGroup.setTitle(groupMetadata.getGroupName());,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
newGroup.setOrder(groupMetadata.getGroupOrder());,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
newGroup.setColumn(groupMetadata.getColumn());,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
newGroup.setIsBorderless(groupMetadata.getBorderless());,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
newGroup.setToolTip(groupMetadata.getTooltip());,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
newGroup.setCollapsed(groupMetadata.getCollapsed());,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
"newGroup.setTitle(context.getMessageSource().getMessage(groupMetadata.getGroupName(), null, groupMetadata.getGroupName(), context.getJavaLocale()));",3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
"newGroup.setToolTip(context.getMessageSource().getMessage(groupMetadata.getTooltip(), null, groupMetadata.getTooltip(), context.getJavaLocale()));",3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
tab.setIsMultiColumn(true);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
tab.getFieldGroups().add(newGroup);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
tab.setTitle(tabName);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
tab.setOrder(tabOrder);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
tabs.add(tab);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
fieldGroup.setTitle(groupName);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
fieldGroup.setOrder(groupOrder);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
tab.getFieldGroups().add(fieldGroup);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
tab.getListGrids().add(listGrid);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
fieldGroup.setTitle(groupName);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
fieldGroup.setOrder(groupOrder);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
tab.getFieldGroups().add(fieldGroup);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
// Tabs/Groups should be looked up and referenced by their display name,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
fieldGroup.setTitle(groupName);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
fieldGroup.setOrder(groupOrder);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
tab.getFieldGroups().add(fieldGroup);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
// Tabs should be looked up and referenced by their display name,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
".append(o1.getProcessedTitle(), o2.getProcessedTitle())",3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
tab.removeFieldGroup(group);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
if (tabName.equals(currentTab.getUnprocessedTitle()),3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
findLg:,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
containingGroup.removeListGrid(lgToRemove);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
removeGroup(containingGroup);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
tab.setUnprocessedTitle(tabName);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
tab.setProcessedTitle(BLCMessageUtils.getMessage(tabName));,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
fieldGroup.setUnprocessedTitle(groupName);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
fieldGroup.setProcessedTitle(BLCMessageUtils.getMessage(groupName));,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
newTab.setUnprocessedTitle(tabMetadata.getTabName());,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
newTab.setProcessedTitle(BLCMessageUtils.getMessage(tabMetadata.getTabName()));,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
newGroup.setUnprocessedTitle(groupMetadata.getGroupName());,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
newGroup.setProcessedTitle(BLCMessageUtils.getMessage(groupMetadata.getGroupName()));,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
newGroup.setToolTip(groupMetadata.getTooltip());,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
".append(o1.getTitle(), o2.getTitle())",3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
// thing when they are looked up in message bundles after display,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
tab.setTitle(tabName);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
fieldGroup.setTitle(groupName);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
// Tabs/Groups should be looked up and referenced by their display name,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
newTab.setTitle(tabMetadata.getTabName());,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
newTab.setTitle(processMessageString(tabMetadata.getTabName()));,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
newGroup.setTitle(groupMetadata.getGroupName());,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
newGroup.setTitle(processMessageString(groupMetadata.getGroupName()));,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
newGroup.setToolTip(processMessageString(groupMetadata.getTooltip()));,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
.withAdornedList(adornedList),3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
.withSectionCrumbs(sectionCrumbs);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
request.setAddOperationInspect(isAdd);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,0
.withAdornedList(adornedList);,3a934b634c67330fda4b28d88f2dc865cff4356b,0,1
"// We need to make sure that this item is either a parent, child, or the same as the qualifier root",8352a0815cde294e891c3b46a0c12366e71d2352,8,0
* Return false if a totalitarian offer has already been applied and this order already has,8352a0815cde294e891c3b46a0c12366e71d2352,8,1
"// We need to make sure that this item is either a parent, child, or the same as the qualifier root",8352a0815cde294e891c3b46a0c12366e71d2352,8,1
// We want to find the root of the related qualifier so we can appropriately walk the tree later,8352a0815cde294e891c3b46a0c12366e71d2352,7,0
"// We have found a qualifier that meets this offer criteria. First, we'll save some state that we",8352a0815cde294e891c3b46a0c12366e71d2352,7,0
"// We continue because this could be the first offer and marked as totalitarian, but not as good as an",8352a0815cde294e891c3b46a0c12366e71d2352,7,0
// item offer. There could be other order offers that are not totalitarian that also qualify.,8352a0815cde294e891c3b46a0c12366e71d2352,7,0
"// We have found a qualifier that meets this offer criteria. First, we'll save some state that we",8352a0815cde294e891c3b46a0c12366e71d2352,7,1
// We found a target. Let's save this related order item used as the qualifier in case,8352a0815cde294e891c3b46a0c12366e71d2352,7,1
"// We continue because this could be the first offer and marked as totalitarian, but not as good as an",8352a0815cde294e891c3b46a0c12366e71d2352,7,0
// item offer. There could be other order offers that are not totalitarian that also qualify.,8352a0815cde294e891c3b46a0c12366e71d2352,7,0
"LOG.trace(""Non-Combinable Order Offer Applied with id=["" + orderOffer.getOffer().getId() + ""].  No other order offers can be applied"");",8352a0815cde294e891c3b46a0c12366e71d2352,7,0
"// We continue because this could be the first offer and marked as totalitarian, but not as good as an",8352a0815cde294e891c3b46a0c12366e71d2352,7,1
// item offer. There could be other order offers that are not totalitarian that also qualify.,8352a0815cde294e891c3b46a0c12366e71d2352,7,1
"LOG.trace(""Non-Combinable Order Offer Applied with id=["" + orderOffer.getOffer().getId() +""].  No other order offers can be applied"");",8352a0815cde294e891c3b46a0c12366e71d2352,7,1
"* If either adjustment is greater than the item value, it will be set to the",8352a0815cde294e891c3b46a0c12366e71d2352,7,1
"PromotableOrder promotableOrder = new PromotableOrderImpl(order, new PromotableItemFactoryImpl(promotableOfferUtility), false);",8352a0815cde294e891c3b46a0c12366e71d2352,7,0
"PromotableOrder promotableOrder = new PromotableOrderImpl(order, new PromotableItemFactoryImpl(), false);",8352a0815cde294e891c3b46a0c12366e71d2352,7,1
"// Now, we need to see if there exists a target(s) that is suitable for this qualifier due to",8352a0815cde294e891c3b46a0c12366e71d2352,6,0
"* If two promotions have the same priority, the one with the highest potential savings",8352a0815cde294e891c3b46a0c12366e71d2352,6,1
* will be used as the tie-breaker to determine the order to apply promotions.,8352a0815cde294e891c3b46a0c12366e71d2352,6,1
"// If the extensionHandler added a savings element to the map, then return it",8352a0815cde294e891c3b46a0c12366e71d2352,6,0
"// If the extensionHandler added a quantity element to the map, then return it",8352a0815cde294e891c3b46a0c12366e71d2352,6,0
// We've decided to apply this adjustment but if it doesn't actually reduce,8352a0815cde294e891c3b46a0c12366e71d2352,6,1
// A nonCombinable offer has been applied or this is a non-combinable offer,8352a0815cde294e891c3b46a0c12366e71d2352,6,1
"// Now, we need to see if there exists a target(s) that is suitable for this qualifier due to",8352a0815cde294e891c3b46a0c12366e71d2352,6,1
* @param applyToSalePrice - whether or not the Comparator should use the sale price for comparison,8352a0815cde294e891c3b46a0c12366e71d2352,6,1
* sorting for which target items the promotion should be attempted to be applied to first. Default behavior is to,8352a0815cde294e891c3b46a0c12366e71d2352,6,1
* items can be paired with lower-valued items. This also ensures that you will <b>not</b> have the scenario where 2,8352a0815cde294e891c3b46a0c12366e71d2352,6,1
// Remove nonCombinable offers that aren't the first offer,8352a0815cde294e891c3b46a0c12366e71d2352,6,1
* Calculates the value of the adjustment for both retail and sale prices.,8352a0815cde294e891c3b46a0c12366e71d2352,6,1
// Go ahead and mark this item as a qualifier,8352a0815cde294e891c3b46a0c12366e71d2352,5,0
"// If we didn't find a target, we need to roll back how we marked this item as a qualifier.",8352a0815cde294e891c3b46a0c12366e71d2352,5,0
* This method determines how much the customer might save using this promotion for the,8352a0815cde294e891c3b46a0c12366e71d2352,5,1
* This method makes a good approximation of the promotion value as determining the exact value,8352a0815cde294e891c3b46a0c12366e71d2352,5,1
* Returns true if the core processing should still be performed for the passed in offer.,8352a0815cde294e891c3b46a0c12366e71d2352,5,0
* @param orderOffer a CandidateOrderOffer to apply to an Order,8352a0815cde294e891c3b46a0c12366e71d2352,5,1
* The adjustment might not be better than the sale price.,8352a0815cde294e891c3b46a0c12366e71d2352,5,1
// A totalitarian offer has already been applied or this offer is totalitarian,8352a0815cde294e891c3b46a0c12366e71d2352,5,1
// Go ahead and mark this item as a qualifier,8352a0815cde294e891c3b46a0c12366e71d2352,5,1
"// the relationship flag. If we are on the last qualifier required for this offer, we want to",8352a0815cde294e891c3b46a0c12366e71d2352,5,1
"// actually go ahead and mark the target that we'll be using. Otherwise, we just want to check",8352a0815cde294e891c3b46a0c12366e71d2352,5,1
"// If we didn't find a target, we need to roll back how we marked this item as a qualifier.",8352a0815cde294e891c3b46a0c12366e71d2352,5,1
* sorting for which qualifier items should be attempted to be used first for a promotion. Default behavior,8352a0815cde294e891c3b46a0c12366e71d2352,5,1
"* sort descending, so higher-value items get the promotion over lesser-valued items.",8352a0815cde294e891c3b46a0c12366e71d2352,5,1
* in descending order.  This means that higher-valued items can be paired with higher-valued items and lower-valued,8352a0815cde294e891c3b46a0c12366e71d2352,5,1
* lower-valued items can be used to qualify a higher-valued target.,8352a0815cde294e891c3b46a0c12366e71d2352,5,1
* Gets rid of totalitarian and nonCombinable item offers that can't possibly be applied.,8352a0815cde294e891c3b46a0c12366e71d2352,5,1
// Remove Totalitarian offers that aren't the first offer.,8352a0815cde294e891c3b46a0c12366e71d2352,5,1
"LOG.trace(""Totalitarian Order Offer Applied.   Comparing order and item offers for best outcome."");",8352a0815cde294e891c3b46a0c12366e71d2352,5,0
"LOG.trace(""Totalitarian Order Offer Applied.   Comparing order and item offers for best outcome."");",8352a0815cde294e891c3b46a0c12366e71d2352,5,1
"* When the {@link Offer#getRequiresRelatedTargetAndQualifiers()} flag is set to true, we must make sure that we",8352a0815cde294e891c3b46a0c12366e71d2352,4,0
// Calculate the number of qualifiers needed that will not receive the promotion.,8352a0815cde294e891c3b46a0c12366e71d2352,4,0
* purpose of sorting promotions with the same priority. The assumption is that any possible,8352a0815cde294e891c3b46a0c12366e71d2352,4,1
Money savings = new Money(0D);,8352a0815cde294e891c3b46a0c12366e71d2352,4,1
// TODO:  BCP - Transferred the original logic but it looks like there is a bug here,8352a0815cde294e891c3b46a0c12366e71d2352,4,1
//        when a targetItemCriteria has a quantity > 1.,8352a0815cde294e891c3b46a0c12366e71d2352,4,1
// the value of the item,8352a0815cde294e891c3b46a0c12366e71d2352,4,1
} else if (!adjustment.isCombinable() || !itemOffer.getOffer().isCombinableWithOtherOffers()) {,8352a0815cde294e891c3b46a0c12366e71d2352,4,1
// Calculate the number of qualifiers needed that will not receive the promotion.,8352a0815cde294e891c3b46a0c12366e71d2352,4,1
"* is to sort descending, so higher-value items are attempted to be qualified first.",8352a0815cde294e891c3b46a0c12366e71d2352,4,1
"public Money calculateSavingsForOrderItem(PromotableOrderItem orderItem, int qtyToReceiveSavings) {",8352a0815cde294e891c3b46a0c12366e71d2352,4,1
Money savings = new Money(promotableOrder.getOrderCurrency());,8352a0815cde294e891c3b46a0c12366e71d2352,4,1
* currentItemValue (e.g. no adjustment can cause a negative value).,8352a0815cde294e891c3b46a0c12366e71d2352,4,1
"* identify qualifiers and targets together, as they must be related to each other based on the",8352a0815cde294e891c3b46a0c12366e71d2352,3,0
* @param order,8352a0815cde294e891c3b46a0c12366e71d2352,3,0
* @return whether or not a suitable qualifier/target pair was found and marked,8352a0815cde294e891c3b46a0c12366e71d2352,3,0
// These will be reserved first before the target is assigned.,8352a0815cde294e891c3b46a0c12366e71d2352,3,0
if (pq.getQuantity() == qtyToMarkAsQualifier) {,8352a0815cde294e891c3b46a0c12366e71d2352,3,0
if (qualifierQtyNeeded == 0) {,8352a0815cde294e891c3b46a0c12366e71d2352,3,0
if (orderOffer.isTotalitarian() || promotableOrder.isTotalitarianItemOfferApplied()) {,8352a0815cde294e891c3b46a0c12366e71d2352,3,0
"public void setCandidateTargetsMap(HashMap<OfferItemCriteria, List<PromotableOrderItem>> candidateItemsMap) {",8352a0815cde294e891c3b46a0c12366e71d2352,3,0
public void setLegacyCandidateTargets(List<PromotableOrderItem> candidateTargets) {,8352a0815cde294e891c3b46a0c12366e71d2352,3,0
* a calculation based on the qualifiers here strictly for rough comparative purposes.,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
* would require all permutations of promotions to be run resulting in a costly,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
public Money calculatePotentialSavings() {,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
public void setCandidateTargets(List<PromotableOrderItem> candidateTargets) {,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
* @param item,8352a0815cde294e891c3b46a0c12366e71d2352,3,0
* @param quantity,8352a0815cde294e891c3b46a0c12366e71d2352,3,0
* Private method used by applyAdjustments to create an OrderItemAdjustment from a CandidateOrderOffer,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
* and associates the OrderItemAdjustment to the OrderItem.,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
if (itemOffer.getOffer().isTotalitarianOffer() || !itemOffer.getOffer().isCombinableWithOtherOffers()) {,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
"Money savings = itemOffer.calculateSavingsForOrderItem(detail.getPromotableOrderItem(), 1);",8352a0815cde294e891c3b46a0c12366e71d2352,3,1
if (adjustment.isTotalitarian() || itemOffer.getOffer().isTotalitarianOffer()) {,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
} else if (itemOffer.isLegacyOffer()) {,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
// These will be reserved first before the target is assigned.,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
if (qualifierQtyNeeded == 0) {,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
if (promotion.isUnlimitedUsePerOrder() || (itemOffer.getUses() < promotion.getMaxUsesPerOrder())) {,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
if (targetQtyNeeded == 0) {,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
// that there is an eligible target(s) and continue on.,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
if (pq.getQuantity() == qtyToMarkAsQualifier) {,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
return new Comparator<PromotableOrderItemPriceDetail>() {,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
"public int compare(PromotableOrderItemPriceDetail o1, PromotableOrderItemPriceDetail o2) {",8352a0815cde294e891c3b46a0c12366e71d2352,3,1
"* Note: By default, both the {@link #getQualifierItemComparator(boolean)} and this target comparator are sorted",8352a0815cde294e891c3b46a0c12366e71d2352,3,1
if (orderOffer.isTotalitarian() || promotableOrder.isTotalitarianItemOfferApplied()) {,8352a0815cde294e891c3b46a0c12366e71d2352,3,0
if (orderOffer.isTotalitarian() || promotableOrder.isTotalitarianItemOfferApplied()) {,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
"public void setCandidateFixedTargetsMap(HashMap<OfferPriceData, List<PromotableOrderItem>> candidateFixedTargetsMap) {",8352a0815cde294e891c3b46a0c12366e71d2352,3,0
if (currentPriceDetailSalesValue == null) {,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
if (offer.getApplyDiscountToSalePrice() == true) {,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
public PromotableOrder createBasicPromotableOrder(PromotableOfferUtility promotableOfferUtility) {,8352a0815cde294e891c3b46a0c12366e71d2352,3,0
public PromotableOrder createBasicPromotableOrder() {,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
Order order = dataProvider.createBasicPromotableOrder(promotableOfferUtility).getOrder();,8352a0815cde294e891c3b46a0c12366e71d2352,3,0
Order order = dataProvider.createBasicPromotableOrder().getOrder();,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
PromotableOrder order = dataProvider.createBasicPromotableOrder(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,3,0
PromotableOrder promotableOrder = dataProvider.createBasicPromotableOrder(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,3,0
PromotableOrder order = dataProvider.createBasicPromotableOrder();,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
PromotableOrder promotableOrder = dataProvider.createBasicPromotableOrder();,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
PromotableOrder order = dataProvider.createBasicPromotableOrder(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,3,0
PromotableOrder promotableOrder = dataProvider.createBasicPromotableOrder(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,3,0
PromotableOrder order = dataProvider.createBasicPromotableOrder();,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
PromotableOrder promotableOrder = dataProvider.createBasicPromotableOrder();,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
PromotableOrder order = dataProvider.createBasicPromotableOrder(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,3,0
PromotableOrder order = dataProvider.createBasicPromotableOrder();,8352a0815cde294e891c3b46a0c12366e71d2352,3,1
"protected boolean markTargets(PromotableCandidateItemOffer itemOffer, PromotableOrder order, OrderItem relatedQualifier) {",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
if (relatedQualifier != null) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
* @param itemOffer,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"protected boolean markRelatedQualifiersAndTargets(PromotableCandidateItemOffer itemOffer, PromotableOrder order) {",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
int qualifierQtyNeeded = itemCriteria.getQuantity();,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
if (qualifierQtyNeeded > 0) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
int itemQtyAvailableToBeUsedAsQualifier = detail.getQuantityAvailableToBeUsedAsQualifier(itemOffer);,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
if (itemQtyAvailableToBeUsedAsQualifier > 0) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
// might need in the future.,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
if (possibleQualifier.getPromotion().equals(itemOffer.getOffer())) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"int qtyToMarkAsQualifier = Math.min(qualifierQtyNeeded, itemQtyAvailableToBeUsedAsQualifier);",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
// the relationship flag.,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"if (!markTargets(itemOffer, order, oi)) {",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
} else {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
if (qualifierQtyNeeded != 0) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
if (itemOffer.getOffer().getRequiresRelatedTargetAndQualifiers()) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"boolean qualifiersAndTargetsFound = markRelatedQualifiersAndTargets(itemOffer, order);",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"qualifiersFound = markQualifiers(itemOffer, order);",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"protected boolean markTargets(PromotableCandidateItemOffer itemOffer, PromotableOrder order) {",8352a0815cde294e891c3b46a0c12366e71d2352,2,1
"boolean qualifiersFound = markQualifiers(itemOffer, order);",8352a0815cde294e891c3b46a0c12366e71d2352,2,1
"boolean targetsFound = markTargets(itemOffer, order);",8352a0815cde294e891c3b46a0c12366e71d2352,2,1
if (orderOffer.isTotalitarian()) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
protected List<PromotableOrderItem> legacyCandidateTargets = new ArrayList<PromotableOrderItem>();,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"public HashMap<OfferItemCriteria, List<PromotableOrderItem>> getCandidateTargetsMap() {",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
public List<PromotableOrderItem> getLegacyCandidateTargets() {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"protected HashMap<OfferItemCriteria, List<PromotableOrderItem>> candidateQualifiersMap = new HashMap<OfferItemCriteria, List<PromotableOrderItem>>();",8352a0815cde294e891c3b46a0c12366e71d2352,2,1
protected List<PromotableOrderItem> candidateTargets = new ArrayList<PromotableOrderItem>();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
* target specified for BOGO style offers are of equal or lesser value. We are using,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
* @return,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
int maxUses = calculateMaximumNumberOfUses();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
int appliedCount = 0;,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
"int qtyToReceiveSavings = Math.min(chgItem.getQuantity(), maxUses);",8352a0815cde294e891c3b46a0c12366e71d2352,2,1
"savings = savings.add(calculateSavingsForOrderItem(chgItem, qtyToReceiveSavings));",8352a0815cde294e891c3b46a0c12366e71d2352,2,1
if (appliedCount >= maxUses) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
public List<PromotableOrderItem> getCandidateTargets() {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
"public class ItemOfferProcessorImpl extends OrderOfferProcessorImpl implements ItemOfferProcessor, ItemOfferMarkTargets {",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"Map<String, Object> contextMap = new HashMap<String, Object>();",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
if (extensionManager != null) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
if (contextMap.get(OfferServiceExtensionManager.STOP_PROCESSING) != null) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
// Returning false,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"if (applyItemOfferExtension(order, itemOffer)) {",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"if (offerServiceUtilities.itemOfferCanBeApplied(itemOffer, order.getAllPromotableOrderItemPriceDetails())) {",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
if (itemOffer.isLegacyOffer()) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
} else {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"int qualifierQtyNeeded = offerServiceUtilities.markQualifiersForCriteria(itemOffer, itemCriteria, priceDetails);",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"public boolean markTargets(PromotableCandidateItemOffer itemOffer, PromotableOrder order, OrderItem relatedQualifier,",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"targetQtyNeeded = offerServiceUtilities.markTargetsForCriteria(itemOffer, relatedQualifier, checkOnly, promotion, relatedQualifierRoot, itemCriteria, priceDetails, targetQtyNeeded);",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
OrderItemHolder orderItemHolder = new OrderItemHolder(null);,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"int qualifierQtyNeeded = offerServiceUtilities.markRelatedQualifiersAndTargetsForItemCriteria(itemOffer, order,",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"return markTargets(itemOffer, order, orderItemHolder.getOrderItem(), false);",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
* Provide an opportunity to for modules to override the potentialSavingsCalculation,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
* @param itemOffer,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
* @return,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"PromotableOrderItem item, int quantity) {",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"Map<String,Object> contextMap = new HashMap<String,Object>();",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
if (o != null && o instanceof Money) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
if (o != null && o instanceof Integer) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
quantity = ((Integer) o).intValue();,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"Money itemSavings = calculatePotentialSavingsForOrderItem(itemOffer, item, discount.getQuantity());",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
protected void restPriceDetails(PromotableOrderItem item) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
import java.util.Comparator;,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
public class ItemOfferProcessorImpl extends OrderOfferProcessorImpl implements ItemOfferProcessor {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
"protected void applyOrderItemAdjustment(PromotableCandidateItemOffer itemOffer, PromotableOrderItemPriceDetail itemPriceDetail) {",8352a0815cde294e891c3b46a0c12366e71d2352,2,1
for (PromotionDiscount discount : itemPriceDetail.getPromotionDiscounts()) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
if (discount.getPromotion().equals(itemOffer.getOffer())) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
"if (adjustmentIsNotGoodEnoughToBeApplied(itemOffer, itemPriceDetail)) {",8352a0815cde294e891c3b46a0c12366e71d2352,2,1
* @param itemOffer,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
* @param detail,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
* @return,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
if (!itemOffer.getOffer().getApplyDiscountToSalePrice()) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
Money salePrice = detail.getPromotableOrderItem().getSalePriceBeforeAdjustments();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
Money retailPrice = detail.getPromotableOrderItem().getRetailPriceBeforeAdjustments();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
if (salePrice != null) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
if (salePrice.lessThan(retailPrice.subtract(savings))) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
* item adjustments.,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
for (PromotableOrderItemPriceDetailAdjustment adjustment : detail.getCandidateItemAdjustments()) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
// and another offer was already applied.,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
"if (itemOfferCanBeApplied(order, itemOffer)) {",8352a0815cde294e891c3b46a0c12366e71d2352,2,1
if (itemOffer.isLegacyOffer()) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
} else {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
int qualifierQtyNeeded = itemCriteria.getQuantity();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
// Mark Qualifiers,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
if (qualifierQtyNeeded > 0) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
int itemQtyAvailableToBeUsedAsQualifier = detail.getQuantityAvailableToBeUsedAsQualifier(itemOffer);,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
if (itemQtyAvailableToBeUsedAsQualifier > 0) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
"int qtyToMarkAsQualifier = Math.min(qualifierQtyNeeded, itemQtyAvailableToBeUsedAsQualifier);",8352a0815cde294e891c3b46a0c12366e71d2352,2,1
if (relatedQualifier != null) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
int itemQtyAvailableToBeUsedAsTarget = priceDetail.getQuantityAvailableToBeUsedAsTarget(itemOffer);,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
if (itemQtyAvailableToBeUsedAsTarget > 0) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
"int qtyToMarkAsTarget = Math.min(targetQtyNeeded, itemQtyAvailableToBeUsedAsTarget);",8352a0815cde294e891c3b46a0c12366e71d2352,2,1
if (!checkOnly) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
// might need in the future.,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
if (possibleQualifier.getPromotion().equals(itemOffer.getOffer())) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
"if (markTargets(itemOffer, order, oi, true)) {",8352a0815cde294e891c3b46a0c12366e71d2352,2,1
"return markTargets(itemOffer, order, relatedOrderItem, false);",8352a0815cde294e891c3b46a0c12366e71d2352,2,1
"* Used in {@link #applyItemQualifiersAndTargets(PromotableCandidateItemOffer, PromotableOrder)} allow for customized",8352a0815cde294e891c3b46a0c12366e71d2352,2,1
Money price = o1.getPromotableOrderItem().getPriceBeforeAdjustments(applyToSalePrice);,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
Money price2 = o2.getPromotableOrderItem().getPriceBeforeAdjustments(applyToSalePrice);,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
* @param qualifiedItemOffers,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
private void removeTrailingNonCombinableOrTotalitarianOffers(List<PromotableCandidateItemOffer> qualifiedItemOffers) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
if (offerIterator.hasNext()) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
// ignore the first one.,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
if (itemOffer.getOffer().isTotalitarianOffer()) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
if (!itemOffer.isLegacyOffer() && !itemOffer.getOffer().isCombinableWithOtherOffers()) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
"if (orderMeetsQualifyingSubtotalRequirements(promotableOrder, orderOffer) && orderMeetsSubtotalRequirements(promotableOrder, orderOffer)) {",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
if (LOG.isTraceEnabled()) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
if (!orderOffer.isCombinable()) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
if (LOG.isTraceEnabled()) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
if (!orderOffer.isCombinable()) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
"protected HashMap<OfferPriceData, List<PromotableOrderItem>> candidateFixedTargetsMap = new HashMap<>();",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"public HashMap<OfferPriceData, List<PromotableOrderItem>> getCandidateFixedTargetsMap() {",8352a0815cde294e891c3b46a0c12366e71d2352,2,0
"savings = PromotableOfferUtility.computeAdjustmentValue(originalPrice, offerUnitValue, this, this);",8352a0815cde294e891c3b46a0c12366e71d2352,2,1
Money saleAdjustmentValue) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
protected void computeAdjustmentValues() {,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
saleAdjustmentValue = new Money(getCurrency());,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
retailAdjustmentValue = new Money(getCurrency());,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
Money currentPriceDetailRetailValue = promotableOrderItemPriceDetail.calculateItemUnitPriceWithAdjustments(false);,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
Money currentPriceDetailSalesValue = promotableOrderItemPriceDetail.calculateItemUnitPriceWithAdjustments(true);,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
promotableOfferUtility = new PromotableOfferUtilityImpl();,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
OfferServiceUtilitiesImpl offerServiceUtilities = new OfferServiceUtilitiesImpl(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
OrderOfferProcessorImpl orderProcessor = new OrderOfferProcessorImpl(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
ItemOfferProcessorImpl itemProcessor = new ItemOfferProcessorImpl(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
FulfillmentGroupOfferProcessor fgProcessor = new FulfillmentGroupOfferProcessorImpl(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
order = dataProvider.createBasicPromotableOrder(promotableOfferUtility).getOrder();,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
OfferServiceUtilitiesImpl offerServiceUtilities = new OfferServiceUtilitiesImpl();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
OrderOfferProcessorImpl orderProcessor = new OrderOfferProcessorImpl();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
ItemOfferProcessorImpl itemProcessor = new ItemOfferProcessorImpl();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
FulfillmentGroupOfferProcessor fgProcessor = new FulfillmentGroupOfferProcessorImpl();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
order = dataProvider.createBasicPromotableOrder().getOrder();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
public TestableFulfillmentGroupOfferProcessor(PromotableOfferUtility promotableOfferUtility) {,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
promotableOfferUtility = new PromotableOfferUtilityImpl();,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
fgProcessor = new TestableFulfillmentGroupOfferProcessor(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
OfferServiceUtilitiesImpl offerServiceUtilities = new OfferServiceUtilitiesImpl(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
OrderOfferProcessorImpl orderProcessor = new OrderOfferProcessorImpl(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
ItemOfferProcessorImpl itemProcessor = new ItemOfferProcessorImpl(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
promotableOrder = dataProvider.createBasicPromotableOrder(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
order = dataProvider.createBasicPromotableOrder(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
fgProcessor = new TestableFulfillmentGroupOfferProcessor();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
OfferServiceUtilitiesImpl offerServiceUtilities = new OfferServiceUtilitiesImpl();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
OrderOfferProcessorImpl orderProcessor = new OrderOfferProcessorImpl();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
ItemOfferProcessorImpl itemProcessor = new ItemOfferProcessorImpl();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
promotableOrder = dataProvider.createBasicPromotableOrder();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
order = dataProvider.createBasicPromotableOrder();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
promotableOfferUtility = new PromotableOfferUtilityImpl();,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
OfferServiceUtilitiesImpl offerServiceUtilities = new OfferServiceUtilitiesImpl(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
itemProcessor = new ItemOfferProcessorImpl(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
OrderOfferProcessorImpl orderProcessor = new OrderOfferProcessorImpl(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
OfferServiceUtilitiesImpl offerServiceUtilities = new OfferServiceUtilitiesImpl();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
itemProcessor = new ItemOfferProcessorImpl();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
OrderOfferProcessorImpl orderProcessor = new OrderOfferProcessorImpl();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
promotableOfferUtility = new PromotableOfferUtilityImpl();,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
orderProcessor = new OrderOfferProcessorImpl(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,2,0
orderProcessor = new OrderOfferProcessorImpl();,8352a0815cde294e891c3b46a0c12366e71d2352,2,1
import org.apache.commons.collections.CollectionUtils;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import org.broadleafcommerce.core.offer.service.discount.PromotionQualifier;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import org.broadleafcommerce.core.order.domain.OrderItem;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import java.util.Map.Entry;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
OrderItem relatedQualifierRoot = null;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
relatedQualifierRoot = relatedQualifier;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
while (relatedQualifierRoot.getParentOrderItem() != null) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
relatedQualifierRoot = relatedQualifierRoot.getParentOrderItem();,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
},8352a0815cde294e891c3b46a0c12366e71d2352,1,0
OrderItem thisItem = priceDetail.getPromotableOrderItem().getOrderItem();,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
if (!relatedQualifierRoot.isAParentOf(thisItem) && !thisItem.isAParentOf(relatedQualifierRoot) &&,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
!thisItem.equals(relatedQualifierRoot)) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
continue;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
* {@link OrderItem#getParentOrderItem()} / {@link OrderItem#getChildOrderItems()} attributes.,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
*,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"for (Entry<OfferItemCriteria, List<PromotableOrderItem>> entry : itemOffer.getCandidateQualifiersMap().entrySet()) {",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
OfferItemCriteria itemCriteria = entry.getKey();,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
List<PromotableOrderItem> promotableItems = entry.getValue();,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
List<PromotableOrderItemPriceDetail> priceDetails = buildPriceDetailListFromOrderItems(promotableItems);,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
for (PromotableOrderItemPriceDetail detail : priceDetails) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
OrderItem oi = detail.getPromotableOrderItem().getOrderItem();,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
OfferItemCriteria previousQualifierCriteria = null;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
for (PromotionQualifier possibleQualifier : detail.getPromotionQualifiers()) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
previousQualifierCriteria = possibleQualifier.getItemCriteria();,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"PromotionQualifier pq = detail.addPromotionQualifier(itemOffer, itemCriteria, qtyToMarkAsQualifier);",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
return false;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
return true;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
boolean qualifiersFound = false;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
boolean targetsFound = false;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
qualifiersFound = qualifiersAndTargetsFound;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
targetsFound = qualifiersAndTargetsFound;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"targetsFound = markTargets(itemOffer, order, null);",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import org.springframework.util.CollectionUtils;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
continue;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
continue;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
"protected HashMap<OfferItemCriteria, List<PromotableOrderItem>> candidateQualifiersMap =",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"new HashMap<OfferItemCriteria, List<PromotableOrderItem>>();",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"protected HashMap<OfferItemCriteria, List<PromotableOrderItem>> candidateTargetsMap =",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
for (OfferItemCriteria itemCriteria : getCandidateQualifiersMap().keySet()) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
List<PromotableOrderItem> candidateTargets = getCandidateTargetsMap().get(itemCriteria);,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
for (PromotableOrderItem promotableOrderItem : candidateTargets) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
},8352a0815cde294e891c3b46a0c12366e71d2352,1,0
return candidateTargetsMap;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
this.candidateTargetsMap = candidateItemsMap;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
@Override,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
return legacyCandidateTargets;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
this.legacyCandidateTargets = candidateTargets;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
*,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
* operation.,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
for (PromotableOrderItem chgItem : candidateTargets) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
appliedCount = appliedCount + qtyToReceiveSavings;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
return savings;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
},8352a0815cde294e891c3b46a0c12366e71d2352,1,1
for (PromotableOrderItem promotableOrderItem : candidateTargets) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
return candidateTargets;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
this.candidateTargets = candidateTargets;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
import org.broadleafcommerce.core.offer.service.OfferServiceExtensionManager;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import org.broadleafcommerce.core.order.domain.dto.OrderItemHolder;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import java.util.HashMap;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import java.util.Map;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
* Call out to extension managers.,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
*,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
PromotableCandidateItemOffer itemOffer) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
return !Boolean.TRUE.equals(contextMap.get(OfferServiceExtensionManager.STOP_PROCESSING));,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
return Boolean.TRUE;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"applyItemQualifiersAndTargets(itemOffer, order);",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
},8352a0815cde294e891c3b46a0c12366e71d2352,1,0
OrderItem relatedQualifierRoot = offerServiceUtilities.findRelatedQualifierRoot(relatedQualifier);,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"protected Money calculatePotentialSavingsForOrderItem(PromotableCandidateItemOffer itemOffer,",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"Object o = contextMap.get(""savings"");",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
return (Money) o;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"o = contextMap.get(""quantity"");",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"return itemOffer.calculateSavingsForOrderItem(item, quantity);",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
potentialSavings = potentialSavings.add(itemSavings);,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import org.broadleafcommerce.core.offer.service.discount.PromotionQualifier;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOrderItemPriceDetailAdjustment;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
*,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
"PromotableOrderItemPriceDetailAdjustment promotableOrderItemPriceDetailAdjustment = promotableItemFactory.createPromotableOrderItemPriceDetailAdjustment(itemOffer, itemPriceDetail);",8352a0815cde294e891c3b46a0c12366e71d2352,1,1
},8352a0815cde294e891c3b46a0c12366e71d2352,1,1
for (PromotableOrderItemPriceDetail itemPriceDetail : itemPriceDetails) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
PromotableOrderItemPriceDetail detail) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
// Not good enough,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
return true;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
return false;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
"protected boolean itemOfferCanBeApplied(PromotableOrder order, PromotableCandidateItemOffer itemOffer) {",8352a0815cde294e891c3b46a0c12366e71d2352,1,1
for (PromotableOrderItemPriceDetail detail : order.getAllPromotableOrderItemPriceDetails()) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
continue;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
// and adjustments have already been applied.,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
"applyItemQualifiersAndTargets(itemOffer, order);",8352a0815cde294e891c3b46a0c12366e71d2352,1,1
for (PromotableOrderItemPriceDetail detail : priceDetails) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
"protected boolean markTargets(PromotableCandidateItemOffer itemOffer, PromotableOrder order, OrderItem relatedQualifier,",8352a0815cde294e891c3b46a0c12366e71d2352,1,1
OrderItem relatedQualifierRoot = null;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
relatedQualifierRoot = relatedQualifier;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
while (relatedQualifierRoot.getParentOrderItem() != null) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
relatedQualifierRoot = relatedQualifierRoot.getParentOrderItem();,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
for (PromotableOrderItemPriceDetail priceDetail : priceDetails) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
OrderItem thisItem = priceDetail.getPromotableOrderItem().getOrderItem();,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
if (!relatedQualifierRoot.isAParentOf(thisItem) && !thisItem.isAParentOf(relatedQualifierRoot) &&,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
!thisItem.equals(relatedQualifierRoot)) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
OrderItem relatedOrderItem = null;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
OrderItem oi = detail.getPromotableOrderItem().getOrderItem();,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
OfferItemCriteria previousQualifierCriteria = null;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
for (PromotionQualifier possibleQualifier : detail.getPromotionQualifiers()) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
previousQualifierCriteria = possibleQualifier.getItemCriteria();,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
"PromotionQualifier pq = detail.addPromotionQualifier(itemOffer, itemCriteria, qtyToMarkAsQualifier);",8352a0815cde294e891c3b46a0c12366e71d2352,1,1
// we succeed,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
relatedOrderItem = oi;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
protected Comparator<PromotableOrderItemPriceDetail> getQualifierItemComparator(final boolean applyToSalePrice) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
@Override,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
// highest amount first,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
return price2.compareTo(price);,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
* <p>,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
* </p>,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
protected Comparator<PromotableOrderItemPriceDetail> getTargetItemComparator(final boolean applyToSalePrice) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
potentialSavings = potentialSavings.add(,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
//qualifiedOrderOffers = removeTrailingNotCombinableOrderOffers(qualifiedOrderOffers);,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
boolean first = true;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
Iterator<PromotableCandidateItemOffer> offerIterator = qualifiedItemOffers.iterator();,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
while (offerIterator.hasNext()) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
PromotableCandidateItemOffer itemOffer = offerIterator.next();,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
"offerService.applyAndSaveOffersToOrder(offers, order);",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"offerService.applyAndSaveOffersToOrder(offerListWithOneOffer, order);",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"offerService.applyAndSaveOffersToOrder(offerListWithTwoOffers, order);",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"offerService.applyAndSaveOffersToOrder(offerList, order);",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"offerService.applyOffersToOrder(offers, order);",8352a0815cde294e891c3b46a0c12366e71d2352,1,1
"offerService.applyOffersToOrder(offerListWithOneOffer, order);",8352a0815cde294e891c3b46a0c12366e71d2352,1,1
"offerService.applyOffersToOrder(offerListWithTwoOffers, order);",8352a0815cde294e891c3b46a0c12366e71d2352,1,1
"offerService.applyOffersToOrder(offerList, order);",8352a0815cde294e891c3b46a0c12366e71d2352,1,1
import org.broadleafcommerce.core.order.domain.DiscreteOrderItem;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import org.broadleafcommerce.core.offer.domain.OfferItemCriteria;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableCandidateItemOffer;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
},8352a0815cde294e891c3b46a0c12366e71d2352,1,0
continue;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"protected boolean orderMeetsQualifyingSubtotalRequirements(PromotableOrder order, PromotableCandidateOrderOffer orderOffer) {",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"return offerServiceUtilities.orderMeetsQualifyingSubtotalRequirements(order, orderOffer.getOffer(), orderOffer.getCandidateQualifiersMap());",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"protected boolean orderMeetsSubtotalRequirements(PromotableOrder order, PromotableCandidateOrderOffer orderOffer) {",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
"return offerServiceUtilities.orderMeetsSubtotalRequirements(order, orderOffer.getOffer());",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
continue;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
},8352a0815cde294e891c3b46a0c12366e71d2352,1,1
import org.broadleafcommerce.core.offer.domain.OfferPriceData;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
@Override,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
return candidateFixedTargetsMap;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
},8352a0815cde294e891c3b46a0c12366e71d2352,1,0
this.candidateFixedTargetsMap = candidateFixedTargetsMap;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
@Override,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
originalPrice = orderItem.getPriceBeforeAdjustments(getOffer().getApplyDiscountToSalePrice());,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
"BigDecimal offerUnitValue = PromotableOfferUtility.determineOfferUnitValue(offer, this);",8352a0815cde294e891c3b46a0c12366e71d2352,1,1
return savings.multiply(qtyToReceiveSavings);,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
},8352a0815cde294e891c3b46a0c12366e71d2352,1,1
"Money retailAdjustmentValue,",8352a0815cde294e891c3b46a0c12366e71d2352,1,0
this.retailAdjustmentValue = retailAdjustmentValue;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
this.saleAdjustmentValue = saleAdjustmentValue;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import java.math.BigDecimal;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
PromotableOrderItemPriceDetail orderItemPriceDetail) {,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
currentPriceDetailSalesValue = currentPriceDetailRetailValue;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
},8352a0815cde294e891c3b46a0c12366e71d2352,1,1
"BigDecimal offerUnitValue = PromotableOfferUtility.determineOfferUnitValue(offer, promotableCandidateItemOffer);",8352a0815cde294e891c3b46a0c12366e71d2352,1,1
"retailAdjustmentValue = PromotableOfferUtility.computeAdjustmentValue(currentPriceDetailRetailValue, offerUnitValue, this, this);",8352a0815cde294e891c3b46a0c12366e71d2352,1,1
"saleAdjustmentValue = PromotableOfferUtility.computeAdjustmentValue(currentPriceDetailSalesValue, offerUnitValue, this, this);",8352a0815cde294e891c3b46a0c12366e71d2352,1,1
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtility;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import junit.framework.TestCase;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtility;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtilityImpl;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import junit.framework.TestCase;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
import junit.framework.TestCase;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtility;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtilityImpl;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
},8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import junit.framework.TestCase;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
import junit.framework.TestCase;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtility;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtilityImpl;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import junit.framework.TestCase;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
import junit.framework.TestCase;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtility;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import org.broadleafcommerce.core.offer.service.discount.domain.PromotableOfferUtilityImpl;,8352a0815cde294e891c3b46a0c12366e71d2352,1,0
import junit.framework.TestCase;,8352a0815cde294e891c3b46a0c12366e71d2352,1,1
/**,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
*/,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
"Collections.sort(priceDetails, getQualifierItemComparator(itemOffer.getOffer().getApplyDiscountToSalePrice()));",8352a0815cde294e891c3b46a0c12366e71d2352,0,0
break;,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
qualifierQtyNeeded -= qtyToMarkAsQualifier;,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
qualifierQtyNeeded += qtyToMarkAsQualifier;,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
detail.getPromotionQualifiers().remove(pq);,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
pq.setItemCriteria(previousQualifierCriteria);,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
pq.setQuantity(pq.getQuantity() - qtyToMarkAsQualifier);,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
returnQty += promotableOrderItem.getQuantity();,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
/**,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
*/,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
returnQty += promotableOrderItem.getQuantity();,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
"offerServiceUtilities.applyAdjustmentsForItemPriceDetails(itemOffer, itemPriceDetails);",8352a0815cde294e891c3b46a0c12366e71d2352,0,0
"offerServiceUtilities.applyOrderItemAdjustment(itemOffer, itemPriceDetail);",8352a0815cde294e891c3b46a0c12366e71d2352,0,0
"protected Boolean applyItemOfferExtension(PromotableOrder order,",8352a0815cde294e891c3b46a0c12366e71d2352,0,0
"extensionManager.getProxy().applyItemOffer(order, itemOffer, contextMap);",8352a0815cde294e891c3b46a0c12366e71d2352,0,0
"applyLegacyAdjustments(order, itemOffer);",8352a0815cde294e891c3b46a0c12366e71d2352,0,0
"applyAdjustments(order, itemOffer);",8352a0815cde294e891c3b46a0c12366e71d2352,0,0
"offerServiceUtilities.sortTargetItemDetails(priceDetails, itemOffer.getOffer().getApplyDiscountToSalePrice());",8352a0815cde294e891c3b46a0c12366e71d2352,0,0
"orderItemHolder, itemCriteria, priceDetails, this);",8352a0815cde294e891c3b46a0c12366e71d2352,0,0
/**,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
*/,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
"extensionManager.getProxy().calculatePotentialSavings(itemOffer, item, quantity, contextMap);",8352a0815cde294e891c3b46a0c12366e71d2352,0,0
item.resetPriceDetails();,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
extensionManager.getProxy().resetPriceDetails(item);,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
extensionManager.getProxy().chooseSaleOrRetailAdjustments(order);,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
/**,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
*/,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
itemPriceDetail.addCandidateItemPriceDetailAdjustment(promotableOrderItemPriceDetailAdjustment);,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
break;,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
"applyOrderItemAdjustment(itemOffer, itemPriceDetail);",8352a0815cde294e891c3b46a0c12366e71d2352,0,1
"protected boolean adjustmentIsNotGoodEnoughToBeApplied(PromotableCandidateItemOffer itemOffer,",8352a0815cde294e891c3b46a0c12366e71d2352,0,1
"applyLegacyAdjustments(order, itemOffer);",8352a0815cde294e891c3b46a0c12366e71d2352,0,1
"applyAdjustments(order, itemOffer);",8352a0815cde294e891c3b46a0c12366e71d2352,0,1
"Collections.sort(priceDetails, getQualifierItemComparator(itemOffer.getOffer().getApplyDiscountToSalePrice()));",8352a0815cde294e891c3b46a0c12366e71d2352,0,1
qualifierQtyNeeded -= qtyToMarkAsQualifier;,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
"detail.addPromotionQualifier(itemOffer, itemCriteria, qtyToMarkAsQualifier);",8352a0815cde294e891c3b46a0c12366e71d2352,0,1
"Collections.sort(priceDetails, getTargetItemComparator(itemOffer.getOffer().getApplyDiscountToSalePrice()));",8352a0815cde294e891c3b46a0c12366e71d2352,0,1
targetQtyNeeded -= qtyToMarkAsTarget;,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
"priceDetail.addPromotionDiscount(itemOffer, itemCriteria, qtyToMarkAsTarget);",8352a0815cde294e891c3b46a0c12366e71d2352,0,1
qualifierQtyNeeded += qtyToMarkAsQualifier;,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
detail.getPromotionQualifiers().remove(pq);,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
pq.setItemCriteria(previousQualifierCriteria);,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
pq.setQuantity(pq.getQuantity() - qtyToMarkAsQualifier);,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
};,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
"itemOffer.calculateSavingsForOrderItem(item, discount.getQuantity()));",8352a0815cde294e891c3b46a0c12366e71d2352,0,1
offerIterator.next();,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
offerIterator.remove();,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
order.updatePrices();,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
((DiscreteOrderItem) order.getOrderItems().get(0)).getSku().setSalePrice(new Money(1D));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
((DiscreteOrderItem) order.getOrderItems().get(1)).getSku().setSalePrice(new Money(1D));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
((DiscreteOrderItem) order.getOrderItems().get(1)).getSku().setSalePrice(new Money(10D));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
((DiscreteOrderItem) order.getOrderItems().get(1)).getSku().setSalePrice(null);,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
order.getOrderItems().get(0).setSalePrice(new Money(1D));,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
order.getOrderItems().get(1).setSalePrice(new Money(1D));,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
order.getOrderItems().get(1).setSalePrice(new Money(10D));,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
order.getOrderItems().get(1).setSalePrice(null);,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
"applyOrderOffer(promotableOrder, orderOffer);",8352a0815cde294e891c3b46a0c12366e71d2352,0,0
compareAndAdjustOrderAndItemOffers(promotableOrder);,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
break;,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
"applyOrderOffer(promotableOrder, orderOffer);",8352a0815cde294e891c3b46a0c12366e71d2352,0,1
compareAndAdjustOrderAndItemOffers(promotableOrder);,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
break;,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
"PromotableOrderItemPriceDetail orderItemPriceDetail,",8352a0815cde294e891c3b46a0c12366e71d2352,0,0
"promotableCandidateItemOffer, promotableOrderItemPriceDetail, retailAdjustmentValue, saleAdjustmentValue);",8352a0815cde294e891c3b46a0c12366e71d2352,0,0
computeAdjustmentValues();,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
/*,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
*/,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
"promotableCandidateItemOffer, promotableOrderItemPriceDetail);",8352a0815cde294e891c3b46a0c12366e71d2352,0,1
protected PromotableOfferUtility promotableOfferUtility;,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
offerServiceUtilities.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
orderProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
itemProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
fgProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
offerService.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
offerServiceUtilities.setPromotableItemFactory(new PromotableItemFactoryImpl());,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
orderProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl());,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
itemProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl());,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
fgProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl());,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
offerService.setPromotableItemFactory(new PromotableItemFactoryImpl());,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
protected PromotableOfferUtility promotableOfferUtility;,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
super(promotableOfferUtility);,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
fgProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
offerServiceUtilities.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
orderProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
itemProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
offerService.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
fgProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl());,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
offerServiceUtilities.setPromotableItemFactory(new PromotableItemFactoryImpl());,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
orderProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl());,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
itemProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl());,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
offerService.setPromotableItemFactory(new PromotableItemFactoryImpl());,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
protected PromotableOfferUtility promotableOfferUtility;,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
offerServiceUtilities.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
itemProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
orderProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
offerService.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
offerServiceUtilities.setPromotableItemFactory(new PromotableItemFactoryImpl());,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
itemProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl());,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
orderProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl());,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
offerService.setPromotableItemFactory(new PromotableItemFactoryImpl());,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
protected PromotableOfferUtility promotableOfferUtility;,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
orderProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl(promotableOfferUtility));,8352a0815cde294e891c3b46a0c12366e71d2352,0,0
orderProcessor.setPromotableItemFactory(new PromotableItemFactoryImpl());,8352a0815cde294e891c3b46a0c12366e71d2352,0,1
"protected Map<String, String> getModifiedAttributeValues(Arguments arguments, Element element, String attributeName) {",ba9b908be174603ed774f6147e87c63387dc96a5,7,1
"public BroadleafAttributeModifier getModifiedAttributes(String tagName, Map<String, String> tagAttributes, String attributeName, String attributeValue, BroadleafThymeleafContext context) {",ba9b908be174603ed774f6147e87c63387dc96a5,6,0
"protected ModificationType getModificationType(Arguments arguments, Element element, String attributeName, String newAttributeName) {",ba9b908be174603ed774f6147e87c63387dc96a5,6,1
"protected boolean removeAttributeIfEmpty(Arguments arguments, Element element, String attributeName, String newAttributeName) {",ba9b908be174603ed774f6147e87c63387dc96a5,6,1
"protected boolean recomputeProcessorsAfterExecution(Arguments arguments, Element element, String attributeName) {",ba9b908be174603ed774f6147e87c63387dc96a5,5,1
* Sets the name of this processor to be used in Thymeleaf template,ba9b908be174603ed774f6147e87c63387dc96a5,4,1
"Map<String, String> attrs = new HashMap<>();",ba9b908be174603ed774f6147e87c63387dc96a5,4,0
"Map<String, String> attrs = new HashMap<String, String>();",ba9b908be174603ed774f6147e87c63387dc96a5,4,1
public String getName() {,ba9b908be174603ed774f6147e87c63387dc96a5,3,0
String newValue = formatter.format(date);,ba9b908be174603ed774f6147e87c63387dc96a5,2,0
} catch (Exception ex) {,ba9b908be174603ed774f6147e87c63387dc96a5,2,0
} else {,ba9b908be174603ed774f6147e87c63387dc96a5,2,0
public class AdminComponentIdProcessor extends AbstractBroadleafAttributeModifierProcessor {,ba9b908be174603ed774f6147e87c63387dc96a5,2,0
public BroadleafDialectPrefix getPrefix() {,ba9b908be174603ed774f6147e87c63387dc96a5,2,0
public class AdminComponentIdProcessor extends AbstractAttributeModifierAttrProcessor {,ba9b908be174603ed774f6147e87c63387dc96a5,2,1
public AdminComponentIdProcessor() {,ba9b908be174603ed774f6147e87c63387dc96a5,2,1
Expression expression = (Expression) StandardExpressions.getExpressionParser(arguments.getConfiguration()),ba9b908be174603ed774f6147e87c63387dc96a5,1,0
".parseExpression(arguments.getConfiguration(), arguments, element.getAttributeValue(attributeName));",ba9b908be174603ed774f6147e87c63387dc96a5,1,0
"Object component = expression.execute(arguments.getConfiguration(), arguments);",ba9b908be174603ed774f6147e87c63387dc96a5,1,0
"Object component = StandardExpressionProcessor.processExpression(arguments, element.getAttributeValue(attributeName));",ba9b908be174603ed774f6147e87c63387dc96a5,1,1
"SimpleDateFormat formatter = new SimpleDateFormat(""MMM d, Y @ hh:mma"");",ba9b908be174603ed774f6147e87c63387dc96a5,1,0
DateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());,ba9b908be174603ed774f6147e87c63387dc96a5,1,0
"symbols.setAmPmStrings(new String[] { ""am"", ""pm"" });",ba9b908be174603ed774f6147e87c63387dc96a5,1,0
"if (headerField.getFieldType().equals(""DATE"")) {",ba9b908be174603ed774f6147e87c63387dc96a5,1,0
try {,ba9b908be174603ed774f6147e87c63387dc96a5,1,0
"Date date = new SimpleDateFormat(""yyyy.MM.dd HH:mm:ss"").parse(recordField.getValue());",ba9b908be174603ed774f6147e87c63387dc96a5,1,0
},ba9b908be174603ed774f6147e87c63387dc96a5,1,0
},ba9b908be174603ed774f6147e87c63387dc96a5,1,0
Object component = context.parseExpression(attributeValue);,ba9b908be174603ed774f6147e87c63387dc96a5,1,0
*/,ba9b908be174603ed774f6147e87c63387dc96a5,1,1
Expression expression = (Expression) StandardExpressions.getExpressionParser(arguments.getConfiguration()),ba9b908be174603ed774f6147e87c63387dc96a5,1,1
".parseExpression(arguments.getConfiguration(), arguments, element.getAttributeValue(attributeName));",ba9b908be174603ed774f6147e87c63387dc96a5,1,1
"Object component = expression.execute(arguments.getConfiguration(), arguments);",ba9b908be174603ed774f6147e87c63387dc96a5,1,1
},ba9b908be174603ed774f6147e87c63387dc96a5,1,1
import org.thymeleaf.standard.expression.Expression;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import org.thymeleaf.standard.expression.StandardExpressions;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import org.thymeleaf.standard.expression.StandardExpressionProcessor;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import com.fasterxml.jackson.core.Version;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import com.fasterxml.jackson.databind.ObjectMapper;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import com.fasterxml.jackson.databind.module.SimpleModule;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import org.broadleafcommerce.common.presentation.client.*;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import org.broadleafcommerce.openadmin.dto.*;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import org.broadleafcommerce.openadmin.web.form.component.*;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import org.broadleafcommerce.openadmin.web.form.entity.*;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import javax.annotation.Resource;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import javax.persistence.ManyToOne;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import javax.persistence.OneToOne;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import javax.servlet.http.HttpServletRequest;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import java.text.DateFormatSymbols;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import java.text.SimpleDateFormat;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import java.util.*;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
// format date list grid cells,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
formatter.setDateFormatSymbols(symbols);,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
recordField.setValue(newValue);,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
recordField.setValue(p.getValue());,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import org.broadleafcommerce.common.presentation.client.AddMethodType;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.common.presentation.client.AdornedTargetAddMethodType;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.common.presentation.client.LookupType;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.common.presentation.client.SupportedFieldType;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.common.presentation.client.VisibilityEnum;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.dto.AdornedTargetList;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.dto.ClassMetadata;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.dto.ClassTree;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.dto.CollectionMetadata;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.dto.DynamicResultSet;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.dto.Entity;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.dto.FieldMetadata;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.dto.ForeignKey;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.dto.MapMetadata;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.dto.MapStructure;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.dto.Property;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.dto.SectionCrumb;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.dto.TabMetadata;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.web.form.component.ListGrid;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.web.form.component.ListGridAction;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.web.form.component.ListGridRecord;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.web.form.component.MediaField;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.web.form.component.RuleBuilderField;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.web.form.entity.CodeField;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.web.form.entity.ComboField;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.web.form.entity.DynamicEntityFormInfo;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.openadmin.web.form.entity.Field;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import com.fasterxml.jackson.core.Version;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import com.fasterxml.jackson.databind.ObjectMapper;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import com.fasterxml.jackson.databind.module.SimpleModule;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import java.util.ArrayList;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import java.util.Arrays;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import java.util.Collections;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import java.util.Date;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import java.util.HashMap;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import java.util.List;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import java.util.Map;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import java.util.Set;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import javax.annotation.Resource;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import javax.persistence.ManyToOne;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import javax.persistence.OneToOne;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import javax.servlet.http.HttpServletRequest;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
recordField.setValue(p.getValue());,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.common.web.dialect.AbstractBroadleafAttributeModifierProcessor;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import org.broadleafcommerce.common.web.dialect.BroadleafDialectPrefix;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import org.broadleafcommerce.common.web.domain.BroadleafAttributeModifier;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import org.broadleafcommerce.common.web.domain.BroadleafThymeleafContext;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
@Override,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
"return ""component_id"";",ba9b908be174603ed774f6147e87c63387dc96a5,0,0
return BroadleafDialectPrefix.BLC_ADMIN;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
return new BroadleafAttributeModifier(attrs);,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import org.thymeleaf.Arguments;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.thymeleaf.dom.Element;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.thymeleaf.processor.attr.AbstractAttributeModifierAttrProcessor;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.thymeleaf.standard.expression.Expression;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.thymeleaf.standard.expression.StandardExpressions;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
/**,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
"super(""component_id"");",ba9b908be174603ed774f6147e87c63387dc96a5,0,1
return attrs;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
@Override,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
return ModificationType.SUBSTITUTION;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
return true;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
return false;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.broadleafcommerce.presentation.condition.ConditionalOnTemplating;,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
@ConditionalOnTemplating,ba9b908be174603ed774f6147e87c63387dc96a5,0,0
import org.broadleafcommerce.presentation.condition.TemplatingExistCondition;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
import org.springframework.context.annotation.Conditional;,ba9b908be174603ed774f6147e87c63387dc96a5,0,1
@Conditional(TemplatingExistCondition.class),ba9b908be174603ed774f6147e87c63387dc96a5,0,1
if (salePrice == null && retailPrice == null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,8,0
if (skuSalePrice == null && salePrice != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,7,0
"return amount == null ? null : BroadleafCurrencyUtils.getMoney(amount, orderItem.getOrder().getCurrency());",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,7,0
"return amount == null ? null : BroadleafCurrencyUtils.getMoney(amount, orderItem.getOrder().getCurrency());",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,7,1
"return totalTax == null ? null : BroadleafCurrencyUtils.getMoney(totalTax, getFulfillmentGroup().getOrder().getCurrency());",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,6,0
"throw new CloneNotSupportedException(""Custom extensions and implementations should implement clone in order to guarantee split and merge operations are performed accurately"");",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,6,0
if (id != null && other.id != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,6,0
result = prime * result + ((orderItem == null) ? 0 : orderItem.hashCode());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,6,0
"return totalTax == null ? null : BroadleafCurrencyUtils.getMoney(totalTax, getFulfillmentGroup().getOrder().getCurrency());",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,6,1
"throw new CloneNotSupportedException(""Custom extensions and implementations should implement clone in order to guarantee split and merge operations are performed accurately"");",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,6,1
if (id != null && other.id != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,6,1
result = prime * result + ((orderItem == null) ? 0 : orderItem.hashCode());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,6,1
* @param quantity the quantity to set,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,6,1
// Added retailPrice check since a null salePrice is not a reliable way to determine that prices have,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,0
if (salePrice == null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Order_Item"", prominent = true, order = 1000, gridOrder = 1000)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Quantity"", prominent = true, order = 2000, gridOrder = 2000)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Status"", prominent = true, order = 3000, gridOrder = 3000)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,0
"@OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,0
"@JoinTable(name = ""BLC_FG_ITEM_TAX_XREF"", joinColumns = @JoinColumn(name = ""FULFILLMENT_GROUP_ITEM_ID""), inverseJoinColumns = @JoinColumn(name = ""TAX_DETAIL_ID""))",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Total_Item_Amount"", order = 5000, fieldType = SupportedFieldType.MONEY)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Total_Item_Taxable_Amount"", order = 6000, fieldType = SupportedFieldType.MONEY)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Prorated_Adjustment"", order = 7000, fieldType = SupportedFieldType.MONEY)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Order_Item"", prominent = true, order = 1000, gridOrder = 1000)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Quantity"", prominent = true, order = 2000, gridOrder = 2000)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Status"", prominent = true, order = 3000, gridOrder = 3000)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,1
"@OneToMany(fetch = FetchType.LAZY, targetEntity = TaxDetailImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,1
"@JoinTable(name = ""BLC_FG_ITEM_TAX_XREF"", joinColumns = @JoinColumn(name = ""FULFILLMENT_GROUP_ITEM_ID""), inverseJoinColumns = @JoinColumn(name = ""TAX_DETAIL_ID""))",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Total_Item_Amount"", order = 5000, fieldType = SupportedFieldType.MONEY)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Total_Item_Taxable_Amount"", order = 6000, fieldType = SupportedFieldType.MONEY)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Prorated_Adjustment"", order = 7000, fieldType = SupportedFieldType.MONEY)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,1
* unless the restrictions on use therein are violated and require payment to Broadleaf in which case,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,5,1
if (skuSalePrice != null && !skuSalePrice.getAmount().equals(salePrice)) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
if (skuSalePrice != null && !skuSalePrice.equals(salePrice)) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
"Money totalFulfillmentCharges = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, order.getCurrency());",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
if (fulfillmentGroup != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
if (fulfillmentGroup.getFulfillmentPrice() != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
"Money totalFulfillmentCharges = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, order.getCurrency());",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
if (fulfillmentGroup != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
if (fulfillmentGroup.getFulfillmentPrice() != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
"Money totalFulfillmentCharges = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, order.getCurrency());",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
if (fulfillmentGroup != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
if (fulfillmentGroup.getFulfillmentPrice() != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
"Money totalFulfillmentCharges = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, order.getCurrency());",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
if (fulfillmentGroup != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
if (fulfillmentGroup.getFulfillmentPrice() != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
if (returnPrice != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
if (skuSalePrice == null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
"@Column(name = ""TOTAL_ITEM_AMOUNT"", precision = 19, scale = 5)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
"@Column(name = ""TOTAL_ITEM_TAXABLE_AMOUNT"", precision = 19, scale = 5)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
if (getFulfillmentGroup() != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
if (getStatus() != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
if (proratedOrderAdjustment != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
if (obj == null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
if (orderItem == null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
if (other.orderItem != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
} else if (!orderItem.equals(other.orderItem)) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,0
"@Column(name = ""TOTAL_ITEM_AMOUNT"", precision = 19, scale = 5)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
"@Column(name = ""TOTAL_ITEM_TAXABLE_AMOUNT"", precision = 19, scale = 5)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
if (getFulfillmentGroup() != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
if (getStatus() != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
if (proratedOrderAdjustment != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
if (obj == null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
if (orderItem == null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
if (other.orderItem != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
} else if (!orderItem.equals(other.orderItem)) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
"* Licensed under the Broadleaf Fair Use License Agreement, Version 1.0",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
* between you and Broadleaf Commerce. You may not use this file except in compliance with the applicable license.,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
if (model.getFulfillmentGroup() != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
if (model.getOrderItem() != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
if (taxes != null && !taxes.isEmpty()) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
if (orderItem != null) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
* @param id the id to set,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
* @param fulfillmentGroupId the fulfillmentGroupId to set,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
* @param orderItemId the orderItemId to set,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
* @param totalTax the totalTax to set,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
* @return the quantity,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
* @param totalItemAmount the totalItemAmount to set,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
* @param taxDetails the taxDetails to set,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,4,1
boolean retailPriceOverride = false;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
if (oipd.getUseSalePrice() == false) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
// If there is no more sale price (because it got removed) then detect that case as well,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
salePrice = null;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
protected boolean updateSalePrice() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
protected boolean updateRetailPrice() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
} else {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
* you may not use this file except in compliance with the License.,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
* You may obtain a copy of the License at,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
* See the License for the specific language governing permissions and,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
//this needs to stay OrderItem in order to provide backwards compatibility for those implementations that place a BundleOrderItem,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
protected List<TaxDetail> taxes = new ArrayList<TaxDetail>();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public void setId(Long id) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public void setFulfillmentGroup(FulfillmentGroup fulfillmentGroup) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public void setOrderItem(OrderItem orderItem) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public void setQuantity(int quantity) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public Money getRetailPrice() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public Money getSalePrice() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public Money getPrice() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
protected Money convertToMoney(BigDecimal amount) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public Money getTotalItemAmount() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public void setTotalItemAmount(Money amount) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public Money getProratedOrderAdjustmentAmount() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public void setProratedOrderAdjustmentAmount(Money proratedOrderAdjustment) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public Money getTotalItemTaxableAmount() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public void setTotalItemTaxableAmount(Money taxableAmount) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public void setStatus(FulfillmentGroupStatusType status) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public void removeAssociations() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public void setTaxes(List<TaxDetail> taxes) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public Money getTotalTax() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public void setTotalTax(Money totalTax) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
"public void checkCloneable(FulfillmentGroupItem fulfillmentGroupItem) throws CloneNotSupportedException, SecurityException, NoSuchMethodException {",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public boolean getHasProratedOrderAdjustments() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
public boolean equals(Object obj) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
if (this == obj) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,0
* you may not use this file except in compliance with the License.,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
* You may obtain a copy of the License at,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
* See the License for the specific language governing permissions and,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
//this needs to stay OrderItem in order to provide backwards compatibility for those implementations that place a BundleOrderItem,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
protected List<TaxDetail> taxes = new ArrayList<TaxDetail>();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void setId(Long id) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void setFulfillmentGroup(FulfillmentGroup fulfillmentGroup) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void setOrderItem(OrderItem orderItem) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void setQuantity(int quantity) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public Money getRetailPrice() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public Money getSalePrice() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public Money getPrice() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
protected Money convertToMoney(BigDecimal amount) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public Money getTotalItemAmount() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void setTotalItemAmount(Money amount) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public Money getProratedOrderAdjustmentAmount() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void setProratedOrderAdjustmentAmount(Money proratedOrderAdjustment) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public Money getTotalItemTaxableAmount() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void setTotalItemTaxableAmount(Money taxableAmount) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void setStatus(FulfillmentGroupStatusType status) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void removeAssociations() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void setTaxes(List<TaxDetail> taxes) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public Money getTotalTax() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void setTotalTax(Money totalTax) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
"public void checkCloneable(FulfillmentGroupItem fulfillmentGroupItem) throws CloneNotSupportedException, SecurityException, NoSuchMethodException {",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public boolean getHasProratedOrderAdjustments() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public boolean equals(Object obj) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
if (this == obj) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
"* (the ""Fair Use License"" located  at http://license.broadleafcommerce.org/fair_use_license-1.0.txt)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
"* the Broadleaf End User License Agreement (EULA), Version 1.1",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
* @deprecated - use {@link com.broadleafcommerce.core.rest.api.v2.wrapper.FulfillmentGroupItemWrapper},a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
"public void wrapDetails(FulfillmentGroupItem model, HttpServletRequest request) {",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
"public void wrapSummary(FulfillmentGroupItem model, HttpServletRequest request) {",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
* @return the id,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void setId(Long id) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
* @return the fulfillmentGroupId,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void setFulfillmentGroupId(Long fulfillmentGroupId) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
* @return the orderItemId,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void setOrderItemId(Long orderItemId) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
* @return the totalTax,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public Money getTotalTax() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void setTotalTax(Money totalTax) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void setQuantity(Integer quantity) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
* @return the totalItemAmount,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public Money getTotalItemAmount() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void setTotalItemAmount(Money totalItemAmount) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
* @return the taxDetails,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
public void setTaxDetails(List<TaxDetailWrapper> taxDetails) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,3,1
if (!skuRetailPrice.getAmount().equals(retailPrice)) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
if (!skuRetailPrice.equals(retailPrice)) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
import java.util.List;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
for (OrderItemPriceDetail oipd : getOrderItemPriceDetails()) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
if (allowSalesPrice && !retailPriceOverride) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
import java.util.List;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
if (allowSalesPrice) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
if (!order.getShippingOverride()) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
for (FulfillmentGroup fulfillmentGroup : order.getFulfillmentGroups()) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
for (FulfillmentGroup fulfillmentGroup : order.getFulfillmentGroups()) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
for (FulfillmentGroup fulfillmentGroup : order.getFulfillmentGroups()) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
if (!fulfillmentGroup.getShippingOverride()) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
if (!order.getShippingOverride()) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
for (FulfillmentGroup fulfillmentGroup : order.getFulfillmentGroups()) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
Money amountDiff = orderAdjustmentTotal.subtract(totalOrderAdjustmentDistributed);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
Money amountDiff = totalOrderAdjustmentDistributed.subtract(orderAdjustmentTotal);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
baseSalePrice = null;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
updated = true;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
salePrice = returnPrice.add(fee.getAmount()).getAmount();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
salePrice = returnPrice.add(fee.getAmount()).getAmount();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
private boolean updateSalePrice() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
private boolean updateRetailPrice() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
* Copyright (C) 2009 - 2013 Broadleaf Commerce,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
"* Licensed under the Apache License, Version 2.0 (the ""License"");",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
"* Unless required by applicable law or agreed to in writing, software",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
"* distributed under the License is distributed on an ""AS IS"" BASIS,",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
* limitations under the License.,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
"@AdminPresentationMergeOverride(name = """", mergeEntries =",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
"public class FulfillmentGroupItemImpl implements FulfillmentGroupItem, Cloneable, CurrencyCodeIdentifiable {",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
parameters = {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
protected BigDecimal totalTax;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
protected BigDecimal totalItemAmount;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
protected BigDecimal totalItemTaxableAmount;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
protected BigDecimal proratedOrderAdjustment;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
public Long getId() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
public FulfillmentGroup getFulfillmentGroup() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
public OrderItem getOrderItem() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
public int getQuantity() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
public FulfillmentGroupStatusType getStatus() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
public List<TaxDetail> getTaxes() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
public String getCurrencyCode() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
"Method cloneMethod = fulfillmentGroupItem.getClass().getMethod(""clone"", new Class[]{});",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
"if (cloneMethod.getDeclaringClass().getName().startsWith(""org.broadleafcommerce"") && !orderItem.getClass().getName().startsWith(""org.broadleafcommerce"")) {",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
public FulfillmentGroupItem clone() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
} catch (CloneNotSupportedException e) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
} catch (Exception e) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
return (proratedOrderAdjustment.compareTo(BigDecimal.ZERO) == 0);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
return false;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
if (!getClass().isAssignableFrom(obj.getClass())) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
public int hashCode() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
* Copyright (C) 2009 - 2013 Broadleaf Commerce,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
"* Licensed under the Apache License, Version 2.0 (the ""License"");",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
"* Unless required by applicable law or agreed to in writing, software",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
"* distributed under the License is distributed on an ""AS IS"" BASIS,",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
* limitations under the License.,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
"@AdminPresentationMergeOverride(name = """", mergeEntries =",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
"public class FulfillmentGroupItemImpl implements FulfillmentGroupItem, Cloneable, CurrencyCodeIdentifiable {",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
parameters = {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
protected BigDecimal totalTax;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
protected BigDecimal totalItemAmount;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
protected BigDecimal totalItemTaxableAmount;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
protected BigDecimal proratedOrderAdjustment;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
public Long getId() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
public FulfillmentGroup getFulfillmentGroup() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
public OrderItem getOrderItem() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
public int getQuantity() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
public FulfillmentGroupStatusType getStatus() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
public List<TaxDetail> getTaxes() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
public String getCurrencyCode() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
"Method cloneMethod = fulfillmentGroupItem.getClass().getMethod(""clone"", new Class[]{});",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
"if (cloneMethod.getDeclaringClass().getName().startsWith(""org.broadleafcommerce"") && !orderItem.getClass().getName().startsWith(""org.broadleafcommerce"")) {",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
public FulfillmentGroupItem clone() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
} catch (CloneNotSupportedException e) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
} catch (Exception e) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
return (proratedOrderAdjustment.compareTo(BigDecimal.ZERO) == 0);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
return false;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
if (!getClass().isAssignableFrom(obj.getClass())) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
public int hashCode() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
* Copyright (C) 2009 - 2016 Broadleaf Commerce,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
"* (the ""Commercial License"" located at http://license.broadleafcommerce.org/commercial_license-1.1.txt)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
"* Alternatively, the Commercial License may be replaced with a mutually agreed upon license (the ""Custom License"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
import java.util.List;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
"public class FulfillmentGroupItemWrapper extends BaseWrapper implements APIWrapper<FulfillmentGroupItem>, APIUnwrapper<FulfillmentGroupItemRequest> {",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
protected Money totalTax;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
protected Money totalItemAmount;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
this.taxDetails = new ArrayList<TaxDetailWrapper>();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
for (TaxDetail detail : taxes) {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
"public FulfillmentGroupItemRequest unwrap(HttpServletRequest request, ApplicationContext appContext) {",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
FulfillmentGroupItemRequest fulfillmentGroupItemRequest = new FulfillmentGroupItemRequest();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
return null;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
public Long getId() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
public Long getFulfillmentGroupId() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
public Long getOrderItemId() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
public Integer getQuantity() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
public List<TaxDetailWrapper> getTaxDetails() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
public static final int ORDER = 3000;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
public FulfillmentItemPricingActivity() {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
"Map<OrderItem,List<FulfillmentGroupItem>> partialOrderItemMap = new HashMap<>();",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
fgItemList = new ArrayList<>();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,0
"Map<OrderItem,List<FulfillmentGroupItem>> partialOrderItemMap = new HashMap<OrderItem,List<FulfillmentGroupItem>>();",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
fgItemList = new ArrayList<FulfillmentGroupItem>();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,2,1
import java.lang.reflect.Method;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
import java.math.BigDecimal;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
import java.util.ArrayList;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
import java.util.HashMap;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
import java.util.Map;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
retailPriceOverride = true;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
},a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
import java.lang.reflect.Method;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import java.math.BigDecimal;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import java.util.ArrayList;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import java.util.HashMap;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import java.util.Map;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
fulfillmentGroup = fulfillmentPricingService.calculateCostForFulfillmentGroup(fulfillmentGroup);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
totalFulfillmentCharges = totalFulfillmentCharges.add(fulfillmentGroup.getFulfillmentPrice());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
},a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
fulfillmentGroup = fulfillmentPricingService.calculateCostForFulfillmentGroup(fulfillmentGroup);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
totalFulfillmentCharges = totalFulfillmentCharges.add(fulfillmentGroup.getFulfillmentPrice());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
},a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
totalFulfillmentCharges = totalFulfillmentCharges.add(fulfillmentGroup.getFulfillmentPrice());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
totalFulfillmentCharges = totalFulfillmentCharges.add(fulfillmentGroup.getFulfillmentPrice());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
},a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return Math.round(Math.abs(numUnits));,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return Math.round(numUnits);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
},a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
},a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
* #%L,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
* BroadleafCommerce Framework,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
* %%,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
*,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
*       http://www.apache.org/licenses/LICENSE-2.0,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
"* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
* #L%,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
"@DiscriminatorColumn(name = ""TYPE"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
@Inheritance(strategy = InheritanceType.JOINED),a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
"@Table(name = ""BLC_FULFILLMENT_GROUP_ITEM"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
{,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.READONLY,",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
booleanOverrideValue = true)),a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
},a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
private static final Log LOG = LogFactory.getLog(FulfillmentGroupItemImpl.class);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
private static final long serialVersionUID = 1L;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
"@GeneratedValue(generator = ""FulfillmentGroupItemId"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
"@Column(name = ""FULFILLMENT_GROUP_ITEM_ID"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
protected Long id;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
"@ManyToOne(targetEntity = FulfillmentGroupImpl.class, optional=false)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
"@JoinColumn(name = ""FULFILLMENT_GROUP_ID"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
protected FulfillmentGroup fulfillmentGroup;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
"@ManyToOne(targetEntity = OrderItemImpl.class, optional=false)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
"@JoinColumn(name = ""ORDER_ITEM_ID"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
protected OrderItem orderItem;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
"@Column(name = ""QUANTITY"", nullable=false)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
protected int quantity;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
"@Column(name = ""STATUS"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
"@Column(name = ""TOTAL_ITEM_TAX"", precision=19, scale=5)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Total_Item_Tax"", order=4000, fieldType=SupportedFieldType.MONEY)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
"@Column(name = ""PRORATED_ORDER_ADJ"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return id;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
this.id = id;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return fulfillmentGroup;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
this.fulfillmentGroup = fulfillmentGroup;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return orderItem;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
this.orderItem = orderItem;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return quantity;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
this.quantity = quantity;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return orderItem.getRetailPrice();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return orderItem.getSalePrice();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return orderItem.getAveragePrice();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return convertToMoney(totalItemAmount);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
totalItemAmount = amount.getAmount();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return convertToMoney(proratedOrderAdjustment);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
this.proratedOrderAdjustment = proratedOrderAdjustment.getAmount();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return convertToMoney(totalItemTaxableAmount);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
totalItemTaxableAmount = taxableAmount.getAmount();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return FulfillmentGroupStatusType.getInstance(this.status);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
this.status = status.getType();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return taxes;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
this.taxes = taxes;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
this.totalTax = Money.toAmount(totalTax);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return ((CurrencyCodeIdentifiable) fulfillmentGroup).getCurrencyCode();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
//subclass is not implementing the clone method,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
//this is likely an extended class - instantiate from the fully qualified name via reflection,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
try {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
clonedFulfillmentGroupItem = (FulfillmentGroupItem) Class.forName(this.getClass().getName()).newInstance();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
throw new RuntimeException(e);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return clonedFulfillmentGroupItem;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return true;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
FulfillmentGroupItemImpl other = (FulfillmentGroupItemImpl) obj;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return id.equals(other.id);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
final int prime = 31;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
int result = 1;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
return result;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
* #%L,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
* BroadleafCommerce Framework,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
* %%,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
*,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
*       http://www.apache.org/licenses/LICENSE-2.0,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
* #L%,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"@DiscriminatorColumn(name = ""TYPE"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
@Inheritance(strategy = InheritanceType.JOINED),a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"@Table(name = ""BLC_FULFILLMENT_GROUP_ITEM"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
{,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"@AdminPresentationMergeEntry(propertyType = PropertyType.AdminPresentation.READONLY,",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
booleanOverrideValue = true)),a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
},a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
private static final Log LOG = LogFactory.getLog(FulfillmentGroupItemImpl.class);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
private static final long serialVersionUID = 1L;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"@GeneratedValue(generator = ""FulfillmentGroupItemId"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"@Column(name = ""FULFILLMENT_GROUP_ITEM_ID"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
protected Long id;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"@ManyToOne(targetEntity = FulfillmentGroupImpl.class, optional=false)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"@JoinColumn(name = ""FULFILLMENT_GROUP_ID"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
protected FulfillmentGroup fulfillmentGroup;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"@ManyToOne(targetEntity = OrderItemImpl.class, optional=false)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"@JoinColumn(name = ""ORDER_ITEM_ID"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
protected OrderItem orderItem;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"@Column(name = ""QUANTITY"", nullable=false)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
protected int quantity;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"@Column(name = ""STATUS"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"@Column(name = ""TOTAL_ITEM_TAX"", precision=19, scale=5)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"@AdminPresentation(friendlyName = ""FulfillmentGroupItemImpl_Total_Item_Tax"", order=4000, fieldType=SupportedFieldType.MONEY)",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"@Column(name = ""PRORATED_ORDER_ADJ"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return id;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.id = id;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return fulfillmentGroup;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.fulfillmentGroup = fulfillmentGroup;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return orderItem;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.orderItem = orderItem;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return quantity;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.quantity = quantity;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return orderItem.getRetailPrice();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return orderItem.getSalePrice();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return orderItem.getAveragePrice();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return convertToMoney(totalItemAmount);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
totalItemAmount = amount.getAmount();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return convertToMoney(proratedOrderAdjustment);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.proratedOrderAdjustment = proratedOrderAdjustment.getAmount();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return convertToMoney(totalItemTaxableAmount);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
totalItemTaxableAmount = taxableAmount.getAmount();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return FulfillmentGroupStatusType.getInstance(this.status);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.status = status.getType();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return taxes;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.taxes = taxes;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.totalTax = Money.toAmount(totalTax);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return ((CurrencyCodeIdentifiable) fulfillmentGroup).getCurrencyCode();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
//subclass is not implementing the clone method,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
//this is likely an extended class - instantiate from the fully qualified name via reflection,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
try {,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
clonedFulfillmentGroupItem = (FulfillmentGroupItem) Class.forName(this.getClass().getName()).newInstance();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
throw new RuntimeException(e);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return clonedFulfillmentGroupItem;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return true;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
FulfillmentGroupItemImpl other = (FulfillmentGroupItemImpl) obj;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return id.equals(other.id);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
final int prime = 31;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
int result = 1;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return result;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
* #%L,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
* BroadleafCommerce Framework Web,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
* %%,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
* shall apply.,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
*,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
* #L%,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import org.broadleafcommerce.common.money.Money;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import org.broadleafcommerce.core.order.domain.FulfillmentGroupItem;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import org.broadleafcommerce.core.order.domain.OrderItem;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import org.broadleafcommerce.core.order.domain.TaxDetail;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import org.broadleafcommerce.core.order.service.OrderItemService;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import org.broadleafcommerce.core.order.service.call.FulfillmentGroupItemRequest;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import org.springframework.context.ApplicationContext;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import java.util.ArrayList;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import javax.servlet.http.HttpServletRequest;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import javax.xml.bind.annotation.XmlAccessType;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import javax.xml.bind.annotation.XmlAccessorType;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import javax.xml.bind.annotation.XmlElement;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import javax.xml.bind.annotation.XmlElementWrapper;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import javax.xml.bind.annotation.XmlRootElement;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
/**,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
* This is a JAXB wrapper around FulfillmentGroupItem.,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
* User: Elbert Bautista,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
* Date: 4/10/12,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"@XmlRootElement(name = ""fulfillmentGroupItem"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
@XmlAccessorType(value = XmlAccessType.FIELD),a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
@XmlElement,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
protected Long id;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
protected Long fulfillmentGroupId;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
protected Long orderItemId;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
protected Integer quantity;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"@XmlElement(name = ""taxDetail"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"@XmlElementWrapper(name = ""taxDetails"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
protected List<TaxDetailWrapper> taxDetails;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.id = model.getId();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.fulfillmentGroupId = model.getFulfillmentGroup().getId();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
},a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.orderItemId = model.getOrderItem().getId();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.totalTax = model.getTotalTax();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.quantity = model.getQuantity();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.totalItemAmount = model.getTotalItemAmount();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
List<TaxDetail> taxes = model.getTaxes();,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
TaxDetailWrapper taxDetailWrapper = (TaxDetailWrapper) context.getBean(TaxDetailWrapper.class.getName());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
"OrderItemService orderItemService = (OrderItemService) appContext.getBean(""blOrderItemService"");",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
OrderItem orderItem = orderItemService.readOrderItemById(this.orderItemId);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return fulfillmentGroupItemRequest;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return id;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.id = id;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return fulfillmentGroupId;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.fulfillmentGroupId = fulfillmentGroupId;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return orderItemId;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.orderItemId = orderItemId;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return totalTax;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.totalTax = totalTax;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return quantity;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.quantity = quantity;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return totalItemAmount;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.totalItemAmount = totalItemAmount;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
return taxDetails;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
this.taxDetails = taxDetails;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,1
import org.springframework.stereotype.Component;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
},a1a9256debcee8caf6565a2ae4cc73cc6ab13409,1,0
break;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
order.setTotalFulfillmentCharges(totalFulfillmentCharges);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
context.setSeedData(order);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
order.setTotalFulfillmentCharges(totalFulfillmentCharges);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
context.setSeedData(order);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
order.setTotalFulfillmentCharges(totalFulfillmentCharges);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
context.setSeedData(order);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
order.setTotalFulfillmentCharges(totalFulfillmentCharges);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
context.setSeedData(order);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
fg1.setType(FulfillmentType.PHYSICAL_SHIP);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
fg2.setType(FulfillmentType.PHYSICAL_SHIP);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
fg1.setType(FulfillmentType.SHIPPING);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
fg2.setType(FulfillmentType.SHIPPING);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
// been initialized.,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
@Override,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
/*,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
*/,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
package org.broadleafcommerce.core.order.domain;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
@Entity,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
"@Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=""blOrderElements"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
@AdminPresentationMergeOverrides(,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
),a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
@Id,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
@GenericGenerator(,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
"name=""FulfillmentGroupItemId"",",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
"strategy=""org.broadleafcommerce.common.persistence.IdOverrideTableGenerator"",",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
"@Parameter(name=""segment_value"", value=""FulfillmentGroupItemImpl""),",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
"@Parameter(name=""entity_name"", value=""org.broadleafcommerce.core.order.domain.FulfillmentGroupItemImpl"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
"@Index(name=""FGITEM_FG_INDEX"", columnNames={""FULFILLMENT_GROUP_ID""})",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
@AdminPresentationToOneLookup(),a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
"@Index(name=""FGITEM_STATUS_INDEX"", columnNames={""STATUS""})",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
private String status;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
@Override,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
getFulfillmentGroup().getFulfillmentGroupItems().remove(this);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
setFulfillmentGroup(null);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
setOrderItem(null);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
FulfillmentGroupItem clonedFulfillmentGroupItem;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
checkCloneable(clonedFulfillmentGroupItem);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
"LOG.warn(""Clone implementation missing in inheritance hierarchy outside of Broadleaf: "" + clonedFulfillmentGroupItem.getClass().getName(), e);",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
clonedFulfillmentGroupItem.setFulfillmentGroup(getFulfillmentGroup());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
clonedFulfillmentGroupItem.setOrderItem(getOrderItem());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
clonedFulfillmentGroupItem.setQuantity(getQuantity());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
clonedFulfillmentGroupItem.setTotalItemAmount(getTotalItemAmount());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
clonedFulfillmentGroupItem.setTotalItemTaxableAmount(getTotalItemTaxableAmount());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
clonedFulfillmentGroupItem.setStatus(getStatus());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
/*,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
*/,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
package org.broadleafcommerce.core.order.domain;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
@Entity,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
"@Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=""blOrderElements"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
@AdminPresentationMergeOverrides(,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
),a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
@Id,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
@GenericGenerator(,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
"name=""FulfillmentGroupItemId"",",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
"strategy=""org.broadleafcommerce.common.persistence.IdOverrideTableGenerator"",",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
"@Parameter(name=""segment_value"", value=""FulfillmentGroupItemImpl""),",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
"@Parameter(name=""entity_name"", value=""org.broadleafcommerce.core.order.domain.FulfillmentGroupItemImpl"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
"@Index(name=""FGITEM_FG_INDEX"", columnNames={""FULFILLMENT_GROUP_ID""})",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
@AdminPresentationToOneLookup(),a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
"@Index(name=""FGITEM_STATUS_INDEX"", columnNames={""STATUS""})",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
private String status;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
@Override,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
getFulfillmentGroup().getFulfillmentGroupItems().remove(this);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
setFulfillmentGroup(null);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
setOrderItem(null);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
FulfillmentGroupItem clonedFulfillmentGroupItem;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
checkCloneable(clonedFulfillmentGroupItem);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
"LOG.warn(""Clone implementation missing in inheritance hierarchy outside of Broadleaf: "" + clonedFulfillmentGroupItem.getClass().getName(), e);",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
clonedFulfillmentGroupItem.setFulfillmentGroup(getFulfillmentGroup());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
clonedFulfillmentGroupItem.setOrderItem(getOrderItem());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
clonedFulfillmentGroupItem.setQuantity(getQuantity());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
clonedFulfillmentGroupItem.setTotalItemAmount(getTotalItemAmount());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
clonedFulfillmentGroupItem.setTotalItemTaxableAmount(getTotalItemTaxableAmount());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
clonedFulfillmentGroupItem.setStatus(getStatus());,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
/*,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
*/,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
package org.broadleafcommerce.core.web.api.wrapper;,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
@Deprecated,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
@Override,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
"taxDetailWrapper.wrapSummary(detail, request);",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
this.taxDetails.add(taxDetailWrapper);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
"wrapDetails(model, request);",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
fulfillmentGroupItemRequest.setOrderItem(orderItem);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
fulfillmentGroupItemRequest.setQuantity(this.quantity);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,1
"@Component(""blFulfillmentItemPricingActivity"")",a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
setOrder(ORDER);,a1a9256debcee8caf6565a2ae4cc73cc6ab13409,0,0
import org.apache.commons.lang.ArrayUtils;,fd1a6578e3835293b0a34ca78022d0b7ccb11ac1,2,1
import org.apache.commons.lang3.ArrayUtils;,fd1a6578e3835293b0a34ca78022d0b7ccb11ac1,1,0
public boolean hasFilterAndSortCriteria() {,fd1a6578e3835293b0a34ca78022d0b7ccb11ac1,1,0
FilterAndSortCriteria[] fascs = getFilterAndSortCriteria();,fd1a6578e3835293b0a34ca78022d0b7ccb11ac1,1,0
},fd1a6578e3835293b0a34ca78022d0b7ccb11ac1,1,0
/* ************** */,fd1a6578e3835293b0a34ca78022d0b7ccb11ac1,0,0
/* STATUS METHODS */,fd1a6578e3835293b0a34ca78022d0b7ccb11ac1,0,0
return ArrayUtils.isNotEmpty(fascs);,fd1a6578e3835293b0a34ca78022d0b7ccb11ac1,0,0
"public Entity getRecord(PersistencePackageRequest request, String id, ClassMetadata cmd, boolean isCollectionRequest)",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,6,1
"public void removeSubCollectionEntity(ClassMetadata mainMetadata, Property field, Entity parentEntity, String itemId,",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,6,1
"public PersistenceResponse getRecord(PersistencePackageRequest request, String id, ClassMetadata cmd, boolean isCollectionRequest)",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,5,0
"public PersistenceResponse removeSubCollectionEntity(ClassMetadata mainMetadata, Property field, Entity parentEntity, String itemId,",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,5,0
"public Entity addSubCollectionEntity(EntityForm entityForm, ClassMetadata mainMetadata, Property field,",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,5,1
"public Entity updateSubCollectionEntity(EntityForm entityForm, ClassMetadata mainMetadata, Property field,",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,5,1
"public PersistenceResponse getRecordsForCollection(ClassMetadata containingClassMetadata, Entity containingEntity,",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,4,0
"public PersistenceResponse addSubCollectionEntity(EntityForm entityForm, ClassMetadata mainMetadata, Property field,",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,4,0
"public PersistenceResponse updateSubCollectionEntity(EntityForm entityForm, ClassMetadata mainMetadata, Property field,",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,4,0
"public Entity getAdvancedCollectionRecord(ClassMetadata containingClassMetadata, Entity containingEntity,",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,4,1
"public DynamicResultSet getRecordsForCollection(ClassMetadata containingClassMetadata, Entity containingEntity,",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,4,1
* Grabs a filtered list of row actions filtered by whether or not they match the same readonly state as the listgrid,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,4,0
"throw new NoResultException(String.format(""Could not find record for class [%s], field [%s], main entity id "" +",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,4,1
"protected void setEntityFormFields(ClassMetadata cmd, EntityForm ef, List<Property> properties) {",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,4,0
// We want our entity form to only render the maintained adorned target fields,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,4,0
// We want our entity form to only render the maintained adorned target fields,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,4,1
Entity entity = new Entity();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,4,1
Property p = new Property();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,4,1
ClassMetadata cmd = response.getDynamicResultSet().getClassMetaData();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,0
public PersistenceResponse getRecords(PersistencePackageRequest request) throws ServiceException {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,0
"public PersistenceResponse getAdvancedCollectionRecord(ClassMetadata containingClassMetadata, Entity containingEntity,",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,0
ClassMetadata cmd = inspect(request).getClassMetaData();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,1
public DynamicResultSet getRecords(PersistencePackageRequest request) throws ServiceException {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,1
Entity entity = entities[0];,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,1
Entity entity = null;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,1
ClassMetadata cmd = getClassMetadata(ppr);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,1
ClassMetadata cmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,0
ClassMetadata cmd = adminEntityService.getClassMetadata(ppr);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,1
"return (List<ListGridAction>) CollectionUtils.select(getModalRowActions(), new TypedPredicate<ListGridAction>() {",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,0
public void addModalRowAction(ListGridAction action) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,0
public void removeAllModalRowActions() {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,0
public void setListGridSelectType(SelectType listGridSelectType) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,0
public void setListGridSelectTypeString(String listGridSelectType) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,0
public void setModalRowActions(List<ListGridAction> modalRowActions) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,0
public String getListGridSelectType() {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,0
Property p = cmd.getPMap().get(bcm.getSelectizeVisibleField());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,0
"Field hf = createHeaderField(p, md);",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,0
Property p = cmd.getPMap().get(atcmd.getSelectizeVisibleField());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,0
Property p = cmd.getPMap().get(fieldName);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,0
"Field hf = createHeaderField(p, md);",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,1
Property p = cmd.getPMap().get(fieldName);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,1
Property p = collectionMetadata.getPMap().get(targetFieldName);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,0
Property p = collectionMetadata.getPMap().get(targetFieldName);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,1
"Field hf = createHeaderField(p, md);",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,0
"Field hf = createHeaderField(p, md);",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,1
List<Property> properties = new ArrayList<Property>();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,3,1
Entity[] entities = response.getDynamicResultSet().getRecords();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
Entity dynamicFormEntity = update(ppr).getEntity();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
"String sectionField = """";",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
public ClassMetadata getClassMetadata(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
Entity[] entities = fetch(request).getRecords();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
"public Entity addEntity(EntityForm entityForm, String[] customCriteria)",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
"public Entity updateEntity(EntityForm entityForm, String[] customCriteria)",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
Entity dynamicFormEntity = update(ppr);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
Entity returnEntity = update(ppr);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
"public void removeEntity(EntityForm entityForm, String[] customCriteria)",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
Entity[] entities = fetch(ppr).getRecords();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
entity = entities[0];,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
entity = e;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
Entity[] rows = adminEntityService.getRecords(toOnePpr).getDynamicResultSet().getRecords();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr).getDynamicResultSet().getClassMetaData();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request).getDynamicResultSet().getClassMetaData();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
Entity[] rows = adminEntityService.getRecords(toOnePpr).getRecords();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
ClassMetadata foreignClassMd = adminEntityService.getClassMetadata(toOnePpr);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
ClassMetadata collectionMetadata = adminEntityService.getClassMetadata(request);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
List<Class<?>> testClasses = new ArrayList<Class<?>>();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
String overrideClass = listClass.getName();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
String entityType = entityForm.getEntityType();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
String entityType = entityForm.getEntityType();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
public Entity add(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
public Entity update(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
public void remove(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
protected List<ListGridAction> modalRowActions = new ArrayList<ListGridAction>();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
public enum SelectType {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
* and are thus shown on the screen,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
public List<ListGridAction> getActiveModalRowActions() {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
public boolean eval(ListGridAction action) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
public ListGridAction findModalRowAction(String actionId) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
public List<ListGridAction> getModalRowActions() {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
"""[%s], collection entity id [%s]"", containingClassMetadata.getCeilingType(),",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
for (Property p : cmd.getProperties()) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
for (Property p : cmd.getProperties()) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
"protected void setEntityFormFields(EntityForm ef, List<Property> properties) {",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
"String parentId, boolean isViewCollectionItem, EntityForm ef)",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
"String parentId, EntityForm ef)",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
// format date list grid cells,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
"SimpleDateFormat formatter = new SimpleDateFormat(""MMM d, Y @ hh:mma"");",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
DateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
"Date date = new SimpleDateFormat(""yyyy.MM.dd HH:mm:ss"").parse(recordField.getValue());",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
String newValue = formatter.format(date);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
BasicFieldMetadata md = (BasicFieldMetadata) p.getMetadata();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
List<Property> properties = getPropertiesFromEntityForm(entityForm);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
List<Field> headerFields = new ArrayList<>();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
ArrayList<FieldDTO> defaultWrapperFields = new ArrayList<>();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
"Map<String, String> enumMap = new HashMap<>();",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
"Map<String, String> options = new HashMap<>();",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
List<Property> entityFormProperties = new ArrayList<>();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
mapFormProperties = new ArrayList<>();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
mapFormProperties = new ArrayList<>(Arrays.asList(cmd.getProperties()));,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,0
List<Field> headerFields = new ArrayList<Field>();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
ArrayList<FieldDTO> defaultWrapperFields = new ArrayList<FieldDTO>();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
"Map<String, String> enumMap = new HashMap<String, String>();",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
"Map<String, String> options = new HashMap<String, String>();",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
List<Property> entityFormProperties = new ArrayList<Property>();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
mapFormProperties = new ArrayList<Property>();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
mapFormProperties = new ArrayList<Property>(Arrays.asList(cmd.getProperties()));,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,2,1
if (p.getMetadata() instanceof BasicFieldMetadata) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
public PersistenceResponse getClassMetadata(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
PersistenceResponse response = inspect(request);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
return response;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
PersistenceResponse response = fetch(request);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
"public PersistenceResponse addEntity(EntityForm entityForm, String[] customCriteria)",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
"public PersistenceResponse updateEntity(EntityForm entityForm, String[] customCriteria)",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
PersistenceResponse response = update(ppr);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
"public PersistenceResponse removeEntity(EntityForm entityForm, String[] customCriteria)",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
return remove(ppr);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
response = fetch(ppr);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
if (response == null) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
PersistenceResponse response = getClassMetadata(ppr);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
"PersistenceResponse response2 = getRecordsForCollection(cmd, containingEntity, p, null, null, null);",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
"if (sectionField.contains(""."")) {",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
"sectionField = sectionField.substring(0, sectionField.lastIndexOf("".""));",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
return service.remove(pkg);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
return cmd;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
return entity;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
return returnEntity;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
if (entity == null) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
"DynamicResultSet drs = getRecordsForCollection(cmd, containingEntity, p, null, null, null);",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
protected Entity add(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
protected Entity update(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
protected void remove(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
DynamicResultSet drs = adminEntityService.getRecords(ppr).getDynamicResultSet();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
DynamicResultSet drs = adminEntityService.getRecords(ppr);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
"@Resource(name = ""blEntityConfiguration"")",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
Class<?> listClass = Class.forName(fmd.getCollectionCeilingEntity());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
if (!listClass.isInterface()) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
for (Class<?> clazz : testClasses) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
try {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
overrideClass = entityConfiguration.lookupEntityClass(clazz.getName()).getName();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
} catch (NoSuchBeanDefinitionException e) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
ppr.getEntity().setType(new String[] { overrideClass });,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
ppr.getEntity().setType(new String[] { fmd.getCollectionCeilingEntity() });,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
if (StringUtils.isEmpty(entityType)) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
entityType = entityForm.getCeilingEntityClassname();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
entity.setType(new String[] { entityType });,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
entity.setType(new String[] { entityForm.getEntityType() });,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
if (StringUtils.isEmpty(entityType)) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
entityType = entityForm.getCeilingEntityClassname();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
entity.setType(new String[] { entityType });,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
entity.setType(new String[] { entityForm.getEntityType() });,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
public DynamicResultSet inspect(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
public DynamicResultSet fetch(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
protected Entity add(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
protected Entity update(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
protected void remove(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
// These actions will start greyed out and unable to be clicked until a specific row has been selected,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
protected String listGridSelectType;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
return action.getForListGridReadOnly().equals(getReadOnly());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
for (ListGridAction action : getModalRowActions()) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
if (action.getActionId().equals(actionId)) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
return action;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
return null;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
this.listGridSelectType = listGridSelectType.toString().toLowerCase();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
this.listGridSelectType = listGridSelectType;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
return modalRowActions;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
this.modalRowActions = modalRowActions;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
return listGridSelectType;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
boolean modalSingleSelectable = false;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
boolean modalMultiSelectable = false;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
modalSingleSelectable = true;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
} else {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
modalMultiSelectable = true;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
if (modalSingleSelectable) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
if (modalMultiSelectable) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
if (ArrayUtils.isEmpty(entities)) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
throw new EntityNotFoundException();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
if (entities == null || entities.length != 1) throw new EntityNotFoundException();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
if (response == null) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
"collectionProperty.getName(), containingEntityId, collectionItemId));",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
if (bcm.getAddMethodType().equals(AddMethodType.SELECTIZE_LOOKUP)) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
if (p != null) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
} else {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
if (p.getMetadata() instanceof BasicFieldMetadata) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
"&& !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
if (atcmd.getAdornedTargetAddMethodType().equals(AdornedTargetAddMethodType.SELECTIZE_LOOKUP)) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
selectize = true;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
for (String fieldName : atcmd.getGridVisibleFields()) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
if (selectize && (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM)) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
} else if (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
} else if (selectize && type == ListGrid.Type.BASIC) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
if (p.getMetadata() instanceof BasicFieldMetadata) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
"&& !ArrayUtils.contains(getGridHiddenVisibilities(), md.getVisibility())) {",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
for (String fieldName : atcmd.getGridVisibleFields()) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
if (atcmd.getAdornedTargetAddMethodType().equals(AdornedTargetAddMethodType.SELECTIZE_LOOKUP)) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
selectize = true;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
if (type == ListGrid.Type.ADORNED || type == ListGrid.Type.ADORNED_WITH_FORM) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
"String parentId, boolean isViewCollectionItem)",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
"return buildAdornedListForm(adornedMd, adornedList, parentId, isViewCollectionItem, ef);",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
if (isViewCollectionItem) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
} else {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
for (String targetFieldName : adornedMd.getMaintainedAdornedTargetFields()) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
if (p.getMetadata() instanceof BasicFieldMetadata) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
String parentId),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
"return buildAdornedListForm(adornedMd, adornedList, parentId, ef);",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
for (String targetFieldName : adornedMd.getMaintainedAdornedTargetFields()) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
if (p.getMetadata() instanceof BasicFieldMetadata) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
"symbols.setAmPmStrings(new String[] { ""am"", ""pm"" });",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
"if (headerField.getFieldType().equals(""DATE"")) {",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
try {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
} catch (Exception ex) {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
} else {,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
ppr.getEntity().setType(new String[] { fmd.getTargetClass() });,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
entity.setType(new String[] { fmd.getCollectionCeilingEntity() });,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
entity.setType(new String[] { adornedList.getAdornedTargetEntityClassname() });,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
entity.setType(new String[] { fmd.getTargetClass() });,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
"for (Entry<String, Field> entry : entityForm.getFields().entrySet()) {",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,1
"@Resource(name = ""blExploitProtectionService"")",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,1,0
((BasicFieldMetadata) p.getMetadata()).setVisibility(VisibilityEnum.VISIBLE_ALL);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
entityFormProperties.add(p);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
},824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
((BasicFieldMetadata) p.getMetadata()).setVisibility(VisibilityEnum.VISIBLE_ALL);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
entityFormProperties.add(p);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.server.service.persistence.PersistenceResponse;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.annotation.Resource;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.persistence.NoResultException;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
PersistenceResponse response;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
response.setEntity(e);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
"map.put(p.getName(), response2.getDynamicResultSet());",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
ppr.setSectionEntityClassname(mainMetadata.getCeilingType());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
"ppr.setSectionEntityIdValue(getContextSpecificRelationshipId(mainMetadata, parentEntity, """"));",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
},824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
ppr.setSectionEntityField(sectionField);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
protected PersistenceResponse add(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
protected PersistenceResponse update(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
protected PersistenceResponse inspect(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
protected PersistenceResponse remove(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
protected PersistenceResponse fetch(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.annotation.Resource;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.persistence.NoResultException;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
remove(ppr);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
"map.put(p.getName(), drs);",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
protected DynamicResultSet inspect(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
service.remove(pkg);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
protected DynamicResultSet fetch(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
},824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.annotation.Resource;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.annotation.Resource;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.ArrayList;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.util.Arrays;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.util.HashMap;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.util.List;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.util.ListIterator;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.util.Map;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.util.Map.Entry;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.annotation.Resource;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.persistence.EntityManager;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.persistence.NoResultException;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.persistence.PersistenceContext;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import org.broadleafcommerce.common.persistence.EntityConfiguration;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import org.springframework.beans.factory.NoSuchBeanDefinitionException;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
protected EntityConfiguration entityConfiguration;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
"//try to find an override, if available",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
testClasses.add(listClass);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
testClasses.addAll(Arrays.asList(listClass.getInterfaces()));,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
},824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
break;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
//no override defined,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.util.ArrayList;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.Arrays;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.HashMap;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.List;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.ListIterator;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.Map;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.Map.Entry;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.annotation.Resource;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.persistence.EntityManager;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.persistence.NoResultException;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.persistence.PersistenceContext;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.apache.commons.lang3.StringUtils;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
},824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import org.apache.commons.lang3.StringUtils;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
},824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.util.ArrayList;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.util.Arrays;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.util.HashMap;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.util.List;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.util.ListIterator;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.util.Map;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.util.Map.Entry;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.annotation.Resource;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.persistence.EntityManager;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.persistence.NoResultException;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.persistence.PersistenceContext;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
@Override,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.util.ArrayList;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.Arrays;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.HashMap;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.List;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.ListIterator;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.Map;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.Map.Entry;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.annotation.Resource;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.persistence.EntityManager;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.persistence.NoResultException;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.persistence.PersistenceContext;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
protected DynamicResultSet inspect(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
protected DynamicResultSet fetch(PersistencePackageRequest request),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
"SINGLE_SELECT,",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
"MULTI_SELECT,",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
},824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
/**,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
*/,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
"@SuppressWarnings(""unchecked"")",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
@Override,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
});,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
getModalRowActions().add(action);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
getModalRowActions().clear();,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
"INLINE,",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
"INLINEMULTI,",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.web.form.component.ListGridAction;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
listGrid.addModalRowAction(DefaultListGridActions.SINGLE_SELECT);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
},824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
listGrid.setListGridSelectType(ListGrid.SelectType.SINGLE_SELECT);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
listGrid.addModalRowAction(DefaultListGridActions.MULTI_SELECT);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
listGrid.setListGridSelectType(ListGrid.SelectType.MULTI_SELECT);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
listGrid.setListGridType(ListGrid.Type.INLINE);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
},824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import org.springframework.util.Assert;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.persistence.NoResultException;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
},824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
headerFields.add(hf);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
},824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
if (md.isProminent() != null && md.isProminent(),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
"message += "" Please configure 'selectizeVisibleField' in your @AdminPresentationAdornedTargetCollection configuration"";",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
"message += "" Please configure 'selectizeVisibleField' in your @AdminPresentationCollection configuration"";",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
if (md.isProminent() != null && md.isProminent(),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
headerFields.add(hf);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
},824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
"ef.addField(cmd, f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabOrder());",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
"setEntityFormFields(cmd, ef, Arrays.asList(cmd.getProperties()));",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
"setEntityFormFields(collectionMetadata, ef, entityFormProperties);",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
"ef.addHiddenField(collectionMetadata, f);",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
"ef.addMapKeyField(cmd, keyField);",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
"setEntityFormFields(cmd, ef, mapFormProperties);",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
"ef.addHiddenField(cmd, f);",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
"ef.addField(f, fmd.getGroup(), fmd.getGroupOrder(), fmd.getTab(), fmd.getTabOrder());",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
"setEntityFormFields(ef, Arrays.asList(cmd.getProperties()));",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
"setEntityFormFields(ef, entityFormProperties);",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
ef.addHiddenField(f);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
ef.addMapKeyField(keyField);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
"setEntityFormFields(ef, mapFormProperties);",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.Collections;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
"Collections.addAll(entityFormProperties, collectionMetadata.getProperties());",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
((BasicFieldMetadata) p.getMetadata()).setVisibility(VisibilityEnum.VISIBLE_ALL);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
entityFormProperties.add(p);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
},824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
((BasicFieldMetadata) p.getMetadata()).setVisibility(VisibilityEnum.VISIBLE_ALL);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
entityFormProperties.add(p);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import com.fasterxml.jackson.core.Version;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import com.fasterxml.jackson.databind.ObjectMapper;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import com.fasterxml.jackson.databind.module.SimpleModule;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import org.broadleafcommerce.common.presentation.client.*;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import org.broadleafcommerce.openadmin.dto.*;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import org.broadleafcommerce.openadmin.web.form.component.*;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import org.broadleafcommerce.openadmin.web.form.entity.*;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.annotation.Resource;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.persistence.ManyToOne;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.persistence.OneToOne;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.servlet.http.HttpServletRequest;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.text.DateFormatSymbols;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.text.SimpleDateFormat;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import java.util.*;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
formatter.setDateFormatSymbols(symbols);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
recordField.setValue(newValue);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
recordField.setValue(p.getValue());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
},824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import org.broadleafcommerce.common.presentation.client.AddMethodType;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.common.presentation.client.AdornedTargetAddMethodType;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.common.presentation.client.LookupType;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.common.presentation.client.SupportedFieldType;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.common.presentation.client.VisibilityEnum;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.dto.AdornedTargetList;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.dto.ClassMetadata;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.dto.ClassTree;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.dto.CollectionMetadata;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.dto.DynamicResultSet;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.dto.Entity;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.dto.FieldMetadata;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.dto.ForeignKey;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.dto.MapMetadata;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.dto.MapStructure;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.dto.Property;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.dto.SectionCrumb;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.dto.TabMetadata;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.web.form.component.ListGrid;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.web.form.component.ListGridAction;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.web.form.component.ListGridRecord;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.web.form.component.MediaField;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.web.form.component.RuleBuilderField;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.web.form.entity.CodeField;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.web.form.entity.ComboField;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.web.form.entity.DynamicEntityFormInfo;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.web.form.entity.Field;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import com.fasterxml.jackson.core.Version;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import com.fasterxml.jackson.databind.ObjectMapper;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import com.fasterxml.jackson.databind.module.SimpleModule;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.ArrayList;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.Arrays;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.Collections;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.Date;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.HashMap;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.List;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.Map;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import java.util.Set;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.annotation.Resource;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.persistence.ManyToOne;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.persistence.OneToOne;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.servlet.http.HttpServletRequest;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
recordField.setValue(p.getValue());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
if (p != null){,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
headerFields.add(hf);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
"wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
},824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
headerFields.add(hf);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
"wrapper.getFields().add(constructFieldDTOFromFieldData(hf, md));",824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withEntity(new Entity());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
ppr.getEntity().setType(new String[]{fmd.getCollectionCeilingEntity()});,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
ppr.getEntity().setType(new String[]{adornedList.getAdornedTargetEntityClassname()});,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
ppr.setCeilingEntityClassname(ppr.getEntity().getType()[0]);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withEntity(entity);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
p.setName(entry.getKey());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
p.setValue(entry.getValue().getValue());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
properties.add(p);,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
},824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierConfiguration;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import com.fasterxml.jackson.core.Version;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import com.fasterxml.jackson.databind.ObjectMapper;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import com.fasterxml.jackson.databind.module.SimpleModule;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.annotation.Resource;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.persistence.ManyToOne;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.persistence.OneToOne;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import javax.servlet.http.HttpServletRequest;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
if (allowNoValueEnum != null){,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
import com.fasterxml.jackson.core.Version;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import com.fasterxml.jackson.databind.ObjectMapper;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import com.fasterxml.jackson.databind.module.SimpleModule;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.openadmin.server.security.service.EntityFormModifierConfiguration;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.annotation.Resource;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.persistence.ManyToOne;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.persistence.OneToOne;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import javax.servlet.http.HttpServletRequest;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
if(allowNoValueEnum != null){,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withFieldType(fieldType),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withFieldComponentRenderer(fmd.getFieldComponentRenderer()==null?null:fmd.getFieldComponentRenderer().toString()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withOrder(fmd.getOrder()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withFriendlyName(fmd.getFriendlyName()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withForeignKeyClass(fmd.getForeignKeyClass()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass())),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheritedFromType()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withRequired(required),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withReadOnly(fmd.getReadOnly()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withTranslatable(fmd.getTranslatable()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDERING)),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withLargeEntry(fmd.isLargeEntry()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withHint(fmd.getHint()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withTooltip(fmd.getTooltip()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withHelp(fmd.getHelpText()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withTypeaheadEnabled(fmd.getEnableTypeaheadLookup()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withFieldType(fieldType),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withFieldComponentRenderer(fmd.getFieldComponentRenderer()==null?null:fmd.getFieldComponentRenderer().toString()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withOrder(fmd.getOrder()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withFriendlyName(fmd.getFriendlyName()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withForeignKeyClass(fmd.getForeignKeyClass()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass())),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheritedFromType()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withRequired(required),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withReadOnly(fmd.getReadOnly()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withTranslatable(fmd.getTranslatable()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDERING)),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withLargeEntry(fmd.isLargeEntry()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withHint(fmd.getHint()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withTooltip(fmd.getTooltip()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withHelp(fmd.getHelpText()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withTypeaheadEnabled(fmd.getEnableTypeaheadLookup());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getTargetClass()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withFieldType(fieldType),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withFieldComponentRenderer(fmd.getFieldComponentRenderer()==null?null:fmd.getFieldComponentRenderer().toString()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withOrder(fmd.getOrder()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withFriendlyName(fmd.getFriendlyName()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withForeignKeyClass(fmd.getForeignKeyClass()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass())),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheritedFromType()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withRequired(required),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withReadOnly(fmd.getReadOnly()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withTranslatable(fmd.getTranslatable()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDERING)),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withLargeEntry(fmd.isLargeEntry()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withHint(fmd.getHint()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withTooltip(fmd.getTooltip()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withHelp(fmd.getHelpText()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withTypeaheadEnabled(fmd.getEnableTypeaheadLookup()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
.withOwningEntityClass(fmd.getOwningClass() != null ? fmd.getOwningClass() : fmd.getTargetClass());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withFieldType(fieldType),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withFieldComponentRenderer(fmd.getFieldComponentRenderer()==null?null:fmd.getFieldComponentRenderer().toString()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withOrder(fmd.getOrder()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withFriendlyName(fmd.getFriendlyName()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withForeignKeyDisplayValueProperty(fmd.getForeignKeyDisplayValueProperty()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withForeignKeyClass(fmd.getForeignKeyClass()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withForeignKeySectionPath(getAdminSectionPath(fmd.getForeignKeyClass())),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withOwningEntityClass(fmd.getOwningClass()!=null?fmd.getOwningClass():fmd.getInheritedFromType()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withRequired(required),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withReadOnly(fmd.getReadOnly()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withTranslatable(fmd.getTranslatable()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withAlternateOrdering((Boolean) fmd.getAdditionalMetadata().get(Field.ALTERNATE_ORDERING)),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withLargeEntry(fmd.isLargeEntry()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withHint(fmd.getHint()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withTooltip(fmd.getTooltip()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withHelp(fmd.getHelpText()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withTypeaheadEnabled(fmd.getEnableTypeaheadLookup()),824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
.withCanLinkToExternalEntity(fmd.getCanLinkToExternalEntity());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
import org.broadleafcommerce.common.security.service.ExploitProtectionService;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
ExploitProtectionService exploitProtectionService;,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
ef.setMainEntityName(exploitProtectionService.htmlDecode(p.getValue()));,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
field.setValue(exploitProtectionService.htmlDecode(entityProp.getValue()));,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
field.setValue(basicFM.isLargeEntry() ? entityProp.getValue() : exploitProtectionService.htmlDecode(entityProp.getValue()));,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,0
ef.setMainEntityName(p.getValue());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
field.setValue(entityProp.getValue());,824d3ac5e805fbc4d0ccfc503adbc290a1d0521e,0,1
Entity entity = new Entity();,0a6b890c4cde078866f7bb7056300c5a367542a7,3,1
entity.setType(new String[] { fmd.getCollectionCeilingEntity() });,0a6b890c4cde078866f7bb7056300c5a367542a7,2,1
entity.setType(new String[] { adornedList.getAdornedTargetEntityClassname() });,0a6b890c4cde078866f7bb7056300c5a367542a7,2,1
entity.setType(new String[] { fmd.getTargetClass() });,0a6b890c4cde078866f7bb7056300c5a367542a7,2,1
ppr.getEntity().setType(new String[] { fmd.getTargetClass() });,0a6b890c4cde078866f7bb7056300c5a367542a7,1,0
.withEntity(new Entity());,0a6b890c4cde078866f7bb7056300c5a367542a7,0,0
ppr.getEntity().setType(new String[]{fmd.getCollectionCeilingEntity()});,0a6b890c4cde078866f7bb7056300c5a367542a7,0,0
ppr.getEntity().setType(new String[]{adornedList.getAdornedTargetEntityClassname()});,0a6b890c4cde078866f7bb7056300c5a367542a7,0,0
ppr.setCeilingEntityClassname(ppr.getEntity().getType()[0]);,0a6b890c4cde078866f7bb7056300c5a367542a7,0,0
.withEntity(entity);,0a6b890c4cde078866f7bb7056300c5a367542a7,0,1
"@OneToMany(mappedBy = ""product"", targetEntity = SkuAttributeImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,5,0
"@OneToMany(mappedBy = ""product"", targetEntity = ProductAttributeImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,5,1
"@OneToMany(mappedBy = ""product"", targetEntity = CrossSaleProductImpl.class, cascade = { CascadeType.ALL })",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,5,1
"@OneToMany(mappedBy = ""product"", targetEntity = UpSaleProductImpl.class, cascade = { CascadeType.ALL })",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,5,1
"@OneToMany(mappedBy = ""product"", targetEntity = ProductAttributeImpl.class, cascade = { CascadeType.ALL }, orphanRemoval = true)",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,5,1
"@OneToMany(mappedBy = ""product"", targetEntity = ProductAttributeImpl.class, cascade = {CascadeType.ALL}, orphanRemoval = true)",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,4,0
"configurationItems = { @ConfigurationItem(itemName = ConfigurationItem.ERROR_MESSAGE, itemValue = ""This URL is already in use. Please provide a unique URL."")",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,4,1
"@OneToOne(targetEntity = SkuImpl.class, cascade = { CascadeType.ALL })",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,4,1
"@Index(name = ""PRODUCT_CATEGORY_INDEX"", columnNames = { ""DEFAULT_CATEGORY_ID"" })",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,4,1
"tab = TabName.Advanced, order = 1000,",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,3,0
"gridVisibleFields = { ""name"", ""value"" })",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,3,0
"deleteEntityUponRemove = true, forceFreeFormKeys = true, keyPropertyFriendlyName = ""ProductAttributeImpl_Attribute_Name"")",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,3,1
"@OneToMany(mappedBy = ""product"", targetEntity = CrossSaleProductImpl.class, cascade = {CascadeType.ALL})",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,3,0
"@OneToMany(mappedBy = ""product"", targetEntity = UpSaleProductImpl.class, cascade = {CascadeType.ALL})",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,3,0
"group = GroupName.General, order = FieldOrder.URL,",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,3,1
"prominent = true, gridOrder = 3, columnWidth = ""260px"",",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,3,1
"validationConfigurations = { @ValidationConfiguration(validationImplementation = ""blUriPropertyValidator""),",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,3,1
@Cascade(value = { org.hibernate.annotations.CascadeType.ALL }),b5f116ae0dcfab45ff865c4bb5f96594868e1d38,3,1
"@Cascade(value = { org.hibernate.annotations.CascadeType.ALL, org.hibernate.annotations.CascadeType.DELETE_ORPHAN })",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,3,1
"gridVisibleFields = { ""defaultSku.name"", ""promotionMessage"" })",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,3,1
"cascade = { CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH })",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,3,1
"gridVisibleFields = { ""name"" })",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,3,1
"gridVisibleFields = { ""name"", ""type"", ""required"" })",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,3,1
public Money getSalePrice() {,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,3,0
public Money getSalePrice() {,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,3,1
for (ProductAttribute productAttribute : productAttributes) {,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
"public Map<String, ProductAttribute> getMultiValueProductAttributes() {",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
"for (Map.Entry<String, ProductAttribute> entry : getProductAttributes().entrySet()) {",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
"@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = ""blProducts"")",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
"tab = TabName.General,",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
"for (Map.Entry<String, ProductAttribute> entry : productAttributes.entrySet()) {",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
"@AdminPresentationMergeOverride(name = ""defaultSku.displayTemplate"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
"@AdminPresentationMergeOverride(name = ""defaultSku.urlKey"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
"@AdminPresentationMergeOverride(name = ""defaultSku.retailPrice"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
"@AdminPresentationMergeOverride(name = ""defaultSku.name"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
"@AdminPresentationMergeOverride(name = ""defaultSku.activeEndDate"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
configurationItems = {,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
"@ConfigurationItem(itemName = ""otherField"", itemValue = ""defaultSku.activeStartDate"")",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
"@AdminPresentationMergeOverride(name = ""defaultSku.auditable.createdBy"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
"@AdminPresentationMergeOverride(name = ""defaultSku.auditable.dateCreated"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
"@AdminPresentationMergeOverride(name = ""defaultSku.auditable.dateUpdated"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
"@AdminPresentationMergeOverride(name = ""defaultSku.auditable.updatedBy"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
"group = GroupName.General,",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
validationConfigurations = {,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
"@OneToOne(targetEntity = SkuImpl.class, cascade = {CascadeType.ALL})",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
"@Index(name = ""PRODUCT_CATEGORY_INDEX"", columnNames = {""DEFAULT_CATEGORY_ID""})",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
"@Cache(usage = CacheConcurrencyStrategy.READ_WRITE, region = ""blProducts"")",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
"columnNames = { ""URL"", ""URL_KEY"" }",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
"@AdminPresentationMergeOverride(name = ""defaultSku.displayTemplate"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
"@AdminPresentationMergeOverride(name = ""defaultSku.urlKey"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
"@AdminPresentationMergeOverride(name = ""defaultSku.retailPrice"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
"@AdminPresentationMergeOverride(name = ""defaultSku.name"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
"@AdminPresentationMergeOverride(name = ""defaultSku.activeEndDate"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
configurationItems = {,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
"@ConfigurationItem(itemName = ""otherField"", itemValue = ""defaultSku.activeStartDate"")",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
"@AdminPresentationMergeOverride(name = ""defaultSku.auditable.createdBy"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
"@AdminPresentationMergeOverride(name = ""defaultSku.auditable.dateCreated"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
"@AdminPresentationMergeOverride(name = ""defaultSku.auditable.dateUpdated"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
"@AdminPresentationMergeOverride(name = ""defaultSku.auditable.updatedBy"", mergeEntries =",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
/** The Constant serialVersionUID. */,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
/** The id. */,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
"maintainedAdornedTargetFields = { ""promotionMessage"" },",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
protected Money getRetailPriceInternal() {,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
protected Money getSalePriceInternal() {,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,0
return getRetailPrice();,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,2,1
"@AdminPresentationAdornedTargetCollection(friendlyName = ""productAttributesTitle"",",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"targetObjectProperty = ""product"",",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
protected List<ProductAttribute> productAttributes = new ArrayList<ProductAttribute>();,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"Map<String, ProductAttribute> attributeMap = new HashMap<String, ProductAttribute>();",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
return attributeMap;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"Map<String, ProductAttribute> multiValueMap = new MultiValueMap();",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
return multiValueMap;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
List<ProductAttribute> productAttributeList = new ArrayList<ProductAttribute>();,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
this.productAttributes = productAttributeList;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"@MapKey(name = ""name"")",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,1
"@AdminPresentationMap(friendlyName = ""productAttributesTitle"",",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,1
"protected Map<String, ProductAttribute> productAttributes = new HashMap<String, ProductAttribute>();",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,1
return productAttributes;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,1
this.productAttributes = productAttributes;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,1
*,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"columnNames = {""URL"", ""URL_KEY""}",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
{,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"validationImplementation = ""blAfterStartDateValidator"",",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
}),b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
/**,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
* The Constant serialVersionUID.,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
*/,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
* The id.,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"friendlyName = ""ProductImpl_Product_Url"",",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"order = FieldOrder.URL,",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"prominent = true,",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"gridOrder = 3,",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"columnWidth = ""260px"",",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"@ValidationConfiguration(validationImplementation = ""blUriPropertyValidator""),",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"validationImplementation = ""blUniqueValueValidator"",",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"itemName = ConfigurationItem.ERROR_MESSAGE,",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"itemValue = ""This URL is already in use. Please provide a unique URL.""",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
@Cascade(value = {org.hibernate.annotations.CascadeType.ALL}),b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"@Cascade(value = {org.hibernate.annotations.CascadeType.ALL, org.hibernate.annotations.CascadeType.DELETE_ORPHAN})",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"maintainedAdornedTargetFields = {""promotionMessage""},",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"gridVisibleFields = {""defaultSku.name"", ""promotionMessage""})",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"cascade = {CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"gridVisibleFields = {""name""})",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
"gridVisibleFields = {""name"", ""type"", ""required""})",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
while (it.hasNext()) {,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
{,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,1
"validationImplementation = ""blAfterStartDateValidator"",",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,1
}),b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,1
"@AdminPresentation(friendlyName = ""ProductImpl_Product_Url"",",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,1
"@ValidationConfiguration(validationImplementation = ""blUniqueValueValidator"",",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,1
return getRetailPriceInternal();,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
return getSalePriceInternal();,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
if (defaultSku == null) {,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
return null;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
} else {,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
return defaultSku.getSalePrice();,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,1,0
import org.apache.commons.collections.map.MultiValueMap;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
"@Cache(usage=CacheConcurrencyStrategy.NONSTRICT_READ_WRITE, region=""blProducts"")",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
@Deprecated,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
"attributeMap.put(productAttribute.getName(), productAttribute);",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
},b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
@Override,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
"multiValueMap.put(productAttribute.getName(), productAttribute);",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
"for(Map.Entry<String, ProductAttribute> entry : productAttributes.entrySet()){",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
productAttributeList.add(entry.getValue());,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
import java.math.BigDecimal;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
import java.util.ArrayList;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
import java.util.Collections;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
import java.util.Comparator;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
import java.util.Date;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
import java.util.HashMap;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
import java.util.HashSet;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
import java.util.Iterator;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
import java.util.List;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
import java.util.Map;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
import java.util.Set;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
@ValidationConfiguration(,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
@AdminPresentation(,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
@ConfigurationItem(,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
),b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
},b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
"),",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
productAttributeList.addAll((List) productAttributes.get(theKey));,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
import org.broadleafcommerce.common.presentation.AdminPresentationMap;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
import java.math.BigDecimal;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
import java.util.ArrayList;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
import java.util.Collection;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
import java.util.Collections;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
import java.util.Comparator;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
import java.util.Date;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
import java.util.HashMap;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
import java.util.HashSet;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
import java.util.Iterator;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
import java.util.List;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
import java.util.Map;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
import java.util.Set;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
import javax.persistence.MapKey;,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
@ValidationConfiguration(,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
"}),",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
"@Cache(usage=CacheConcurrencyStrategy.READ_WRITE, region=""blProducts"")",b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
while(it.hasNext()){,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
productAttributeList.addAll((List)productAttributes.get(theKey));,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
},b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
@Override,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,0
@Override,b5f116ae0dcfab45ff865c4bb5f96594868e1d38,0,1
// Only set totals and line items when in a Payment flow,e014c889a02fe035ca823d9c0b3b8b4335e6651a,4,1
"populateTotals(order, requestDTO);",e014c889a02fe035ca823d9c0b3b8b4335e6651a,2,0
"populateDefaultLineItemsAndSubtotal(order, requestDTO);",e014c889a02fe035ca823d9c0b3b8b4335e6651a,2,0
"populateTotals(order, requestDTO);",e014c889a02fe035ca823d9c0b3b8b4335e6651a,2,1
"populateDefaultLineItemsAndSubtotal(order, requestDTO);",e014c889a02fe035ca823d9c0b3b8b4335e6651a,2,1
// AND where the order does not contain multiple final payments. (e.g. multiple credit cards),e014c889a02fe035ca823d9c0b3b8b4335e6651a,1,0
* determine whether or not this order contains multiple final payments.,e014c889a02fe035ca823d9c0b3b8b4335e6651a,1,0
* @param order,e014c889a02fe035ca823d9c0b3b8b4335e6651a,1,0
for (OrderPayment payment : order.getPayments()) {,e014c889a02fe035ca823d9c0b3b8b4335e6651a,1,0
Order order = paymentTransaction.getOrderPayment().getOrder();,e014c889a02fe035ca823d9c0b3b8b4335e6651a,1,1
// AND where the order does not contain multiple final payments. (e.g. multiple credit cards),e014c889a02fe035ca823d9c0b3b8b4335e6651a,1,1
* determine whether or not this order contains multiple final payments.,e014c889a02fe035ca823d9c0b3b8b4335e6651a,1,1
* @param order,e014c889a02fe035ca823d9c0b3b8b4335e6651a,1,1
for (OrderPayment payment : order.getPayments()) {,e014c889a02fe035ca823d9c0b3b8b4335e6651a,1,1
// thus the check to prevent incorrect payment totals,e014c889a02fe035ca823d9c0b3b8b4335e6651a,1,0
"// (i.e. where the transaction is meant to be charged, UNCONFIRMED -> AUTHORIZE or UNCONFIRMED -> AUTHORIZE_AND_CAPTURE)",e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
"// - If in a REFUND flow or paying with multiple final payments,",e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
//   you cannot use the total after applied payments convenience method.,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
// - The amounts to be sent to the gateway are the amounts passed in.,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
if (PaymentTransactionType.UNCONFIRMED.equals(paymentTransaction.getType()) &&,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
!orderContainsMultipleFinalPayments(order)) {,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
/**,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
* (e.g. paying with multiple credit cards),e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
* @return,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
*/,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
protected boolean orderContainsMultipleFinalPayments(Order order) {,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
int finalPaymentCount = 0;,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
if (payment.isActive() && payment.isFinalPayment()) {,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
finalPaymentCount++;,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
},e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
return finalPaymentCount > 1;,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
if (PaymentTransactionType.UNCONFIRMED.equals(paymentTransaction.getType())) {,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
"public PaymentRequestDTO translatePaymentTransaction(Money transactionAmount, PaymentTransaction paymentTransaction) {",e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
"return translatePaymentTransaction(transactionAmount, paymentTransaction, false);",e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
},e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
@Override,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
"public PaymentRequestDTO translatePaymentTransaction(Money transactionAmount, PaymentTransaction paymentTransaction, boolean autoCalculateFinalPaymentTotals) {",e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
.transactionTotal(transactionAmount.getAmount().toPlainString()),e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
.orderSubtotal(transactionAmount.getAmount().toPlainString()),e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
.shippingTotal(ZERO_TOTAL),e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
.taxTotal(ZERO_TOTAL),e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
.orderCurrencyCode(paymentTransaction.getOrderPayment().getCurrency().getCurrencyCode()),e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
.orderId(paymentTransaction.getOrderPayment().getOrder().getId().toString());,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
if (autoCalculateFinalPaymentTotals) {,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
import org.broadleafcommerce.common.payment.PaymentAdditionalFieldType;,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
import org.broadleafcommerce.common.payment.PaymentGatewayRequestType;,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
import org.broadleafcommerce.common.payment.PaymentTransactionType;,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
"public PaymentRequestDTO translateStandalonePaymentTransaction(Money transactionAmount, PaymentTransaction paymentTransaction) {",e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
.transactionTotal(transactionAmount.getAmount().toPlainString()),e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
.orderSubtotal(transactionAmount.getAmount().toPlainString()),e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
.shippingTotal(ZERO_TOTAL),e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
.taxTotal(ZERO_TOTAL),e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
.orderCurrencyCode(paymentTransaction.getOrderPayment().getCurrency().getCurrencyCode()),e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
.orderId(paymentTransaction.getOrderPayment().getOrder().getId().toString());,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
@Override,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
"public PaymentRequestDTO translatePaymentTransactionForCheckout(Money transactionAmount, PaymentTransaction paymentTransaction) {",e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
"PaymentRequestDTO requestDTO = translateStandalonePaymentTransaction(transactionAmount, paymentTransaction);",e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
"// (i.e. where the transaction is meant to be charged, UNCONFIRMED -> AUTHORIZE or UNCONFIRMED -> AUTHORIZE_AND_CAPTURE)",e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
"// - If in a REFUND flow OR paying with multiple final payments OR this is a DETACHED_CREDIT request,",e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
//   you cannot use the total after applied payments convenience method.,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
// - The amounts to be sent to the gateway are the amounts passed in.,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
if (PaymentTransactionType.UNCONFIRMED.equals(paymentTransaction.getType()) &&,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
!orderContainsMultipleFinalPayments(order) &&,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
!transactionIsDetachedCreditRequest(paymentTransaction)) {,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
},e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
return requestDTO;,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
/**,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
* (e.g. paying with multiple credit cards),e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
* @return,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
*/,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
protected boolean orderContainsMultipleFinalPayments(Order order) {,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
int finalPaymentCount = 0;,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
if (payment.isActive() && payment.isFinalPayment()) {,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
finalPaymentCount++;,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
return finalPaymentCount > 1;,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
* determine whether or not this transaction is a detached credit request.,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
"* By default, will look at the additional fields map to determine intent",e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
* (as the actual type of the transaction is UNCONFIRMED).,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
* @param transaction,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
protected boolean transactionIsDetachedCreditRequest(PaymentTransaction transaction) {,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
return transaction.getAdditionalFields().containsKey(PaymentGatewayRequestType.DETACHED_CREDIT_REFUND.getType());,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
import org.broadleafcommerce.common.payment.PaymentType;,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
"// At this point in a checkout, CustomerCredit and GiftCards are still Unconfirmed,",e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
if (PaymentTransactionType.UNCONFIRMED.equals(paymentTransaction.getType()) &&,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
paymentTransaction.getOrderPayment().isFinalPayment()) {,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,0
if (PaymentTransactionType.UNCONFIRMED.equals(paymentTransaction.getType())) {,e014c889a02fe035ca823d9c0b3b8b4335e6651a,0,1
"if (fieldManager.getFieldValue(instance, property.getName()) != null && !entity.isPreAdd() && (metadata.getFieldType() != SupportedFieldType.ID || setId) && metadata.getFieldType() != SupportedFieldType.PASSWORD) {",7259b229e290cceef18db8e5fab505f2fcb28bc6,5,1
"MetadataProviderResponse response = fieldPersistenceProvider.populateValue(request, instance);",7259b229e290cceef18db8e5fab505f2fcb28bc6,4,0
if (MetadataProviderResponse.NOT_HANDLED != response) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,4,0
if (MetadataProviderResponse.HANDLED_BREAK == response) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,4,0
if ((mutable == null || mutable) && (readOnly == null || !readOnly) && property.getEnabled()) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,4,1
"MetadataProviderResponse response = fieldPersistenceProvider.populateValue(request, instance);",7259b229e290cceef18db8e5fab505f2fcb28bc6,4,1
if (MetadataProviderResponse.NOT_HANDLED != response) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,4,1
if (MetadataProviderResponse.HANDLED_BREAK == response) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,4,1
if ('Y' == ((Status) media).getArchived()) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,3,0
if (!isBreakDetected || fieldPersistenceProvider.alwaysRun() && (value != null || fieldPersistenceProvider.canHandlePopulateNull())) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,3,0
if (value == null) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,3,0
"Boolean setId, BasicFieldMetadata metadata, Entity entity, String value) throws IllegalAccessException {",7259b229e290cceef18db8e5fab505f2fcb28bc6,3,0
boolean generalConditionsMet = (mutable == null || mutable) && (readOnly == null || !readOnly) && property.getEnabled();,7259b229e290cceef18db8e5fab505f2fcb28bc6,3,0
if (generalConditionsMet && value == null) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,3,0
if (update) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,2,0
response = MetadataProviderResponse.HANDLED_BREAK;,7259b229e290cceef18db8e5fab505f2fcb28bc6,2,0
if (dirty) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,2,1
response = MetadataProviderResponse.HANDLED_BREAK;,7259b229e290cceef18db8e5fab505f2fcb28bc6,2,1
"if (attemptToPopulateValue(property, fieldManager, instance, setId, metadata, entity, value)) {",7259b229e290cceef18db8e5fab505f2fcb28bc6,2,0
if (isValid) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,2,0
if (!handled) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,2,0
"currentValueIsNotNull = fieldManager.getFieldValue(instance, property.getName()) != null;",7259b229e290cceef18db8e5fab505f2fcb28bc6,2,0
boolean valueIsNotNullId = metadata.getFieldType() != SupportedFieldType.ID || setId;,7259b229e290cceef18db8e5fab505f2fcb28bc6,2,0
boolean valueIsNotPassword = metadata.getFieldType() != SupportedFieldType.PASSWORD;,7259b229e290cceef18db8e5fab505f2fcb28bc6,2,0
if (attemptToPopulate) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,2,1
if (!isBreakDetected || fieldPersistenceProvider.alwaysRun()) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,2,1
if (!handled) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,2,1
import org.broadleafcommerce.common.persistence.Status;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
boolean update = false;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
update = false;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
persist = true;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
update = dirty;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
boolean isValid = true;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
"PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd());",7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
handled = false;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
isValid = false;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
try {,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
boolean isBreakDetected = false;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
handled = true;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
isBreakDetected = true;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
"defaultFieldPersistenceProvider.populateValue(new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd()), instance);",7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
} catch (ParentEntityPersistenceException | javax.validation.ValidationException e) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
entityPersistenceException = e;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
"protected boolean attemptToPopulateValue(Property property, FieldManager fieldManager, Serializable instance,",7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
Boolean mutable = metadata.getMutable();,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
Boolean readOnly = metadata.getReadOnly();,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
boolean currentValueIsNotNull = false;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
} catch (FieldNotAvailableException e) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
return currentValueIsNotNull && !entity.isPreAdd() && valueIsNotNullId && valueIsNotPassword;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
return generalConditionsMet;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,0
Boolean mutable = metadata.getMutable();,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
Boolean readOnly = metadata.getReadOnly();,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
handled = false;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
"PopulateValueRequest request = new PopulateValueRequest(setId,",7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
boolean attemptToPopulate = true;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
attemptToPopulate = false;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
try {,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
boolean isBreakDetected = false;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
for (FieldPersistenceProvider fieldPersistenceProvider : fieldPersistenceProviders) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
handled = true;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
isBreakDetected = true;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
"fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd()), instance);",7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
} catch (ParentEntityPersistenceException | javax.validation.ValidationException e) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
entityPersistenceException = e;,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
} else {,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
"PopulateValueRequest request = new PopulateValueRequest(setId, fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd());",7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
"defaultFieldPersistenceProvider.populateValue(request, instance);",7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
} catch (FieldNotAvailableException e) {,7259b229e290cceef18db8e5fab505f2fcb28bc6,1,1
},7259b229e290cceef18db8e5fab505f2fcb28bc6,0,0
"updateMedia(populateValueRequest, newMedia, persist, media);",7259b229e290cceef18db8e5fab505f2fcb28bc6,0,0
"updateMedia(populateValueRequest, newMedia, persist, media);",7259b229e290cceef18db8e5fab505f2fcb28bc6,0,1
},7259b229e290cceef18db8e5fab505f2fcb28bc6,0,1
},7259b229e290cceef18db8e5fab505f2fcb28bc6,0,0
property.setIsDirty(true);,7259b229e290cceef18db8e5fab505f2fcb28bc6,0,0
"fieldManager.setFieldValue(instance, property.getName(), null);",7259b229e290cceef18db8e5fab505f2fcb28bc6,0,0
cleanupFailedPersistenceAttempt(instance);,7259b229e290cceef18db8e5fab505f2fcb28bc6,0,0
break;,7259b229e290cceef18db8e5fab505f2fcb28bc6,0,0
throw new IllegalArgumentException(e);,7259b229e290cceef18db8e5fab505f2fcb28bc6,0,0
"fieldManager, property, metadata, returnType, value, persistenceManager, this, entity.isPreAdd());",7259b229e290cceef18db8e5fab505f2fcb28bc6,0,1
},7259b229e290cceef18db8e5fab505f2fcb28bc6,0,1
"defaultFieldPersistenceProvider.populateValue(new PopulateValueRequest(setId,",7259b229e290cceef18db8e5fab505f2fcb28bc6,0,1
cleanupFailedPersistenceAttempt(instance);,7259b229e290cceef18db8e5fab505f2fcb28bc6,0,1
break;,7259b229e290cceef18db8e5fab505f2fcb28bc6,0,1
property.setIsDirty(true);,7259b229e290cceef18db8e5fab505f2fcb28bc6,0,1
"fieldManager.setFieldValue(instance, property.getName(), null);",7259b229e290cceef18db8e5fab505f2fcb28bc6,0,1
throw new IllegalArgumentException(e);,7259b229e290cceef18db8e5fab505f2fcb28bc6,0,1
public static final int Name = 1000;,a16aeb9158a64c9917bb71669e522043c358b44a,7,0
public static final int Codes = 3000;,a16aeb9158a64c9917bb71669e522043c358b44a,6,0
public static final int Advanced = 4000;,a16aeb9158a64c9917bb71669e522043c358b44a,6,0
public static final int Marketing = 1000;,a16aeb9158a64c9917bb71669e522043c358b44a,6,0
public static final int Description = 2000;,a16aeb9158a64c9917bb71669e522043c358b44a,6,0
public static final int Codes = 2000;,a16aeb9158a64c9917bb71669e522043c358b44a,6,1
public static final int Advanced = 3000;,a16aeb9158a64c9917bb71669e522043c358b44a,6,1
"public static final String General = ""General"";",a16aeb9158a64c9917bb71669e522043c358b44a,6,0
"public static final String General = ""OfferImpl_General_Tab"";",a16aeb9158a64c9917bb71669e522043c358b44a,6,1
"public static final String Marketing = ""OfferImpl_Marketing_Tab"";",a16aeb9158a64c9917bb71669e522043c358b44a,5,0
public static final int Marketing = 2000;,a16aeb9158a64c9917bb71669e522043c358b44a,5,0
"public static final String Marketing = ""OfferImpl_Marketing"";",a16aeb9158a64c9917bb71669e522043c358b44a,5,0
public static final int Message = 3000;,a16aeb9158a64c9917bb71669e522043c358b44a,5,0
public static final int TemplateType = 4000;,a16aeb9158a64c9917bb71669e522043c358b44a,5,0
public static final int Amount = 5000;,a16aeb9158a64c9917bb71669e522043c358b44a,5,0
public static final int OfferType = 5000;,a16aeb9158a64c9917bb71669e522043c358b44a,5,0
public static final int DiscountType = 5000;,a16aeb9158a64c9917bb71669e522043c358b44a,5,0
"group = OfferAdminPresentation.GroupName.ActivityRange, order = 4000,",a16aeb9158a64c9917bb71669e522043c358b44a,4,0
"//            group = OfferAdminPresentation.GroupName.ActivityRange, order = 5000,",a16aeb9158a64c9917bb71669e522043c358b44a,4,0
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Name"", order = FieldOrder.Name,",a16aeb9158a64c9917bb71669e522043c358b44a,4,0
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Description"", order = FieldOrder.Description,",a16aeb9158a64c9917bb71669e522043c358b44a,4,0
"@AdminPresentation(friendlyName = ""OfferImpl_marketingMessage"", order = FieldOrder.Message,",a16aeb9158a64c9917bb71669e522043c358b44a,4,0
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Type"", order = FieldOrder.OfferType,",a16aeb9158a64c9917bb71669e522043c358b44a,4,0
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Discount_Type"", order = FieldOrder.DiscountType,",a16aeb9158a64c9917bb71669e522043c358b44a,4,0
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Value"", order = FieldOrder.Amount,",a16aeb9158a64c9917bb71669e522043c358b44a,4,0
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Name"", order = 1000,",a16aeb9158a64c9917bb71669e522043c358b44a,4,1
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Description"", order = 2000,",a16aeb9158a64c9917bb71669e522043c358b44a,4,1
"@AdminPresentation(friendlyName = ""OfferImpl_marketingMessage"", order = 3000,",a16aeb9158a64c9917bb71669e522043c358b44a,4,1
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Type"", order = 1000,",a16aeb9158a64c9917bb71669e522043c358b44a,4,1
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Discount_Type"", order = 2000,",a16aeb9158a64c9917bb71669e522043c358b44a,4,1
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Value"", order = 3000,",a16aeb9158a64c9917bb71669e522043c358b44a,4,1
"group = GroupName.ActivityRange, order = 3000,",a16aeb9158a64c9917bb71669e522043c358b44a,4,0
"group = OfferAdminPresentation.GroupName.ActivityRange, order = 3000,",a16aeb9158a64c9917bb71669e522043c358b44a,4,1
"order = OfferAdminPresentation.GroupOrder.Codes, borderless = true)",a16aeb9158a64c9917bb71669e522043c358b44a,3,0
"order = OfferAdminPresentation.GroupOrder.Codes, untitled = true)",a16aeb9158a64c9917bb71669e522043c358b44a,3,0
"order = OfferAdminPresentation.GroupOrder.Codes, borderless = true)",a16aeb9158a64c9917bb71669e522043c358b44a,3,1
"order = OfferAdminPresentation.GroupOrder.Marketing, untitled = true)",a16aeb9158a64c9917bb71669e522043c358b44a,3,0
"order = OfferAdminPresentation.GroupOrder.Codes, untitled = true)",a16aeb9158a64c9917bb71669e522043c358b44a,3,0
"order = OfferAdminPresentation.GroupOrder.Codes, untitled = true)",a16aeb9158a64c9917bb71669e522043c358b44a,3,1
"order = OfferAdminPresentation.GroupOrder.Marketing, untitled = true)",a16aeb9158a64c9917bb71669e522043c358b44a,3,1
"order = OfferAdminPresentation.GroupOrder.Codes, untitled = true)",a16aeb9158a64c9917bb71669e522043c358b44a,3,1
"order = OfferAdminPresentation.GroupOrder.Amount),",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"order = OfferAdminPresentation.GroupOrder.Description),",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"@AdminGroupPresentation(order = OfferAdminPresentation.GroupOrder.Codes, borderless = true)",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"//            friendlyName = ""OfferImpl_View_Visibility_Options"", defaultValue = ""false"",",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"prominent =  true, gridOrder = 3,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"group = OfferAdminPresentation.GroupName.ActivityRange,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"order = OfferAdminPresentation.TabOrder.Marketing,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"order = OfferAdminPresentation.TabOrder.Codes,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
public static class FieldOrder {,a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"order = OfferAdminPresentation.TabOrder.Codes,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"largeEntry = true, fieldType = SupportedFieldType.DESCRIPTION)",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"group = GroupName.Marketing,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"group = GroupName.Description,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"group = OfferAdminPresentation.GroupName.Description,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"group = OfferAdminPresentation.GroupName.Description,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"group = OfferAdminPresentation.GroupName.RuleConfiguration,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"visibility = VisibilityEnum.HIDDEN_ALL, defaultValue = ""false"")",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"group = OfferAdminPresentation.GroupName.ShouldBeRelated,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"visibility = VisibilityEnum.VISIBLE_ALL, defaultValue = ""false"")",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"group = OfferAdminPresentation.GroupName.RuleConfiguration,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"group = OfferAdminPresentation.GroupName.Advanced,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
group = OfferAdminPresentation.GroupName.Restrictions),a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"group = OfferAdminPresentation.GroupName.Restrictions,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
group = OfferAdminPresentation.GroupName.Advanced),a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"group = OfferAdminPresentation.GroupName.Usage,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"group = OfferAdminPresentation.GroupName.Advanced,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
group = OfferAdminPresentation.GroupName.Advanced),a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"order = OfferAdminPresentation.GroupOrder.Customer,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"order = OfferAdminPresentation.GroupOrder.ShouldBeRelated,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"order = OfferAdminPresentation.TabOrder.Marketing,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"order = OfferAdminPresentation.GroupOrder.Marketing,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"order = OfferAdminPresentation.TabOrder.Codes,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"order = OfferAdminPresentation.GroupOrder.Codes,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"order = OfferAdminPresentation.GroupOrder.Advanced,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"order = OfferAdminPresentation.GroupOrder.Customer,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"column = 1, collapsed = true),",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"column = 1, collapsed = true)",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"order = OfferAdminPresentation.GroupOrder.ShouldBeRelated,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"column = 1, untitled = true),",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"order = OfferAdminPresentation.TabOrder.Marketing,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"order = OfferAdminPresentation.TabOrder.Codes,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
order = OfferAdminPresentation.GroupOrder.Advanced),a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"group = GroupName.Codes,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"group = GroupName.Description,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
group = GroupName.Advanced),a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"group = GroupName.ActivityRange,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"group = GroupName.CombineStack,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"group = GroupName.Advanced,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
group = GroupName.Restrictions),a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"group = GroupName.QualifierRuleRestriction,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"group = GroupName.TargetRuleRestriction,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"group = GroupName.RuleConfiguration,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"group = GroupName.ShouldBeRelated,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"group = GroupName.Restrictions,",a16aeb9158a64c9917bb71669e522043c358b44a,2,0
"group = OfferAdminPresentation.GroupName.Codes,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"group = OfferAdminPresentation.GroupName.Description,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
group = OfferAdminPresentation.GroupName.Advanced),a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"group = OfferAdminPresentation.GroupName.ActivityRange,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"group = OfferAdminPresentation.GroupName.CombineStack,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"group = OfferAdminPresentation.GroupName.Advanced,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
group = OfferAdminPresentation.GroupName.Restrictions),a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"group = OfferAdminPresentation.GroupName.QualifierRuleRestriction,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"group = OfferAdminPresentation.GroupName.TargetRuleRestriction,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"group = OfferAdminPresentation.GroupName.RuleConfiguration,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"group = OfferAdminPresentation.GroupName.ShouldBeRelated,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"group = OfferAdminPresentation.GroupName.Restrictions,",a16aeb9158a64c9917bb71669e522043c358b44a,2,1
"@AdminGroupPresentation(name = OfferAdminPresentation.GroupName.Codes,",a16aeb9158a64c9917bb71669e522043c358b44a,1,0
"untitled = true),",a16aeb9158a64c9917bb71669e522043c358b44a,1,0
"borderless = true),",a16aeb9158a64c9917bb71669e522043c358b44a,1,1
"//    @AdminPresentation(fieldType = SupportedFieldType.BOOLEAN_LINK,",a16aeb9158a64c9917bb71669e522043c358b44a,1,0
//            visibility = VisibilityEnum.VISIBLE_ALL),a16aeb9158a64c9917bb71669e522043c358b44a,1,0
//    protected Boolean showAdvancedVisibilityOptions = false;,a16aeb9158a64c9917bb71669e522043c358b44a,1,0
"@AdminTabPresentation(name = OfferAdminPresentation.TabName.Marketing,",a16aeb9158a64c9917bb71669e522043c358b44a,1,0
groups = {,a16aeb9158a64c9917bb71669e522043c358b44a,1,0
"@AdminGroupPresentation(name = OfferAdminPresentation.GroupName.Marketing,",a16aeb9158a64c9917bb71669e522043c358b44a,1,0
"@AdminGroupPresentation(name = OfferAdminPresentation.GroupName.Codes,",a16aeb9158a64c9917bb71669e522043c358b44a,1,0
groups = {,a16aeb9158a64c9917bb71669e522043c358b44a,1,1
"@AdminGroupPresentation(name = OfferAdminPresentation.GroupName.Codes,",a16aeb9158a64c9917bb71669e522043c358b44a,1,1
largeEntry = true),a16aeb9158a64c9917bb71669e522043c358b44a,1,1
"tab = TabName.Qualifiers,",a16aeb9158a64c9917bb71669e522043c358b44a,1,0
visibility = VisibilityEnum.HIDDEN_ALL),a16aeb9158a64c9917bb71669e522043c358b44a,1,1
visibility = VisibilityEnum.VISIBLE_ALL),a16aeb9158a64c9917bb71669e522043c358b44a,1,1
"defaultValue = ""true"")",a16aeb9158a64c9917bb71669e522043c358b44a,1,0
protected Boolean applyToSalePrice = true;,a16aeb9158a64c9917bb71669e522043c358b44a,1,0
protected Boolean applyToSalePrice = false;,a16aeb9158a64c9917bb71669e522043c358b44a,1,1
"@AdminGroupPresentation(name = OfferAdminPresentation.GroupName.Customer,",a16aeb9158a64c9917bb71669e522043c358b44a,1,0
"column = 1),",a16aeb9158a64c9917bb71669e522043c358b44a,1,0
"@AdminGroupPresentation(name = OfferAdminPresentation.GroupName.CombineStack,",a16aeb9158a64c9917bb71669e522043c358b44a,1,0
"column = 1,",a16aeb9158a64c9917bb71669e522043c358b44a,1,0
"collapsed = true),",a16aeb9158a64c9917bb71669e522043c358b44a,1,0
collapsed = true),a16aeb9158a64c9917bb71669e522043c358b44a,1,0
"untitled = true),",a16aeb9158a64c9917bb71669e522043c358b44a,1,0
groups = {,a16aeb9158a64c9917bb71669e522043c358b44a,1,0
"@AdminGroupPresentation(name = OfferAdminPresentation.GroupName.Marketing,",a16aeb9158a64c9917bb71669e522043c358b44a,1,0
untitled = true),a16aeb9158a64c9917bb71669e522043c358b44a,1,0
"@AdminGroupPresentation(name = OfferAdminPresentation.GroupName.Codes,",a16aeb9158a64c9917bb71669e522043c358b44a,1,0
"@AdminGroupPresentation(name = OfferAdminPresentation.GroupName.Customer,",a16aeb9158a64c9917bb71669e522043c358b44a,1,1
"column = 1),",a16aeb9158a64c9917bb71669e522043c358b44a,1,1
"@AdminGroupPresentation(name = OfferAdminPresentation.GroupName.CombineStack,",a16aeb9158a64c9917bb71669e522043c358b44a,1,1
groups = {,a16aeb9158a64c9917bb71669e522043c358b44a,1,1
"@AdminGroupPresentation(name = OfferAdminPresentation.GroupName.Marketing,",a16aeb9158a64c9917bb71669e522043c358b44a,1,1
"@AdminGroupPresentation(name = OfferAdminPresentation.GroupName.Codes,",a16aeb9158a64c9917bb71669e522043c358b44a,1,1
//,a16aeb9158a64c9917bb71669e522043c358b44a,0,0
//    @Transient,a16aeb9158a64c9917bb71669e522043c358b44a,0,0
},a16aeb9158a64c9917bb71669e522043c358b44a,0,0
"),",a16aeb9158a64c9917bb71669e522043c358b44a,0,0
},a16aeb9158a64c9917bb71669e522043c358b44a,0,1
},a16aeb9158a64c9917bb71669e522043c358b44a,0,0
},a16aeb9158a64c9917bb71669e522043c358b44a,0,1
"LOG.warn(""Could not find field "" + fieldName + "" within the dynamic form "" + fieldInfo[0]);",f7f3ca2c1196f3df086281c689109c153833a776,7,0
"LOG.warn(""Could not find field "" + fieldName + "" within the dynamic form "" + fieldInfo[0]);",f7f3ca2c1196f3df086281c689109c153833a776,7,1
"String fieldName = fieldExpression.substring(fieldExpression.indexOf('[') + 1, fieldExpression.lastIndexOf(']'));",f7f3ca2c1196f3df086281c689109c153833a776,4,1
"LOG.warn(""Could not find field "" + err.getField() + "" within the main form"");",f7f3ca2c1196f3df086281c689109c153833a776,4,0
"LOG.warn(""Could not find field "" + err.getField() + "" within the main form"");",f7f3ca2c1196f3df086281c689109c153833a776,4,1
String fieldName = StringUtil.extractFieldNameFromExpression(fieldExpression);,f7f3ca2c1196f3df086281c689109c153833a776,3,0
String fieldName = extractFieldName(err);,f7f3ca2c1196f3df086281c689109c153833a776,3,1
"//attempt to look up which tab the field error is on. If it can't be found, just use",f7f3ca2c1196f3df086281c689109c153833a776,3,0
String fieldName = extractFieldName(err);,f7f3ca2c1196f3df086281c689109c153833a776,3,0
"//attempt to look up which tab the field error is on. If it can't be found, just use",f7f3ca2c1196f3df086281c689109c153833a776,3,1
String fieldName = extractFieldName(err);,f7f3ca2c1196f3df086281c689109c153833a776,3,1
"public void populateModelVariables(String tagName, Map<String, String> tagAttributes, String attributeName, String attributeValue, Map<String, Object> newLocalVariables, BroadleafThymeleafContext context) {",f7f3ca2c1196f3df086281c689109c153833a776,3,0
for (FieldError err : bindStatus.getErrors().getFieldErrors()) {,f7f3ca2c1196f3df086281c689109c153833a776,2,0
//the default tab for the group,f7f3ca2c1196f3df086281c689109c153833a776,2,0
String tabName = EntityForm.DEFAULT_TAB_NAME;,f7f3ca2c1196f3df086281c689109c153833a776,2,0
Tab tab = form.findTabForField(err.getField());,f7f3ca2c1196f3df086281c689109c153833a776,2,0
//at this point the field name actually occurs within some array syntax,f7f3ca2c1196f3df086281c689109c153833a776,2,0
"String[] fieldInfo = fieldName.split(""\\"" + DynamicEntityFormInfo.FIELD_SEPARATOR);",f7f3ca2c1196f3df086281c689109c153833a776,2,0
Field formField = form.getDynamicForm(fieldInfo[0]).getFields().get(fieldName);,f7f3ca2c1196f3df086281c689109c153833a776,2,0
"addFieldError(fieldName, err.getCode(), tabErrors);",f7f3ca2c1196f3df086281c689109c153833a776,2,0
Field formField = form.findField(err.getField());,f7f3ca2c1196f3df086281c689109c153833a776,2,0
"addFieldError(formField.getFriendlyName(), err.getCode(), tabErrors);",f7f3ca2c1196f3df086281c689109c153833a776,2,0
"addFieldError(err.getField(), err.getCode(), tabErrors);",f7f3ca2c1196f3df086281c689109c153833a776,2,0
//this is the code that is executed when a Translations add action contains errors,f7f3ca2c1196f3df086281c689109c153833a776,2,0
"Map<String, Object> localVariables = new HashMap<String, Object>();",f7f3ca2c1196f3df086281c689109c153833a776,2,0
"localVariables.put(""tabErrors"", tabErrors);",f7f3ca2c1196f3df086281c689109c153833a776,2,0
for (FieldError err : bindStatus.getErrors().getFieldErrors()) {,f7f3ca2c1196f3df086281c689109c153833a776,2,1
//the default tab for the group,f7f3ca2c1196f3df086281c689109c153833a776,2,1
String tabName = EntityForm.DEFAULT_TAB_NAME;,f7f3ca2c1196f3df086281c689109c153833a776,2,1
Tab tab = form.findTabForField(err.getField());,f7f3ca2c1196f3df086281c689109c153833a776,2,1
//at this point the field name actually occurs within some array syntax,f7f3ca2c1196f3df086281c689109c153833a776,2,1
"String[] fieldInfo = fieldName.split(""\\"" + DynamicEntityFormInfo.FIELD_SEPARATOR);",f7f3ca2c1196f3df086281c689109c153833a776,2,1
Field formField = form.getDynamicForm(fieldInfo[0]).getFields().get(fieldName);,f7f3ca2c1196f3df086281c689109c153833a776,2,1
"addFieldError(formField.getFriendlyName(), err.getCode(), tabErrors);",f7f3ca2c1196f3df086281c689109c153833a776,2,1
"addFieldError(fieldName, err.getCode(), tabErrors);",f7f3ca2c1196f3df086281c689109c153833a776,2,1
Field formField = form.findField(err.getField());,f7f3ca2c1196f3df086281c689109c153833a776,2,1
"addFieldError(err.getField(), err.getCode(), tabErrors);",f7f3ca2c1196f3df086281c689109c153833a776,2,1
//this is the code that is executed when a Translations add action contains errors,f7f3ca2c1196f3df086281c689109c153833a776,2,1
"Map<String, Object> localVariables = new HashMap<String, Object>();",f7f3ca2c1196f3df086281c689109c153833a776,2,1
"localVariables.put(""tabErrors"", tabErrors);",f7f3ca2c1196f3df086281c689109c153833a776,2,1
public String getName() {,f7f3ca2c1196f3df086281c689109c153833a776,2,0
"protected ProcessorResult processAttribute(Arguments arguments, Element element, String attributeName) {",f7f3ca2c1196f3df086281c689109c153833a776,2,1
String attributeValue = element.getAttributeValue(attributeName);,f7f3ca2c1196f3df086281c689109c153833a776,2,1
"Map<String, Object> localVariables = new HashMap<String, Object>();",f7f3ca2c1196f3df086281c689109c153833a776,2,1
"localVariables.put(""tabErrors"", tabErrors);",f7f3ca2c1196f3df086281c689109c153833a776,2,1
"//this branch of the code just puts a placeholder ""tabErrors"", to avoid errprProcessor parsing errors, and",f7f3ca2c1196f3df086281c689109c153833a776,1,0
if (!hideTopLevelFieldErrors) {,f7f3ca2c1196f3df086281c689109c153833a776,1,0
if (tab != null) {,f7f3ca2c1196f3df086281c689109c153833a776,1,0
tabName = tab.getTitle();,f7f3ca2c1196f3df086281c689109c153833a776,1,0
"Map<String, List<String>> tabErrors = result.get(tabName);",f7f3ca2c1196f3df086281c689109c153833a776,1,0
if (tabErrors == null) {,f7f3ca2c1196f3df086281c689109c153833a776,1,0
"tabErrors = new HashMap<String, List<String>>();",f7f3ca2c1196f3df086281c689109c153833a776,1,0
"result.put(tabName, tabErrors);",f7f3ca2c1196f3df086281c689109c153833a776,1,0
if (err.getField().contains(DynamicEntityFormInfo.FIELD_SEPARATOR)) {,f7f3ca2c1196f3df086281c689109c153833a776,1,0
if (form.getTabs().size() > 0) {,f7f3ca2c1196f3df086281c689109c153833a776,1,0
if (formField != null) {,f7f3ca2c1196f3df086281c689109c153833a776,1,0
} else {,f7f3ca2c1196f3df086281c689109c153833a776,1,0
"//this branch of the code just puts a placeholder ""tabErrors"", to avoid errprProcessor parsing errors, and",f7f3ca2c1196f3df086281c689109c153833a776,1,0
return ProcessorResult.setLocalVariables(localVariables);,f7f3ca2c1196f3df086281c689109c153833a776,1,0
if (tab != null) {,f7f3ca2c1196f3df086281c689109c153833a776,1,1
tabName = tab.getTitle();,f7f3ca2c1196f3df086281c689109c153833a776,1,1
"Map<String, List<String>> tabErrors = result.get(tabName);",f7f3ca2c1196f3df086281c689109c153833a776,1,1
if (tabErrors == null) {,f7f3ca2c1196f3df086281c689109c153833a776,1,1
"tabErrors = new HashMap<String, List<String>>();",f7f3ca2c1196f3df086281c689109c153833a776,1,1
"result.put(tabName, tabErrors);",f7f3ca2c1196f3df086281c689109c153833a776,1,1
if (err.getField().contains(DynamicEntityFormInfo.FIELD_SEPARATOR)) {,f7f3ca2c1196f3df086281c689109c153833a776,1,1
if (formField != null) {,f7f3ca2c1196f3df086281c689109c153833a776,1,1
} else {,f7f3ca2c1196f3df086281c689109c153833a776,1,1
if (form.getTabs().size() > 0) {,f7f3ca2c1196f3df086281c689109c153833a776,1,1
"//this branch of the code just puts a placeholder ""tabErrors"", to avoid errprProcessor parsing errors, and",f7f3ca2c1196f3df086281c689109c153833a776,1,1
return ProcessorResult.setLocalVariables(localVariables);,f7f3ca2c1196f3df086281c689109c153833a776,1,1
public class ErrorsProcessor extends AbstractBroadleafAttributeModelVariableModifierProcessor {,f7f3ca2c1196f3df086281c689109c153833a776,1,0
public BroadleafDialectPrefix getPrefix() {,f7f3ca2c1196f3df086281c689109c153833a776,1,0
BindStatus bindStatus = context.getBindStatus(attributeValue);,f7f3ca2c1196f3df086281c689109c153833a776,1,0
"newLocalVariables.put(""tabErrors"", tabErrors);",f7f3ca2c1196f3df086281c689109c153833a776,1,0
BroadleafRequestContext blcContext = BroadleafRequestContext.getBroadleafRequestContext();,f7f3ca2c1196f3df086281c689109c153833a776,1,0
if (blcContext != null && blcContext.getMessageSource() != null) {,f7f3ca2c1196f3df086281c689109c153833a776,1,0
"translatedGeneralTab = blcContext.getMessageSource().getMessage(translatedGeneralTab, null, translatedGeneralTab, blcContext.getJavaLocale());",f7f3ca2c1196f3df086281c689109c153833a776,1,0
public class ErrorsProcessor extends AbstractAttrProcessor {,f7f3ca2c1196f3df086281c689109c153833a776,1,1
public ErrorsProcessor() {,f7f3ca2c1196f3df086281c689109c153833a776,1,1
"BindStatus bindStatus = FieldUtils.getBindStatus(arguments.getConfiguration(), arguments, attributeValue);",f7f3ca2c1196f3df086281c689109c153833a776,1,1
return ProcessorResult.setLocalVariables(localVariables);,f7f3ca2c1196f3df086281c689109c153833a776,1,1
BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();,f7f3ca2c1196f3df086281c689109c153833a776,1,1
if (context != null && context.getMessageSource() != null) {,f7f3ca2c1196f3df086281c689109c153833a776,1,1
"translatedGeneralTab = context.getMessageSource().getMessage(translatedGeneralTab, null, translatedGeneralTab, context.getJavaLocale());",f7f3ca2c1196f3df086281c689109c153833a776,1,1
"localVariables.put(""tabErrors"", result);",f7f3ca2c1196f3df086281c689109c153833a776,1,1
import org.broadleafcommerce.common.util.StringUtil;,f7f3ca2c1196f3df086281c689109c153833a776,0,0
"//avoids checking on tabs, fieldGroups or fields (which for translations are empty), thus skipping any warning",f7f3ca2c1196f3df086281c689109c153833a776,0,0
//TODO: research what else can be sent from this stage,f7f3ca2c1196f3df086281c689109c153833a776,0,1
import org.springframework.beans.factory.annotation.Value;,f7f3ca2c1196f3df086281c689109c153833a776,0,0
"@Value(""${admin.form.validation.errors.hideTopLevelFieldErrors:false}"")",f7f3ca2c1196f3df086281c689109c153833a776,0,0
protected boolean hideTopLevelFieldErrors;,f7f3ca2c1196f3df086281c689109c153833a776,0,0
},f7f3ca2c1196f3df086281c689109c153833a776,0,0
"//avoids checking on tabs, fieldGroups or fields (which for translations are empty), thus skipping any warning",f7f3ca2c1196f3df086281c689109c153833a776,0,0
},f7f3ca2c1196f3df086281c689109c153833a776,0,1
"//avoids checking on tabs, fieldGroups or fields (which for translations are empty), thus skipping any warning",f7f3ca2c1196f3df086281c689109c153833a776,0,1
import org.broadleafcommerce.common.web.dialect.AbstractBroadleafAttributeModelVariableModifierProcessor;,f7f3ca2c1196f3df086281c689109c153833a776,0,0
import org.broadleafcommerce.common.web.dialect.BroadleafDialectPrefix;,f7f3ca2c1196f3df086281c689109c153833a776,0,0
import org.broadleafcommerce.common.web.domain.BroadleafThymeleafContext;,f7f3ca2c1196f3df086281c689109c153833a776,0,0
@Override,f7f3ca2c1196f3df086281c689109c153833a776,0,0
"return ""errors"";",f7f3ca2c1196f3df086281c689109c153833a776,0,0
return BroadleafDialectPrefix.BLC_ADMIN;,f7f3ca2c1196f3df086281c689109c153833a776,0,0
},f7f3ca2c1196f3df086281c689109c153833a776,0,0
return;,f7f3ca2c1196f3df086281c689109c153833a776,0,0
"newLocalVariables.put(""tabErrors"", result);",f7f3ca2c1196f3df086281c689109c153833a776,0,0
import org.thymeleaf.Arguments;,f7f3ca2c1196f3df086281c689109c153833a776,0,1
import org.thymeleaf.dom.Element;,f7f3ca2c1196f3df086281c689109c153833a776,0,1
import org.thymeleaf.processor.ProcessorResult;,f7f3ca2c1196f3df086281c689109c153833a776,0,1
import org.thymeleaf.processor.attr.AbstractAttrProcessor;,f7f3ca2c1196f3df086281c689109c153833a776,0,1
import org.thymeleaf.spring4.util.FieldUtils;,f7f3ca2c1196f3df086281c689109c153833a776,0,1
"super(""errors"");",f7f3ca2c1196f3df086281c689109c153833a776,0,1
return ProcessorResult.OK;,f7f3ca2c1196f3df086281c689109c153833a776,0,1
} else if (fieldGroup == null && tab != null) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,9,0
tabName = tabName == null ? (firstTab == null ? DEFAULT_TAB_NAME : firstTab.getKey()) : tabName;,2489d3609b635cdab1b6ce0d55c1b891a612f054,9,0
tabOrder = tabOrder == null ? (firstTab == null ? DEFAULT_TAB_ORDER : firstTab.getOrder()) : tabOrder;,2489d3609b635cdab1b6ce0d55c1b891a612f054,9,0
groupName = groupName == null ? (firstGroup == null ? DEFAULT_GROUP_NAME : firstGroup.getKey()) : groupName;,2489d3609b635cdab1b6ce0d55c1b891a612f054,9,0
groupOrder = groupOrder == null ? (firstGroup == null ? DEFAULT_GROUP_ORDER : firstGroup.getOrder()) : groupOrder;,2489d3609b635cdab1b6ce0d55c1b891a612f054,9,0
tabName = tabName == null ? (field.getIsVisible() || firstTab == null ? DEFAULT_TAB_NAME : firstTab.getTabName()) : tabName;,2489d3609b635cdab1b6ce0d55c1b891a612f054,9,1
tabOrder = tabOrder == null ? (field.getIsVisible() || firstTab == null ? DEFAULT_TAB_ORDER : firstTab.getTabOrder()) : tabOrder;,2489d3609b635cdab1b6ce0d55c1b891a612f054,9,1
groupName = groupName == null ? (field.getIsVisible() || firstGroup == null ? DEFAULT_GROUP_NAME : firstGroup.getGroupName()) : groupName;,2489d3609b635cdab1b6ce0d55c1b891a612f054,9,1
groupOrder = groupOrder == null ? (field.getIsVisible() || firstGroup == null ? DEFAULT_GROUP_ORDER : firstGroup.getGroupOrder()) : groupOrder;,2489d3609b635cdab1b6ce0d55c1b891a612f054,9,1
} else if (fieldGroup == null && tab != null){,2489d3609b635cdab1b6ce0d55c1b891a612f054,7,1
} else if (lgToRemove != null && containingGroup == null) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,7,0
} else if (containingTab != null && containingTab.getListGrids().size() == 0 && containingTab.getFields().size() == 0) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,7,0
FieldGroup firstGroup = firstTab == null || firstTab.getFieldGroups().isEmpty() ? null : ((TreeSet<FieldGroup>) firstTab.getFieldGroups()).first();,2489d3609b635cdab1b6ce0d55c1b891a612f054,7,0
} else if (containingTab != null && containingTab.getListGrids().size() == 0 && containingTab.getFields().size() == 0) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,7,1
if (groupName == null || tabName == null) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,6,0
if (groupName == null || tabName == null) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,6,1
if (lgToRemove != null && containingGroup != null) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,6,0
if (containingGroup != null && containingGroup.getListGrids().size() == 0 && containingGroup.getFields().size() == 0) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,6,0
if (containingTab != null && containingTab.getListGrids().size() == 0 && containingTab.getFields().size() == 0) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,6,1
if (context != null && context.getMessageSource() != null) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,6,1
GroupMetadata firstGroup = firstTab == null ? null : firstTab.getFirstGroup();,2489d3609b635cdab1b6ce0d55c1b891a612f054,6,1
if (containingGroup != null && containingGroup.getListGrids().size() == 0 && containingGroup.getFields().size() == 0) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,6,1
"public void addListGrid(ListGrid listGrid, String tabName, Integer tabOrder, String groupName) {",2489d3609b635cdab1b6ce0d55c1b891a612f054,5,0
"public void addListGrid(ListGrid listGrid, String tabName, Integer tabOrder, String groupName, Integer groupOrder) {",2489d3609b635cdab1b6ce0d55c1b891a612f054,5,1
"public void addListGrid(ClassMetadata cmd, ListGrid listGrid, String tabName, Integer tabOrder, String groupName, boolean isTabPresent) {",2489d3609b635cdab1b6ce0d55c1b891a612f054,5,0
if (fieldGroup == null) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,5,1
"public void addListGrid(ListGrid listGrid, String tabName, Integer tabOrder, String groupName, boolean isTabPresent) {",2489d3609b635cdab1b6ce0d55c1b891a612f054,5,1
if (fieldGroup != null) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,5,0
if (fieldGroup != null) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,5,1
if (fieldGroup != null) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,5,0
if (fieldGroup != null) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,5,1
protected TreeSet<Tab> tabs = new TreeSet<Tab>(new Comparator<Tab>() {,2489d3609b635cdab1b6ce0d55c1b891a612f054,5,0
if (fieldGroup != null) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,5,0
Tab firstTab = tabs.isEmpty() ? null : tabs.first();,2489d3609b635cdab1b6ce0d55c1b891a612f054,5,0
protected Set<Tab> tabs = new TreeSet<Tab>(new Comparator<Tab>() {,2489d3609b635cdab1b6ce0d55c1b891a612f054,5,1
if (fieldGroup != null) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,5,1
} else if (containingTab != null && containingTab.getListGrids().isEmpty() && containingTab.getFields().isEmpty()) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,5,0
if (fieldGroup == null) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,5,1
if (tabMetadataMap != null) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,4,0
"public FieldGroup findGroupInTab(String groupName, String tabName) {",2489d3609b635cdab1b6ce0d55c1b891a612f054,4,0
"public FieldGroup findGroupInTab(String groupName, String tabName) {",2489d3609b635cdab1b6ce0d55c1b891a612f054,4,1
if (tab.getUnprocessedTitle() != null && tab.getUnprocessedTitle().equals(tabTitle)) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,4,0
"public void addGroupFromGroupMetadata(GroupMetadata groupMetadata, String unprocessedTabName) {",2489d3609b635cdab1b6ce0d55c1b891a612f054,4,0
if (tab.getTitle() != null && tab.getTitle().equals(tabTitle)) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,4,1
if (lgToRemove != null) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,4,1
"public void addGroupFromGroupMetadata(GroupMetadata groupMetadata, String processedTabName) {",2489d3609b635cdab1b6ce0d55c1b891a612f054,4,1
if (containingGroup != null && containingGroup.getGroupItems().isEmpty()) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,4,0
if (currentTab != null) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,4,1
// Add new group for the field to be placed into,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,0
fieldGroup = new FieldGroup();,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,0
fieldGroup = new FieldGroup();,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,1
"FieldGroup fieldGroup = findGroupInTab(groupName, tabName);",2489d3609b635cdab1b6ce0d55c1b891a612f054,3,0
FieldGroup fieldGroup = tab.findGroup(groupName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,0
FieldGroup fieldGroup = findGroup(groupName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,1
public FieldGroup findGroup(String groupName) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,1
FieldGroup fieldGroup = null;,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,1
FieldGroup fieldGroup = findGroup(groupName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,0
public FieldGroup findGroup(String groupName) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,0
FieldGroup fieldGroup = null;,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,0
"FieldGroup fieldGroup = findGroupInTab(groupName, tabName);",2489d3609b635cdab1b6ce0d55c1b891a612f054,3,1
FieldGroup fieldGroup = tab.findGroup(groupName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,1
public void removeGroup(FieldGroup group) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,0
for (Tab tab : getTabs()) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,0
for (FieldGroup group : tab.getFieldGroups()) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,0
FieldGroup fieldGroup = tab.findGroupByUnprocessedTitle(groupName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,0
Tab tab = findTab(unprocessedTabName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,0
public String processMessageString(String message) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,1
FieldGroup fieldGroup = null;,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,1
Tab tab = findTab(processedTabName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,1
if (collectionCmd.getPolymorphicEntities().getChildren().length != 0) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,0
public FieldGroup findGroup(String groupName) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,0
for (Tab tab : tabs) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,0
FieldGroup fieldGroup = tab.findGroupByKey(groupName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,0
public FieldGroup findGroup(String groupName) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,1
for (Tab tab : tabs) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,1
FieldGroup fieldGroup = tab.findGroupByKey(groupName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,1
FieldGroup fieldGroup = currentTab.findGroupByTitle(translatedGroupName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,3,1
if (atcmd.getAdornedTargetAddMethodType().equals(AdornedTargetAddMethodType.SELECTIZE_LOOKUP)) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
for (String tabKey : tabMetadataKeySet) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
String processedTabName = ef.addTabFromTabMetadata(tabMetadata);,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
for (String groupKey : groupMetadataKeySet) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
for (String tabKey : tabMetadataKeySet) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,1
String processedTabName = ef.addTabFromTabMetadata(tabMetadata);,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,1
for (String groupKey : groupMetadataKeySet) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,1
"// If group exists, this code will not run",2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
for (String tabKey : tabMetadataMap.keySet()) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
if (tabKey.equals(tabName)) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
for (String groupKey : groupMetadataMap.keySet()) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
if (groupKey.equals(groupName)) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
fieldGroup = tab.findGroup(groupName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,1
if (tabName.equals(tab.getTitle())) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
fieldGroup = tab.findGroup(groupName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,1
fieldGroup = tab.findGroup(groupName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
if (tabName.equals(tab.getTitle())) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,1
FieldGroup containingGroup = null;,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
for (ListGrid lg : group.getListGrids()) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
if (subCollectionFieldName.equals(lg.getSubCollectionFieldName())) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
if (tabName.equals(currentTab.getTitle())) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,1
fieldGroup = tab.findGroup(groupName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,1
String unprocessedTabName = ef.addTabFromTabMetadata(tabMetadata);,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
String processedTabName = ef.addTabFromTabMetadata(tabMetadata);,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,1
for (ClassTree entityType : entityTypes) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
ListGridAction ADD = new ListGridAction(ListGridAction.ADD),2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
} else {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
//        for (ListGrid lg : ef.getAllListGrids()) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
//            if (lg.getToolbarActions().isEmpty()) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
//            } else {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
for (ListGrid lg : ef.getAllListGrids()) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,1
if (lg.getToolbarActions().isEmpty()) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,1
} else {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,1
"SimpleDateFormat formatter = new SimpleDateFormat(""MMM d, Y @ hh:mma"");",2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
DateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
"if (headerField.getFieldType().equals(""DATE"")) {",2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
"Date date = new SimpleDateFormat(""yyyy.MM.dd HH:mm:ss"").parse(recordField.getValue());",2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
String newValue = formatter.format(date);,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
} catch (Exception ex) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
} else {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
String unprocessedTabName = ef.addTabFromTabMetadata(tabMetadata);,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,0
String unprocessedTabName = tabMetadata.getTabName();,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,1
Tab currentTab = ef.findTab(unprocessedTabName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,1
} else {,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,1
String translatedGroupName = BLCMessageUtils.getMessage(groupKey);,2489d3609b635cdab1b6ce0d55c1b891a612f054,2,1
selectize = true;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
},2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
import org.broadleafcommerce.openadmin.web.form.entity.Tab;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
Set<String> tabMetadataKeySet = tabMetadataMap.keySet();,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
TabMetadata tabMetadata = tabMetadataMap.get(tabKey);,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
Set<String> groupMetadataKeySet = tabMetadata.getGroupMetadata().keySet();,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
},2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
Set<String> tabMetadataKeySet = tabMetadataMap.keySet();,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
TabMetadata tabMetadata = tabMetadataMap.get(tabKey);,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
Set<String> groupMetadataKeySet = tabMetadata.getGroupMetadata().keySet();,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
"Map<String, TabMetadata> tabMetadataMap = cmd.getTabAndGroupMetadata();",2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
tabName = tabMetadataMap.get(tabKey).getTabName();,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
},2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
"Map<String, GroupMetadata> groupMetadataMap = tabMetadataMap.get(tabKey).getGroupMetadata();",2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
groupName = groupMetadataMap.get(groupKey).getGroupName();,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
},2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
// Tabs should be looked up and referenced by their display name,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
return null;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
},2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
return fieldGroup;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
return fieldGroup;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
return fieldGroup;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
return null;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
},2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
return fieldGroup;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
},2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
if (tabName.equals(currentTab.getUnprocessedTitle()),2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
|| tabName.equals(currentTab.getProcessedTitle())) {,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
{,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
lgToRemove = lg;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
containingTab = tab;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
containingGroup = group;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
return fieldGroup;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
return null;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
return newTab.getUnprocessedTitle();,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
findLg: {,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
"return context.getMessageSource().getMessage(message, null, message, context.getJavaLocale());",2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
},2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
return message;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
"// Tabs and groups should be looked up by their display, translated name since 2 unique strings can display the same",2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
// When displayed on the form the duplicate groups and tabs look funny,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
groupName = processMessageString(groupName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
tabName = processMessageString(tabName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
return fieldGroup;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
return newTab.getTitle();,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
"PersistencePackageRequest ppr = PersistencePackageRequest.fromMetadata(md, sectionCrumbs);",2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
ClassMetadata collectionCmd = adminEntityService.getClassMetadata(ppr).getDynamicResultSet().getClassMetaData();,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
List<ClassTree> entityTypes = collectionCmd.getPolymorphicEntities().getCollapsedClassTrees();,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
},2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
//            // We always want the add option to be the first toolbar action for consistency,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
//            },2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
//        },2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
// We always want the add option to be the first toolbar action for consistency,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
},2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
return fieldGroup;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
},2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
return null;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
TabMetadata firstTab = cmd.getFirstTab();,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
return fieldGroup;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
},2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
return null;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
this.tabs = tabs;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
"symbols.setAmPmStrings(new String[] { ""am"", ""pm"" });",2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
try {,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
},2489d3609b635cdab1b6ce0d55c1b891a612f054,1,0
import org.broadleafcommerce.openadmin.web.form.entity.Tab;,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
unprocessedTabName = currentTab.getTitle();,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
unprocessedTabName = ef.addTabFromTabMetadata(tabMetadata);,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
currentTab = ef.findTab(unprocessedTabName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
},2489d3609b635cdab1b6ce0d55c1b891a612f054,1,1
import org.broadleafcommerce.common.presentation.client.AdornedTargetAddMethodType;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import org.broadleafcommerce.common.util.BLCRequestUtils;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.common.util.BLCSystemProperty;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.GroupMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.component.ListGridAction;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
"ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), processedTabName);",2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
"ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), processedTabName);",2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.ClassMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
fieldGroup.setTitle(groupName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
fieldGroup.setOrder(groupOrder);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
tab.getFieldGroups().add(fieldGroup);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
// Check CMD for Tab/Group name overrides so that Tabs/Groups can be properly found by their display names,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
break;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
// Tabs/Groups should be looked up and referenced by their display name,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import org.broadleafcommerce.common.audit.Auditable;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
fieldGroup.setTitle(groupName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
fieldGroup.setOrder(groupOrder);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
tab.getFieldGroups().add(fieldGroup);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
newGroup.setIsUntitled(groupMetadata.getUntitled());,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
newGroup.setIsBorderless(groupMetadata.getBorderless());,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
break;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
break;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import org.broadleafcommerce.common.util.BLCMessageUtils;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
".append(o1.getProcessedTitle(), o2.getProcessedTitle())",2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
tab.removeFieldGroup(group);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
findLg:,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
break findLg;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
containingGroup.removeListGrid(lgToRemove);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
removeGroup(containingGroup);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
tab.setUnprocessedTitle(tabName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
tab.setProcessedTitle(BLCMessageUtils.getMessage(tabName));,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
fieldGroup.setUnprocessedTitle(groupName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
fieldGroup.setProcessedTitle(BLCMessageUtils.getMessage(groupName));,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
newTab.setUnprocessedTitle(tabMetadata.getTabName());,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
newTab.setProcessedTitle(BLCMessageUtils.getMessage(tabMetadata.getTabName()));,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
newGroup.setUnprocessedTitle(groupMetadata.getGroupName());,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
newGroup.setProcessedTitle(BLCMessageUtils.getMessage(groupMetadata.getGroupName()));,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
newGroup.setToolTip(groupMetadata.getTooltip());,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import org.broadleafcommerce.common.web.BroadleafRequestContext;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
".append(o1.getTitle(), o2.getTitle())",2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
// thing when they are looked up in message bundles after display,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
tab.setTitle(tabName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
fieldGroup.setTitle(groupName);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
break;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
// Tabs/Groups should be looked up and referenced by their display name,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
newTab.setTitle(tabMetadata.getTabName());,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
newTab.setTitle(processMessageString(tabMetadata.getTabName()));,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
newGroup.setTitle(groupMetadata.getGroupName());,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
newGroup.setTitle(processMessageString(groupMetadata.getGroupName()));,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
newGroup.setToolTip(processMessageString(groupMetadata.getTooltip()));,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
"ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocessedTabName);",2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
"ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), processedTabName);",2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.common.util.BLCMessageUtils;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import org.broadleafcommerce.openadmin.dto.*;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import org.broadleafcommerce.openadmin.web.form.component.*;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
".withButtonClass(""sub-list-grid-add"")",2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
.withActionTargetEntity(entityType.getFullyQualifiedClassname()),2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
".withUrlPostfix(""/add"")",2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
".withIconClass(""blc-icon-add-category"")",2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
".withDisplayText(""Add "" + BLCMessageUtils.getMessage(entityType.getFriendlyName()));",2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
"listGrid.getToolbarActions().add(0, ADD);",2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
"listGrid.getToolbarActions().add(0, DefaultListGridActions.ADD);",2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
//                lg.addToolbarAction(DefaultListGridActions.ADD);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
"//                lg.getToolbarActions().add(0, DefaultListGridActions.ADD);",2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
//,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.AdornedTargetList;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.ClassMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.CollectionMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.DynamicResultSet;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.Entity;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.FieldMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.ForeignKey;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.MapMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.MapStructure;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.Property;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.SectionCrumb;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.TabMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.component.ListGrid;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.component.ListGridRecord;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.component.MediaField;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.component.RuleBuilderField;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
lg.addToolbarAction(DefaultListGridActions.ADD);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
"lg.getToolbarActions().add(0, DefaultListGridActions.ADD);",2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
this.tabs.addAll(tabs);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import com.fasterxml.jackson.core.Version;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import com.fasterxml.jackson.databind.ObjectMapper;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import com.fasterxml.jackson.databind.module.SimpleModule;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import org.broadleafcommerce.common.presentation.client.*;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import org.broadleafcommerce.openadmin.dto.*;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import org.broadleafcommerce.openadmin.web.form.component.*;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import org.broadleafcommerce.openadmin.web.form.entity.*;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import javax.annotation.Resource;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import javax.persistence.ManyToOne;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import javax.persistence.OneToOne;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import javax.servlet.http.HttpServletRequest;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import java.text.DateFormatSymbols;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import java.text.SimpleDateFormat;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import java.util.*;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
// format date list grid cells,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
formatter.setDateFormatSymbols(symbols);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
recordField.setValue(newValue);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
recordField.setValue(p.getValue());,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import org.broadleafcommerce.common.presentation.client.AddMethodType;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.common.presentation.client.AdornedTargetAddMethodType;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.common.presentation.client.LookupType;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.common.presentation.client.PersistencePerspectiveItemType;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.common.presentation.client.SupportedFieldType;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.common.presentation.client.VisibilityEnum;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.AdornedTargetCollectionMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.AdornedTargetList;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.BasicCollectionMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.BasicFieldMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.ClassMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.ClassTree;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.CollectionMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.DynamicResultSet;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.Entity;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.FieldMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.ForeignKey;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.MapMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.MapStructure;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.Property;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.SectionCrumb;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.dto.TabMetadata;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.component.DefaultListGridActions;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.component.ListGrid;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.component.ListGridAction;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.component.ListGridRecord;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.component.MediaField;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.component.RuleBuilderField;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.entity.CodeField;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.entity.ComboField;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.entity.DefaultEntityFormActions;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.entity.DynamicEntityFormInfo;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.entity.EntityForm;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import org.broadleafcommerce.openadmin.web.form.entity.Field;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import com.fasterxml.jackson.core.Version;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import com.fasterxml.jackson.databind.ObjectMapper;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import com.fasterxml.jackson.databind.module.SimpleModule;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import java.util.ArrayList;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import java.util.Arrays;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import java.util.Collections;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import java.util.Date;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import java.util.HashMap;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import java.util.List;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import java.util.Map;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import java.util.Set;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import javax.annotation.Resource;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import javax.persistence.ManyToOne;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import javax.persistence.OneToOne;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
import javax.servlet.http.HttpServletRequest;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
recordField.setValue(p.getValue());,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
fieldGroup.addListGrid(listGrid);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
fieldGroup.getListGrids().add(listGrid);,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
"ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocessedTabName);",2489d3609b635cdab1b6ce0d55c1b891a612f054,0,0
import org.broadleafcommerce.openadmin.web.form.entity.FieldGroup;,2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
"ef.addGroupFromGroupMetadata(tabMetadata.getGroupMetadata().get(groupKey), unprocessedTabName);",2489d3609b635cdab1b6ce0d55c1b891a612f054,0,1
"entityForm.addListGrid(listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), true);",97768729dbccd6c1dabe1e628cddc69ae2dcc869,3,0
"entityForm.addListGrid(listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup(), false);",97768729dbccd6c1dabe1e628cddc69ae2dcc869,3,0
"entityForm.addListGrid(listGrid, EntityForm.DEFAULT_TAB_NAME, EntityForm.DEFAULT_TAB_ORDER, fmd.getGroup());",97768729dbccd6c1dabe1e628cddc69ae2dcc869,3,1
if (drs.getUnselectedTabMetadata().get(EntityForm.DEFAULT_TAB_NAME) != null) {,97768729dbccd6c1dabe1e628cddc69ae2dcc869,1,0
} else {,97768729dbccd6c1dabe1e628cddc69ae2dcc869,1,0
},97768729dbccd6c1dabe1e628cddc69ae2dcc869,0,0
"@AdminPresentation(friendlyName = ""AdminUserImpl_Admin_Email_Address"", order = 3000, group = AdminUserAdminPresentation.GroupName.User, defaultValue = ""my-email@website.com"")",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,8,0
"@AdminPresentation(friendlyName = ""AdminUserImpl_Admin_Email_Address"", order = 3000, group = AdminUserAdminPresentation.GroupName.User, defaultValue = """")",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,8,1
"@AdminPresentation(friendlyName = ""AdminUserImpl_Admin_Email_Address"", order = 3000, group = AdminUserAdminPresentation.GroupName.User)",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,7,1
"@AdminPresentation(friendlyName = ""AdminUserImpl_Phone_Number"", order = 5000, group = AdminUserAdminPresentation.GroupName.User)",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,7,1
"group = GroupName.PermissionsAndRoles, operationTypes = @AdminPresentationOperationTypes(removeType = OperationType.NONDESTRUCTIVEREMOVE))",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,7,1
"group = AdminUserAdminPresentation.GroupName.User, prominent = true, defaultValue = ""New Admin User"")",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,6,0
public static final int RolesAndPermissions = 1000;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,6,0
public static final int NAME = 1000;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,6,0
public static final int ACTIVE_STATUS_FLAG = 1000;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,6,0
public static final int ROLES = 1000;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,6,0
"group = AdminUserAdminPresentation.GroupName.User, prominent = true, defaultValue = ""My Name"")",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,5,0
"group = AdminUserAdminPresentation.GroupName.User, prominent = true)",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,5,1
public static final int AdditionalFields = 2000;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,5,0
public static final int Miscellaneous = 2000;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,5,0
public static final int LOGIN = 2000;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,5,0
public static final int EMAIL = 3000;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,5,0
public static final int PHONE_NUMBER = 4000;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,5,0
public static final int PASSWORD = 5000;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,5,0
public static final int PERMISSIONS = 2000;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,5,0
public static final int PermissionsAndRoles = 2000;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,5,1
operationTypes = @AdminPresentationOperationTypes(removeType = OperationType.NONDESTRUCTIVEREMOVE)),3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,5,0
"@AdminPresentation(friendlyName = ""AdminUserImpl_Admin_Name"", gridOrder = 1000, order = 1000,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,5,1
"group = AdminUserAdminPresentation.GroupName.User, prominent = true, defaultValue = """")",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,5,1
"@AdminPresentation(friendlyName = ""AdminUserImpl_Admin_Login"", gridOrder = 2000, order = 2000,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,5,1
"public static final String General = ""General"";",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,5,0
"public static final String General = ""General_Tab"";",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,5,1
"group = AdminUserAdminPresentation.GroupName.User, order = 6000,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,4,0
"public static final String AdditionalFields = ""AdminUserImpl_AdditionalFields"";",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,4,0
"public static final String RolesAndPermissions = ""AdminUserImpl_RolesAndPermissions"";",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,4,0
"public static final String Miscellaneous = ""AdminUserImpl_Miscellaneous"";",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,4,0
public static class FieldOrder {,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,4,0
"public static final String PermissionsAndRoles = ""AdminUserImpl_PermissionsAndRoles"";",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,4,1
"group = GroupName.User, order = FieldOrder.NAME,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,4,0
"group = GroupName.User, order = FieldOrder.LOGIN,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,4,0
"group = GroupName.User, order = FieldOrder.PASSWORD,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,4,0
"group = GroupName.User, order = FieldOrder.EMAIL)",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,4,0
"group = GroupName.User, order = FieldOrder.PHONE_NUMBER)",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,4,0
"group = GroupName.Miscellaneous, order = FieldOrder.ACTIVE_STATUS_FLAG,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,4,0
"group = GroupName.RolesAndPermissions, order = FieldOrder.ROLES,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,4,0
"group = GroupName.RolesAndPermissions, order = FieldOrder.PERMISSIONS,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,4,0
"group = AdminUserAdminPresentation.GroupName.User, order = 6000,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,4,1
"order = 4000, group = AdminUserAdminPresentation.GroupName.User,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,4,1
"friendlyName = ""AdminUserImpl_Admin_Password"", order = 6000,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,3,1
"column = 1, untitled = true)",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,3,0
"prominent = true, gridOrder = 1000)",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,3,0
"prominent = true, gridOrder = 2000)",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,3,0
"@AdminPresentation(friendlyName = ""AdminUserImpl_Admin_Email_Address"",",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,3,0
"@AdminPresentation(friendlyName = ""AdminUserImpl_Phone_Number"",",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,3,0
"group = AdminUserAdminPresentation.GroupName.User,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,2,1
"order = AdminUserAdminPresentation.GroupOrder.AdditionalFields),",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,2,0
"order = AdminUserAdminPresentation.GroupOrder.RolesAndPermissions,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,2,0
"order = AdminUserAdminPresentation.GroupOrder.Miscellaneous,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,2,0
"order = AdminUserAdminPresentation.GroupOrder.PermissionsAndRoles,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,2,1
"@AdminPresentation(friendlyName = ""AdminUserImpl_Admin_Name"",",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,2,0
"@AdminPresentation(friendlyName = ""AdminUserImpl_Admin_Login"",",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,2,0
"addType = AddMethodType.SELECTIZE_LOOKUP, selectizeVisibleField = ""description"",",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,2,0
"group = GroupName.AdditionalFields,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,2,0
"@AdminPresentationCollection(addType = AddMethodType.SELECTIZE_LOOKUP, selectizeVisibleField = ""description"",",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,2,1
"friendlyName = ""roleListTitle"", manyToField = ""allUsers"",",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,2,1
"group = GroupName.PermissionsAndRoles,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,2,1
"friendlyName = ""AdminUserImpl_Admin_Password"",",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,1,0
"excluded = true,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,1,1
"@AdminGroupPresentation(name = AdminUserAdminPresentation.GroupName.AdditionalFields,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,1,0
"@AdminGroupPresentation(name = AdminUserAdminPresentation.GroupName.RolesAndPermissions,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,1,0
"column = 1),",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,1,0
"@AdminGroupPresentation(name = AdminUserAdminPresentation.GroupName.Miscellaneous,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,1,0
},3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,1,0
"@AdminGroupPresentation(name = AdminUserAdminPresentation.GroupName.PermissionsAndRoles,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,1,1
column = 1),3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,1,1
"@AdminPresentationCollection(friendlyName = ""roleListTitle"",",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,1,0
"manyToField = ""allUsers"",",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,1,0
"@AdminPresentationCollection(friendlyName = ""permissionListTitle"",",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,1,0
"addType = AddMethodType.SELECTIZE_LOOKUP,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,1,0
protected Boolean activeStatusFlag = Boolean.TRUE;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,1,1
"@AdminPresentationCollection(addType = AddMethodType.SELECTIZE_LOOKUP,",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,1,1
"friendlyName = ""permissionListTitle"",",3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,1,1
import org.broadleafcommerce.common.presentation.*;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,0
import org.hibernate.annotations.*;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,0
import javax.persistence.CascadeType;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,0
import javax.persistence.*;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,0
import javax.persistence.Entity;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,0
import javax.persistence.Table;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,0
import org.broadleafcommerce.common.presentation.AdminPresentation;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import org.broadleafcommerce.common.presentation.AdminPresentationCollection;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import org.broadleafcommerce.common.presentation.AdminPresentationOperationTypes;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import org.broadleafcommerce.common.presentation.ConfigurationItem;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import org.broadleafcommerce.common.presentation.ValidationConfiguration;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import org.hibernate.annotations.BatchSize;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import org.hibernate.annotations.CacheConcurrencyStrategy;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import org.hibernate.annotations.GenericGenerator;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import org.hibernate.annotations.Index;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import javax.persistence.CascadeType;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import javax.persistence.Column;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import javax.persistence.Entity;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import javax.persistence.FetchType;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import javax.persistence.GeneratedValue;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import javax.persistence.Id;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import javax.persistence.Inheritance;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import javax.persistence.InheritanceType;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import javax.persistence.JoinColumn;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import javax.persistence.JoinTable;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import javax.persistence.ManyToMany;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import javax.persistence.ManyToOne;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import javax.persistence.MapKey;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import javax.persistence.OneToMany;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import javax.persistence.Table;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
import javax.persistence.Transient;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,1
protected Boolean activeStatusFlag;,3e1d2e3c2b9043954ccdfd1baa15e2b97b4c5fa1,0,0
"@AdminPresentation(friendlyName = ""URLHandlerImpl_isRegexHandler"", order = 1, group = ""URLHandlerImpl_friendyName"", prominent = true, groupOrder = 1,",0a82ae877ab4f23a62f41602c079083a9157f623,9,1
private static final long serialVersionUID = 1L;,0a82ae877ab4f23a62f41602c079083a9157f623,7,1
* This is assumed to be a relatively small list of regex URLHandlers (perhaps in the dozens or hundreds of,0a82ae877ab4f23a62f41602c079083a9157f623,7,1
//This is just a placeholder object to allow us to cache a URI that does not have a URL handler.,0a82ae877ab4f23a62f41602c079083a9157f623,7,1
public abstract void setUrlRedirectType(URLRedirectType redirectType);,0a82ae877ab4f23a62f41602c079083a9157f623,5,1
* Indicates if the value returned by <code>getIncomingURL()</code> is a regex expression,0a82ae877ab4f23a62f41602c079083a9157f623,5,1
* Indicates if the value set by the method <code>setIncomingURL(String)</code> should be treated as a regex,0a82ae877ab4f23a62f41602c079083a9157f623,5,1
* is just a convenience method to allow the manipulation of the URI coming in that we are trying to,0a82ae877ab4f23a62f41602c079083a9157f623,5,1
"TypedQuery<URLHandler> query = em.createNamedQuery(""BC_READ_OUTGOING_URL"", URLHandler.class);",0a82ae877ab4f23a62f41602c079083a9157f623,4,0
"TypedQuery<URLHandler> query = em.createNamedQuery(""BC_READ_BY_INCOMING_URL"", URLHandler.class);",0a82ae877ab4f23a62f41602c079083a9157f623,4,1
"TypedQuery<URLHandler> query = em.createNamedQuery(""BC_READ_ALL_REGEX_HANDLERS"", URLHandler.class);",0a82ae877ab4f23a62f41602c079083a9157f623,4,1
public void setUrlRedirectType(URLRedirectType redirectType);,0a82ae877ab4f23a62f41602c079083a9157f623,4,0
protected boolean isRegex = false;,0a82ae877ab4f23a62f41602c079083a9157f623,4,1
if (location == null) {,0a82ae877ab4f23a62f41602c079083a9157f623,4,1
public URLHandler findURLHandlerByURI(String uri);,0a82ae877ab4f23a62f41602c079083a9157f623,4,1
"* Be cautious when calling this.  If there are a large number of records, this can cause performance and",0a82ae877ab4f23a62f41602c079083a9157f623,4,1
public URLHandler saveURLHandler(URLHandler handler);,0a82ae877ab4f23a62f41602c079083a9157f623,4,1
public URLHandler findURLHandlerById(Long id);,0a82ae877ab4f23a62f41602c079083a9157f623,4,1
protected static final NullURLHandler NULL_URL_HANDLER = new NullURLHandler();,0a82ae877ab4f23a62f41602c079083a9157f623,4,1
"String key = buildKey(site, sandbox, uri);",0a82ae877ab4f23a62f41602c079083a9157f623,4,1
//See if this is in cache first...,0a82ae877ab4f23a62f41602c079083a9157f623,4,1
if (handler == null) {,0a82ae877ab4f23a62f41602c079083a9157f623,4,1
"protected String buildKey(Site site, SandBox sandBox, String requestUri) {",0a82ae877ab4f23a62f41602c079083a9157f623,4,1
} else if (!(URLHandlerDTO.class.isAssignableFrom(handler.getClass()))) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,0
} else if (!(handler.getClass().isAssignableFrom(URLHandlerDTO.class))) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
public List<URLHandler> findAllRegexURLHandlers() {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
* A Null instance of a URLHandler.   Used by the default URLHandlerServiceImpl implementation to,0a82ae877ab4f23a62f41602c079083a9157f623,3,0
* A Null instance of a URLHandler.   Used by the default URLHandlerServiceImpl implementation to,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
* rather than a concrete URI.  Default is false.,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
public abstract boolean isRegexHandler();,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
public abstract void setRegexHandler(boolean regexHandler);,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
public boolean isRegexHandler() {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
public void setRegexHandler(boolean regexHandler) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
} else if (hasRegExCharacters(location)) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,0
"* provided URL.    If the URL contains a Regular Expression, then we can't",0a82ae877ab4f23a62f41602c079083a9157f623,3,0
protected Boolean isRegex = false;,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
} else if (isRegexHandler()) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
public boolean isRegexHandler() {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
if (isRegex == null) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
public void setRegexHandler(boolean regexHandler) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
"* provided URL.    If the URL contains a Regular Expression, then we can't",0a82ae877ab4f23a62f41602c079083a9157f623,3,1
URLHandler findURLHandlerByURI(String uri);,0a82ae877ab4f23a62f41602c079083a9157f623,3,0
URLHandler saveURLHandler(URLHandler handler);,0a82ae877ab4f23a62f41602c079083a9157f623,3,0
URLHandler findURLHandlerById(Long id);,0a82ae877ab4f23a62f41602c079083a9157f623,3,0
public List<URLHandler> findAllURLHandlers();,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
* Finds a URLHandler by its ID.,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
"* records at a maximum).  Having large number of records here (more 1000, for example)",0a82ae877ab4f23a62f41602c079083a9157f623,3,1
List<URLHandler> urlHandlers = findAllURLHandlers();,0a82ae877ab4f23a62f41602c079083a9157f623,3,0
String incomingUrl = currentHandler.getIncomingURL();,0a82ae877ab4f23a62f41602c079083a9157f623,3,0
"incomingUrl = ""^"" + incomingUrl + ""$"";",0a82ae877ab4f23a62f41602c079083a9157f623,3,0
"incomingUrl = ""^/"" + incomingUrl + ""$"";",0a82ae877ab4f23a62f41602c079083a9157f623,3,0
if (p == null) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,0
URLHandler handler = null;,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
if (BroadleafRequestContext.getBroadleafRequestContext() != null) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
} else if (!(URLHandlerDTO.class.isAssignableFrom(handler.getClass()))) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
if (handler instanceof NullURLHandler) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
public List<URLHandler> findAllRegexURLHandlers() {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
if (urlHandlers != null) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
String incomingUrl = currentHandler.getIncomingURL();,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
"incomingUrl = ""^"" + incomingUrl + ""$"";",0a82ae877ab4f23a62f41602c079083a9157f623,3,1
"incomingUrl = ""^/"" + incomingUrl + ""$"";",0a82ae877ab4f23a62f41602c079083a9157f623,3,1
if (p == null) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
* find a match for.,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
protected String manipulateUri(String uri) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
protected URLHandler getUrlHandlerFromCache(String key) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
if (cacheElement != null) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
protected Cache getUrlHandlerCache() {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
if (urlHandlerCache == null) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
if (site != null) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
if (sandBox != null) {,0a82ae877ab4f23a62f41602c079083a9157f623,3,1
return query.getResultList();,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
* @return,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
* expression rather than as a concrete URI.,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
parameters = {,0a82ae877ab4f23a62f41602c079083a9157f623,2,0
"* In a preview environment, {@link #getLocation()} attempts to navigate to the",0a82ae877ab4f23a62f41602c079083a9157f623,2,0
"@DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.SANDBOX, skipOverlaps = true),",0a82ae877ab4f23a62f41602c079083a9157f623,2,1
parameters = {,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
"@Parameter(name = ""segment_value"", value = ""URLHandlerImpl""),",0a82ae877ab4f23a62f41602c079083a9157f623,2,1
"@Parameter(name = ""entity_name"", value = ""org.broadleafcommerce.cms.url.domain.URLHandlerImpl"")",0a82ae877ab4f23a62f41602c079083a9157f623,2,1
"helpText = ""urlHandlerIsRegexHandler_help"")",0a82ae877ab4f23a62f41602c079083a9157f623,2,1
"@Index(name = ""IS_REGEX_HANDLER_INDEX"", columnNames = {""IS_REGEX""})",0a82ae877ab4f23a62f41602c079083a9157f623,2,1
"@Index(name = ""INCOMING_URL_INDEX"", columnNames = {""INCOMING_URL""})",0a82ae877ab4f23a62f41602c079083a9157f623,2,1
if (hasRegExCharacters(getIncomingURL())) {,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
return false;,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
"* In a preview environment, {@link #getLocation()} attempts to navigate to the",0a82ae877ab4f23a62f41602c079083a9157f623,2,1
List<URLHandler> findAllURLHandlers();,0a82ae877ab4f23a62f41602c079083a9157f623,2,0
* @return,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
* Persists the URLHandler to the DB.,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
* @param handler,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
* @param id,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
"* is not likely necessary to accomplish the desired goal, and can cause performance problems.",0a82ae877ab4f23a62f41602c079083a9157f623,2,1
public List<URLHandler> findAllRegexURLHandlers();,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
"if (!incomingUrl.startsWith(""^"")) {",0a82ae877ab4f23a62f41602c079083a9157f623,2,0
"if (incomingUrl.startsWith(""/"")) {",0a82ae877ab4f23a62f41602c079083a9157f623,2,0
} else {,0a82ae877ab4f23a62f41602c079083a9157f623,2,0
if (m.find()) {,0a82ae877ab4f23a62f41602c079083a9157f623,2,0
String newUrl = m.replaceFirst(urlHandler.getNewURL());,0a82ae877ab4f23a62f41602c079083a9157f623,2,0
if (newUrl.equals(urlHandler.getNewURL())) {,0a82ae877ab4f23a62f41602c079083a9157f623,2,0
protected Cache urlHandlerCache;,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
uri = manipulateUri(uri);,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
handler = getUrlHandlerFromCache(key);,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
handler = urlHandlerDao.findURLHandlerByURI(uri);,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
//Check for a regex match,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
handler = checkForMatches(uri);,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
//This URL does not have a match.,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
handler = NULL_URL_HANDLER;,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
//Create a non-entity instance of the DTO to cache.,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
"handler = new URLHandlerDTO(handler.getNewURL(), handler.getUrlRedirectType());",0a82ae877ab4f23a62f41602c079083a9157f623,2,1
List<URLHandler> urlHandlers = findAllRegexURLHandlers();,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
"if (!incomingUrl.startsWith(""^"")) {",0a82ae877ab4f23a62f41602c079083a9157f623,2,1
"if (incomingUrl.startsWith(""/"")) {",0a82ae877ab4f23a62f41602c079083a9157f623,2,1
} else {,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
if (m.find()) {,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
String newUrl = m.replaceFirst(urlHandler.getNewURL());,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
if (newUrl.equals(urlHandler.getNewURL())) {,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
"* Some clients may wish, for example, to convert the URI into all lower case, or to manipulate it in some way.  This",0a82ae877ab4f23a62f41602c079083a9157f623,2,1
//The default is not to modify the URI at all.,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
StringBuilder key = new StringBuilder();,0a82ae877ab4f23a62f41602c079083a9157f623,2,1
@Override,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
"query.setHint(QueryHints.HINT_CACHEABLE, true);",0a82ae877ab4f23a62f41602c079083a9157f623,1,1
},0a82ae877ab4f23a62f41602c079083a9157f623,1,1
*,0a82ae877ab4f23a62f41602c079083a9157f623,1,0
*,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
/**,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
*,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
*/,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
* @param regexHandler,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
*,0a82ae877ab4f23a62f41602c079083a9157f623,1,0
return  createResponse;,0a82ae877ab4f23a62f41602c079083a9157f623,1,0
*,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
@Override,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
return isRegex;,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
},0a82ae877ab4f23a62f41602c079083a9157f623,1,1
this.isRegex = regexHandler;,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
return createResponse;,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
"@DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.SANDBOX, skipOverlaps=true),",0a82ae877ab4f23a62f41602c079083a9157f623,1,0
},0a82ae877ab4f23a62f41602c079083a9157f623,1,0
* navigate to it.,0a82ae877ab4f23a62f41602c079083a9157f623,1,0
*,0a82ae877ab4f23a62f41602c079083a9157f623,1,0
"name = ""URLHandlerID"",",0a82ae877ab4f23a62f41602c079083a9157f623,1,1
"strategy = ""org.broadleafcommerce.common.persistence.IdOverrideTableGenerator"",",0a82ae877ab4f23a62f41602c079083a9157f623,1,1
},0a82ae877ab4f23a62f41602c079083a9157f623,1,1
"@Column(name = ""IS_REGEX"")",0a82ae877ab4f23a62f41602c079083a9157f623,1,1
@Override,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
return true;,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
return isRegex;,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
this.isRegex = regexHandler;,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
* navigate to it.,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
*,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
*,0a82ae877ab4f23a62f41602c079083a9157f623,1,0
*,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
/**,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
* memory issues.,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
*/,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
protected StatisticsService statisticsService;,0a82ae877ab4f23a62f41602c079083a9157f623,1,0
*,0a82ae877ab4f23a62f41602c079083a9157f623,1,0
return checkForMatches(uri);,0a82ae877ab4f23a62f41602c079083a9157f623,1,0
for (URLHandler urlHandler : urlHandlers) {,0a82ae877ab4f23a62f41602c079083a9157f623,1,0
currentHandler = urlHandler;,0a82ae877ab4f23a62f41602c079083a9157f623,1,0
},0a82ae877ab4f23a62f41602c079083a9157f623,1,0
Pattern p = urlPatternMap.get(incomingUrl);,0a82ae877ab4f23a62f41602c079083a9157f623,1,0
p = Pattern.compile(incomingUrl);,0a82ae877ab4f23a62f41602c079083a9157f623,1,0
Matcher m = p.matcher(requestURI);,0a82ae877ab4f23a62f41602c079083a9157f623,1,0
return urlHandler;,0a82ae877ab4f23a62f41602c079083a9157f623,1,0
"return new URLHandlerDTO(newUrl, urlHandler.getUrlRedirectType());",0a82ae877ab4f23a62f41602c079083a9157f623,1,0
"@Resource(name = ""blURLHandlerDao"")",0a82ae877ab4f23a62f41602c079083a9157f623,1,1
*,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
"//The default implementation simply does not manipulate the URI in any way, but simply returns",0a82ae877ab4f23a62f41602c079083a9157f623,1,1
//what is passed in.,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
SandBox sandbox = null;,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
Site site = null;,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
sandbox = BroadleafRequestContext.getBroadleafRequestContext().getSandBox();,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
site = BroadleafRequestContext.getBroadleafRequestContext().getNonPersistentSite();,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
},0a82ae877ab4f23a62f41602c079083a9157f623,1,1
return null;,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
return handler;,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
@Override,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
return urlHandlerDao.findAllRegexURLHandlers();,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
for (URLHandler urlHandler : urlHandlers) {,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
currentHandler = urlHandler;,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
Pattern p = urlPatternMap.get(incomingUrl);,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
p = Pattern.compile(incomingUrl);,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
Matcher m = p.matcher(requestURI);,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
return urlHandler;,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
"return new URLHandlerDTO(newUrl, urlHandler.getUrlRedirectType());",0a82ae877ab4f23a62f41602c079083a9157f623,1,1
*/,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
return uri;,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
Element cacheElement = getUrlHandlerCache().get(key);,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
return (URLHandler) cacheElement.getObjectValue();,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
"urlHandlerCache = CacheManager.getInstance().getCache(""cmsUrlHandlerCache"");",0a82ae877ab4f23a62f41602c079083a9157f623,1,1
return urlHandlerCache;,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
return key.toString();,0a82ae877ab4f23a62f41602c079083a9157f623,1,1
cloned.setUrlRedirectType( URLRedirectType.getInstance(urlRedirectType));,0a82ae877ab4f23a62f41602c079083a9157f623,0,0
cloned.setUrlRedirectType(URLRedirectType.getInstance(urlRedirectType));,0a82ae877ab4f23a62f41602c079083a9157f623,0,1
cloned.setRegexHandler(isRegex);,0a82ae877ab4f23a62f41602c079083a9157f623,0,1
import java.io.Serializable;,0a82ae877ab4f23a62f41602c079083a9157f623,0,0
"name=""URLHandlerID"",",0a82ae877ab4f23a62f41602c079083a9157f623,0,0
"strategy=""org.broadleafcommerce.common.persistence.IdOverrideTableGenerator"",",0a82ae877ab4f23a62f41602c079083a9157f623,0,0
"@Parameter(name=""segment_value"", value=""URLHandlerImpl""),",0a82ae877ab4f23a62f41602c079083a9157f623,0,0
"@Parameter(name=""entity_name"", value=""org.broadleafcommerce.cms.url.domain.URLHandlerImpl"")",0a82ae877ab4f23a62f41602c079083a9157f623,0,0
"@Index(name=""INCOMING_URL_INDEX"", columnNames={""INCOMING_URL""})",0a82ae877ab4f23a62f41602c079083a9157f623,0,0
cloned.setUrlRedirectType( URLRedirectType.getInstance(urlRedirectType));,0a82ae877ab4f23a62f41602c079083a9157f623,0,0
cloned.setUrlRedirectType(URLRedirectType.getInstance(urlRedirectType));,0a82ae877ab4f23a62f41602c079083a9157f623,0,1
cloned.setRegexHandler(isRegex);,0a82ae877ab4f23a62f41602c079083a9157f623,0,1
import net.sf.ehcache.Cache;,0a82ae877ab4f23a62f41602c079083a9157f623,0,0
import org.broadleafcommerce.cms.url.domain.URLHandler;,0a82ae877ab4f23a62f41602c079083a9157f623,0,0
import org.broadleafcommerce.common.sandbox.domain.SandBox;,0a82ae877ab4f23a62f41602c079083a9157f623,0,0
import org.broadleafcommerce.cms.url.domain.URLHandler;,0a82ae877ab4f23a62f41602c079083a9157f623,0,1
import org.broadleafcommerce.common.cache.StatisticsService;,0a82ae877ab4f23a62f41602c079083a9157f623,0,0
"@Resource(name=""blURLHandlerDao"")",0a82ae877ab4f23a62f41602c079083a9157f623,0,0
"@Resource(name=""blStatisticsService"")",0a82ae877ab4f23a62f41602c079083a9157f623,0,0
"urlPatternMap.put(incomingUrl, p);",0a82ae877ab4f23a62f41602c079083a9157f623,0,0
import org.broadleafcommerce.cms.url.domain.NullURLHandler;,0a82ae877ab4f23a62f41602c079083a9157f623,0,1
import org.broadleafcommerce.common.sandbox.domain.SandBox;,0a82ae877ab4f23a62f41602c079083a9157f623,0,1
import org.broadleafcommerce.common.site.domain.Site;,0a82ae877ab4f23a62f41602c079083a9157f623,0,1
import org.broadleafcommerce.common.web.BroadleafRequestContext;,0a82ae877ab4f23a62f41602c079083a9157f623,0,1
import net.sf.ehcache.Cache;,0a82ae877ab4f23a62f41602c079083a9157f623,0,1
import net.sf.ehcache.CacheManager;,0a82ae877ab4f23a62f41602c079083a9157f623,0,1
import net.sf.ehcache.Element;,0a82ae877ab4f23a62f41602c079083a9157f623,0,1
"//This allows clients or implementors to manipulate the URI, for example making it all lower case.",0a82ae877ab4f23a62f41602c079083a9157f623,0,1
//Check for an exact match in the DB...,0a82ae877ab4f23a62f41602c079083a9157f623,0,1
//Use the NullURLHandler instance. This will be cached to indicate that,0a82ae877ab4f23a62f41602c079083a9157f623,0,1
"getUrlHandlerCache().put(new Element(key, handler));",0a82ae877ab4f23a62f41602c079083a9157f623,0,1
"urlPatternMap.put(incomingUrl, p);",0a82ae877ab4f23a62f41602c079083a9157f623,0,1
/*,0a82ae877ab4f23a62f41602c079083a9157f623,0,1
"key.append(""site:"").append(site.getId()).append('_');",0a82ae877ab4f23a62f41602c079083a9157f623,0,1
"key.append(""sbx:"").append(sandBox.getId()).append('_');",0a82ae877ab4f23a62f41602c079083a9157f623,0,1
key.append(requestUri);,0a82ae877ab4f23a62f41602c079083a9157f623,0,1
"//against the categories chosen in the listGrid filter. The default behavior up to this point, assumes the ""legacy"" mode.",d84cd698e4cffef5d0dddfd2148c3d009178e78e,4,0
"//against the categories chosen in the listGrid filter. The default behavior up to this point, assumes the ""legacy"" mode.",d84cd698e4cffef5d0dddfd2148c3d009178e78e,4,1
"//is unarchived, is the defaultReference, and is the selected filter category. We",d84cd698e4cffef5d0dddfd2148c3d009178e78e,3,1
"//is unarchived, is the defaultReference, and is the selected filter category. We",d84cd698e4cffef5d0dddfd2148c3d009178e78e,3,1
// We need to get the total number of records available because the entityList returned may not be the full set.,d84cd698e4cffef5d0dddfd2148c3d009178e78e,3,0
"""more than 800 products found to belong to the selected default categories(%s). This is a "" +",d84cd698e4cffef5d0dddfd2148c3d009178e78e,2,0
"""more than 800 products found to belong to the selected default categories(%s). This is a "" +",d84cd698e4cffef5d0dddfd2148c3d009178e78e,2,0
"FilterAndSortCriteria filter = cto.get(""id"");",d84cd698e4cffef5d0dddfd2148c3d009178e78e,2,0
"""more than "" + queryLimit + "" products found to belong to the selected default categories(%s). This is a "" +",d84cd698e4cffef5d0dddfd2148c3d009178e78e,2,0
"// If we have any filtered products, clear out the associated filter and sort criteria values and add a new",d84cd698e4cffef5d0dddfd2148c3d009178e78e,2,0
// filter mapping to the cto.,d84cd698e4cffef5d0dddfd2148c3d009178e78e,2,0
"// If we have filter values, create the appropriate restrictions.",d84cd698e4cffef5d0dddfd2148c3d009178e78e,2,0
"""more than ""+queryLimit+"" products found to belong to the selected default categories(%s). This is a "" +",d84cd698e4cffef5d0dddfd2148c3d009178e78e,2,1
"FilterAndSortCriteria filter = cto.get(""id"");",d84cd698e4cffef5d0dddfd2148c3d009178e78e,2,1
"""more than "" + queryLimit + "" products found to belong to the selected default categories(%s). This is a "" +",d84cd698e4cffef5d0dddfd2148c3d009178e78e,2,0
"""more than ""+queryLimit+"" products found to belong to the selected default categories(%s). This is a "" +",d84cd698e4cffef5d0dddfd2148c3d009178e78e,2,1
"""more than "" + queryLimit + "" products found to belong to the selected default categories(%s). This is a "" +",d84cd698e4cffef5d0dddfd2148c3d009178e78e,2,0
"""more than "" + queryLimit + "" products found to belong to the selected default categories(%s). This is a "" +",d84cd698e4cffef5d0dddfd2148c3d009178e78e,2,1
"Path xRefCategoriesCategoryId = root.get(""allParentCategoryXrefs"").get(""category"").get(""id"");",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
FilterMapping filterMapping = new FilterMapping(),d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"public Predicate buildPredicate(CriteriaBuilder builder, FieldPathBuilder fieldPathBuilder,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"Path explicitPath, List directValues) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"LOG.warn(String.format(""Skipping default category filtering for product fetch query since there are "" +",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
FilterMapping filterMapping = new FilterMapping(),d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
"public Predicate buildPredicate(CriteriaBuilder builder, FieldPathBuilder fieldPathBuilder,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
"String fullPropertyName, Path explicitPath, List directValues) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
//We want to limit the product we find to those who have a CategoryProductXref that,d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
FilterMapping filterMapping = new FilterMapping(),d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"public Predicate buildPredicate(CriteriaBuilder builder, FieldPathBuilder fieldPathBuilder,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"Path explicitPath, List directValues) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"LOG.warn(String.format(""Skipping default category filtering for product fetch query since there are "" +",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
FilterMapping filterMapping = new FilterMapping(),d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
"public Predicate buildPredicate(CriteriaBuilder builder, FieldPathBuilder fieldPathBuilder,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
"String fullPropertyName, Path explicitPath, List directValues) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
//We want to limit the product we find to those who have a CategoryProductXref that,d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
"public Predicate buildPredicate(CriteriaBuilder builder,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"String fullPropertyName, Path explicitPath,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
for (FilterAndSortCriteria filter : cto.getCriteriaMap().values()) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"// If a list of products was returned, use them instead of proceeding through the pipeline.",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
// Convert the result list into a list of entities,d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
// Create a Dynamic Result Set from the entity list created above.,d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
// Setup the Sku query.,d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"// Check if we are only sorting/filtering on Sku related fields. If so, return the filtered product list.",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
FilterAndSortCriteria fasc = cto.getCriteriaMap().get(filterProperty);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
Path skuFieldPath = root.get(skuField);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"Field field = helper.getFieldManager().getField(SkuImpl.class, skuField);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
// Apply the restrictions if any.,d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"public Predicate buildPredicate(CriteriaBuilder builder, FieldPathBuilder fieldPathBuilder,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"String fullPropertyName, Path explicitPath, List directValues) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
// Make sure we have the actual product id.,d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
boolean legacy = parentCategoryLegacyModeService.isLegacyMode();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
"public Predicate buildPredicate(CriteriaBuilder builder,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
"String fullPropertyName, Path explicitPath,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
for (FilterAndSortCriteria filter : cto.getCriteriaMap().values()) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
"public Predicate buildPredicate(CriteriaBuilder builder, FieldPathBuilder fieldPathBuilder,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"Path explicitPath, List directValues) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"public Predicate buildPredicate(CriteriaBuilder builder, FieldPathBuilder fieldPathBuilder,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
"Path explicitPath, List directValues) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
"public Predicate buildPredicate(CriteriaBuilder builder, FieldPathBuilder fieldPathBuilder,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"Path explicitPath, List directValues) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"public Predicate buildPredicate(CriteriaBuilder builder,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"String fullPropertyName, Path explicitPath,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,0
"public Predicate buildPredicate(CriteriaBuilder builder, FieldPathBuilder fieldPathBuilder,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
"Path explicitPath, List directValues) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
"public Predicate buildPredicate(CriteriaBuilder builder,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
"String fullPropertyName, Path explicitPath,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,1,1
return xRefCategoriesCategoryId.as(Long.class).in(directValues);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
}));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.FieldPath;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
".withFieldPath(new FieldPath().withTargetProperty(""allParentCategoryXrefs.category.id""))",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
return explicitPath.as(Long.class).in(directValues);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
}),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
import org.broadleafcommerce.common.sandbox.SandBoxHelper;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import org.broadleafcommerce.common.util.BLCCollectionUtils;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import org.broadleafcommerce.common.util.TypedTransformer;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import org.hibernate.ejb.QueryHints;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import javax.persistence.TypedQuery;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import javax.persistence.criteria.CriteriaQuery;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"@Resource(name=""blSandBoxHelper"")",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
protected SandBoxHelper sandBoxHelper;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"List<Long> transformedValues = BLCCollectionUtils.collectList(filterValues, new TypedTransformer<Long>() {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
@Override,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
public Long transform(Object input) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return Long.parseLong(((String) input));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
},d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
});,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
CriteriaBuilder builder = dynamicEntityDao.getStandardEntityManager().getCriteriaBuilder();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
CriteriaQuery<Long> criteria = builder.createQuery(Long.class);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
Root<CategoryProductXrefImpl> root = criteria.from(CategoryProductXrefImpl.class);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"criteria.select(root.get(""product"").get(""id"").as(Long.class));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
List<Predicate> restrictions = new ArrayList<Predicate>();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"restrictions.add(builder.equal(root.get(""defaultReference""), Boolean.TRUE));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"restrictions.add(root.get(""category"").get(""id"").in(transformedValues));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
//archived?,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"QueryUtils.notArchived(builder, restrictions, root, ""archiveStatus"");",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
criteria.where(restrictions.toArray(new Predicate[restrictions.size()]));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
TypedQuery<Long> query = dynamicEntityDao.getStandardEntityManager().createQuery(criteria);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
final List<Long> productIds = query.getResultList();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (productIds.size() <= 800) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
".withFieldPath(new FieldPath().withTargetProperty(""id""))",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
.withPredicateProvider(new PredicateProvider() {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"From root, String ceilingEntity, String fullPropertyName,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"return explicitPath.in(sandBoxHelper.mergeCloneIds(ProductImpl.class,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
productIds.toArray(new Long[productIds.size()])));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
cto.getAdditionalFilterMappings().add(filterMapping);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
} else {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"String joined = StringUtils.join(transformedValues, ',');",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"""filter query limitation."", joined));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
".withFieldPath(new FieldPath().withTargetProperty(""allParentCategoryXrefs.id""))",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
.withPredicateProvider(new PredicateProvider() {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
@Override,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"From root, String ceilingEntity,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
//do this in a subquery to avoid an additional join that would cause duplicate query,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
//results.,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
Subquery<Long> sub = fieldPathBuilder.getCriteria().subquery(Long.class);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
Root<CategoryProductXrefImpl> subRoot = sub.from(CategoryProductXrefImpl.class);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"sub.select(subRoot.get(""id"").as(Long.class));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
List<Predicate> subRestrictions = new ArrayList<Predicate>();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"subRestrictions.add(builder.equal(subRoot.get(""defaultReference""), Boolean.TRUE));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"subRestrictions.add(subRoot.get(""category"").get(""id"").in(directValues));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
//archived?,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"QueryUtils.notArchived(builder, subRestrictions, subRoot, ""archiveStatus"");",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
sub.where(subRestrictions.toArray(new Predicate[subRestrictions.size()]));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
return explicitPath.in(sub);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
},d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
}));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
cto.getAdditionalFilterMappings().add(filterMapping);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
List<Long> productIds = query.getResultList();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"productIds = sandBoxHelper.mergeCloneIds(ProductImpl.class, productIds.toArray(new Long[productIds.size()]));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
.withDirectFilterValues(productIds),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return explicitPath.in(directValues);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
final List<Long> productIds = query.getResultList();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
.withDirectFilterValues(filterValues),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"return explicitPath.in(sandBoxHelper.mergeCloneIds(ProductImpl.class,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
productIds.toArray(new Long[productIds.size()])));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
import org.broadleafcommerce.common.sandbox.SandBoxHelper;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import org.broadleafcommerce.common.util.BLCCollectionUtils;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import org.broadleafcommerce.common.util.TypedTransformer;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import org.hibernate.ejb.QueryHints;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import javax.persistence.TypedQuery;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import javax.persistence.criteria.CriteriaQuery;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"@Resource(name=""blSandBoxHelper"")",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
protected SandBoxHelper sandBoxHelper;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"List<Long> transformedValues = BLCCollectionUtils.collectList(filterValues, new TypedTransformer<Long>() {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
@Override,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
public Long transform(Object input) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return Long.parseLong(((String) input));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
},d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
});,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
CriteriaBuilder builder = dynamicEntityDao.getStandardEntityManager().getCriteriaBuilder();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
CriteriaQuery<Long> criteria = builder.createQuery(Long.class);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
Root<CategoryProductXrefImpl> root = criteria.from(CategoryProductXrefImpl.class);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"criteria.select(root.get(""product"").get(""id"").as(Long.class));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
List<Predicate> restrictions = new ArrayList<Predicate>();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"restrictions.add(builder.equal(root.get(""defaultReference""), Boolean.TRUE));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"restrictions.add(root.get(""category"").get(""id"").in(transformedValues));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
//archived?,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"QueryUtils.notArchived(builder, restrictions, root, ""archiveStatus"");",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
criteria.where(restrictions.toArray(new Predicate[restrictions.size()]));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
TypedQuery<Long> query = dynamicEntityDao.getStandardEntityManager().createQuery(criteria);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
final List<Long> productIds = query.getResultList();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (productIds.size() <= 800) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
".withFieldPath(new FieldPath().withTargetProperty(""id""))",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
.withPredicateProvider(new PredicateProvider() {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"From root, String ceilingEntity, String fullPropertyName,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"return explicitPath.in(sandBoxHelper.mergeCloneIds(ProductImpl.class,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
productIds.toArray(new Long[productIds.size()])));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
cto.getAdditionalFilterMappings().add(filterMapping);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
} else {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"String joined = StringUtils.join(transformedValues, ',');",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"""filter query limitation."", joined));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
".withFieldPath(new FieldPath().withTargetProperty(""allParentCategoryXrefs.id""))",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
.withPredicateProvider(new PredicateProvider() {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
@Override,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"From root, String ceilingEntity,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
//do this in a subquery to avoid an additional join that would cause duplicate query,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
//results.,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
Subquery<Long> sub = fieldPathBuilder.getCriteria().subquery(Long.class);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
Root<CategoryProductXrefImpl> subRoot = sub.from(CategoryProductXrefImpl.class);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"sub.select(subRoot.get(""id"").as(Long.class));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
List<Predicate> subRestrictions = new ArrayList<Predicate>();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"subRestrictions.add(builder.equal(subRoot.get(""defaultReference""), Boolean.TRUE));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"subRestrictions.add(subRoot.get(""category"").get(""id"").in(directValues));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
//archived?,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"QueryUtils.notArchived(builder, subRestrictions, subRoot, ""archiveStatus"");",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
sub.where(subRestrictions.toArray(new Predicate[subRestrictions.size()]));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
return explicitPath.in(sub);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
},d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
}));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
cto.getAdditionalFilterMappings().add(filterMapping);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
List<Long> productIds = query.getResultList();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"productIds = sandBoxHelper.mergeCloneIds(ProductImpl.class, productIds.toArray(new Long[productIds.size()]));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
.withDirectFilterValues(productIds),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return explicitPath.in(directValues);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
final List<Long> productIds = query.getResultList();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
.withDirectFilterValues(filterValues),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"return explicitPath.in(sandBoxHelper.mergeCloneIds(ProductImpl.class,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
productIds.toArray(new Long[productIds.size()])));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
import org.broadleafcommerce.common.filter.Filter;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import org.broadleafcommerce.common.sandbox.domain.SandBoxImpl;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import org.broadleafcommerce.core.catalog.domain.SkuImpl;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import org.broadleafcommerce.core.search.domain.IndexField;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import org.broadleafcommerce.openadmin.dto.ClassMetadata;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import org.broadleafcommerce.openadmin.dto.SortDirection;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import org.broadleafcommerce.openadmin.server.domain.PersistencePackageRequest;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import org.broadleafcommerce.openadmin.server.service.persistence.module.criteria.RestrictionType;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import java.io.Serializable;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import java.math.BigDecimal;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import java.util.Collections;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import java.util.HashMap;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import java.util.Set;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import javax.persistence.EntityManager;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import javax.persistence.PersistenceContext;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import javax.persistence.Tuple;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import javax.persistence.criteria.Subquery;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"public static final String DEFAULT_SKU = ""defaultSku"";",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"if (!setupNonLegacyProductCategory(cto, dynamicEntityDao)) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"return new DynamicResultSet(null, new Entity[0], 0);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
},d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (eagerFetchAssociations) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
cto.getNonCountAdditionalFilterMappings().add(new FilterMapping(),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
.withDirectFilterValues(new EmptyFilterValues()),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
.withRestriction(new Restriction(),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
.withPredicateProvider(new PredicateProvider() {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
@Override,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"FieldPathBuilder fieldPathBuilder, From root,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"String ceilingEntity,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
List directValues) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"root.fetch(""defaultSku"", JoinType.LEFT);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"root.fetch(""defaultCategory"", JoinType.LEFT);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return null;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
}),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (ArrayUtils.isEmpty(persistencePackage.getSectionCrumbs()) &&,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"(!cto.getCriteriaMap().containsKey(""id"") || CollectionUtils.isEmpty(cto.getCriteriaMap().get(""id"").getFilterValues()))) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
//Add special handling for product list grid fetches,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
boolean hasExplicitSort = false;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
hasExplicitSort = filter.getSortDirection() != null;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (hasExplicitSort) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
break;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (!hasExplicitSort) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
filter.setNullsLast(false);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
filter.setSortAscending(true);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"List<Product> filteredProducts = buildSkuFilters(cto, dynamicEntityDao, helper);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (filteredProducts != null) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"Map<String, FieldMetadata> indexFieldMetadata = helper.getSimpleMergedProperties(Product.class.getName(), persistencePerspective);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"Entity[] entities = helper.getRecords(indexFieldMetadata, filteredProducts);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"Map<String, FieldMetadata> originalProps = helper.getSimpleMergedProperties(Product.class.getName(), persistencePerspective);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"List<FilterMapping> filterMappings = helper.getFilterMappings(persistencePerspective, cto, Product.class.getName(), originalProps);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"int totalRecords = helper.getTotalRecords(persistencePackage.getCeilingEntityFullyQualifiedClassname(), filterMappings);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"DynamicResultSet resultSet = new DynamicResultSet(entities, totalRecords);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return resultSet;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
try {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
extensionManager.getProxy().initiateFetchState();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"return helper.getCompatibleModule(OperationType.BASIC).fetch(persistencePackage, cto);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
} finally {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
extensionManager.getProxy().endFetchState();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
} else {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"@SuppressWarnings(""unchecked"")",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"private boolean setupNonLegacyProductCategory(CriteriaTransferObject cto, DynamicEntityDao dynamicEntityDao) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (!isDefaultCategoryLegacyMode()) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return false;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return true;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"private List<Product> buildSkuFilters(CriteriaTransferObject cto, DynamicEntityDao dynamicEntityDao, RecordHelper helper) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
CriteriaBuilder builder = dynamicEntityDao.getStandardEntityManager().getCriteriaBuilder();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
CriteriaQuery<Product> criteria = builder.createQuery(Product.class);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
Root<SkuImpl> root = criteria.from(SkuImpl.class);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"criteria.select(root.get(""defaultProduct"").as(Product.class));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
// Build our list of Sku related restrictions.,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"Map<String, Predicate> restrictions = buildSkuRestrictions(cto, helper, builder, criteria, root);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
TypedQuery<Product> query = dynamicEntityDao.getStandardEntityManager().createQuery(criteria);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
List<Product> filteredProducts = query.getResultList();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (isSkuOnlyFilter(cto)) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return filteredProducts;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (filteredProducts.size() != 0) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"clearFilteredProperties(cto, restrictions.keySet());",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"addSkuFilterMapping(cto, filteredProducts);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
private Boolean isSkuOnlyFilter(CriteriaTransferObject cto) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
Boolean isSkuOnly = Boolean.TRUE;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
int skuFilters = 0;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
for (String filterProperty : cto.getCriteriaMap().keySet()) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (!filterProperty.startsWith(DEFAULT_SKU),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"&& !filterProperty.equals(""id"")",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"&& !filterProperty.equals(""isLookup"")) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
isSkuOnly = Boolean.FALSE;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
} else if (filterProperty.startsWith(DEFAULT_SKU)){,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
skuFilters++;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return isSkuOnly && (skuFilters > 0);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"private Map<String, Predicate> buildSkuRestrictions(CriteriaTransferObject cto, RecordHelper helper, CriteriaBuilder builder, CriteriaQuery<Product> criteria, Root<SkuImpl> root) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"Map<String, Predicate> restrictions = new HashMap<>();",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (filterProperty.startsWith(DEFAULT_SKU)) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"String skuField = filterProperty.replace(DEFAULT_SKU + ""."","""");",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (fasc.getFilterValues().size() > 0) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (field.getType().isAssignableFrom(String.class)) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"restrictions.put(filterProperty, builder.like(skuFieldPath.as(String.class), ""%"" + fasc.getFilterValues().get(0) + ""%""));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
} else if (field.getType().isAssignableFrom(BigDecimal.class)) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (fasc.getFilterValues().size() == 1) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"restrictions.put(filterProperty, builder.equal(skuFieldPath.as(String.class), fasc.getFilterValues().get(0)));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
BigDecimal firstValue = new BigDecimal(fasc.getFilterValues().get(0));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
BigDecimal secondValue = new BigDecimal(fasc.getFilterValues().get(1));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"restrictions.put(filterProperty, builder.between(skuFieldPath.as(BigDecimal.class), firstValue, secondValue));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
// Add sorting if applicable.,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (fasc.getSortDirection() != null) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (fasc.getSortAscending()) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
criteria.orderBy(builder.asc(skuFieldPath));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
criteria.orderBy(builder.desc(skuFieldPath));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (restrictions.size() > 0) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
criteria.where(restrictions.values().toArray(new Predicate[restrictions.size()]));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return restrictions;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"private void addSkuFilterMapping(CriteriaTransferObject cto, List<Product> filterValues) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
List<String> productIds = buildProductIdList(filterValues);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
cto.getAdditionalFilterMappings().add(new FilterMapping(),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
".withFieldPath(new FieldPath().withTargetProperty(""id""))",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
.withDirectFilterValues(productIds),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"From root, String ceilingEntity,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return explicitPath.in(directValues);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
private List<String> buildProductIdList(List<Product> filterValues) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"List<String> productIds = BLCCollectionUtils.collectList(filterValues, new TypedTransformer<String>() {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
public String transform(Object input) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
Long originalId = sandBoxHelper.getOriginalId(input);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (originalId != null) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return originalId.toString();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return ((Product)input).getId().toString();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
});,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return productIds;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"private void clearFilteredProperties(CriteriaTransferObject cto, Set<String> filteredProperties) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
for (String filterProperty : filteredProperties) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
cto.getCriteriaMap().get(filterProperty).setFilterValues(Collections.<String>emptyList());,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (!legacy) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"return new DynamicResultSet(null, new Entity[0],0);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
if (eagerFetchAssociations) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
cto.getNonCountAdditionalFilterMappings().add(new FilterMapping(),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
.withDirectFilterValues(new EmptyFilterValues()),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
.withRestriction(new Restriction(),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
.withPredicateProvider(new PredicateProvider() {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
@Override,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"FieldPathBuilder fieldPathBuilder, From root,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"String ceilingEntity,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
List directValues) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"root.fetch(""defaultSku"", JoinType.LEFT);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"root.fetch(""defaultCategory"", JoinType.LEFT);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
return null;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
},d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
}),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
if (ArrayUtils.isEmpty(persistencePackage.getSectionCrumbs()) &&,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"(!cto.getCriteriaMap().containsKey(""id"") || CollectionUtils.isEmpty(cto.getCriteriaMap().get(""id"").getFilterValues()))) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
//Add special handling for product list grid fetches,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
boolean hasExplicitSort = false;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
hasExplicitSort = filter.getSortDirection() != null;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
if (hasExplicitSort) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
break;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
if (!hasExplicitSort) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
filter.setNullsLast(false);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
filter.setSortAscending(true);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
try {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
extensionManager.getProxy().initiateFetchState();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"return helper.getCompatibleModule(OperationType.BASIC).fetch(persistencePackage, cto);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
} finally {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
extensionManager.getProxy().endFetchState();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
} else {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
import java.lang.reflect.Field;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import java.util.ArrayList;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import java.util.List;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import java.util.Map;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"@Resource(name = ""blSandBoxHelper"")",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
if (productIds.size() == 0) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"return new DynamicResultSet(null, new Entity[0], 0);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
".withFieldPath(new FieldPath().withTargetProperty(""id""))",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
.withDirectFilterValues(productIds),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
.withRestriction(new Restriction(),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
.withPredicateProvider(new PredicateProvider() {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
@Override,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"From root, String ceilingEntity, String fullPropertyName,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return explicitPath.in(directValues);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
},d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
Entity entity = persistencePackage.getEntity();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"removeBundleFieldRestrictions((ProductBundle) adminInstance, adminProperties, entity);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"Map<String, FieldMetadata> adminProperties = helper.getSimpleMergedProperties(Product.class.getName(), persistencePerspective);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
*,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"((BasicFieldMetadata) adminProperties.get(""defaultSku.retailPrice"")).setRequiredOverride(false);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"((BasicFieldMetadata) adminProperties.get(""defaultSku.retailPrice"")).setRequiredOverride(true);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import org.broadleafcommerce.core.catalog.dao.ProductDao;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
import org.broadleafcommerce.openadmin.dto.Property;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
import org.broadleafcommerce.openadmin.server.service.ValidationException;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
import java.lang.reflect.Field;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
import java.util.ArrayList;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
import java.util.List;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
import java.util.Map;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"@Resource(name=""blSandBoxHelper"")",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
if(productIds.size() == 0){,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"return new DynamicResultSet(null, new Entity[0],0);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
".withFieldPath(new FieldPath().withTargetProperty(""id""))",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
.withDirectFilterValues(productIds),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
.withRestriction(new Restriction(),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
.withPredicateProvider(new PredicateProvider() {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
@Override,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"From root, String ceilingEntity, String fullPropertyName,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
return explicitPath.in(directValues);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
},d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
Entity entity  = persistencePackage.getEntity();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"removeBundleFieldRestrictions((ProductBundle)adminInstance, adminProperties, entity);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"Map<String, FieldMetadata> adminProperties = helper.getSimpleMergedProperties(Product.class.getName(), persistencePerspective);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"((BasicFieldMetadata)adminProperties.get(""defaultSku.retailPrice"")).setRequiredOverride(false);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"((BasicFieldMetadata)adminProperties.get(""defaultSku.retailPrice"")).setRequiredOverride(true);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
import org.broadleafcommerce.common.persistence.Status;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
.withPredicateProvider(new PredicateProvider() {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
@Override,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"From root, String ceilingEntity, String fullPropertyName,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return explicitPath.in(directValues);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
},d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"""filter query limitation."", joined));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
.withDirectFilterValues(new EmptyFilterValues()),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
.withRestriction(new Restriction(),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"FieldPathBuilder fieldPathBuilder, From root,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"String ceilingEntity,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
List directValues) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"root.fetch(""defaultSku"", JoinType.LEFT);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"root.fetch(""defaultCategory"", JoinType.LEFT);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return null;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
}),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"(!cto.getCriteriaMap().containsKey(""id"") || CollectionUtils.isEmpty(cto.getCriteriaMap().get(""id"").getFilterValues()))) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"Product adminInstance = getAdminInstance(persistencePackage, dynamicEntityDao, helper, entity);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"removeProduct(persistencePackage, adminInstance, helper);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"protected Product getAdminInstance(PersistencePackage persistencePackage, DynamicEntityDao dynamicEntityDao, RecordHelper helper,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
Entity entity) throws ClassNotFoundException {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"Map<String, FieldMetadata> adminProperties = helper.getSimpleMergedProperties(Product.class.getName(), persistencePerspective);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"Object primaryKey = helper.getPrimaryKey(entity, adminProperties);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
String type = entity.getType()[0];,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"Product adminInstance = (Product) dynamicEntityDao.retrieve(Class.forName(type), primaryKey);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
return adminInstance;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
"protected void removeProduct(PersistencePackage persistencePackage, Product adminInstance, RecordHelper helper) throws ServiceException {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
catalogService.removeProduct(adminInstance);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,0
import org.broadleafcommerce.common.util.ModulePresentUtil;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
.withPredicateProvider(new PredicateProvider() {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
@Override,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"From root, String ceilingEntity, String fullPropertyName,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
return explicitPath.in(directValues);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
},d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"""filter query limitation."", joined));",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
.withDirectFilterValues(new EmptyFilterValues()),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
.withRestriction(new Restriction(),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"FieldPathBuilder fieldPathBuilder, From root,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"String ceilingEntity,",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
List directValues) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"root.fetch(""defaultSku"", JoinType.LEFT);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"root.fetch(""defaultCategory"", JoinType.LEFT);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
return null;,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
}),d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
));,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"(!cto.getCriteriaMap().containsKey(""id"") || CollectionUtils.isEmpty(cto.getCriteriaMap().get(""id"").getFilterValues()))) {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"Map<String, FieldMetadata> adminProperties = helper.getSimpleMergedProperties(Product.class.getName(), persistencePerspective);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"Object primaryKey = helper.getPrimaryKey(entity, adminProperties);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"Product adminInstance = (Product) dynamicEntityDao.retrieve(Class.forName(entity.getType()[0]), primaryKey);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
if(ModulePresentUtil.isPresent(ModulePresentUtil.BroadleafModuleEnum.ENTERPRISE)) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"enterpriseRemove(persistencePackage, adminInstance, helper);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
} else {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
catalogService.removeProduct(adminInstance);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"protected void enterpriseRemove(PersistencePackage persistencePackage, Product adminInstance, RecordHelper helper) throws ServiceException {",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
if (extensionManager != null) {,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"extensionManager.getProxy().manageRemove(persistencePackage, adminInstance);",d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
helper.getCompatibleModule(OperationType.BASIC).remove(persistencePackage);,d84cd698e4cffef5d0dddfd2148c3d009178e78e,0,1
"@AdminPresentation(friendlyName = ""FieldImpl_friendlyName"", group = ""FieldImpl_general"", order = 2, gridOrder = 2,",96dce1e088f5d34b63f2973619320f7bc828311b,10,1
"@AdminPresentation(friendlyName = ""FieldImpl_propertyName"", group = ""FieldImpl_general"", order = 3, gridOrder = 3,",96dce1e088f5d34b63f2973619320f7bc828311b,10,1
"@AdminPresentation(friendlyName = ""FieldImpl_abbreviation"", group = ""FieldImpl_general"", order = 3, excluded = true)",96dce1e088f5d34b63f2973619320f7bc828311b,10,1
"@AdminPresentation(friendlyName = ""FieldImpl_searchable"", group = ""FieldImpl_general"", order = 4, excluded = true)",96dce1e088f5d34b63f2973619320f7bc828311b,9,1
"@AdminPresentation(friendlyName = ""FieldImpl_EntityType"", group = ""FieldImpl_general"", order = 1, prominent = true,",96dce1e088f5d34b63f2973619320f7bc828311b,9,1
"public static final FieldEntity PRODUCT = new FieldEntity(""PRODUCT"", ""Product"");",96dce1e088f5d34b63f2973619320f7bc828311b,8,0
"public static final FieldEntity CUSTOMER = new FieldEntity(""CUSTOMER"", ""Customer"");",96dce1e088f5d34b63f2973619320f7bc828311b,8,0
"public static final FieldEntity ORDER = new FieldEntity(""ORDER"", ""Order"");",96dce1e088f5d34b63f2973619320f7bc828311b,8,0
"public static final FieldEntity OFFER = new FieldEntity(""OFFER"", ""Offer"");",96dce1e088f5d34b63f2973619320f7bc828311b,8,0
"public static final FieldEntity PRODUCT = new FieldEntity(""PRODUCT"", ""Product"", false);",96dce1e088f5d34b63f2973619320f7bc828311b,8,1
"public static final FieldEntity CUSTOMER = new FieldEntity(""CUSTOMER"", ""Customer"", false);",96dce1e088f5d34b63f2973619320f7bc828311b,8,1
"public static final FieldEntity ORDER = new FieldEntity(""ORDER"", ""Order"", false);",96dce1e088f5d34b63f2973619320f7bc828311b,8,1
"public static final FieldEntity OFFER = new FieldEntity(""OFFER"", ""Offer"", false);",96dce1e088f5d34b63f2973619320f7bc828311b,8,1
"@AdminPresentation(friendlyName = ""FieldImpl_facetFieldType"", group = ""FieldImpl_general"", excluded = true)",96dce1e088f5d34b63f2973619320f7bc828311b,7,1
"@AdminPresentation(friendlyName = ""FieldImpl_translatable"", group = ""FieldImpl_general"", excluded = true)",96dce1e088f5d34b63f2973619320f7bc828311b,7,1
"public static final FieldEntity SKU = new FieldEntity(""SKU"", ""Sku"");",96dce1e088f5d34b63f2973619320f7bc828311b,7,0
"public static final FieldEntity ORDERITEM = new FieldEntity(""ORDER_ITEM"", ""Order Item"");",96dce1e088f5d34b63f2973619320f7bc828311b,7,0
"public static final FieldEntity SKU = new FieldEntity(""SKU"", ""Sku"", false);",96dce1e088f5d34b63f2973619320f7bc828311b,7,1
"public static final FieldEntity ORDERITEM = new FieldEntity(""ORDER_ITEM"", ""Order Item"", false);",96dce1e088f5d34b63f2973619320f7bc828311b,7,1
"prominent = true, gridOrder = 2, translatable = true,",96dce1e088f5d34b63f2973619320f7bc828311b,6,0
"prominent = true, gridOrder = 1,",96dce1e088f5d34b63f2973619320f7bc828311b,5,0
"prominent = true, gridOrder = 3,",96dce1e088f5d34b63f2973619320f7bc828311b,5,0
"@AdminPresentation(friendlyName = ""FieldImpl_isCustom"", group = ""FieldImpl_general"",",96dce1e088f5d34b63f2973619320f7bc828311b,4,1
"group = GroupName.General, order = FieldOrder.ENTITY_TYPE,",96dce1e088f5d34b63f2973619320f7bc828311b,4,0
"group = GroupName.General, order = FieldOrder.FRIENDLY_NAME,",96dce1e088f5d34b63f2973619320f7bc828311b,4,0
"group = GroupName.General, order = FieldOrder.PROPERTY_NAME,",96dce1e088f5d34b63f2973619320f7bc828311b,4,0
"group = GroupName.General, order = FieldOrder.ABBREVIATION,",96dce1e088f5d34b63f2973619320f7bc828311b,4,0
"group = GroupName.General, order = FieldOrder.TRANSLATABLE,",96dce1e088f5d34b63f2973619320f7bc828311b,4,0
"gridOrder = 1, fieldType = SupportedFieldType.BROADLEAF_ENUMERATION,",96dce1e088f5d34b63f2973619320f7bc828311b,4,1
"prominent = true, translatable = true)",96dce1e088f5d34b63f2973619320f7bc828311b,4,1
"public FieldEntity(final String type, final String friendlyType, final Boolean isCustomFieldEntity) {",96dce1e088f5d34b63f2973619320f7bc828311b,4,1
excluded = true),96dce1e088f5d34b63f2973619320f7bc828311b,3,0
prominent = true),96dce1e088f5d34b63f2973619320f7bc828311b,3,1
"public FieldEntity(final String type, final String friendlyType) {",96dce1e088f5d34b63f2973619320f7bc828311b,3,0
visibility = VisibilityEnum.VISIBLE_ALL),96dce1e088f5d34b63f2973619320f7bc828311b,2,1
"@AdminPresentation(friendlyName = ""FieldImpl_EntityType"",",96dce1e088f5d34b63f2973619320f7bc828311b,2,0
"@AdminPresentation(friendlyName = ""FieldImpl_friendlyName"",",96dce1e088f5d34b63f2973619320f7bc828311b,2,0
"@AdminPresentation(friendlyName = ""FieldImpl_propertyName"",",96dce1e088f5d34b63f2973619320f7bc828311b,2,0
"@AdminPresentation(friendlyName = ""FieldImpl_abbreviation"",",96dce1e088f5d34b63f2973619320f7bc828311b,2,0
"@AdminPresentation(friendlyName = ""FieldImpl_translatable"",",96dce1e088f5d34b63f2973619320f7bc828311b,2,0
protected List<String> additionalLookupTypes = new ArrayList<>();;,96dce1e088f5d34b63f2973619320f7bc828311b,2,0
additionalLookupTypes = new ArrayList<>();,96dce1e088f5d34b63f2973619320f7bc828311b,2,0
List<String> result = new ArrayList<>(getAdditionalLookupTypes());,96dce1e088f5d34b63f2973619320f7bc828311b,2,0
"public class FieldImpl implements Field, AdminMainEntity {",96dce1e088f5d34b63f2973619320f7bc828311b,1,0
@DirectCopyTransformMember(templateTokens = DirectCopyTransformTypes.MULTITENANT_SITE),96dce1e088f5d34b63f2973619320f7bc828311b,1,1
"public class FieldImpl implements Field, Serializable, AdminMainEntity {",96dce1e088f5d34b63f2973619320f7bc828311b,1,1
"@Column(name = ""SEARCHABLE"")",96dce1e088f5d34b63f2973619320f7bc828311b,1,1
protected Boolean searchable = false;,96dce1e088f5d34b63f2973619320f7bc828311b,1,1
// This is a broadleaf enumeration,96dce1e088f5d34b63f2973619320f7bc828311b,1,1
"@Column(name = ""FACET_FIELD_TYPE"")",96dce1e088f5d34b63f2973619320f7bc828311b,1,1
"@Column(name = ""IS_CUSTOM"")",96dce1e088f5d34b63f2973619320f7bc828311b,1,1
protected Boolean isCustom = false;,96dce1e088f5d34b63f2973619320f7bc828311b,1,1
public Boolean getSearchable() {,96dce1e088f5d34b63f2973619320f7bc828311b,1,1
public void setSearchable(Boolean searchable) {,96dce1e088f5d34b63f2973619320f7bc828311b,1,1
this.searchable = searchable;,96dce1e088f5d34b63f2973619320f7bc828311b,1,1
public FieldType getFacetFieldType() {,96dce1e088f5d34b63f2973619320f7bc828311b,1,1
public void setFacetFieldType(FieldType facetFieldType) {,96dce1e088f5d34b63f2973619320f7bc828311b,1,1
this.facetFieldType = facetFieldType == null ? null : facetFieldType.getType();,96dce1e088f5d34b63f2973619320f7bc828311b,1,1
public Boolean getIsCustom() {,96dce1e088f5d34b63f2973619320f7bc828311b,1,1
return translatable == null ? false : translatable;,96dce1e088f5d34b63f2973619320f7bc828311b,1,1
public void setIsCustom(Boolean isCustom) {,96dce1e088f5d34b63f2973619320f7bc828311b,1,1
this.isCustom = isCustom;,96dce1e088f5d34b63f2973619320f7bc828311b,1,1
"public class FieldImpl implements Field, FieldAdminPresentation, AdminMainEntity {",96dce1e088f5d34b63f2973619320f7bc828311b,1,0
"fieldType = SupportedFieldType.BROADLEAF_ENUMERATION,",96dce1e088f5d34b63f2973619320f7bc828311b,1,0
"broadleafEnumeration = ""org.broadleafcommerce.core.search.domain.FieldEntity"",",96dce1e088f5d34b63f2973619320f7bc828311b,1,0
"defaultValue = ""org.broadleafcommerce.core.catalog.domain.Product"",",96dce1e088f5d34b63f2973619320f7bc828311b,1,0
requiredOverride = RequiredOverride.REQUIRED),96dce1e088f5d34b63f2973619320f7bc828311b,1,0
"public class FieldImpl implements Field, AdminMainEntity {",96dce1e088f5d34b63f2973619320f7bc828311b,1,1
"broadleafEnumeration = ""org.broadleafcommerce.core.search.domain.FieldEntity"",",96dce1e088f5d34b63f2973619320f7bc828311b,1,1
requiredOverride = RequiredOverride.REQUIRED),96dce1e088f5d34b63f2973619320f7bc828311b,1,1
public void addAditionalLookupType(String additionalLookupType) {,96dce1e088f5d34b63f2973619320f7bc828311b,1,0
public List<String> getAdditionalLookupTypes() {,96dce1e088f5d34b63f2973619320f7bc828311b,1,0
public List<String> getAllLookupTypes() {,96dce1e088f5d34b63f2973619320f7bc828311b,1,0
this.isCustomFieldEntity = isCustomFieldEntity;,96dce1e088f5d34b63f2973619320f7bc828311b,1,1
public Boolean getIsCustomFieldEntity() {,96dce1e088f5d34b63f2973619320f7bc828311b,1,1
if (searchable == null) {,96dce1e088f5d34b63f2973619320f7bc828311b,0,0
return false;,96dce1e088f5d34b63f2973619320f7bc828311b,0,0
},96dce1e088f5d34b63f2973619320f7bc828311b,0,0
import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransform;,96dce1e088f5d34b63f2973619320f7bc828311b,0,1
import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformMember;,96dce1e088f5d34b63f2973619320f7bc828311b,0,1
import org.broadleafcommerce.common.extensibility.jpa.copy.DirectCopyTransformTypes;,96dce1e088f5d34b63f2973619320f7bc828311b,0,1
import java.io.Serializable;,96dce1e088f5d34b63f2973619320f7bc828311b,0,1
@DirectCopyTransform({,96dce1e088f5d34b63f2973619320f7bc828311b,0,1
}),96dce1e088f5d34b63f2973619320f7bc828311b,0,1
import org.broadleafcommerce.core.search.domain.solr.FieldType;,96dce1e088f5d34b63f2973619320f7bc828311b,0,1
@Deprecated,96dce1e088f5d34b63f2973619320f7bc828311b,0,1
protected String facetFieldType;,96dce1e088f5d34b63f2973619320f7bc828311b,0,1
@Override,96dce1e088f5d34b63f2973619320f7bc828311b,0,1
if (searchable == null) {,96dce1e088f5d34b63f2973619320f7bc828311b,0,1
return false;,96dce1e088f5d34b63f2973619320f7bc828311b,0,1
},96dce1e088f5d34b63f2973619320f7bc828311b,0,1
return searchable;,96dce1e088f5d34b63f2973619320f7bc828311b,0,1
return FieldType.getInstance(facetFieldType);,96dce1e088f5d34b63f2973619320f7bc828311b,0,1
cloned.setFacetFieldType(getFacetFieldType());,96dce1e088f5d34b63f2973619320f7bc828311b,0,1
cloned.setSearchable(searchable);,96dce1e088f5d34b63f2973619320f7bc828311b,0,1
import org.apache.commons.collections4.CollectionUtils;,96dce1e088f5d34b63f2973619320f7bc828311b,0,0
import java.util.ArrayList;,96dce1e088f5d34b63f2973619320f7bc828311b,0,0
import java.util.Arrays;,96dce1e088f5d34b63f2973619320f7bc828311b,0,0
import java.util.Collections;,96dce1e088f5d34b63f2973619320f7bc828311b,0,0
import java.util.List;,96dce1e088f5d34b63f2973619320f7bc828311b,0,0
@Override,96dce1e088f5d34b63f2973619320f7bc828311b,0,0
if (additionalLookupTypes == null) {,96dce1e088f5d34b63f2973619320f7bc828311b,0,0
},96dce1e088f5d34b63f2973619320f7bc828311b,0,0
additionalLookupTypes.add(additionalLookupType);,96dce1e088f5d34b63f2973619320f7bc828311b,0,0
return Collections.unmodifiableList(additionalLookupTypes);,96dce1e088f5d34b63f2973619320f7bc828311b,0,0
if (CollectionUtils.isNotEmpty(getAdditionalLookupTypes())) {,96dce1e088f5d34b63f2973619320f7bc828311b,0,0
result.add(getType());,96dce1e088f5d34b63f2973619320f7bc828311b,0,0
return Collections.unmodifiableList(result);,96dce1e088f5d34b63f2973619320f7bc828311b,0,0
} else {,96dce1e088f5d34b63f2973619320f7bc828311b,0,0
return Arrays.asList(getType());,96dce1e088f5d34b63f2973619320f7bc828311b,0,0
private Boolean isCustomFieldEntity;,96dce1e088f5d34b63f2973619320f7bc828311b,0,1
return isCustomFieldEntity;,96dce1e088f5d34b63f2973619320f7bc828311b,0,1
"groupOrder = 1000, prominent = true, translatable = true, gridOrder = 1000, requiredOverride = RequiredOverride.REQUIRED)",a13be2d28410422ea098d4789c02b1cfa45b0f2f,9,0
"groupOrder = 1000, prominent = true, translatable = true, gridOrder = 1000,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,8,1
"public static final Map<String, FieldType> SEARCH_FIELD_SOLR_FIELD_TYPE = new HashMap<String, FieldType>();",a13be2d28410422ea098d4789c02b1cfa45b0f2f,7,1
"public class FieldImpl implements Field, FieldAdminPresentation, AdminMainEntity {",a13be2d28410422ea098d4789c02b1cfa45b0f2f,7,0
"public class FieldImpl implements Field, AdminMainEntity {",a13be2d28410422ea098d4789c02b1cfa45b0f2f,7,1
"public interface SearchFacet extends Serializable, MultiTenantCloneable<SearchFacet> {",a13be2d28410422ea098d4789c02b1cfa45b0f2f,7,1
"public interface SearchFacet extends Serializable, MultiTenantCloneable<SearchFacet> {",a13be2d28410422ea098d4789c02b1cfa45b0f2f,7,1
"protected Entity getEntity(PersistencePackage persistencePackage, DynamicEntityDao dynamicEntityDao, RecordHelper helper, Entity entity, Map<String, FieldMetadata> adminProperties, SearchFacet adminInstance) throws ServiceException {",a13be2d28410422ea098d4789c02b1cfa45b0f2f,6,1
"@AdminPresentation(friendlyName = ""SearchFacetImpl_facetFieldType"", group = ""SearchFacetImpl_description"", order = 4, prominent = true, gridOrder = 4,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,6,0
public interface SearchFacet extends Serializable {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,6,0
public interface SearchFacet extends Serializable {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,6,0
"tab = ""SearchFacetImpl_Advanced_tab"", tabOrder = 2000)",a13be2d28410422ea098d4789c02b1cfa45b0f2f,5,1
if (searchable == null) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,5,1
this.facetFieldType = facetFieldType == null ? null : facetFieldType.getType();,a13be2d28410422ea098d4789c02b1cfa45b0f2f,5,1
"prominent = true, gridOrder = 2, translatable = true,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,5,0
"@AdminPresentation(friendlyName = ""FieldImpl_EntityType"", group = ""FieldImpl_general"", order = 1, prominent = true,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,5,1
} else if (SearchFieldInfo.SEARCH_FIELD_SOLR_FIELD_TYPE.get(fieldType.getType()) != null) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,0
} else if (SearchFieldInfo.SEARCH_FIELD_SOLR_FIELD_TYPE.get(fieldType) != null) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
} else if (SearchFieldInfo.SEARCH_FIELD_SOLR_FIELD_TYPE.get(fieldType.getType()) != null) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
* @author Chad Harchar (charchar),a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
if (result.equals(ExtensionResultStatusType.NOT_HANDLED) && adminInstance.getFacetFieldType() == null) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,0
* @author Chad Harchar (charchar),a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
public class SearchFacetCustomPersistenceHandler extends CustomPersistenceHandlerAdapter {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
"public Entity update(PersistencePackage persistencePackage, DynamicEntityDao dynamicEntityDao, RecordHelper helper) throws ServiceException {",a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
if (result.equals(ExtensionResultStatusType.NOT_HANDLED) && adminInstance.getFacetFieldType() == null) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
"public Entity add(PersistencePackage persistencePackage, DynamicEntityDao dynamicEntityDao, RecordHelper helper) throws ServiceException {",a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
* @author Chad Harchar (charchar),a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
public interface SearchFacetCustomPersistenceHandlerExtensionHandler extends ExtensionHandler {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
* @author Chad Harchar (charchar),a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
public class SearchFacetCustomPersistenceHandlerExtensionManager extends ExtensionManager<SearchFacetCustomPersistenceHandlerExtensionHandler> {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
"prominent = true, gridOrder = 2000, requiredOverride = RequiredOverride.REQUIRED)",a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,0
"prominent = true, gridOrder = 2000)",a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
"@AdminPresentation(friendlyName = ""FieldImpl_searchable"", group = ""FieldImpl_general"", order = 4, excluded = true)",a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
return translatable == null ? false : translatable;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
* @return the String representing the FieldType of this SearchFacet,a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,0
* @return the String representing the FieldType of this SearchFacet,a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
* @param facetFieldType the String representation of a FieldType,a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
"@AdminPresentation(friendlyName = ""FieldImpl_friendlyName"", group = ""FieldImpl_general"", order = 2, gridOrder = 2,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
"@AdminPresentation(friendlyName = ""FieldImpl_propertyName"", group = ""FieldImpl_general"", order = 3, gridOrder = 3,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
"@AdminPresentation(friendlyName = ""FieldImpl_abbreviation"", group = ""FieldImpl_general"", order = 3, excluded = true)",a13be2d28410422ea098d4789c02b1cfa45b0f2f,4,1
public class SearchFieldInfo {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
private static final Log LOG = LogFactory.getLog(SearchFacetRangeCustomPersistenceHandler.class);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
Entity entity = persistencePackage.getEntity();,a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
"SearchFacet adminInstance = (SearchFacet) dynamicEntityDao.retrieve(Class.forName(entity.getType()[0]), primaryKey);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
"return getEntity(persistencePackage, dynamicEntityDao, helper, entity, adminProperties, adminInstance);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
"adminInstance = (SearchFacet) helper.createPopulatedInstance(adminInstance, entity, adminProperties, false);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
if (extensionManager != null) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
if(adminInstance.getLabel() == null) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
SearchFacet adminInstance = (SearchFacet) Class.forName(entity.getType()[0]).newInstance();,a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
"@AdminPresentation(friendlyName = ""FieldImpl_facetFieldType"", group = ""FieldImpl_general"", excluded = true)",a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
tabOrder = 2000),a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
protected Boolean searchable = false;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
"@AdminPresentation(friendlyName = ""FieldImpl_facetFieldType"", group = ""FieldImpl_general"", excluded = true)",a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
* This String represents the FieldType for the given SearchFacet. This is the FieldType that will be used when this Field is indexed in Solr,a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,0
public String getFacetFieldType();,a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,0
* This String represents the FieldType for the given SearchFacet. This is the FieldType that will be used when this Field is indexed in Solr,a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
public String getFacetFieldType();,a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
public String getFacetFieldType() {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,0
"@AdminPresentation(friendlyName = ""SearchFacetImpl_facetFieldType"", group = ""SearchFacetImpl_description"", order = 4,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
public String getFacetFieldType() {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
"@AdminPresentation(friendlyName = ""SearchFacetImpl_field"", order = 2000, group = GroupName.General,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,0
"@AdminPresentation(friendlyName = ""SearchFacetImpl_field"", order = 2000, group = ""SearchFacetImpl_description"",",a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
tabOrder = 2000),a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
"prominent = true, gridOrder = 1,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,0
"prominent = true, gridOrder = 3,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,0
"prominent = true, translatable = true)",a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
"@AdminPresentation(friendlyName = ""FieldImpl_translatable"", group = ""FieldImpl_general"", excluded = true)",a13be2d28410422ea098d4789c02b1cfa45b0f2f,3,1
if (fieldType.equals(SearchFieldType.STRING)) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"* Unless required by applicable law or agreed to in writing, software",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
import org.broadleafcommerce.core.search.domain.solr.FieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
static {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"// if we don't have a facetFieldType set, then set a default value",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,0
"* Unless required by applicable law or agreed to in writing, software",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
import org.broadleafcommerce.core.search.domain.solr.FieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
import org.broadleafcommerce.openadmin.dto.PersistencePackage;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
public Boolean canHandleAdd(PersistencePackage persistencePackage) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
String ceilingEntityFullyQualifiedClassname = persistencePackage.getCeilingEntityFullyQualifiedClassname();,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
public Boolean canHandleUpdate(PersistencePackage persistencePackage) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
} catch (Exception e) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
adminInstance = dynamicEntityDao.merge(adminInstance);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"// if we don't have a facetFieldType set, then set a default value",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"Entity adminEntity = helper.getRecord(adminProperties, adminInstance, null, null);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"throw new ServiceException(""Unable to perform add for entity: "" + SearchFacet.class.getName(), e);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"* Unless required by applicable law or agreed to in writing, software",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
import org.broadleafcommerce.common.extension.ExtensionHandler;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
import org.broadleafcommerce.openadmin.dto.PersistencePackage;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"ExtensionResultStatusType addtoSearchableFields(PersistencePackage persistencePackage, SearchFacet SearchFacet) throws ServiceException;",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"* Unless required by applicable law or agreed to in writing, software",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
import org.broadleafcommerce.common.extension.ExtensionManager;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
import org.springframework.stereotype.Service;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
public SearchFacetCustomPersistenceHandlerExtensionManager() {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
import org.broadleafcommerce.core.search.domain.solr.FieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,0
"tabOrder = 2000,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,0
import org.broadleafcommerce.core.search.domain.solr.FieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"@AdminPresentation(friendlyName = ""FieldImpl_isCustom"", group = ""FieldImpl_general"",",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
protected Boolean isCustom = false;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
public Boolean getSearchable() {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
return false;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
public void setSearchable(Boolean searchable) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
public FieldType getFacetFieldType() {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
public void setFacetFieldType(FieldType facetFieldType) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
public Boolean getIsCustom() {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
public void setIsCustom(Boolean isCustom) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
CriteriaBuilder builder = em.getCriteriaBuilder();,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
Root<FieldImpl> root = criteria.from(FieldImpl.class);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
* The main relationship to the rest of the search index entities,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,0
* Returns the field associated with this facet.,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,0
* Returns the field associated with this facet.,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
* Sets the field associated with this facet.,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
* @param fieldName,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
* Sets the FieldType for the current SearchFacet,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
public void setFacetFieldType(String facetFieldType);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"gridVisibleFields = { ""name"", ""label"", ""fieldType.indexField.field.friendlyName"" },",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,0
public IndexFieldType getFieldType() {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,0
public void setFieldType(IndexFieldType fieldType) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,0
import org.broadleafcommerce.core.search.domain.solr.FieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"gridVisibleFields = { ""name"", ""label"", ""field"" },",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
public void setField(Field field) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
public void setFacetFieldType(String facetFieldType) {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"@AdminPresentation(friendlyName = ""SearchFacetImpl_name"", group = GroupName.General,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,0
"tabOrder = 2000,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,0
"@AdminPresentation(friendlyName = ""SearchFacetImpl_name"", group = ""SearchFacetImpl_description"",",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"tab = ""SearchFacetImpl_Advanced_tab"",",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"@AdminPresentationCollection(addType = AddMethodType.PERSIST, friendlyName = ""newRangeTitle"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"group = GroupName.General, order = FieldOrder.ENTITY_TYPE,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,0
"group = GroupName.General, order = FieldOrder.FRIENDLY_NAME,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,0
"group = GroupName.General, order = FieldOrder.PROPERTY_NAME,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,0
"group = GroupName.General, order = FieldOrder.ABBREVIATION,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,0
"group = GroupName.General, order = FieldOrder.TRANSLATABLE,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,0
"gridOrder = 1, fieldType = SupportedFieldType.BROADLEAF_ENUMERATION,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
import java.io.Serializable;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,0
"@AdminPresentation(friendlyName = ""SearchFacetImpl_multiselect"", order = 5000,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,0
import java.io.Serializable;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"tab = ""SearchFacetImpl_Advanced_tab"",",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"tabOrder = 2000,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
"@AdminPresentation(friendlyName = ""SearchFacetImpl_multiselect"", order = 6000,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
tabOrder = 3000),a13be2d28410422ea098d4789c02b1cfa45b0f2f,2,1
FieldType fieldType = FieldType.getInstance(adminInstance.getField().getFieldType());,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
import org.broadleafcommerce.core.catalog.service.SearchFieldInfo;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.core.search.service.type.SearchFieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
SearchFieldType fieldType = SearchFieldType.getInstance(adminInstance.getField().getFieldType());,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
},a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
FieldType fieldType = FieldType.getInstance(adminInstance.getField().getFieldType());,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
import org.broadleafcommerce.core.catalog.service.SearchFieldInfo;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.core.search.service.type.SearchFieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
SearchFieldType fieldType = SearchFieldType.getInstance(adminInstance.getField().getFieldType());,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* #%L,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* BroadleafCommerce Framework,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* %%,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* Copyright (C) 2009 - 2015 Broadleaf Commerce,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"* Licensed under the Apache License, Version 2.0 (the ""License"");",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* you may not use this file except in compliance with the License.,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* You may obtain a copy of the License at,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
*,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
*       http://www.apache.org/licenses/LICENSE-2.0,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"* distributed under the License is distributed on an ""AS IS"" BASIS,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* See the License for the specific language governing permissions and,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* limitations under the License.,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* #L%,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
*/,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.core.search.service.type.SearchFieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import java.util.HashMap;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import java.util.Map;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
/**,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
//Protected constructor to hide the implicit public one.,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
},a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.common.extension.ExtensionResultStatusType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
ExtensionResultStatusType result = ExtensionResultStatusType.NOT_HANDLED;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"result = extensionManager.getProxy().addtoSearchableFields(persistencePackage, adminInstance);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
},a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
FieldType fieldType = FieldType.getInstance(adminInstance.getField().getFieldType());,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* #%L,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* BroadleafCommerce Framework,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* %%,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* Copyright (C) 2009 - 2015 Broadleaf Commerce,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"* Licensed under the Apache License, Version 2.0 (the ""License"");",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* you may not use this file except in compliance with the License.,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* You may obtain a copy of the License at,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
*,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
*       http://www.apache.org/licenses/LICENSE-2.0,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"* distributed under the License is distributed on an ""AS IS"" BASIS,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* See the License for the specific language governing permissions and,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* limitations under the License.,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* #L%,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
*/,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
package org.broadleafcommerce.core.catalog.dao;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.apache.commons.logging.Log;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.apache.commons.logging.LogFactory;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.common.exception.ServiceException;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.common.extension.ExtensionResultStatusType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.core.search.domain.SearchFacet;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.openadmin.dto.Entity;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.openadmin.dto.FieldMetadata;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.openadmin.dto.PersistencePerspective;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.openadmin.server.dao.DynamicEntityDao;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.openadmin.server.service.handler.CustomPersistenceHandlerAdapter;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.openadmin.server.service.persistence.module.RecordHelper;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.springframework.stereotype.Component;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import java.util.Map;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import javax.annotation.Resource;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
/**,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"@Resource(name = ""blSearchFacetCustomPersistenceHandlerExtensionManager"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
return SearchFacet.class.getName().equals(ceilingEntityFullyQualifiedClassname);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
},a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
return canHandleAdd(persistencePackage);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
try {,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
PersistencePerspective persistencePerspective = persistencePackage.getPersistencePerspective();,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"Map<String, FieldMetadata> adminProperties = helper.getSimpleMergedProperties(SearchFacet.class.getName(), persistencePerspective);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"Object primaryKey = helper.getPrimaryKey(entity, adminProperties);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"throw new ServiceException(""Unable to perform update for entity: "" + SearchFacet.class.getName(), e);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
ExtensionResultStatusType result = ExtensionResultStatusType.NOT_HANDLED;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"result = extensionManager.getProxy().addtoSearchableFields(persistencePackage, adminInstance);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
return adminEntity;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* #%L,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* BroadleafCommerce Framework,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* %%,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* Copyright (C) 2009 - 2015 Broadleaf Commerce,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"* Licensed under the Apache License, Version 2.0 (the ""License"");",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* you may not use this file except in compliance with the License.,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* You may obtain a copy of the License at,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
*,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
*       http://www.apache.org/licenses/LICENSE-2.0,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"* distributed under the License is distributed on an ""AS IS"" BASIS,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* See the License for the specific language governing permissions and,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* limitations under the License.,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* #L%,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
*/,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
package org.broadleafcommerce.core.catalog.dao;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.common.exception.ServiceException;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.common.extension.ExtensionResultStatusType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.core.search.domain.SearchFacet;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
/**,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
},a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* #%L,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* BroadleafCommerce Framework,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* %%,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* Copyright (C) 2009 - 2015 Broadleaf Commerce,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"* Licensed under the Apache License, Version 2.0 (the ""License"");",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* you may not use this file except in compliance with the License.,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* You may obtain a copy of the License at,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
*,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
*       http://www.apache.org/licenses/LICENSE-2.0,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"* distributed under the License is distributed on an ""AS IS"" BASIS,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* See the License for the specific language governing permissions and,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* limitations under the License.,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* #L%,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
*/,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
package org.broadleafcommerce.core.catalog.dao;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
/**,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
},a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.common.presentation.RequiredOverride;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
import org.broadleafcommerce.common.presentation.client.SupportedFieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"@Column(name = ""FACET_FIELD_TYPE"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"fieldType = SupportedFieldType.BROADLEAF_ENUMERATION,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"broadleafEnumeration = ""org.broadleafcommerce.core.search.domain.solr.FieldType"",",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"requiredOverride = RequiredOverride.REQUIRED,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"defaultValue = ""t"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
protected String facetFieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"@Column(name = ""FACET_FIELD_TYPE"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
protected String facetFieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
visibility = VisibilityEnum.GRID_HIDDEN),a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"@Column(name = ""SEARCHABLE"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"@Column(name = ""FACET_FIELD_TYPE"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
protected String facetFieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"@Column(name = ""IS_CUSTOM"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
visibility = VisibilityEnum.VISIBLE_ALL),a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
},a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
return searchable;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
this.searchable = searchable;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
return FieldType.getInstance(facetFieldType);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
this.isCustom = isCustom;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
return readFieldsByEntityType(FieldEntity.PRODUCT);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
return readFieldsByEntityType(FieldEntity.SKU);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
import org.broadleafcommerce.core.catalog.domain.ProductImpl;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
CriteriaQuery<Field> criteria = builder.createQuery(Field.class);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"builder.equal(root.get(""entityType"").as(String.class), ProductImpl.class.getName()))",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
TypedQuery<Field> query = em.createQuery(criteria);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
return query.getResultList();,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"builder.equal(root.get(""entityType"").as(String.class), FieldEntity.SKU.getType())",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* @see {@link #getField()},a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
* @see {@link #getFacetFieldType()},a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
*/,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
public IndexFieldType getFieldType();,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
public void setFieldType(IndexFieldType fieldType);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
/**,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
* <p>,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
*,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
* This is a convenience method for <pre>{@code getFieldType().getIndexField().getField()}</pre>,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
* This is a convience method for <pre>{@code getFieldType().getFieldType().getType()}</pre>,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
*,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
* @see #getFieldName(),a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
public void setField(Field field);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
/**,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
*/,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.common.presentation.AdminPresentationClass;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
import org.broadleafcommerce.common.presentation.PopulateToOneFieldsEnum;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
@AdminPresentationClass(populateToOneFields = PopulateToOneFieldsEnum.TRUE),a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"@ManyToOne(optional=false, targetEntity = IndexFieldTypeImpl.class)",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"@JoinColumn(name = ""INDEX_FIELD_TYPE_ID"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"@AdminPresentationToOneLookup(lookupDisplayProperty = ""indexField.field.friendlyName"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
return fieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
},a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
this.fieldType = fieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
return getFieldType().getIndexField().getField();,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
return getFieldType().getFieldType().getType();,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
import org.broadleafcommerce.common.presentation.client.SupportedFieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"@ManyToOne(optional=false, targetEntity = FieldImpl.class)",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"@JoinColumn(name = ""FIELD_ID"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"@AdminPresentationToOneLookup(lookupDisplayProperty = ""friendlyName"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
protected Field field;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"@Column(name = ""FACET_FIELD_TYPE"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"fieldType = SupportedFieldType.BROADLEAF_ENUMERATION,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"broadleafEnumeration = ""org.broadleafcommerce.core.search.domain.solr.FieldType"",",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"requiredOverride = RequiredOverride.REQUIRED,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"defaultValue = ""t"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
protected String facetFieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
return field;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
this.field = field;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
return facetFieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
},a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
this.facetFieldType = facetFieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"group = GroupName.General,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"group = GroupName.Options,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"defaultValue = ""false"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"@AdminPresentationCollection(addType = AddMethodType.PERSIST,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"friendlyName = ""newRangeTitle"",",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
group = GroupName.General),a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"group = GroupName.Dependent,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
@AdminPresentationClass(populateToOneFields = PopulateToOneFieldsEnum.TRUE),a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"group = ""SearchFacetImpl_description"",",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"@AdminPresentation(friendlyName = ""FieldImpl_EntityType"",",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"fieldType = SupportedFieldType.BROADLEAF_ENUMERATION,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"broadleafEnumeration = ""org.broadleafcommerce.core.search.domain.FieldEntity"",",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"defaultValue = ""org.broadleafcommerce.core.catalog.domain.Product"",",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
requiredOverride = RequiredOverride.REQUIRED),a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"@AdminPresentation(friendlyName = ""FieldImpl_friendlyName"",",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"@AdminPresentation(friendlyName = ""FieldImpl_propertyName"",",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"@AdminPresentation(friendlyName = ""FieldImpl_abbreviation"",",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
excluded = true),a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"@AdminPresentation(friendlyName = ""FieldImpl_translatable"",",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"broadleafEnumeration = ""org.broadleafcommerce.core.search.domain.FieldEntity"",",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
requiredOverride = RequiredOverride.REQUIRED),a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
prominent = true),a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import com.google.common.base.Strings;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
import org.broadleafcommerce.common.presentation.*;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
import org.hibernate.annotations.*;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
import javax.persistence.*;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
import java.util.ArrayList;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
import java.util.List;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"group = GroupName.Ranges,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"order = 6000,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
group = GroupName.Ranges),a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
"defaultValue = ""false"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,0
import org.broadleafcommerce.common.presentation.AdminPresentation;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.common.presentation.AdminPresentationAdornedTargetCollection;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.common.presentation.AdminPresentationCollection;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.common.presentation.AdminPresentationToOneLookup;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.broadleafcommerce.common.presentation.RequiredOverride;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.hibernate.annotations.CacheConcurrencyStrategy;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.hibernate.annotations.Cascade;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import org.hibernate.annotations.GenericGenerator;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import com.google.common.base.Strings;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import java.util.ArrayList;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import java.util.List;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import javax.persistence.Column;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import javax.persistence.GeneratedValue;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import javax.persistence.Id;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import javax.persistence.Inheritance;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import javax.persistence.InheritanceType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import javax.persistence.JoinColumn;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import javax.persistence.ManyToOne;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
import javax.persistence.OneToMany;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"group = GroupName.General,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"order = 5000,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
"groupOrder = 1,",a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
group = GroupName.General),a13be2d28410422ea098d4789c02b1cfa45b0f2f,1,1
adminInstance.setFacetFieldType(SearchFieldInfo.SEARCH_FIELD_SOLR_FIELD_TYPE.get(fieldType.getType()).getType());,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,0
adminInstance.setFacetFieldType(SearchFieldInfo.SEARCH_FIELD_SOLR_FIELD_TYPE.get(fieldType).getType());,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
searchableFieldTypes.add(SearchFieldInfo.SEARCH_FIELD_SOLR_FIELD_TYPE.get(fieldType.getType()));,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,0
searchableFieldTypes.add(SearchFieldInfo.SEARCH_FIELD_SOLR_FIELD_TYPE.get(fieldType));,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
adminInstance.setFacetFieldType(fieldType.getType());,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,0
adminInstance.setFacetFieldType(FieldType.STRING.getType());,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
adminInstance.setFacetFieldType(SearchFieldInfo.SEARCH_FIELD_SOLR_FIELD_TYPE.get(fieldType.getType()).getType());,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
searchableFieldTypes.add(fieldType);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,0
searchableFieldTypes.add(SearchFieldInfo.SEARCH_FIELD_SOLR_FIELD_TYPE.get(fieldType.getType()));,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
/*,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
package org.broadleafcommerce.core.catalog.service;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
protected SearchFieldInfo(){,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
"SEARCH_FIELD_SOLR_FIELD_TYPE.put(SearchFieldType.BOOLEAN.getType(), FieldType.BOOLEAN);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
"SEARCH_FIELD_SOLR_FIELD_TYPE.put(SearchFieldType.DATE.getType(), FieldType.DATE);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
"SEARCH_FIELD_SOLR_FIELD_TYPE.put(SearchFieldType.DECIMAL.getType(), FieldType.DOUBLE);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
"SEARCH_FIELD_SOLR_FIELD_TYPE.put(SearchFieldType.INTEGER.getType(), FieldType.INT);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
"SEARCH_FIELD_SOLR_FIELD_TYPE.put(SearchFieldType.MONEY.getType(), FieldType.PRICE);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
"SEARCH_FIELD_SOLR_FIELD_TYPE.put(SearchFieldType.STRING.getType(), FieldType.TEXT);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
adminInstance.setFacetFieldType(FieldType.STRING.getType());,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,0
adminInstance.setFacetFieldType(fieldType.getType());,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
"extensionManager.getProxy().addtoSearchableFields(persistencePackage, adminInstance);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
/*,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
"@Component(""blSearchFacetCustomPersistenceHandler"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
protected SearchFacetCustomPersistenceHandlerExtensionManager extensionManager;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
@Override,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
adminInstance.setFacetFieldType(FieldType.STRING.getType());,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
"adminInstance.setLabel(entity.getPMap().get(""field"").getDisplayValue());",a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
/*,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
/*,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
"@Service(""blSearchFacetCustomPersistenceHandlerExtensionManager"")",a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
super(SearchFacetCustomPersistenceHandlerExtensionHandler.class);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
@Deprecated,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
// This is a broadleaf enumeration,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
@Override,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
cloned.setFacetFieldType(getFacetFieldType());,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
cloned.setSearchable(searchable);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
criteria.select(root);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
criteria.where(,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
"builder.or(builder.equal(root.get(""entityType""), FieldEntity.PRODUCT.getType()),",a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
);,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
"query.setHint(QueryHints.HINT_CACHEABLE, true);",a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
"query.setHint(QueryHints.HINT_CACHE_REGION, ""query.Catalog"");",a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
protected IndexFieldType fieldType;,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,0
@Override,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,0
".append(fieldType, other.fieldType)",a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,0
.append(fieldType),a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,0
cloned.setFieldType(fieldType.createOrRetrieveCopyInstance(context).getClone());,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,0
@Override,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
".append(field, other.field)",a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
.append(field),a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
cloned.setField(field.createOrRetrieveCopyInstance(context).getClone());,a13be2d28410422ea098d4789c02b1cfa45b0f2f,0,1
"return new PropertyValidationResult(false, ""Tried to update QuantityBasedReule with ID "" + dto.getPk() + "" but that rule does not exist"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,15,1
"return new PropertyValidationResult(false, ""Tried to update QuantityBasedRule with ID "" + dto.getPk() + "" but that rule does not exist"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,14,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, EQUALS_OPERATOR, false, false, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, GREATER_THAN_EQUALS_OPERATOR, false, false, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, GREATER_THAN_OPERATOR, false, false, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, LESS_THAN_EQUALS_OPERATOR, false, false, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, LESS_THAN_OPERATOR, false, false, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, NOT_EQUALS_OPERATOR, false, false, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, LENGTH_GREATER_THAN_OPERATOR, false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, LENGTH_GREATER_THAN_EQUALS_OPERATOR, false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, LENGTH_LESS_THAN_OPERATOR, false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, LENGTH_LESS_THAN_EQUALS_OPERATOR, false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, LENGTH_EQUALS_OPERATOR, false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,0
"buildCollectionExpression(sb, entityKey, field, value, type, secondaryType, LENGTH_GREATER_THAN_OPERATOR + ZERO_OPERATOR, false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,0
"buildCollectionExpression(sb, entityKey, field, value, type, secondaryType, LENGTH_EQUALS_OPERATOR + ZERO_OPERATOR, false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, ""=="", false, false, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, "">="", false, false, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, "">"", false, false, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, ""<="", false, false, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, ""<"", false, false, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, ""!="", false, false, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, "".size()>"", false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, "".size()>="", false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, "".size()<"", false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, "".size()<="", false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, "".size()=="", false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,10,1
"buildCollectionExpression(sb, entityKey, field, value, type, secondaryType, "".size()>0"", false, false, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,0
"buildCollectionExpression(sb, entityKey, field, value, type, secondaryType, "".size()==0"", false, false, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,0
"buildCollectionExpression(sb, entityKey, field, value, type, secondaryType, "".size()>0"", false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,1
"buildCollectionExpression(sb, entityKey, field, value, type, secondaryType, "".size()==0"", false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,1
"buildCollectionExpression(sb, entityKey, field, value, type, secondaryType, "".size()>0"", false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,0
"buildCollectionExpression(sb, entityKey, field, value, type, secondaryType, "".size()==0"", false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,0
"buildCollectionExpression(sb, entityKey, field, value, type, secondaryType, "".size()>0"", false, false, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,1
"buildCollectionExpression(sb, entityKey, field, value, type, secondaryType, "".size()==0"", false, false, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, EQUALS_OPERATOR, false, true, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, GREATER_THAN_EQUALS_OPERATOR, false, true, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, GREATER_THAN_OPERATOR, false, true, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, EQUALS_OPERATOR, false, false, true, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, NOT_EQUALS_OPERATOR, false, false, true, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, LESS_THAN_EQUALS_OPERATOR, false, true, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, ""=="", false, true, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, "">="", false, true, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, "">"", false, true, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, ""=="", false, false, true, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, ""!="", false, false, true, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, ""<="", false, true, false, false, false);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,1
"buildCollectionExpression(sb, entityKey, field, value, type, secondaryType, "".size()>0"", false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,1
"buildCollectionExpression(sb, entityKey, field, value, type, secondaryType, "".size()==0"", false, false, false, false, true);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,9,1
"@AdminPresentation(friendlyName = ""OfferImpl_marketingMessage"", order = 3000,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, CONTAINS_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, ENDS_WITH_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, STARTS_WITH_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,0
"buildExpression(sb, entityKey, field, new Object[]{""null""}, type, secondaryType, EQUALS_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, LESS_THAN_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, NOT_EQUALS_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,0
"buildExpression(sb, entityKey, field, new Object[]{""null""}, type, secondaryType, NOT_EQUALS_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,0
"buildExpression(sb, entityKey, field, new Object[]{value[0]}, type, secondaryType, GREATER_THAN_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,0
"buildExpression(sb, entityKey, field, new Object[]{value[1]}, type, secondaryType, LESS_THAN_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,0
"buildExpression(sb, entityKey, field, new Object[]{value[0]}, type, secondaryType, GREATER_THAN_EQUALS_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,0
"buildExpression(sb, entityKey, field, new Object[]{value[1]}, type, secondaryType, LESS_THAN_EQUALS_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,0
"sb.append(formatValue(field, entityKey, type, secondaryType, value, isFieldComparison, ignoreCase, ignoreQuotes));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,0
"buildExpression(sb, entityKey, field, value, type, secondaryType, "".contains"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, "".endsWith"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, "".startsWith"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,1
"buildExpression(sb, entityKey, field, new Object[]{""null""}, type, secondaryType, ""=="",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, ""<"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,1
"buildExpression(sb, entityKey, field, value, type, secondaryType, ""!="",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,1
"buildExpression(sb, entityKey, field, new Object[]{""null""}, type, secondaryType, ""!="",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,1
"buildExpression(sb, entityKey, field, new Object[]{value[0]}, type, secondaryType, "">"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,1
"buildExpression(sb, entityKey, field, new Object[]{value[1]}, type, secondaryType, ""<"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,1
"buildExpression(sb, entityKey, field, new Object[]{value[0]}, type, secondaryType, "">="",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,1
"buildExpression(sb, entityKey, field, new Object[]{value[1]}, type, secondaryType, ""<="",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,1
"prevExpression.setValue(""["" + start + "","" + end + ""]"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,0
"myCriteriaList.get(count-1).setValue(""["" + start + "","" + end + ""]"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,6,1
"sb.append(formatValue(field, entityKey, type, secondaryType, value, isFieldComparison,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"sb.append(formatValue(field, entityKey, type, secondaryType, value, isFieldComparison,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,1
"String response = entityKey + ""."" + fieldName;",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,1
"@AdminPresentation(friendlyName = ""OfferImpl_marketingMessage"", order = FieldOrder.Message,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Type"", order = FieldOrder.OfferType,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Type"", order = 1000,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,1
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Value"", order = 3000,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,1
"sb.append(formatValue(field, entityKey, type, secondaryType, value, isFieldComparison,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"sb.append(formatValue(field, entityKey, type, secondaryType, value, isFieldComparison,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,1
"public static final String CUSTOM_CRITERIA = ""criteria"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"sb.append(formatValue(field, entityKey, type, secondaryType, value, isFieldComparison,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
if ((type.equals(SupportedFieldType.ID) && secondaryType != null &&,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"sb.append(formatValue(field, entityKey, type, secondaryType, value, isFieldComparison,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,1
if ((type.equals(SupportedFieldType.ID) && secondaryType != null &&,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,1
"sb.append(formatValue(field, entityKey, type, secondaryType, value, isFieldComparison,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
if ((type.equals(SupportedFieldType.ID) && secondaryType != null &&,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"sb.append(formatValue(field, entityKey, type, secondaryType, value, isFieldComparison,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,1
if ((type.equals(SupportedFieldType.ID) && secondaryType != null &&,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,1
"sb.append(formatValue(field, entityKey, type, secondaryType, value, isFieldComparison,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"sb.append(formatValue(field, entityKey, type, secondaryType, value, isFieldComparison,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,1
"sb.append(formatValue(field, entityKey, type, secondaryType, value, isFieldComparison,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"sb.append(formatValue(field, entityKey, type, secondaryType, value, isFieldComparison,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,1
"public static final String CONTAINS_OPERATOR = ""org.apache.commons.lang3.StringUtils.contains()"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String STARTS_WITH_OPERATOR = ""org.apache.commons.lang3.StringUtils.startsWith()"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String ENDS_WITH_OPERATOR = ""org.apache.commons.lang3.StringUtils.endsWith()"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String EQUALS_OPERATOR = ""=="";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String NOT_EQUALS_OPERATOR = ""!="";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String GREATER_THAN_EQUALS_OPERATOR = "">="";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String LESS_THAN_EQUALS_OPERATOR = ""<="";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String GREATER_THAN_OPERATOR = "">"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String LESS_THAN_OPERATOR = ""<"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String LENGTH_GREATER_THAN_EQUALS_OPERATOR = ""org.apache.commons.lang3.StringUtils.length()>="";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String LENGTH_LESS_THAN_EQUALS_OPERATOR = ""org.apache.commons.lang3.StringUtils.length()<="";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String LENGTH_GREATER_THAN_OPERATOR = ""org.apache.commons.lang3.StringUtils.length()>"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String LENGTH_LESS_THAN_OPERATOR = ""org.apache.commons.lang3.StringUtils.length()<"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String LENGTH_EQUALS_OPERATOR = ""org.apache.commons.lang3.StringUtils.length()=="";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String COLLECTION_OPERATOR = ""CollectionUtils.intersection"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String ZERO_OPERATOR = ""0"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String OLD_CONTAINS_OPERATOR = "".contains"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String OLD_STARTS_WITH_OPERATOR = "".startsWith"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String OLD_ENDS_WITH_OPERATOR = "".endsWith"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String OLD_SIZE_GREATER_THAN_OPERATOR = "".size()>"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String OLD_SIZE_GREATER_THAN_EQUAL_OPERATOR = "".size()>="";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String OLD_SIZE_LESS_THAN_OPERATOR = "".size()<"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String OLD_SIZE_LESS_THAN_EQUAL_OPERATOR = "".size()<="";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"public static final String OLD_SIZE_EQUAL_OPERATOR = "".size()=="";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"""compatible form for the rules builder ("" + phrase + "")"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"""compatible form for the rules builder ("" + phrase + "")"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,1
"start = ""\"""" + start + ""\"""" ;",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"end = ""\"""" + end + ""\"""";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,5,0
"return  entityKey + ""."" + fieldName;",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,0
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Name"", order = FieldOrder.Name,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,0
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Description"", order = FieldOrder.Description,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,0
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Discount_Type"", order = FieldOrder.DiscountType,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,0
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Value"", order = FieldOrder.Amount,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,0
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Name"", order = 1000,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Description"", order = 2000,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"@AdminPresentation(friendlyName = ""OfferImpl_Offer_Discount_Type"", order = 2000,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"if (operator.equals(""=="") && !isFieldComparison && value.length > 1) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"sb.append(formatValue(field, entityKey, type, secondaryType, value,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"if (operator.equals(""=="") && !isFieldComparison && value.length > 1) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,0
"sb.append(formatValue(field, entityKey, type, secondaryType, value,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,0
if (operator.equals(EQUALS_OPERATOR) && !isFieldComparison && value.length > 1) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,0
"if (operator.equals(""=="") && !isFieldComparison && value.length > 1) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"private static final String COLLECTION_CASE = ""CollectionUtils.intersection"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,0
private static final String[] OLD_SPECIAL_CASES = {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,0
private static final String[] SPECIAL_CASES = {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,0
private static final String[] STANDARD_OPERATORS = {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,0
"throw new MVELTranslationException(MVELTranslationException.UNRECOGNIZABLE_RULE, ""Could not parse the MVEL expression to a "" +",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,0
"private static final String COLLECTIONCASE = ""CollectionUtils.intersection"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
private static final String[] SPECIALCASES = {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
private static final String[] STANDARDOPERATORS = {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"throw new MVELTranslationException(MVELTranslationException.UNRECOGNIZABLE_RULE, ""Could not parse the MVEL expression to a "" +",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"} else if (operator.equals(""=="") && isFieldComparison) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"} else if (operator.equals(""!="") && value.equals(""null"")) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"} else if (operator.equals(""!="") && isFieldComparison) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"} else if (operator.equals("">"") && isFieldComparison) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"} else if (operator.equals(""<"") && isFieldComparison) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"} else if (operator.equals("">="") && isFieldComparison) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"} else if (operator.equals(""<="") && isFieldComparison) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"} else if (operator.equals(""contains"") && isNegation) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"} else if (operator.equals(""contains"") && isFieldComparison) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"} else if (operator.equals(""startsWith"") && isNegation) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"} else if (operator.equals(""startsWith"") && isFieldComparison) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"} else if (operator.equals(""endsWith"") && isNegation) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"} else if (operator.equals(""endsWith"") && isFieldComparison) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"private static final String COLLECTION_CASE = ""CollectionUtils.intersection"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
ExpressionDTO prevExpression = lstIdx != -1 ? myCriteriaList.get(lstIdx) : null;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,0
boolean sameExpressionId = prevExpression != null && temp.getId().equals(prevExpression.getId());,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,0
"start = ""\"""" + myCriteriaList.get(count-1).getValue() + ""\"""" ;",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"end = ""\"""" + temp.getValue() + ""\"""";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"start = ""\"""" + myCriteriaList.get(count-1).getValue() + ""\"""";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
"String d1Mvel = ""CollectionUtils.intersection(?discreteOrderItem.?category.?name,[\""test category\"", \""test category 2\""]).size()>0"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,0
"String d1Mvel = ""CollectionUtils.intersection(discreteOrderItem.?category.?name,[\""test category\"", \""test category 2\""]).size()>0"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,4,1
* Obtains the requested criteria parameter,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
if (requestParams == null || requestParams.isEmpty()) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
String response = CollectionUtils.isEmpty(criteria) ? null : criteria.get(0);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
List<String> temp = new ArrayList<String>();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"int end = stringValue.indexOf("","", initial);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
end = stringValue.length() - 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
initial = end + 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"sb.append(formatField(entityKey, type, field, ignoreCase, isNegation));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
List<String> temp = new ArrayList<String>();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"int end = stringValue.indexOf("","", initial);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
end = stringValue.length() - 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
initial = end + 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"return stringValue.startsWith(""["") && stringValue.endsWith(""]"") && stringValue.indexOf("","") > 0;",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"sb.append(formatField(entityKey, type, field, ignoreCase, isNegation));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
List<String> temp = new ArrayList<String>();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"int end = stringValue.indexOf("","", initial);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
end = stringValue.length() - 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
initial = end + 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"return stringValue.startsWith(""["") && stringValue.endsWith(""]"") && stringValue.indexOf("","") > 0;",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"sb.append(formatField(entityKey, type, field, ignoreCase, isNegation));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
List<String> temp = new ArrayList<String>();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"int end = stringValue.indexOf("","", initial);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
end = stringValue.length() - 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
initial = end + 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"sb.append(formatField(entityKey, type, field, ignoreCase, isNegation));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
List<String> temp = new ArrayList<String>();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"int end = stringValue.indexOf("","", initial);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
end = stringValue.length() - 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
initial = end + 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"return stringValue.startsWith(""["") && stringValue.endsWith(""]"") && stringValue.indexOf("","") > 0;",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
List<String> temp = new ArrayList<String>();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"int end = stringValue.indexOf("","", initial);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
end = stringValue.length() - 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
initial = end + 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
protected String escapeInternalQuotes(String processedValue) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"SupportedFieldType type, SupportedFieldType secondaryType, String operator,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"return stringValue.startsWith(""["") && stringValue.endsWith(""]"") && stringValue.indexOf("","") > 0;",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"SupportedFieldType type, SupportedFieldType secondaryType, String operator,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
public void testNestedExpressionExceptionForItemQualificationDataWrapper() throws MVELTranslationException {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
Property m1 = new Property();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
Property q1 = new Property();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
Property i1 = new Property();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
Entity e1 = new Entity();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
Property m2 = new Property();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
Property q2 = new Property();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
Property i2 = new Property();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
Entity e2 = new Entity();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
public void testNestedExpressionExceptionForFulfillmentGroupQualificationDataWrapper() throws MVELTranslationException {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
Property mvelProperty = new Property();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
Entity entity = new Entity();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
public void testNestedExpressionExceptionForItemQualificationCollectionDataWrapper() throws MVELTranslationException {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"@FrameworkMapping(value = ""/{id}"", method = RequestMethod.POST, produces = ""application/json"")",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"@RequestMapping(value = ""/{id}"", method = RequestMethod.POST, produces = ""application/json"")",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
} else if (CONTAINS_OPERATOR.equals(operator) || STARTS_WITH_OPERATOR.equals(operator) || ENDS_WITH_OPERATOR.equals(operator)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"sb.append(formatField(entityKey, type, field, ignoreCase, isNegation));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
String[] components = new String[3];,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"if (phrase.contains(operator.substring(0, operatorLastIndex)) && phrase.contains(operator.substring(operatorLastIndex))) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
String[] temp = new String[3];,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"int fieldIndex = phrase.indexOf(""("", phrase.indexOf(COLLECTION_CASE)) + 1;",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"String operatorBeginning = phrase.substring(0, phrase.indexOf(""("") + 1);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"protected String[] extractOldSpecialComponents(String phrase, String operator) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"temp[2] = phrase.substring(startsWithIndex + operator.length() + 1, phrase.lastIndexOf("")""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"protected String[] extractStandardComponents(String phrase, String operator) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"protected String[] extractSpecialComponents(String phrase, String operator) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (isFieldComparison) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (isIgnoreCase) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.NOT_EQUALS_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.GREATER_THAN_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.LESS_THAN_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.GREATER_THAN_EQUALS_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.LESS_THAN_EQUALS_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.CONTAINS_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_CONTAINS_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.STARTS_WITH_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_STARTS_WITH_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.ENDS_WITH_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_ENDS_WITH_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_GREATER_THAN_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_GREATER_THAN_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_GREATER_THAN_EQUALS_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_GREATER_THAN_EQUAL_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_LESS_THAN_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_LESS_THAN_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_LESS_THAN_EQUALS_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_LESS_THAN_EQUAL_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_EQUALS_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_EQUAL_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_GREATER_THAN_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR) ||,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_EQUALS_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR) ||,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
String[] components = new String[]{};,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
temp = new String[2];,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
temp = new String[1];,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
components = new String[3];,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
if (components.length != 3) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"protected String[] extractSpecialComponents(String[] components, String key) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"temp[2] = components[0].substring(startsWithIndex + key.length() + 1, components[0].lastIndexOf("")""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"if (operator.equals(""=="") && value.equals(""null"")) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"} else if (operator.equals(""=="")) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"} else if (operator.equals(""!="")) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"} else if (operator.equals("">"")) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"} else if (operator.equals(""<"")) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"} else if (operator.equals("">="")) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"} else if (operator.equals(""<="")) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"} else if (operator.equals(""contains"")) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"} else if (operator.equals(""startsWith"")) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"} else if (operator.equals(""endsWith"")) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"} else if (operator.equals("".size()>"")) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"} else if (operator.equals("".size()>="")) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"} else if (operator.equals("".size()<"")) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"} else if (operator.equals("".size()<="")) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"} else if (operator.equals("".size()=="")) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"protected String[] extractOldSpecialComponents(String phrase, String operator) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"temp[2] = phrase.substring(specialIndex + operator.length() + 1, phrase.lastIndexOf("")""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.SIZE_GREATER_THAN_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.SIZE_GREATER_THAN_EQUALS_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.SIZE_LESS_THAN_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.SIZE_LESS_THAN_EQUALS_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.SIZE_EQUALS_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.SIZE_GREATER_THAN_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR)){,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
} else if (operator.equals(DataDTOToMVELTranslator.SIZE_EQUALS_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR)){,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
components = new String[3];,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"if (phrase.contains(operator.substring(0, operatorLastIndex)) && phrase.contains(operator.substring(operatorLastIndex))) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"int fieldIndex = phrase.indexOf(""("", phrase.indexOf(COLLECTION_CASE)) + 1;",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"String operatorBeginning = phrase.substring(0, phrase.indexOf(""("") + 1);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"protected String[] extractOldSpecialComponents(String phrase, String operator) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
String[] temp = new String[3];,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"temp[2] = phrase.substring(startsWithIndex + operator.length() + 1, phrase.lastIndexOf("")""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_GREATER_THAN_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_GREATER_THAN_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_GREATER_THAN_EQUALS_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_GREATER_THAN_EQUAL_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_LESS_THAN_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_LESS_THAN_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_LESS_THAN_EQUALS_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_LESS_THAN_EQUAL_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_EQUALS_OPERATOR) || operator.equals(DataDTOToMVELTranslator.OLD_SIZE_EQUAL_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_GREATER_THAN_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR) ||,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
} else if (operator.equals(DataDTOToMVELTranslator.LENGTH_EQUALS_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR) ||,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"sb.append(formatField(entityKey, type, field, ignoreCase, isNegation));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
int lstIdx = myCriteriaList.size() - 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
String start = prevExpression.getValue();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
String end = temp.getValue();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"public void appendExpression(String phrase, RuleBuilderFieldService fieldService, int count, DataDTO parentDTO,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"int count, ExpressionDTO temp, SupportedFieldType type) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
count > 0 &&,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
Long id = sandBoxHelper.getOriginalId(quantityBasedRule);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"COUNT_GREATER_OR_EQUAL, COUNT_LESS_THAN, COUNT_LESS_OR_EQUAL, COUNT_EQUALS, COLLECTION_IN, COLLECTION_NOT_IN,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"COUNT_GREATER_OR_EQUAL, COUNT_LESS_THAN, COUNT_LESS_OR_EQUAL, COUNT_EQUALS, COLLECTION_IN, COLLECTION_NOT_IN",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"String mvel = ""MvelHelper.toUpperCase(?discreteOrderItem.?category.?name)==MvelHelper.toUpperCase(\""merchandise\"")"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"String mvel = ""?order.?subTotal.getAmount()>=100"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"String d1Mvel = ""?discreteOrderItem.?category.?name==\""test category\"""";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"String mvel = ""?fulfillmentGroup.?address.?state.?name==\""Texas\""&&(?fulfillmentGroup.?retailFulfillmentPrice.getAmount()>=99&&?fulfillmentGroup.?retailFulfillmentPrice.getAmount()<=199)"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,0
"String mvel = ""MvelHelper.toUpperCase(discreteOrderItem.?category.?name)==MvelHelper.toUpperCase(\""merchandise\"")"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"String mvel = ""order.?subTotal.getAmount()>=100"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"String d1Mvel = ""discreteOrderItem.?category.?name==\""test category\"""";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
"String mvel = ""fulfillmentGroup.?address.?state.?name==\""Texas\""&&(fulfillmentGroup.?retailFulfillmentPrice.getAmount()>=99&&fulfillmentGroup.?retailFulfillmentPrice.getAmount()<=199)"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,3,1
if (value.length == 1) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (value.length > 1) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
} else {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"largeEntry = true, fieldType = SupportedFieldType.DESCRIPTION)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"group = GroupName.Marketing,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"group = GroupName.Description,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"group = OfferAdminPresentation.GroupName.Description,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
largeEntry = true),4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"group = OfferAdminPresentation.GroupName.Description,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"group = OfferAdminPresentation.GroupName.RuleConfiguration,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (value.length > 1) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
} else {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (value.length == 1) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
* @param requestParams,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"protected String[] getCustomCriteria(Map<String, List<String>> requestParams) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
return null;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
List<String> criteria = requestParams.get(CUSTOM_CRITERIA);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
return new String[] {response};,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
int initial = 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
//assume this is a multi-value phrase,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (end == -1) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"String tempValue = stringValue.substring(initial, end);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"String regex = ""(?<!^)\\\""(?!$)"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (isProjection(value)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
int initial = 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
//assume this is a multi-value phrase,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (end == -1) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
} else {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
response = new Object[]{value};,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
public boolean isProjection(Object value) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
String stringValue = value.toString().trim();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (value.length > 1) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (includeParenthesis) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"isFieldComparison, ignoreCase, ignoreQuotes));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (isProjection(value)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
int initial = 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
//assume this is a multi-value phrase,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (end == -1) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
} else {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
response = new Object[]{value};,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
public boolean isProjection(Object value) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
String stringValue = value.toString().trim();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (value.length > 1) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (includeParenthesis) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"isFieldComparison, ignoreCase, ignoreQuotes));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
int initial = 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
//assume this is a multi-value phrase,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (end == -1) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"String tempValue = stringValue.substring(initial, end);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"String regex = ""(?<!^)\\\""(?!$)"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (isProjection(value)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
int initial = 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
//assume this is a multi-value phrase,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (end == -1) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
} else {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
response = new Object[]{value};,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
public boolean isProjection(Object value) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
String stringValue = value.toString().trim();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (value.length > 1) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
int initial = 1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
//assume this is a multi-value phrase,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (end == -1) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"String tempValue = stringValue.substring(initial, end);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"String regex = ""(?<!^)\\\""(?!$)"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"String processedValue = stringValue.substring(initial, end);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"String regex = ""(?<!^)(?<!^\\s)\\\""(?!\\s$)(?!$)"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"return stringValue.startsWith(""["") && stringValue.endsWith(""]"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"boolean includeParenthesis, boolean isFieldComparison, boolean ignoreCase,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"boolean includeParenthesis, boolean isFieldComparison, boolean ignoreCase,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (value.length > 1) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
} else {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
MVELToDataWrapperTranslator translator = new MVELToDataWrapperTranslator();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
Property[] p1 = new Property[3];,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
Property[] p2 = new Property[3];,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
Entity[] entities = new Entity[2];,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
Property[] properties = new Property[1];,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
Entity[] entities = new Entity[1];,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = """", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/selectize"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/add"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/add"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{tab:[0-9]+}/{tabName}"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/delete"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{collectionField:.*}/details"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{collectionField:.*}/{id}/view"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{collectionField:.*}"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{collectionField:.*}/add"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{collectionField:.*}/add/{collectionItemId}/verify"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{collectionField:.*}/selectize"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{collectionField:.*}/selectize-add"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{collectionField:.*}/add"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{collectionField:.*}/addEmpty"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}/view"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}/sequence"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}/delete"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@FrameworkMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"@RequestMapping(value = """", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/selectize"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/add"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/add"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{tab:[0-9]+}/{tabName}"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/delete"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{collectionField:.*}/details"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{collectionField:.*}/{id}/view"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{collectionField:.*}"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{collectionField:.*}/add"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{collectionField:.*}/add/{collectionItemId}/verify"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{collectionField:.*}/selectize"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{collectionField:.*}/selectize-add"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{collectionField:.*}/add"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{collectionField:.*}/addEmpty"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/view"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}/view"", method = RequestMethod.GET)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}/sequence"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/sequence"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}/delete"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"@RequestMapping(value = ""/{id}/{collectionField:.*}/{collectionItemId}/{alternateId}/delete"", method = RequestMethod.POST)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
} else if (LENGTH_EQUALS_OPERATOR.equals(operator) || LENGTH_GREATER_THAN_EQUALS_OPERATOR.equals(operator) || LENGTH_GREATER_THAN_OPERATOR.equals(operator) ||,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (phrase.contains(COLLECTION_CASE)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (phrase.startsWith(COLLECTION_CASE)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
components = extractOldCollectionCase(phrase);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
} else {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
components = extractCollectionCase(phrase);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (!componentsExtracted) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
for (String operator : STANDARD_OPERATORS) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (phrase.contains(operator)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"components = extractStandardComponents(phrase, operator);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
for (String key : OLD_SPECIAL_CASES) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (phrase.indexOf(key) >= 0) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"components = extractOldSpecialComponents(phrase, key);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"int operatorLastIndex = operator.indexOf("")"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"components = extractSpecialComponents(phrase, operator);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
components = extractProjection(components);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
} catch (Exception e1) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
protected String[] extractOldCollectionCase(String phrase) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"temp[0] = phrase.substring((COLLECTION_CASE + ""("").length(), phrase.indexOf("",""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"temp[2] = phrase.substring(phrase.indexOf(""[""), phrase.indexOf(""]"") + 1);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
protected String[] extractCollectionCase(String phrase) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"String operatorEnd = phrase.substring(phrase.lastIndexOf("")""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
temp[1] = operatorBeginning + operatorEnd;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
int startsWithIndex = phrase.indexOf(operator);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"temp[2] = phrase.substring(phrase.indexOf(operator) + operator.length(), phrase.length());",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"temp[0] = phrase.substring(phrase.indexOf(""("") + 1, phrase.indexOf("")""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"String operatorEnd = operator.substring(phrase.indexOf("")""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
int operatorLastIndex = phrase.indexOf(operatorEnd);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
temp[2] = phrase.substring(operatorLastIndex + operatorEnd.length());,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (operator.equals(DataDTOToMVELTranslator.EQUALS_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"if (value.equals(""null"")) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (isFieldComparison) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (isNegation) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (isIgnoreCase) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
} else if (isFieldComparison){,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (phrase.startsWith(COLLECTIONCASE)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"components[2] = phrase.substring(((COLLECTIONCASE+""("")+components[0]+"","").length(), phrase.indexOf("").size""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"components[1] = phrase.substring(phrase.indexOf("".size""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
return components;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
for (String operator : STANDARDOPERATORS) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (phrase.contains(operator)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"temp[1] = phrase.substring(phrase.indexOf(operator) + operator.length(), phrase.length());",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
} else {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (temp.length == 2) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
components[1] = operator;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
components[2] = temp[1];,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
components = temp;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
for (String key : SPECIALCASES) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (components[0].indexOf(key) >= 0) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"String[] temp = extractSpecialComponents(components, key);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
String[] temp = extractProjection(components);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
} catch (Exception e1) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
int startsWithIndex = components[0].indexOf(key);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
} else if (,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"} else if (operator.equals("".size()>0"")){",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"} else if (operator.equals("".size()==0"")){",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (phrase.contains(DataDTOToMVELTranslator.COLLECTION_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (phrase.startsWith(DataDTOToMVELTranslator.COLLECTION_OPERATOR)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
components = extractCollectionCase(phrase);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (!componentsExtracted) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"int operatorLastIndex = operator.indexOf("")"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"if (phrase.contains(operator.substring(0, operatorLastIndex))) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"components = extractSpecialComponents(phrase, operator);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
protected String[] extractCollectionCase(String phrase) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"temp[0] = phrase.substring(phrase.indexOf(""("") + 1, phrase.indexOf("",""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
int specialIndex = phrase.indexOf(operator);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"String operatorBegin = operator.substring(0, operator.indexOf("")""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"temp[2] = phrase.substring(phrase.indexOf("","") + 1, phrase.lastIndexOf("")""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
if (phrase.contains(COLLECTION_CASE)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (phrase.startsWith(COLLECTION_CASE)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
components = extractOldCollectionCase(phrase);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
} else {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
components = extractCollectionCase(phrase);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (!componentsExtracted) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"int operatorLastIndex = operator.indexOf("")"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"components = extractSpecialComponents(phrase, operator);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
protected String[] extractOldCollectionCase(String phrase) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"temp[0] = phrase.substring((COLLECTION_CASE + ""("").length(), phrase.indexOf("",""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
protected String[] extractCollectionCase(String phrase) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"temp[2] = phrase.substring(phrase.indexOf(""[""), phrase.indexOf(""]"") + 1);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"String operatorEnd = phrase.substring(phrase.lastIndexOf("")""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
temp[1] = operatorBeginning + operatorEnd;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
int startsWithIndex = phrase.indexOf(operator);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"temp[0] = phrase.substring(phrase.indexOf(""("") + 1, phrase.indexOf("")""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"String operatorEnd = operator.substring(phrase.indexOf("")""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
int operatorLastIndex = phrase.indexOf(operatorEnd);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
temp[2] = phrase.substring(operatorLastIndex + operatorEnd.length());,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"sb.append(formatField(entityKey, type, field, ignoreCase));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"boolean ignoreCase, boolean isNegation) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (isNegation) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (!myCriteriaList.isEmpty()) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"public void appendExpression(String phrase, RuleBuilderFieldService fieldService, DataDTO parentDTO,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"ExpressionDTO temp, SupportedFieldType type) {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
int j = 0;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
if (myCriteriaList.size() > 0) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
temp.getId().equals(myCriteriaList.get(count - 1).getId()) &&,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
myCriteriaList.get(count - 1).getOperator().equals(BLCOperator.GREATER_THAN.name()) &&,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
} else {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
start = myCriteriaList.get(count-1).getValue();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
end = temp.getValue();,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
boolean isMatch = isParentRelated || dto.getPk().equals(quantityBasedRule.getId());,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
boolean isMatch = dto.getPk().equals(id) || dto.getPk().equals(quantityBasedRule.getId());,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"String d2Mvel = ""!(?discreteOrderItem.?product.?manufacturer==\""test manufacturer\"")"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,0
"String d2Mvel = ""!(discreteOrderItem.?product.?manufacturer==\""test manufacturer\"")"";",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,2,1
"value[0] = value[0].toString().replaceAll(""[\\[\\]]"", """");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"ignoreCase, ignoreQuotes));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"ignoreCase, ignoreQuotes));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"response = response.replaceAll(""\\."", "".?"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return response;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"ignoreCase, ignoreQuotes));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"value[0] = value[0].toString().replaceAll(""[\\[\\]]"", """");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"ignoreCase, ignoreQuotes));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
*,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
* @return,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
},4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
.withFilterAndSortCriteria(getCriteria(requestParams)),4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
boolean eof = false;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
while (!eof) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
eof = true;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
},4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"tempValue = tempValue.replaceAll(regex, ""\\\\\"""");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
response = temp.toArray(response);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"ignoreCase, ignoreQuotes));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
secondaryType.equals(SupportedFieldType.INTEGER)) || type.equals(SupportedFieldType.INTEGER)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
boolean eof = false;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
while (!eof) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
eof = true;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
},4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
response = temp.toArray(response);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"ignoreCase, ignoreQuotes));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
secondaryType.equals(SupportedFieldType.INTEGER)) || type.equals(SupportedFieldType.INTEGER)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
boolean eof = false;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
while (!eof) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
eof = true;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
},4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
response = temp.toArray(response);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"ignoreCase, ignoreQuotes));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
secondaryType.equals(SupportedFieldType.INTEGER)) || type.equals(SupportedFieldType.INTEGER)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
boolean eof = false;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
while (!eof) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
eof = true;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
},4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"tempValue = tempValue.replaceAll(regex, ""\\\\\"""");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
response = temp.toArray(response);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"ignoreCase, ignoreQuotes));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
secondaryType.equals(SupportedFieldType.INTEGER)) || type.equals(SupportedFieldType.INTEGER)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
boolean eof = false;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
while (!eof) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
eof = true;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
},4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
response = temp.toArray(response);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"ignoreCase, ignoreQuotes));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
boolean eof = false;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
while (!eof) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
eof = true;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
},4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"tempValue = tempValue.replaceAll(regex, ""\\\\\"""");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
response = temp.toArray(response);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"ignoreCase, ignoreQuotes));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
processedValue = escapeInternalQuotes(processedValue);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"return processedValue.replaceAll(regex, ""\\\\\"""");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
},4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"boolean isNegation, boolean ignoreQuotes) throws MVELTranslationException {",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"ignoreCase, ignoreQuotes));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
throws MVELTranslationException {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"ignoreCase, ignoreQuotes));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
},4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
},4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
p1[0] = m1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
p1[1] = q1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
p1[2] = i1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
p2[0] = m2;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
p2[1] = q2;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
p2[2] = i2;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
entities[0] = e1;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
entities[1] = e2;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"DataWrapper dataWrapper = translator.createRuleData(entities, ""orderItemMatchRule"", ""quantity"", ""id"", orderItemFieldService);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
properties[0] = mvelProperty;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
entities[0] = entity;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"DataWrapper dataWrapper = translator.createRuleData(entities, ""matchRule"", null, null, fulfillmentGroupFieldService);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"m1.setValue(""CollectionUtils.intersection(discreteOrderItem.?category.?name,[\""test category\"", \""test category 2\""]).size()>0&&discreteOrderItem.?quantity>5"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
LENGTH_LESS_THAN_EQUALS_OPERATOR.equals(operator) || LENGTH_LESS_THAN_OPERATOR.equals(operator)) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
boolean componentsExtracted = false;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
},4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
componentsExtracted = true;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
//may be an old special expression,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
for (String operator: SPECIAL_CASES) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
try {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"temp[1] = phrase.substring(phrase.indexOf("".size""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return temp;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"temp[0] = phrase.substring(fieldIndex, phrase.indexOf("",""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"temp[0] = phrase.substring(0, startsWithIndex);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
temp[1] = operator;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"temp[0] = phrase.substring(0, phrase.indexOf(operator));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.IS_NULL;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.EQUALS_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.IEQUALS;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.EQUALS;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.NOT_NULL;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.NOT_EQUAL_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.INOT_EQUAL;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.NOT_EQUAL;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.GREATER_THAN_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.GREATER_THAN;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.LESS_THAN_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.LESS_THAN;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.GREATER_OR_EQUAL_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.GREATER_OR_EQUAL;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.LESS_OR_EQUAL_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.LESS_OR_EQUAL;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.INOT_CONTAINS;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.NOT_CONTAINS;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.ICONTAINS;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.CONTAINS_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.CONTAINS;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.INOT_STARTS_WITH;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.NOT_STARTS_WITH;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.ISTARTS_WITH;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.STARTS_WITH_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.STARTS_WITH;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.INOT_ENDS_WITH;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.NOT_ENDS_WITH;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.IENDS_WITH;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.ENDS_WITH_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
return BLCOperator.ENDS_WITH;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
operator.equals(DataDTOToMVELTranslator.OLD_SIZE_GREATER_THAN_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR)){,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
operator.equals(DataDTOToMVELTranslator.OLD_SIZE_EQUAL_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR)){,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"components[0] = phrase.substring((COLLECTIONCASE+""("").length(), phrase.indexOf("",""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
components[0] = convertMapAccessSyntax(components[0]);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"temp[0] = phrase.substring(0, phrase.indexOf(operator));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
temp[0] = phrase;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
},4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
components[0] = temp[0];,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
//may be a special expression,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
try {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"temp[0] = components[0].substring(0, startsWithIndex);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"temp[1] = key.substring(1, key.length());",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.IS_NULL;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.EQUALS_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
isIgnoreCase &&,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.IEQUALS;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.EQUALS;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.NOT_NULL;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.NOT_EQUAL_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.INOT_EQUAL;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.NOT_EQUAL;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.GREATER_THAN_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.GREATER_THAN;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.LESS_THAN_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.LESS_THAN;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.GREATER_OR_EQUAL_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.GREATER_OR_EQUAL;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.LESS_OR_EQUAL_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.LESS_OR_EQUAL;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"operator.equals(""contains"") &&",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.INOT_CONTAINS;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.NOT_CONTAINS;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.ICONTAINS;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.CONTAINS_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.CONTAINS;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"operator.equals(""startsWith"") &&",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.INOT_STARTS_WITH;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.NOT_STARTS_WITH;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.ISTARTS_WITH;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.STARTS_WITH_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.STARTS_WITH;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"operator.equals(""endsWith"") &&",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.INOT_ENDS_WITH;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.NOT_ENDS_WITH;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.IENDS_WITH;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.ENDS_WITH_FIELD;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return BLCOperator.ENDS_WITH;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
componentsExtracted = true;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
},4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
for (String operator: SPECIAL_CASES) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"temp[0] = phrase.substring(0, specialIndex);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"temp[0] = phrase.substring(operatorBegin.length(), phrase.indexOf("",""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
},4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
for (String operator: SPECIAL_CASES) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
componentsExtracted = true;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"temp[0] = phrase.substring(fieldIndex, phrase.indexOf("",""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
return temp;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"temp[0] = phrase.substring(0, startsWithIndex);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
operator.equals(DataDTOToMVELTranslator.OLD_SIZE_GREATER_THAN_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR)){,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
operator.equals(DataDTOToMVELTranslator.OLD_SIZE_EQUAL_OPERATOR + DataDTOToMVELTranslator.ZERO_OPERATOR)){,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
if(isNegation) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
},4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
boolean ignoreCase) {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
},4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
sameExpressionId &&,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
prevExpression.getOperator().equals(BLCOperator.GREATER_THAN.name()) &&,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
prevExpression.getOperator().equals(BLCOperator.GREATER_OR_EQUAL.name()) &&,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
String start;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
String end;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
temp.getId().equals(myCriteriaList.get(count-1).getId()) &&,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
myCriteriaList.get(count-1).getOperator().equals(BLCOperator.GREATER_OR_EQUAL.name()) &&,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
myCriteriaList.get(count - 1).setOperator(BLCOperator.BETWEEN_INCLUSIVE.name());,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,1
"boolean isParentRelated = sandBoxHelper.isRelatedToParentCatalogIds(quantityBasedRule, dto.getPk());",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
}else {,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
},4e7cd4c715216dfc86f0ece655f37de1e5aa654f,1,0
"sb.append(""["");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""])"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""["");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append(""])"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append("")"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append(""["");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""])"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append("")"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""["");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append(""])"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
.withMaxIndex(getMaxIndex(requestParams)),4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
.withCustomCriteria(getCustomCriteria(requestParams));,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
/**,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
*/,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
.withMaxIndex(getMaxIndex(requestParams));,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
.withStartIndex(getStartIndex(requestParams)),4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
.withMaxIndex(getMaxIndex(requestParams)),4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
temp.add(tempValue);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""["");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""])"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""("");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""] contains "");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append("".intValue()"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append("")"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"temp.add(stringValue.substring(initial, end));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append(""["");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append(""])"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append("")"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append(""("");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append(""] contains "");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append("".intValue()"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
sb.append(operator);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"temp.add(stringValue.substring(initial, end));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""["");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""])"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append("")"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""("");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""] contains "");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append("".intValue()"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
sb.append(operator);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
temp.add(tempValue);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append(""["");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append(""])"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append(""("");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append(""] contains "");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append("".intValue()"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append("")"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"temp.add(stringValue.substring(initial, end));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""["");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""])"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append("")"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
temp.add(tempValue);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append(""["");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append(""])"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
temp.add(processedValue);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""["");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""])"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"temp.add(stringValue.substring(initial, end));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"boolean isNegation, boolean ignoreQuotes)",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append(""["");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append(""])"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append("")"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"m2.setValue(""CollectionUtils.intersection(orderItem.?product.?manufacturer,[\""test manufacturer\""]).size()==0"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
assert(expd1e1.getOperator().equals(BLCOperator.COLLECTION_NOT_IN.name()));,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"assert(expd1e1.getValue().equals(""[\""test manufacturer\""]""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"m1.setName(""orderItemMatchRule"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"m1.setValue(""discreteOrderItem.category.name==\""test category\"""");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"q1.setName(""quantity"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"q1.setValue(""1"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"i1.setName(""id"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"i1.setValue(""100"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
e1.setProperties(p1);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"m2.setName(""orderItemMatchRule"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"m2.setValue(""!(discreteOrderItem.product.manufacturer==\""test manufacturer\"")"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"q2.setName(""quantity"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"q2.setValue(""2"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"i2.setName(""id"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"i2.setValue(""200"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
e2.setProperties(p2);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
assert(dataWrapper.getError().equals(MVELToDataWrapperTranslator.SUB_GROUP_MESSAGE));,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"mvelProperty.setValue(""fulfillmentGroup.address.state.name==\""Texas\""&&fulfillmentGroup.retailFulfillmentPrice.getAmount()>=99&&fulfillmentGroup.retailFulfillmentPrice.getAmount()<=199"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"mvelProperty.setName(""matchRule"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"mvelProperty.setValue(""fulfillmentGroup.address.state.name==\""Texas\""&&(fulfillmentGroup.retailFulfillmentPrice.getAmount()>=99&&fulfillmentGroup.retailFulfillmentPrice.getAmount()<=199)"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
entity.setProperties(properties);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"m2.setValue(""!(discreteOrderItem.product.manufacturer==\""test manufacturer\"")"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
assert(dataWrapper.getData().get(1).getCondition().equals(BLCOperator.NOT.name()));,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
assert(expd1e1.getOperator().equals(BLCOperator.EQUALS.name()));,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"assert(expd1e1.getValue().equals(""test manufacturer""));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"mvelProperty.setValue(""fulfillmentGroup.address.state.name==\""Texas\""&&(fulfillmentGroup.retailFulfillmentPrice.getAmount()>=99&&fulfillmentGroup.retailFulfillmentPrice.getAmount()<=199)"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
import org.broadleafcommerce.common.controller.FrameworkController;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
import org.broadleafcommerce.common.controller.FrameworkMapping;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
@FrameworkController,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"@FrameworkMapping(""/{sectionKey:.+}"")",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
import org.springframework.stereotype.Controller;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
import org.springframework.web.bind.annotation.RequestMapping;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"@Controller(""blAdminBasicEntityController"")",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"@RequestMapping(""/{sectionKey:.+}"")",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append(operator.substring(0, operator.indexOf("")"")));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
sb.append(COLLECTION_OPERATOR);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""("");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(operator.substring(operator.indexOf("")"")));",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append("","");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append("")"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"sb.append(""CollectionUtils.intersection("");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
sb.append(operator);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
import org.broadleafcommerce.openadmin.web.rulebuilder.DataDTOToMVELTranslator;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"""org.apache.commons.lang3.StringUtils.startsWith()"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"""org.apache.commons.lang3.StringUtils.endsWith()"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"""org.apache.commons.lang3.StringUtils.contains()"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"""org.apache.commons.lang3.StringUtils.length()>"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"""org.apache.commons.lang3.StringUtils.length()>="",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"""org.apache.commons.lang3.StringUtils.length()<"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"""org.apache.commons.lang3.StringUtils.length()<="",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"""org.apache.commons.lang3.StringUtils.length()==""",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
};,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
//may be a projection,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
//do nothing,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
//field,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
//value,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
//operator,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
//field,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
//value,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
//operator,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
String[] temp;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
break;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
//may be a projection,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
//do nothing,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"operator.equals(""=="")",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"operator.equals(""!="")",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
isNegation,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"operator.equals(""contains"")",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"operator.equals(""startsWith"")",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"operator.equals(""endsWith"")",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"DataDTOToMVELTranslator.OLD_STARTS_WITH_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"DataDTOToMVELTranslator.OLD_ENDS_WITH_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
DataDTOToMVELTranslator.OLD_CONTAINS_OPERATOR,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"DataDTOToMVELTranslator.STARTS_WITH_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"DataDTOToMVELTranslator.ENDS_WITH_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
DataDTOToMVELTranslator.CONTAINS_OPERATOR,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"DataDTOToMVELTranslator.SIZE_GREATER_THAN_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"DataDTOToMVELTranslator.SIZE_GREATER_THAN_EQUALS_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"DataDTOToMVELTranslator.SIZE_LESS_THAN_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"DataDTOToMVELTranslator.SIZE_LESS_THAN_EQUALS_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"DataDTOToMVELTranslator.SIZE_EQUALS_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"DataDTOToMVELTranslator.EQUALS_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"DataDTOToMVELTranslator.NOT_EQUALS_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"DataDTOToMVELTranslator.GREATER_THAN_EQUALS_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"DataDTOToMVELTranslator.LESS_THAN_EQUALS_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"DataDTOToMVELTranslator.GREATER_THAN_OPERATOR,",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
DataDTOToMVELTranslator.LESS_THAN_OPERATOR,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
break;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
//value,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
""".startsWith"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
""".endsWith"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
""".contains""",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"""org.apache.commons.lang3.StringUtils.startsWith()"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"""org.apache.commons.lang3.StringUtils.endsWith()"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"""org.apache.commons.lang3.StringUtils.contains()"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"""org.apache.commons.lang3.StringUtils.length()>"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"""org.apache.commons.lang3.StringUtils.length()>="",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"""org.apache.commons.lang3.StringUtils.length()<"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"""org.apache.commons.lang3.StringUtils.length()<="",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"""org.apache.commons.lang3.StringUtils.length()==""",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
""".size()>"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
""".size()>="",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
""".size()<"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
""".size()<="",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
""".size()=="",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"""=="",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"""!="",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"""<="",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"""<"",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
""">="",",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
""">""",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
//value,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"sb.append(""!"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"response.append(""!"");",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"appendExpression(phrase, fieldService, parentDTO, myCriteriaList);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"postProcessCriteria(parentDTO, myCriteriaList, expressionDTO, type);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
prevExpression.setOperator(BLCOperator.BETWEEN.name());,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
parentDTO.getRules().add(myCriteriaList.remove(lstIdx));,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
prevExpression.setOperator(BLCOperator.BETWEEN_INCLUSIVE.name());,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
"appendExpression(phrase, fieldService, j, parentDTO, myCriteriaList);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
j++;,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
"postProcessCriteria(parentDTO, myCriteriaList, count, expressionDTO, type);",4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
myCriteriaList.get(count-1).setOperator(BLCOperator.BETWEEN.name());,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
parentDTO.getRules().add(myCriteriaList.remove(count-1));,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
WITHIN_DAYS,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
if(subCriteria.getRules().size()==1){,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
data.getRules().add(subCriteria.getRules().get(0));,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
subCriteria.getRules().get(0).setCreatedFromSubGroup(false);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
data.getRules().add(subCriteria);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,0
data.getRules().add(subCriteria);,4e7cd4c715216dfc86f0ece655f37de1e5aa654f,0,1
if (sortable) {,d1309f19fd92992a1b0602a48fb5ade59d6efd3b,2,0
if (StringUtils.isNotBlank(sortPropery) && e.findProperty(sortPropery) != null) {,d1309f19fd92992a1b0602a48fb5ade59d6efd3b,2,0
if (isLookup) {,d1309f19fd92992a1b0602a48fb5ade59d6efd3b,2,1
} else if (sortable){,d1309f19fd92992a1b0602a48fb5ade59d6efd3b,2,1
if (StringUtils.isNotBlank(sortPropery)) {,d1309f19fd92992a1b0602a48fb5ade59d6efd3b,2,1
sortProperty = adornedList.getSortField();,d1309f19fd92992a1b0602a48fb5ade59d6efd3b,1,0
},d1309f19fd92992a1b0602a48fb5ade59d6efd3b,1,0
"ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrder(), idProperty, sectionCrumbs, sortProperty);",d1309f19fd92992a1b0602a48fb5ade59d6efd3b,1,0
if (sortable){,d1309f19fd92992a1b0602a48fb5ade59d6efd3b,1,0
"ListGrid listGrid = createListGrid(ceilingType, headerFields, type, drs, sectionKey, fmd.getOrder(), idProperty, sectionCrumbs,sortProperty);",d1309f19fd92992a1b0602a48fb5ade59d6efd3b,1,1
listGrid.setIsSortable(false);,d1309f19fd92992a1b0602a48fb5ade59d6efd3b,0,1
* Returns an array of attribute map field names that we need to do replacements for in,23c3254ea1399aabd91b595298bee1f5a3e9029c,2,0
"// intentionally left out pricing context getPricingContextAttributes because that's a Map<String, String>",23c3254ea1399aabd91b595298bee1f5a3e9029c,2,0
"return MvelHelper.evaluateRule(expression, vars, EXPRESSION_CACHE, contextImports);",23c3254ea1399aabd91b595298bee1f5a3e9029c,2,0
"return MvelHelper.evaluateRule(expression, vars, EXPRESSION_CACHE, contextImports);",23c3254ea1399aabd91b595298bee1f5a3e9029c,2,1
synchronized (EXPRESSION_CACHE) {,23c3254ea1399aabd91b595298bee1f5a3e9029c,2,1
"return MvelHelper.evaluateRule(expression, vars, expressionCache);",23c3254ea1399aabd91b595298bee1f5a3e9029c,2,1
"String modifiedRule = modifyExpression(rule, ruleParameters, context);",23c3254ea1399aabd91b595298bee1f5a3e9029c,2,0
"rule = modifyExpression(rule, ruleParameters, context);",23c3254ea1399aabd91b595298bee1f5a3e9029c,2,1
* @param request,23c3254ea1399aabd91b595298bee1f5a3e9029c,2,1
"* {@link #modifyExpression(String, Map, ParserContext)}",23c3254ea1399aabd91b595298bee1f5a3e9029c,1,0
"// Map<String, PageAttribute>",23c3254ea1399aabd91b595298bee1f5a3e9029c,1,0
"// Map<String, AdminUserAttribute>",23c3254ea1399aabd91b595298bee1f5a3e9029c,1,0
"Map<String, Class<?>> contextImports = new HashMap<>();",23c3254ea1399aabd91b595298bee1f5a3e9029c,1,0
"Map<String, Class<?>> contextImports = new HashMap<>();",23c3254ea1399aabd91b595298bee1f5a3e9029c,1,1
expression = usePriceBeforeAdjustments(expression);,23c3254ea1399aabd91b595298bee1f5a3e9029c,1,0
"contextImports.put(""OfferType"", OfferType.class);",23c3254ea1399aabd91b595298bee1f5a3e9029c,1,0
expression = usePriceBeforeAdjustments(expression);,23c3254ea1399aabd91b595298bee1f5a3e9029c,1,1
"contextImports.put(""OfferType"", OfferType.class);",23c3254ea1399aabd91b595298bee1f5a3e9029c,1,1
"return MvelHelper.evaluateRule(expression, vars);",23c3254ea1399aabd91b595298bee1f5a3e9029c,1,0
"protected Map<String, Serializable> expressionCache = new EfficientLRUMap<String, Serializable>(1000);",23c3254ea1399aabd91b595298bee1f5a3e9029c,1,1
"modifiedExpression = modifiedExpression.replaceAll(attributeMap + ""\\(\\)\\[(.*)\\](?!\\.\\?value)"", attributeMap + ""()[$1].?value"");",23c3254ea1399aabd91b595298bee1f5a3e9029c,0,0
import org.springframework.stereotype.Component;,23c3254ea1399aabd91b595298bee1f5a3e9029c,0,1
"rule.replaceAll(attributeMap + ""\\(\\)\\[(.*)\\](?!\\.\\?value)"", attributeMap + ""()[$1].?value"");",23c3254ea1399aabd91b595298bee1f5a3e9029c,0,1
/**,23c3254ea1399aabd91b595298bee1f5a3e9029c,0,0
*/,23c3254ea1399aabd91b595298bee1f5a3e9029c,0,0
"""getPricingContextAttributes"",",23c3254ea1399aabd91b595298bee1f5a3e9029c,0,1
"contextImports.put(""FulfillmentType"", FulfillmentType.class);",23c3254ea1399aabd91b595298bee1f5a3e9029c,0,0
"contextImports.put(""FulfillmentType"", FulfillmentType.class);",23c3254ea1399aabd91b595298bee1f5a3e9029c,0,1
},23c3254ea1399aabd91b595298bee1f5a3e9029c,0,1
Serializable exp = null;,23c3254ea1399aabd91b595298bee1f5a3e9029c,0,0
if (expressionCache != null) {,23c3254ea1399aabd91b595298bee1f5a3e9029c,0,0
exp = expressionCache.get(rule);,23c3254ea1399aabd91b595298bee1f5a3e9029c,0,0
},23c3254ea1399aabd91b595298bee1f5a3e9029c,0,0
"exp = MVEL.compileExpression(modifiedRule, context);",23c3254ea1399aabd91b595298bee1f5a3e9029c,0,0
if (!TEST_MODE && LOG.isInfoEnabled()) {,23c3254ea1399aabd91b595298bee1f5a3e9029c,0,0
Serializable exp = expressionCache.get(rule);,23c3254ea1399aabd91b595298bee1f5a3e9029c,0,1
"exp = MVEL.compileExpression(rule, context);",23c3254ea1399aabd91b595298bee1f5a3e9029c,0,1
if (!TEST_MODE) {,23c3254ea1399aabd91b595298bee1f5a3e9029c,0,1
"""and you entered: ("" + parsableVal + ""). Dates must be in the format MM/dd/yyyy HH:mm."");",cf55ab08573f8a23e1914cdff06e40e7456d54ee,9,0
"""and you entered: ("" + parsableVal +""). Dates must be in the format MM/dd/yyyy HH:mm."");",cf55ab08573f8a23e1914cdff06e40e7456d54ee,9,1
"prevExpression.setValue(""["" + start + "","" + end + ""]"");",cf55ab08573f8a23e1914cdff06e40e7456d54ee,6,0
"myCriteriaList.get(count-1).setValue(""["" + start + "","" + end + ""]"");",cf55ab08573f8a23e1914cdff06e40e7456d54ee,6,1
"""and you entered: ("" + value[0] +"")"");",cf55ab08573f8a23e1914cdff06e40e7456d54ee,6,0
"start = ""\"""" + start + ""\"""" ;",cf55ab08573f8a23e1914cdff06e40e7456d54ee,5,0
"end = ""\"""" + end + ""\"""";",cf55ab08573f8a23e1914cdff06e40e7456d54ee,5,0
"false, false, false, false, true);",cf55ab08573f8a23e1914cdff06e40e7456d54ee,5,0
"start = ""\"""" + myCriteriaList.get(count-1).getValue() + ""\"""" ;",cf55ab08573f8a23e1914cdff06e40e7456d54ee,4,1
"end = ""\"""" + temp.getValue() + ""\"""";",cf55ab08573f8a23e1914cdff06e40e7456d54ee,4,1
"start = ""\"""" + myCriteriaList.get(count-1).getValue() + ""\"""";",cf55ab08573f8a23e1914cdff06e40e7456d54ee,4,1
String start = prevExpression.getValue();,cf55ab08573f8a23e1914cdff06e40e7456d54ee,2,0
String end = temp.getValue();,cf55ab08573f8a23e1914cdff06e40e7456d54ee,2,0
start = myCriteriaList.get(count-1).getValue();,cf55ab08573f8a23e1914cdff06e40e7456d54ee,2,1
end = temp.getValue();,cf55ab08573f8a23e1914cdff06e40e7456d54ee,2,1
"throw new MVELTranslationException(MVELTranslationException.INCOMPATIBLE_INTEGER_VALUE, ""Cannot format value for the field ("" +",cf55ab08573f8a23e1914cdff06e40e7456d54ee,2,0
"field + "") based on field type. The type of field is Integer, "" +",cf55ab08573f8a23e1914cdff06e40e7456d54ee,2,0
"buildExpression(sb, entityKey, field, new Object[]{""MvelHelper.subtractFromCurrentTime("" + value[0] + "")""}, type, SupportedFieldType.WITHIN_DAYS, GREATER_THAN_OPERATOR,",cf55ab08573f8a23e1914cdff06e40e7456d54ee,2,0
Date temp = null;,cf55ab08573f8a23e1914cdff06e40e7456d54ee,2,0
temp = RuleBuilderFormatUtil.parseDate(parsableVal);,cf55ab08573f8a23e1914cdff06e40e7456d54ee,2,0
"throw new MVELTranslationException(MVELTranslationException.INCOMPATIBLE_DATE_VALUE, ""Cannot format value for the field ("" +",cf55ab08573f8a23e1914cdff06e40e7456d54ee,2,0
"fieldName + "") based on field type. The type of field is Date, "" +",cf55ab08573f8a23e1914cdff06e40e7456d54ee,2,0
Date temp = null;,cf55ab08573f8a23e1914cdff06e40e7456d54ee,2,1
temp = RuleBuilderFormatUtil.parseDate(parsableVal);,cf55ab08573f8a23e1914cdff06e40e7456d54ee,2,1
"throw new MVELTranslationException(MVELTranslationException.INCOMPATIBLE_DATE_VALUE, ""Cannot format value for the field ("" +",cf55ab08573f8a23e1914cdff06e40e7456d54ee,2,1
"fieldName + "") based on field type. The type of field is Date, "" +",cf55ab08573f8a23e1914cdff06e40e7456d54ee,2,1
int lstIdx = myCriteriaList.size() - 1;,cf55ab08573f8a23e1914cdff06e40e7456d54ee,1,0
ExpressionDTO prevExpression = lstIdx != -1 ? myCriteriaList.get(lstIdx) : null;,cf55ab08573f8a23e1914cdff06e40e7456d54ee,1,0
boolean sameExpressionId = prevExpression != null && temp.getId().equals(prevExpression.getId());,cf55ab08573f8a23e1914cdff06e40e7456d54ee,1,0
int j = 0;,cf55ab08573f8a23e1914cdff06e40e7456d54ee,1,1
count > 0 &&,cf55ab08573f8a23e1914cdff06e40e7456d54ee,1,1
"Integer.parseInt(value[0] + """");",cf55ab08573f8a23e1914cdff06e40e7456d54ee,1,0
String convertedDate = FormatUtil.getTimeZoneFormat().format(temp);,cf55ab08573f8a23e1914cdff06e40e7456d54ee,1,0
String convertedDate = FormatUtil.getTimeZoneFormat().format(temp);,cf55ab08573f8a23e1914cdff06e40e7456d54ee,1,1
"appendExpression(phrase, fieldService, parentDTO, myCriteriaList);",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
if (!myCriteriaList.isEmpty()) {,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
"public void appendExpression(String phrase, RuleBuilderFieldService fieldService, DataDTO parentDTO,",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
"postProcessCriteria(parentDTO, myCriteriaList, expressionDTO, type);",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
"ExpressionDTO temp, SupportedFieldType type) {",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
sameExpressionId &&,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
prevExpression.getOperator().equals(BLCOperator.GREATER_THAN.name()) &&,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
prevExpression.setOperator(BLCOperator.BETWEEN.name());,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
parentDTO.getRules().add(myCriteriaList.remove(lstIdx));,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
prevExpression.getOperator().equals(BLCOperator.GREATER_OR_EQUAL.name()) &&,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
prevExpression.setOperator(BLCOperator.BETWEEN_INCLUSIVE.name());,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
"appendExpression(phrase, fieldService, j, parentDTO, myCriteriaList);",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
j++;,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
if (myCriteriaList.size() > 0) {,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
"public void appendExpression(String phrase, RuleBuilderFieldService fieldService, int count, DataDTO parentDTO,",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
"postProcessCriteria(parentDTO, myCriteriaList, count, expressionDTO, type);",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
"int count, ExpressionDTO temp, SupportedFieldType type) {",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
temp.getId().equals(myCriteriaList.get(count - 1).getId()) &&,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
myCriteriaList.get(count - 1).getOperator().equals(BLCOperator.GREATER_THAN.name()) &&,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
myCriteriaList.get(count-1).setOperator(BLCOperator.BETWEEN.name());,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
String start;,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
String end;,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
} else {,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
parentDTO.getRules().add(myCriteriaList.remove(count-1));,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
temp.getId().equals(myCriteriaList.get(count-1).getId()) &&,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
myCriteriaList.get(count-1).getOperator().equals(BLCOperator.GREATER_OR_EQUAL.name()) &&,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
myCriteriaList.get(count - 1).setOperator(BLCOperator.BETWEEN_INCLUSIVE.name());,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
case WITHIN_DAYS: {,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
try {,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
} catch (Exception e) {,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
},cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
"sb.append(""("");",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
"sb.append(""&&"");",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
"buildExpression(sb, entityKey, field, new Object[]{""MvelHelper.currentTime()""}, type, SupportedFieldType.WITHIN_DAYS, LESS_THAN_OPERATOR,",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
"sb.append("")"");",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
break;,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
if (SupportedFieldType.WITHIN_DAYS.equals(secondaryType)) {,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
"response.append(""MvelHelper.convertField(\""DATE\"","");",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
response.append(parsableVal);,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
"response.append("")"");",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
} else {,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
//convert the date to our standard date/time format,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
} catch (ParseException e) {,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
"response.append(""MvelHelper.convertField(\""DATE\"",\"""");",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
response.append(convertedDate);,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
"response.append(""\"")"");",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,0
//convert the date to our standard date/time format,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
try {,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
} catch (ParseException e) {,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
"response.append(""MvelHelper.convertField(\""DATE\"",\"""");",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
response.append(convertedDate);,cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
"response.append(""\"")"");",cf55ab08573f8a23e1914cdff06e40e7456d54ee,0,1
"throw new FieldNotAvailableException(""Unable to find field ("" + fieldNamePart + "") on the class ("" + componentClass + "")"");",f714a9c7b7243d616243380c4b85e9364711eb5d,10,0
"throw new FieldNotAvailableException(""Unable to find field ("" + fieldNamePart + "") on the class ("" + componentClass + "")"");",f714a9c7b7243d616243380c4b85e9364711eb5d,10,1
"throw new FieldNotAvailableException(""Unable to find field ("" + fieldNamePart + "") on the class ("" + componentClass + "")"");",f714a9c7b7243d616243380c4b85e9364711eb5d,10,0
"throw new FieldNotAvailableException(""Unable to find field ("" + fieldNamePart + "") on the class ("" + componentClass + "")"");",f714a9c7b7243d616243380c4b85e9364711eb5d,10,1
"throw new IllegalAccessException(""Unable to save field ("" + fieldNamePart + "") on the class ("" + componentClass + "")"");",f714a9c7b7243d616243380c4b85e9364711eb5d,9,0
"throw new IllegalAccessException(""Unable to save field ("" + fieldNamePart + "") on the class ("" + componentClass + "")"");",f714a9c7b7243d616243380c4b85e9364711eb5d,9,1
"String fullFieldName = fieldNamePrefix + ""multiValue"" + fieldNamePart.substring(0, 1) + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,6,0
"throw new IllegalAccessException(""Unable to save field ("" + fieldNamePart + "") on"" +",f714a9c7b7243d616243380c4b85e9364711eb5d,6,0
"String fullFieldName = fieldNamePrefix + ""multiValue"" + fieldNamePart.substring(0, 1) + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,6,1
"fullFieldName = fieldNamePrefix + fieldNamePart.substring(0, 1) + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,5,0
"String fullFieldName = fieldNamePrefix + fieldNamePart.substring(0, 1) + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,5,1
"String fullFieldName = fieldNamePrefix + ""multiValue"" + fieldNamePart.substring(0, 1).toUpperCase() + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,5,0
"String fullFieldName = fieldNamePrefix + ""multiValue"" + fieldNamePart.substring(0, 1).toUpperCase() + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,5,1
"String fullFieldName = fieldNamePrefix + ""multiValue"" + fieldNamePart.substring(0, 1).toUpperCase() + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,5,0
"String fullFieldName = fieldNamePrefix + ""multiValue"" + fieldNamePart.substring(0, 1).toUpperCase() + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,5,1
"fullFieldName = fieldNamePrefix.isEmpty() ? fieldNamePart : fieldNamePrefix + fieldNamePart.substring(0, 1).toUpperCase() + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,5,1
"String multiValueMapFullFieldName = fieldNamePrefix + ""multiValue"" + fieldNamePart.substring(0, 1).toUpperCase() + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,5,0
"String fullFieldName = fieldNamePrefix + ""multiValue"" + fieldNamePart.substring(0, 1).toUpperCase() + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,5,1
"fullFieldName = fieldNamePrefix + fieldNamePart.substring(0, 1) + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,5,1
"fullFieldName = fieldNamePrefix + fieldNamePart.substring(0, 1).toUpperCase() + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,4,0
"LOG.info(""Unable to find a reference to ("" + field.getType().getName() + "") in the EntityConfigurationManager. "" +",f714a9c7b7243d616243380c4b85e9364711eb5d,4,0
"fullFieldName = fieldNamePrefix + fieldNamePart.substring(0, 1).toUpperCase() + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,4,0
"fullFieldName = fieldNamePrefix + fieldNamePart.substring(0, 1).toUpperCase() + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,4,1
"fullFieldName = fieldNamePrefix + fieldNamePart.substring(0, 1).toUpperCase() + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,4,0
"standardMapFullFieldName = fieldNamePrefix + fieldNamePart.substring(0, 1).toUpperCase() + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,4,0
"LOG.info(""Unable to find a reference to ("" + field.getType().getName() + "") in the EntityConfigurationManager. "" +",f714a9c7b7243d616243380c4b85e9364711eb5d,4,0
""" the class ("" + componentClass + "")"");",f714a9c7b7243d616243380c4b85e9364711eb5d,4,0
"fullFieldName = fieldNamePrefix + fieldNamePart.substring(0, 1).toUpperCase() + fieldNamePart.substring(1);",f714a9c7b7243d616243380c4b85e9364711eb5d,4,1
"LOG.info(""Unable to find a reference to ("" + field.getType().getName() + "") in the EntityConfigurationManager. "" +",f714a9c7b7243d616243380c4b85e9364711eb5d,4,1
"throw new IllegalArgumentException(String.format(""A field containing a map field separator was requested "" +",f714a9c7b7243d616243380c4b85e9364711eb5d,3,0
"value = PropertyUtils.getProperty(bean, fullFieldName);",f714a9c7b7243d616243380c4b85e9364711eb5d,2,0
"value = handleMapFieldExtraction(bean, fieldName, componentClass, value, fieldNamePart, mapKey);",f714a9c7b7243d616243380c4b85e9364711eb5d,2,0
"value = PropertyUtils.getProperty(bean, multiValueMapFullFieldName);",f714a9c7b7243d616243380c4b85e9364711eb5d,2,0
"value = PropertyUtils.getProperty(bean, standardMapFullFieldName);",f714a9c7b7243d616243380c4b85e9364711eb5d,2,0
value = ((Map) value).get(mapKey);,f714a9c7b7243d616243380c4b85e9364711eb5d,2,0
value = ((List) value).get(0);,f714a9c7b7243d616243380c4b85e9364711eb5d,2,0
"value = PropertyUtils.getProperty(bean, fullFieldName);",f714a9c7b7243d616243380c4b85e9364711eb5d,2,1
if (value != null && mapKey != null) {,f714a9c7b7243d616243380c4b85e9364711eb5d,2,1
value = ((Map) value).get(mapKey);,f714a9c7b7243d616243380c4b85e9364711eb5d,2,1
value = ((List) value).get(0);,f714a9c7b7243d616243380c4b85e9364711eb5d,2,1
"String fieldNamePrefix = fieldName.substring(0, fieldName.indexOf(fieldNamePart));",f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
"map = (Map) PropertyUtils.getProperty(bean, fullFieldName);",f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
Map map = new HashMap();,f714a9c7b7243d616243380c4b85e9364711eb5d,1,1
"String fieldNamePrefix = fieldName.substring(0, fieldName.indexOf(fieldNamePart));",f714a9c7b7243d616243380c4b85e9364711eb5d,1,1
"LOG.info(""Unable to find a reference to (""+field.getType().getName()+"") in the EntityConfigurationManager. "" +",f714a9c7b7243d616243380c4b85e9364711eb5d,1,1
"String fieldNamePrefix = fieldName.substring(0, fieldName.indexOf(fieldNamePart));",f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
fullFieldName =  fieldNamePart;,f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
if (value instanceof List && !((List) value).isEmpty()) {,f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
"String fieldNamePrefix = fieldName.substring(0, fieldName.indexOf(fieldNamePart));",f714a9c7b7243d616243380c4b85e9364711eb5d,1,1
if (value instanceof List) {,f714a9c7b7243d616243380c4b85e9364711eb5d,1,1
"String fieldNamePrefix = fieldName.substring(0, fieldName.indexOf(fieldNamePart));",f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
fullFieldName =  fieldNamePart;,f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
"String fieldNamePrefix = fieldName.substring(0, fieldName.indexOf(fieldNamePart));",f714a9c7b7243d616243380c4b85e9364711eb5d,1,1
"String fieldNamePrefix = fieldName.substring(0, fieldName.indexOf(fieldNamePart));",f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
String standardMapFullFieldName = null;,f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
if (value instanceof List) {,f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
if (value != null && !(value instanceof Map)) {,f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
"List<String> names = Arrays.asList(fieldNamePart, multiValueMapFullFieldName);",f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
"String combined = StringUtils.join(names, "","");",f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
"""(%s), but no Map type field or method returning a Map was found using the following tests (%s)"",",f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
if (value != null) {,f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
if (value instanceof List && !((List) value).isEmpty()) {,f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
"Field field, Object value, String fieldNamePart, String mapKey) throws IllegalAccessException {",f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
"Map<String, Object> map = null;",f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
Object fieldValue = field.get(value);,f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
"map = (Map<String, Object>) PropertyUtils.getProperty(bean, multiValueMapFullFieldName);",f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
"map = (Map<String, Object>) PropertyUtils.getProperty(bean, standardMapFullFieldName);",f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
"map = (Map<String, Object>) fieldValue;",f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
Object currentValue = map.get(mapKey);,f714a9c7b7243d616243380c4b85e9364711eb5d,1,0
if (value instanceof List) {,f714a9c7b7243d616243380c4b85e9364711eb5d,1,1
"String fieldNamePrefix = fieldName.substring(0, fieldName.indexOf(fieldNamePart));",f714a9c7b7243d616243380c4b85e9364711eb5d,1,1
fullFieldName =  fieldNamePart;,f714a9c7b7243d616243380c4b85e9364711eb5d,1,1
if (value instanceof List && !((List) value).isEmpty()) {,f714a9c7b7243d616243380c4b85e9364711eb5d,1,1
"map = (Map<String, Object>)PropertyUtils.getProperty(bean, fullFieldName);",f714a9c7b7243d616243380c4b85e9364711eb5d,1,1
"map = (Map<String, Object>) PropertyUtils.getProperty(bean, fullFieldName);",f714a9c7b7243d616243380c4b85e9364711eb5d,1,1
"map = (Map<String, Object>) field.get(value);",f714a9c7b7243d616243380c4b85e9364711eb5d,1,1
Object currentValue = map.get(mapKey);,f714a9c7b7243d616243380c4b85e9364711eb5d,1,1
try {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
} catch (InvocationTargetException|NoSuchMethodException n) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
},f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
Map map;,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
"""Using the type of this class."");",f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
import org.apache.commons.collections.map.MultiValueMap;,f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
try {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
"""Using the type of this class."");",f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
if (fieldNamePrefix.isEmpty()) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
} else {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
},f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
if (fieldNamePrefix.isEmpty()) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
} else {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
},f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
import org.apache.commons.lang3.StringUtils;,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
import java.util.Arrays;,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
if (mapKey != null) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
"handleMapFieldPopulation(bean, fieldName, newValue, componentClass, field, value, fieldNamePart, mapKey);",f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
"protected Object handleMapFieldExtraction(Object bean, String fieldName, Class<?> componentClass, Object value,",f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
"String fieldNamePart, String mapKey) throws IllegalAccessException, FieldNotAvailableException {",f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
if (!StringUtils.isEmpty(fieldNamePrefix)) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
},f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
try {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
} catch (InvocationTargetException | NoSuchMethodException e) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
if (!StringUtils.isEmpty(standardMapFullFieldName)) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
} catch (InvocationTargetException | NoSuchMethodException n) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
names.add(standardMapFullFieldName);,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
"fieldName, combined));",f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
// This handles gathering the first element of a list that came from a MultiValue Map,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
// used for single-value CustomFields,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
return value;,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
"protected void handleMapFieldPopulation(Object bean, String fieldName, Object newValue, Class<?> componentClass,",f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
if (fieldValue instanceof List) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
} catch (InvocationTargetException |NoSuchMethodException e) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
"""Using the type of this class."");",f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
} else {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
if (fieldValue != null && map == null) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
if (newValue == null) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
if (currentValue != null && currentValue instanceof ValueAssignable) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
((ValueAssignable) currentValue).setValue(null);,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
map.remove(mapKey);,f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
"map.put(mapKey, newValue);",f714a9c7b7243d616243380c4b85e9364711eb5d,0,0
import org.apache.commons.collections4.MapUtils;,f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
import org.broadleafcommerce.common.util.ApplicationContextHolder;,f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
import java.util.Collection;,f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
try {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
} catch (InvocationTargetException|NoSuchMethodException e) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
if (fieldNamePrefix.isEmpty()) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
} else {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
},f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
} catch (InvocationTargetException|NoSuchMethodException n) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
// This handles gathering the first element of a list that came from a MultiValue Map,f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
// used for single-value CustomFields,f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
"Map<String, Object> map;",f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
if (field.get(value) instanceof List) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
"""Using the type of this class."");",f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
if (newValue == null) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
if (currentValue != null && currentValue instanceof ValueAssignable) {,f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
((ValueAssignable) currentValue).setValue(null);,f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
map.remove(mapKey);,f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
"map.put(mapKey, newValue);",f714a9c7b7243d616243380c4b85e9364711eb5d,0,1
*  for the given {@link Product} or {@link OrderItem}.,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,4,0
*  for the given {@link Product}.,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,3,1
import org.broadleafcommerce.core.order.domain.OrderItem;,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,1,0
import org.broadleafcommerce.core.promotionMessage.domain.type.PromotionMessagePlacementType;,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,1,0
import org.springframework.util.CollectionUtils;,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,1,0
import java.util.ArrayList;,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,1,0
List<PromotionMessageDTO> filteredPromotionMessages = new ArrayList<>();,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,1,0
List<String> requestedPlacement = new ArrayList<>();,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,1,0
"Map<String, List<PromotionMessageDTO>> generatePromotionMessages(Product product);",59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
List<String> generatePromotionMessages(OrderItem orderItem);,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
"public Map<String, List<PromotionMessageDTO>> generatePromotionMessages(Product product);",59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,1
"public static final String PLACEMENT = ""placement"";",59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
List<String> placementTypes = getPlacementFromArguments(element);,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
placementTypes.add(PromotionMessagePlacementType.EVERYWHERE.getType());,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
for (String type : promotionMessages.keySet()) {,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
if (placementTypes.contains(type)) {,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
filteredPromotionMessages.addAll(promotionMessages.get(type));,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
},59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
BLCPromotionMessageUtils.sortMessagesByPriority(filteredPromotionMessages);,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
"newVars.put(""promotionMessages"", filteredPromotionMessages);",59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
protected List<String> getPlacementFromArguments(Element element) {,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
String placementString = element.getAttributeValue(PLACEMENT);,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
"for (String placement : placementString.split("","")) {",59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
placement = placement.trim();,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
"if (testPlacementType(requestedPlacement, placement)) {",59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
requestedPlacement.add(placement);,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
return requestedPlacement;,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
"protected Boolean testPlacementType(List<String> requestedPlacement, String placement) {",59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
try {,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
PromotionMessagePlacementType type = PromotionMessagePlacementType.getInstance(placement);,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
requestedPlacement.add(type.getType());,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
} catch (Exception e) {,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
"LOG.error(""Unrecognized Promotion Message Placement Type"", e);",59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
return Boolean.FALSE;,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
return Boolean.TRUE;,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,0
BLCPromotionMessageUtils.sortMessagesByPriority(promotionMessages);,59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,1
"newVars.put(""promotionMessageMap"", promotionMessages);",59684b01f7e295adaf4ad6af7bd426d37f1c17b9,0,1
"public String viewCustomerPayment(HttpServletRequest request, Model model, Long customerPaymentId) {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,4,0
"public String updateCustomerPayment(HttpServletRequest request, Model model, Long customerPaymentId) {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,4,0
"public String removeCustomerPayment(HttpServletRequest request, Model model, Long customerPaymentId) {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,4,0
"public String viewCustomerPayment(HttpServletRequest request, Model model, @PathVariable(""customerPaymentId"") Long customerPaymentId) {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,4,1
"public String updateCustomerPayment(HttpServletRequest request, Model model, @PathVariable(""customerPaymentId"") Long customerPaymentId) {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,4,1
"public String removeCustomerPayment(HttpServletRequest request, Model model, @PathVariable(""customerPaymentId"") Long customerPaymentId) {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,4,1
"public String removeCustomerPayment(HttpServletRequest request, Model model, Long customerPaymentId) {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,4,0
"public String viewCustomerPayment(HttpServletRequest request, Model model, Long customerPaymentId) {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,4,1
"public String updateCustomerPayment(HttpServletRequest request, Model model, SavePaymentForm form, BindingResult result, Long customerPaymentId) {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,4,1
"public String removeCustomerPayment(HttpServletRequest request, Model model, SavePaymentForm form, Long customerPaymentId) {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,4,1
"public String viewCustomerPayments(HttpServletRequest request, Model model, SavedPaymentForm savedPaymentForm) {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,4,0
"public String addCustomerPayment(HttpServletRequest request, Model model,",f1144e3fe313ede002eccf80e175bc4c8b949f4a,4,0
"public String addCustomerPayment(HttpServletRequest request, Model model, SavePaymentForm paymentForm,",f1144e3fe313ede002eccf80e175bc4c8b949f4a,4,1
"public String viewCustomerPayments(HttpServletRequest request, Model model) {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,3,1
"//TODO: update model, add form",f1144e3fe313ede002eccf80e175bc4c8b949f4a,2,0
//TODO: update model,f1144e3fe313ede002eccf80e175bc4c8b949f4a,2,1
"//TODO: update model, add form",f1144e3fe313ede002eccf80e175bc4c8b949f4a,2,1
Customer customer = CustomerState.getCustomer();,f1144e3fe313ede002eccf80e175bc4c8b949f4a,2,0
Customer customer = CustomerState.getCustomer();,f1144e3fe313ede002eccf80e175bc4c8b949f4a,2,1
Customer activeCustomer = CustomerState.getCustomer();,f1144e3fe313ede002eccf80e175bc4c8b949f4a,1,0
"throw new SecurityException(""The active customer does not own the object that they are trying to view, edit, or remove."");",f1144e3fe313ede002eccf80e175bc4c8b949f4a,1,0
"@RequestMapping(value = ""/{customerPaymentId}/"", method = RequestMethod.GET)",f1144e3fe313ede002eccf80e175bc4c8b949f4a,1,1
"@RequestMapping(value = ""/{customerPaymentId}/"", method = RequestMethod.POST)",f1144e3fe313ede002eccf80e175bc4c8b949f4a,1,1
"@RequestMapping(value = ""/{customerPaymentId}/"", method = RequestMethod.POST, params=""removePayment=Remove"")",f1144e3fe313ede002eccf80e175bc4c8b949f4a,1,1
"throw new IllegalArgumentException(""Requested customer payment does not exist."");",f1144e3fe313ede002eccf80e175bc4c8b949f4a,1,0
"throw new InvalidParameterException(""Requested customer payment does not exist."");",f1144e3fe313ede002eccf80e175bc4c8b949f4a,1,1
import org.broadleafcommerce.profile.core.domain.Customer;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
import org.broadleafcommerce.profile.core.domain.CustomerPayment;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
import org.broadleafcommerce.profile.core.service.CustomerPaymentService;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
import org.broadleafcommerce.profile.web.core.CustomerState;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
import org.springframework.beans.factory.annotation.Value;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
import javax.annotation.Resource;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
"@Value(""${validate.customer.owned.data:true}"")",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
protected boolean validateCustomerOwnedData;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
"@Resource(name = ""blCustomerPaymentService"")",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
protected CustomerPaymentService customerPaymentService;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
protected void validateCustomerOwnedData(CustomerPayment customerPayment) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
if (validateCustomerOwnedData) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
if (activeCustomer != null,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
&& !(activeCustomer.equals(customerPayment.getCustomer()))) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
},f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
if (activeCustomer == null && customerPayment.getCustomer() != null) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
import org.springframework.stereotype.Controller;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
import org.springframework.web.bind.annotation.PathVariable;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
import org.springframework.web.bind.annotation.RequestMapping;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
import org.springframework.web.bind.annotation.RequestMethod;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
@Controller,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"@RequestMapping(""/account/payments"")",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
@RequestMapping(method = RequestMethod.GET),f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
return getCustomerPaymentView();,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
},f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
return getCustomerPaymentRedirect();,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
import org.broadleafcommerce.core.web.service.InitBinderService;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
import org.broadleafcommerce.profile.core.domain.Customer;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
import org.broadleafcommerce.profile.core.domain.CustomerAddress;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
import org.broadleafcommerce.profile.core.domain.CustomerPayment;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
import org.broadleafcommerce.profile.core.service.AddressService;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
import org.broadleafcommerce.profile.core.service.CustomerAddressService;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
import org.broadleafcommerce.profile.core.service.CustomerPaymentService;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
import javax.annotation.Resource;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
import javax.servlet.http.HttpServletRequest;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
"@Resource(name = ""blInitBinderService"")",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
protected InitBinderService initBinderService;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
initBinderService.configAddressInitBinder(binder);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
import org.broadleafcommerce.common.i18n.domain.ISOCountry;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
import org.broadleafcommerce.common.i18n.service.ISOService;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
import org.broadleafcommerce.profile.core.domain.*;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
import org.broadleafcommerce.profile.core.service.*;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
import javax.annotation.Resource;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
import javax.servlet.http.HttpServletRequest;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
import java.beans.PropertyEditorSupport;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"@Resource(name = ""blCountryService"")",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
protected CountryService countryService;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"@Resource(name = ""blStateService"")",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
protected StateService stateService;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"@Resource(name = ""blISOService"")",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
protected ISOService isoService;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
/**,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
* @deprecated - address.setState() is deprecated in favor of ISO standardization,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
* This is here for legacy compatibility,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
*/,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"binder.registerCustomEditor(State.class, ""address.state"", new PropertyEditorSupport() {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
@Override,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
public void setAsText(String text) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
if (StringUtils.isNotEmpty(text)) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
State state = stateService.findStateByAbbreviation(text);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
setValue(state);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
} else {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
setValue(null);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
},f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
});,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
* @deprecated - address.setCountry() is deprecated in favor of ISO standardization,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"binder.registerCustomEditor(Country.class, ""address.country"", new PropertyEditorSupport() {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
Country country = countryService.findCountryByAbbreviation(text);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
setValue(country);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"binder.registerCustomEditor(ISOCountry.class, ""address.isoCountryAlpha2"", new PropertyEditorSupport() {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
ISOCountry isoCountry = isoService.findISOCountryByAlpha2Code(text);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
setValue(isoCountry);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
}else {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"binder.registerCustomEditor(Phone.class, ""address.phonePrimary"", new PropertyEditorSupport() {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
Phone phone = new PhoneImpl();,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
phone.setPhoneNumber(text);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
setValue(phone);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"binder.registerCustomEditor(Phone.class, ""address.phoneSecondary"", new PropertyEditorSupport() {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"binder.registerCustomEditor(Phone.class, ""address.phoneFax"", new PropertyEditorSupport() {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
import org.broadleafcommerce.core.web.controller.account.validator.SavedPaymentFormValidator;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
import org.broadleafcommerce.core.web.payment.service.SavedPaymentService;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
"* This is the page controller for adding, updating, and deleting a customer's saved payments.",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
* @author Chris Kittrell (ckittrell),f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
"@Resource(name = ""blSavedPaymentService"")",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
protected SavedPaymentService savedPaymentService;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
"@Resource(name = ""blSavedPaymentFormValidator"")",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
protected SavedPaymentFormValidator savedPaymentFormValidator;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
if (customer == null) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
List<CustomerAddress> customerAddresses = customerAddressService.readActiveCustomerAddressesByCustomerId(customer.getId());,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
"model.addAttribute(""customerAddresses"", customerAddresses);",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
"SavedPaymentForm savedPaymentForm, BindingResult bindingResult) {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
addressService.populateAddressISOCountrySub(savedPaymentForm.getAddress());,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
"savedPaymentFormValidator.validate(savedPaymentForm, bindingResult);",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
if (!bindingResult.hasErrors()) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
if ((savedPaymentForm.getAddress().getPhonePrimary() != null) &&,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
(StringUtils.isEmpty(savedPaymentForm.getAddress().getPhonePrimary().getPhoneNumber()))) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
savedPaymentForm.getAddress().setPhonePrimary(null);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
},f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
if ((savedPaymentForm.getAddress().getPhoneSecondary() != null) &&,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
(StringUtils.isEmpty(savedPaymentForm.getAddress().getPhoneSecondary().getPhoneNumber()))) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
savedPaymentForm.getAddress().setPhoneSecondary(null);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
if ((savedPaymentForm.getAddress().getPhoneFax() != null) &&,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
(StringUtils.isEmpty(savedPaymentForm.getAddress().getPhoneFax().getPhoneNumber()))) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
savedPaymentForm.getAddress().setPhoneFax(null);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
"savedPaymentService.addSavedPayment(customer, savedPaymentForm);",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
return getCustomerPaymentView();,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
if (customerPayment == null) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,0
import org.broadleafcommerce.common.payment.PaymentAdditionalFieldType;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
import org.broadleafcommerce.core.web.checkout.validator.BillingInfoFormValidator;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
import org.broadleafcommerce.core.web.controller.account.validator.SavePaymentValidator;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
import org.springframework.beans.factory.annotation.Value;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
import java.security.InvalidParameterException;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"* This is the page controller for adding, updating, and deleting saved payment information.",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"@Value(""${validate.customer.owned.data:true}"")",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
protected boolean validateCustomerOwnedData;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"@Resource(name = ""blSavePaymentValidator"")",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
protected SavePaymentValidator savePaymentValidator;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"@Resource(name = ""blBillingInfoFormValidator"")",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
protected BillingInfoFormValidator billingInfoFormValidator;,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
if(customer == null) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
SavePaymentForm savePaymentForm = new SavePaymentForm();,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
savePaymentForm.setDefaultMethod(savedPaymentList.isEmpty());,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"model.addAttribute(""savePaymentForm"", savePaymentForm);",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
List<CustomerAddress> customerAddresses = customerAddressService.readActiveCustomerAddressesByCustomerId(CustomerState.getCustomer().getId());,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"model.addAttribute(""customerAddresses"", customerAddresses);",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"BindingResult paymentResult, BillingInfoForm billingForm, BindingResult billingResult) {",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
addressService.populateAddressISOCountrySub(billingForm.getAddress());,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"savePaymentValidator.validate(paymentForm, paymentResult);",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"billingInfoFormValidator.validate(billingForm, billingResult);",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
if ((billingForm.getAddress().getPhonePrimary() != null) &&,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
(StringUtils.isEmpty(billingForm.getAddress().getPhonePrimary().getPhoneNumber()))) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
billingForm.getAddress().setPhonePrimary(null);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
},f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
if ((billingForm.getAddress().getPhoneSecondary() != null) &&,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
(StringUtils.isEmpty(billingForm.getAddress().getPhoneSecondary().getPhoneNumber()))) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
billingForm.getAddress().setPhoneSecondary(null);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
if ((billingForm.getAddress().getPhoneFax() != null) &&,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
(StringUtils.isEmpty(billingForm.getAddress().getPhoneFax().getPhoneNumber()))) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
billingForm.getAddress().setPhoneFax(null);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
if(paymentResult.hasErrors() || billingResult.hasErrors()) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
return getCustomerPaymentRedirect();,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
CustomerPayment customerPayment = customerPaymentService.create();,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
customerPayment.setCustomer(customer);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
customerPayment.setIsDefault(paymentForm.isDefaultMethod());,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"customerPayment.getAdditionalFields().put(PaymentAdditionalFieldType.EXP_DATE.getType(), paymentForm.getExpiration());",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"customerPayment.getAdditionalFields().put(PaymentAdditionalFieldType.LAST_FOUR.getType(), paymentForm.getLastFourDigits());",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"customerPayment.getAdditionalFields().put(PaymentAdditionalFieldType.PAYMENT_NAME.getType(), paymentForm.getPaymentName());",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"customerPayment.getAdditionalFields().put(PaymentAdditionalFieldType.NAME_ON_CARD.getType(), paymentForm.getPersonName());",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
"//customerPayment.getAdditionalFields().put(PaymentAdditionalFieldType.CARD_TYPE.getType(), paymentForm.getPersonName());",f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
customerPayment.setBillingAddress(billingForm.getAddress());,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
//        customerPayment.setToken();,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
customerPaymentService.saveCustomerPayment(customerPayment);,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
if(customerPayment == null) {,f1144e3fe313ede002eccf80e175bc4c8b949f4a,0,1
