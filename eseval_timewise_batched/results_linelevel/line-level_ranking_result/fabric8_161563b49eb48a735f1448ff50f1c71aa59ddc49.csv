commit_id,line,line_level_label,count,line_score,row
161563b49eb48a735f1448ff50f1c71aa59ddc49,if (repository != null) {,0,4,1.0,1
161563b49eb48a735f1448ff50f1c71aa59ddc49,if (gitFolder != null) {,0,4,1.0,2
161563b49eb48a735f1448ff50f1c71aa59ddc49,if (basedir != null) {,1,4,1.0,3
161563b49eb48a735f1448ff50f1c71aa59ddc49,if (id != null) {,0,4,1.0,4
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""Could not find jenkins service URL: "" + e, e);",1,3,0.75,5
161563b49eb48a735f1448ff50f1c71aa59ddc49,if (parent == null) {,1,3,0.75,6
161563b49eb48a735f1448ff50f1c71aa59ddc49,while (project != null) {,1,3,0.75,7
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""Cannot connect to Kubernetes to find jenkins service URL: "" + cause.getMessage());",0,3,0.75,8
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""Cannot find jenkins service URL: "" + cause, cause);",0,3,0.75,9
161563b49eb48a735f1448ff50f1c71aa59ddc49,while (current != null) {,0,3,0.75,10
161563b49eb48a735f1448ff50f1c71aa59ddc49,if (repository == null) {,0,3,0.75,11
161563b49eb48a735f1448ff50f1c71aa59ddc49,"} else if (Objects.equal(""GIT_BRANCH"", envVarName)) {",0,3,0.75,12
161563b49eb48a735f1448ff50f1c71aa59ddc49,"} else if (Objects.equal(""GIT_COMMIT"", envVarName)) {",0,3,0.75,13
161563b49eb48a735f1448ff50f1c71aa59ddc49,"} else if (Objects.equal(""GIT_URL"", envVarName)) {",0,3,0.75,14
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""Cannot find BUILD_ID to create a specific jenkins build URL. So using: "" + jobUrl);",0,2,0.5,15
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""Could not find BUILD_ID to create a specific jenkins build URL. So using: "" + jobUrl);",1,2,0.5,16
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""Could not find gogs service URL: "" + cause, cause);",1,2,0.5,17
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""Could not create default value for $"" + envVarName + "" as no .git/config file could be found"");",1,2,0.5,18
161563b49eb48a735f1448ff50f1c71aa59ddc49,if (Strings.isNotBlank(jobUrl)) {,0,2,0.5,19
161563b49eb48a735f1448ff50f1c71aa59ddc49,"String buildId = Systems.getEnvVarOrSystemProperty(""BUILD_ID"");",0,2,0.5,20
161563b49eb48a735f1448ff50f1c71aa59ddc49,if (Strings.isNotBlank(buildId)) {,0,2,0.5,21
161563b49eb48a735f1448ff50f1c71aa59ddc49,} else {,0,2,0.5,22
161563b49eb48a735f1448ff50f1c71aa59ddc49,project = project.getParent();,1,2,0.5,23
161563b49eb48a735f1448ff50f1c71aa59ddc49,"String buildId = Systems.getEnvVarOrSystemProperty(""BUILD_ID"");",1,2,0.5,24
161563b49eb48a735f1448ff50f1c71aa59ddc49,if (Strings.isNotBlank(buildId)) {,1,2,0.5,25
161563b49eb48a735f1448ff50f1c71aa59ddc49,} else {,1,2,0.5,26
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""Cannot find BUILD_ID to create a specific jenkins build URL. So using: "" + jobUrl);",1,2,0.5,27
161563b49eb48a735f1448ff50f1c71aa59ddc49,File answer = null;,1,2,0.5,28
161563b49eb48a735f1448ff50f1c71aa59ddc49,MavenProject project = getProject();,1,2,0.5,29
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""Cannot create default value for $"" + envVarName + "" as no .git/config file could be found"");",0,2,0.5,30
161563b49eb48a735f1448ff50f1c71aa59ddc49,"throw new MojoExecutionException(""Could not find resource `"" + resourceName + ""` on the classpath!"");",1,2,0.5,31
161563b49eb48a735f1448ff50f1c71aa59ddc49,project = parent;,1,2,0.5,32
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""Cannot find gogs service URL: "" + cause, cause);",0,2,0.5,33
161563b49eb48a735f1448ff50f1c71aa59ddc49,} catch (Throwable e) {,0,2,0.5,34
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""Cannot connect to Kubernetes to find gogs service URL: "" + cause.getMessage());",0,2,0.5,35
161563b49eb48a735f1448ff50f1c71aa59ddc49,} catch (IOException e) {,0,2,0.5,36
161563b49eb48a735f1448ff50f1c71aa59ddc49,"protected Repository getGitRepository(File basedir, String envVarName) {",0,2,0.5,37
161563b49eb48a735f1448ff50f1c71aa59ddc49,"try (Repository repository = getGitRepository(basedir, envVarName)) {",0,2,0.5,38
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""Could not create default value for $"" + envVarName + "" as no .git/config file could be found"");",0,2,0.5,39
161563b49eb48a735f1448ff50f1c71aa59ddc49,return null;,0,2,0.5,40
161563b49eb48a735f1448ff50f1c71aa59ddc49,"if (Objects.equal(""GIT_URL"", envVarName)) {",1,2,0.5,41
161563b49eb48a735f1448ff50f1c71aa59ddc49,Repository repository = null;,0,2,0.5,42
161563b49eb48a735f1448ff50f1c71aa59ddc49,"connectError = t instanceof ConnectException || ""No route to host"".equals(t.getMessage());",0,2,0.5,43
161563b49eb48a735f1448ff50f1c71aa59ddc49,} else {,0,2,0.5,44
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""Could not find gogs service URL: "" + cause, cause);",0,2,0.5,45
161563b49eb48a735f1448ff50f1c71aa59ddc49,} catch (Exception e) {,1,2,0.5,46
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""Could not find gogs service URL: "" + e, e);",1,2,0.5,47
161563b49eb48a735f1448ff50f1c71aa59ddc49,"throw new MojoExecutionException(""Cannot find resource `"" + resourceName + ""` on the classpath!"");",0,2,0.5,48
161563b49eb48a735f1448ff50f1c71aa59ddc49,if (connectError) {,0,2,0.5,49
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""Cannot find BUILD_ID to create a specific jenkins build URL. So using: "" + jobUrl);",0,2,0.5,50
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.utils.Files;,1,1,0.25,51
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.maven.support.JsonSchemas;,1,1,0.25,52
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.openshift.api.model.DeploymentConfig;,1,1,0.25,53
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.openshift.api.model.Template;,1,1,0.25,54
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.utils.Strings;,1,1,0.25,55
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.utils.GitHelpers;,1,1,0.25,56
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.utils.Objects;,1,1,0.25,57
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.utils.Systems;,1,1,0.25,58
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.utils.URLUtils;,1,1,0.25,59
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.maven.support.JsonSchema;,1,1,0.25,60
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.devops.ProjectConfig;,1,1,0.25,61
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.kubernetes.api.model.ReplicationController;,1,1,0.25,62
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.kubernetes.api.model.KubernetesList;,1,1,0.25,63
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.kubernetes.api.model.HasMetadata;,1,1,0.25,64
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.kubernetes.api.ServiceNames;,1,1,0.25,65
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.kubernetes.api.KubernetesHelper;,1,1,0.25,66
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.devops.ProjectRepositories;,1,1,0.25,67
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.devops.ProjectConfigs;,1,1,0.25,68
161563b49eb48a735f1448ff50f1c71aa59ddc49,import org.apache.maven.plugin.MojoExecutionException;,1,1,0.25,69
161563b49eb48a735f1448ff50f1c71aa59ddc49,return throwables;,0,1,0.25,70
161563b49eb48a735f1448ff50f1c71aa59ddc49,current = current.getCause();,0,1,0.25,71
161563b49eb48a735f1448ff50f1c71aa59ddc49,Throwable current = exception;,0,1,0.25,72
161563b49eb48a735f1448ff50f1c71aa59ddc49,import org.apache.maven.artifact.Artifact;,1,1,0.25,73
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().debug(""Cannot connect to Kubernetes due: "" + cause.getMessage());",1,1,0.25,74
161563b49eb48a735f1448ff50f1c71aa59ddc49,import org.apache.maven.plugins.annotations.Parameter;,1,1,0.25,75
161563b49eb48a735f1448ff50f1c71aa59ddc49,},1,1,0.25,76
161563b49eb48a735f1448ff50f1c71aa59ddc49,protected static Iterable<Throwable> createExceptionIterable(Throwable exception) {,0,1,0.25,77
161563b49eb48a735f1448ff50f1c71aa59ddc49,return project;,1,1,0.25,78
161563b49eb48a735f1448ff50f1c71aa59ddc49,MavenProject parent = project.getParent();,1,1,0.25,79
161563b49eb48a735f1448ff50f1c71aa59ddc49,protected MavenProject getRootProject() {,1,1,0.25,80
161563b49eb48a735f1448ff50f1c71aa59ddc49,return answer;,1,1,0.25,81
161563b49eb48a735f1448ff50f1c71aa59ddc49,},1,1,0.25,82
161563b49eb48a735f1448ff50f1c71aa59ddc49,answer = basedir;,1,1,0.25,83
161563b49eb48a735f1448ff50f1c71aa59ddc49,File basedir = project.getBasedir();,1,1,0.25,84
161563b49eb48a735f1448ff50f1c71aa59ddc49,protected File getRootProjectFolder() {,1,1,0.25,85
161563b49eb48a735f1448ff50f1c71aa59ddc49,* Returns the root project folder,1,1,0.25,86
161563b49eb48a735f1448ff50f1c71aa59ddc49,"jobUrl = URLUtils.pathJoin(jobUrl, buildId);",1,1,0.25,87
161563b49eb48a735f1448ff50f1c71aa59ddc49,import org.apache.maven.project.MavenProject;,1,1,0.25,88
161563b49eb48a735f1448ff50f1c71aa59ddc49,},0,1,0.25,89
161563b49eb48a735f1448ff50f1c71aa59ddc49,"jobUrl = URLUtils.pathJoin(jobUrl, buildId);",0,1,0.25,90
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().debug(""current properties "" + new TreeSet<>(properties.keySet()));",1,1,0.25,91
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""failed to find git commit id. "" + e, e);",1,1,0.25,92
161563b49eb48a735f1448ff50f1c71aa59ddc49,import java.util.Iterator;,1,1,0.25,93
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().debug(""Current properties "" + new TreeSet<>(properties.keySet()));",0,1,0.25,94
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""Failed to find git commit id. "" + e, e);",0,1,0.25,95
161563b49eb48a735f1448ff50f1c71aa59ddc49,import org.eclipse.jgit.storage.file.FileRepositoryBuilder;,1,1,0.25,96
161563b49eb48a735f1448ff50f1c71aa59ddc49,import org.eclipse.jgit.lib.Repository;,1,1,0.25,97
161563b49eb48a735f1448ff50f1c71aa59ddc49,import org.eclipse.jgit.lib.ObjectId;,1,1,0.25,98
161563b49eb48a735f1448ff50f1c71aa59ddc49,List<Throwable> throwables = new ArrayList<Throwable>();,0,1,0.25,99
161563b49eb48a735f1448ff50f1c71aa59ddc49,import org.apache.maven.plugin.MojoExecutionException;,0,1,0.25,100
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().debug(""Cannot connect to Kubernetes due: "" + cause.getMessage());",0,1,0.25,101
161563b49eb48a735f1448ff50f1c71aa59ddc49,repository = builder.setGitDir(basedir),0,1,0.25,102
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.kubernetes.api.KubernetesHelper;,0,1,0.25,103
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.devops.ProjectRepositories;,0,1,0.25,104
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.devops.ProjectConfigs;,0,1,0.25,105
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.devops.ProjectConfig;,0,1,0.25,106
161563b49eb48a735f1448ff50f1c71aa59ddc49,import java.util.Iterator;,0,1,0.25,107
161563b49eb48a735f1448ff50f1c71aa59ddc49,import java.util.Collections;,0,1,0.25,108
161563b49eb48a735f1448ff50f1c71aa59ddc49,import java.net.ConnectException;,0,1,0.25,109
161563b49eb48a735f1448ff50f1c71aa59ddc49,},1,1,0.25,110
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""Failed to initialise Git Repository: "" + e, e);",0,1,0.25,111
161563b49eb48a735f1448ff50f1c71aa59ddc49,},0,1,0.25,112
161563b49eb48a735f1448ff50f1c71aa59ddc49,FileRepositoryBuilder builder = new FileRepositoryBuilder();,0,1,0.25,113
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.kubernetes.api.model.HasMetadata;,0,1,0.25,114
161563b49eb48a735f1448ff50f1c71aa59ddc49,File gitFolder = GitHelpers.findGitRootFolder(basedir);,0,1,0.25,115
161563b49eb48a735f1448ff50f1c71aa59ddc49,try {,0,1,0.25,116
161563b49eb48a735f1448ff50f1c71aa59ddc49,return repository.getBranch();,0,1,0.25,117
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().warn(""failed to find git commit id. "" + e, e);",0,1,0.25,118
161563b49eb48a735f1448ff50f1c71aa59ddc49,},0,1,0.25,119
161563b49eb48a735f1448ff50f1c71aa59ddc49,return id.getName();,0,1,0.25,120
161563b49eb48a735f1448ff50f1c71aa59ddc49,ObjectId id = repository.resolve(repository.getFullBranch());,0,1,0.25,121
161563b49eb48a735f1448ff50f1c71aa59ddc49,import org.eclipse.jgit.storage.file.FileRepositoryBuilder;,0,1,0.25,122
161563b49eb48a735f1448ff50f1c71aa59ddc49,import org.eclipse.jgit.lib.Repository;,0,1,0.25,123
161563b49eb48a735f1448ff50f1c71aa59ddc49,import org.eclipse.jgit.lib.ObjectId;,0,1,0.25,124
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.kubernetes.api.ServiceNames;,0,1,0.25,125
161563b49eb48a735f1448ff50f1c71aa59ddc49,return repository;,0,1,0.25,126
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.kubernetes.api.model.KubernetesList;,0,1,0.25,127
161563b49eb48a735f1448ff50f1c71aa59ddc49,import org.apache.maven.plugins.annotations.Parameter;,0,1,0.25,128
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.kubernetes.api.model.ReplicationController;,0,1,0.25,129
161563b49eb48a735f1448ff50f1c71aa59ddc49,cause = t;,0,1,0.25,130
161563b49eb48a735f1448ff50f1c71aa59ddc49,for (Throwable t : it) {,0,1,0.25,131
161563b49eb48a735f1448ff50f1c71aa59ddc49,Iterable<Throwable> it = createExceptionIterable(e);,0,1,0.25,132
161563b49eb48a735f1448ff50f1c71aa59ddc49,boolean connectError = false;,0,1,0.25,133
161563b49eb48a735f1448ff50f1c71aa59ddc49,Throwable cause = e;,0,1,0.25,134
161563b49eb48a735f1448ff50f1c71aa59ddc49,import org.eclipse.jgit.storage.file.FileRepositoryBuilder;,0,1,0.25,135
161563b49eb48a735f1448ff50f1c71aa59ddc49,import org.eclipse.jgit.lib.Repository;,0,1,0.25,136
161563b49eb48a735f1448ff50f1c71aa59ddc49,import org.eclipse.jgit.lib.ObjectId;,0,1,0.25,137
161563b49eb48a735f1448ff50f1c71aa59ddc49,import org.apache.maven.project.MavenProject;,0,1,0.25,138
161563b49eb48a735f1448ff50f1c71aa59ddc49,// this requires online access to kubernetes so we should silently fail if no connection,0,1,0.25,139
161563b49eb48a735f1448ff50f1c71aa59ddc49,import org.apache.maven.artifact.Artifact;,0,1,0.25,140
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.utils.Files;,0,1,0.25,141
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.utils.URLUtils;,0,1,0.25,142
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.maven.support.JsonSchemas;,0,1,0.25,143
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.openshift.api.model.DeploymentConfig;,0,1,0.25,144
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.openshift.api.model.Template;,0,1,0.25,145
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.maven.support.JsonSchema;,0,1,0.25,146
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.utils.Objects;,0,1,0.25,147
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.utils.Strings;,0,1,0.25,148
161563b49eb48a735f1448ff50f1c71aa59ddc49,import io.fabric8.utils.Systems;,0,1,0.25,149
161563b49eb48a735f1448ff50f1c71aa59ddc49,* @param exception  the exception,0,0,0.0,150
161563b49eb48a735f1448ff50f1c71aa59ddc49,*/,1,0,0.0,151
161563b49eb48a735f1448ff50f1c71aa59ddc49,/**,1,0,0.0,152
161563b49eb48a735f1448ff50f1c71aa59ddc49,@Override,0,0,0.0,153
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().info(""Added enviroment annotations:"");",1,0,0.0,154
161563b49eb48a735f1448ff50f1c71aa59ddc49,"getLog().info(""Added environment annotations:"");",0,0,0.0,155
161563b49eb48a735f1448ff50f1c71aa59ddc49,Collections.reverse(throwables);,0,0,0.0,156
161563b49eb48a735f1448ff50f1c71aa59ddc49,throwables.add(current);,0,0,0.0,157
161563b49eb48a735f1448ff50f1c71aa59ddc49,// spool to the bottom of the caused by tree,0,0,0.0,158
161563b49eb48a735f1448ff50f1c71aa59ddc49,*/,0,0,0.0,159
161563b49eb48a735f1448ff50f1c71aa59ddc49,* @return the Iterable,0,0,0.0,160
161563b49eb48a735f1448ff50f1c71aa59ddc49,/*,0,0,0.0,161
161563b49eb48a735f1448ff50f1c71aa59ddc49,* @see java.lang.Iterable,0,0,0.0,162
161563b49eb48a735f1448ff50f1c71aa59ddc49,*,0,0,0.0,163
161563b49eb48a735f1448ff50f1c71aa59ddc49,* (the last caused by going upwards to the root exception).,0,0,0.0,164
161563b49eb48a735f1448ff50f1c71aa59ddc49,* Creates an Iterable to walk the exception from the bottom up,0,0,0.0,165
161563b49eb48a735f1448ff50f1c71aa59ddc49,/**,0,0,0.0,166
161563b49eb48a735f1448ff50f1c71aa59ddc49,break;,0,0,0.0,167
161563b49eb48a735f1448ff50f1c71aa59ddc49,.build();,0,0,0.0,168
161563b49eb48a735f1448ff50f1c71aa59ddc49,.findGitDir() // scan up the file system tree,0,0,0.0,169
161563b49eb48a735f1448ff50f1c71aa59ddc49,.readEnvironment() // scan environment GIT_* variables,0,0,0.0,170
161563b49eb48a735f1448ff50f1c71aa59ddc49,*/,0,0,0.0,171
161563b49eb48a735f1448ff50f1c71aa59ddc49,break;,1,0,0.0,172
