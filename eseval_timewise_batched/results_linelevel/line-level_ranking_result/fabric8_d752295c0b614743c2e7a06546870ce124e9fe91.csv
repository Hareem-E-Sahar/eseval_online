commit_id,line,line_level_label,count,line_score,row
d752295c0b614743c2e7a06546870ce124e9fe91,"@WithAttributes(label = ""Filter"", required = false, description = ""To filter components"")",1,7,1.0,1
d752295c0b614743c2e7a06546870ce124e9fe91,CamelComponentCatalog catalog = new DefaultCamelComponentCatalog();,1,5,0.7142857142857142,2
d752295c0b614743c2e7a06546870ce124e9fe91,CamelComponentCatalog catalog = new DefaultCamelComponentCatalog();,0,5,0.7142857142857142,3
d752295c0b614743c2e7a06546870ce124e9fe91,*  with the License.  You may obtain a copy of the License at,1,4,0.5714285714285714,4
d752295c0b614743c2e7a06546870ce124e9fe91,"@WithAttributes(label = ""Name"", required = true, description = ""Name of component type to add"")",1,4,0.5714285714285714,5
d752295c0b614743c2e7a06546870ce124e9fe91,*  with the License.  You may obtain a copy of the License at,1,4,0.5714285714285714,6
d752295c0b614743c2e7a06546870ce124e9fe91,*  implied.  See the License for the specific language governing,1,4,0.5714285714285714,7
d752295c0b614743c2e7a06546870ce124e9fe91,*  implied.  See the License for the specific language governing,1,4,0.5714285714285714,8
d752295c0b614743c2e7a06546870ce124e9fe91,Project project = getSelectedProject(context);,1,3,0.42857142857142855,9
d752295c0b614743c2e7a06546870ce124e9fe91,List<String> filtered = new ArrayList<String>();,1,3,0.42857142857142855,10
d752295c0b614743c2e7a06546870ce124e9fe91,// need to find camel-core so we known the camel version,1,3,0.42857142857142855,11
d752295c0b614743c2e7a06546870ce124e9fe91,"*  distributed under the License is distributed on an ""AS IS"" BASIS,",1,3,0.42857142857142855,12
d752295c0b614743c2e7a06546870ce124e9fe91,Dependency core = findCamelCoreDependency(project);,1,3,0.42857142857142855,13
d752295c0b614743c2e7a06546870ce124e9fe91,final Project project = getSelectedProject(builder);,1,3,0.42857142857142855,14
d752295c0b614743c2e7a06546870ce124e9fe91,"*  distributed under the License is distributed on an ""AS IS"" BASIS,",1,3,0.42857142857142855,15
d752295c0b614743c2e7a06546870ce124e9fe91,Project project = getSelectedProject(builder);,1,3,0.42857142857142855,16
d752295c0b614743c2e7a06546870ce124e9fe91,String label = filter.getValue();,0,3,0.42857142857142855,17
d752295c0b614743c2e7a06546870ce124e9fe91,final Project project = getSelectedProject(builder);,0,3,0.42857142857142855,18
d752295c0b614743c2e7a06546870ce124e9fe91,// does the project already have camel?,1,2,0.2857142857142857,19
d752295c0b614743c2e7a06546870ce124e9fe91,// find all available component labels,1,2,0.2857142857142857,20
d752295c0b614743c2e7a06546870ce124e9fe91,"public Iterable<String> getCompletionProposals(UIContext context, InputComponent input, String value) {",1,2,0.2857142857142857,21
d752295c0b614743c2e7a06546870ce124e9fe91,this.project = project;,1,2,0.2857142857142857,22
d752295c0b614743c2e7a06546870ce124e9fe91,private final Project project;,1,2,0.2857142857142857,23
d752295c0b614743c2e7a06546870ce124e9fe91,"*  Red Hat licenses this file to you under the Apache License, version",1,2,0.2857142857142857,24
d752295c0b614743c2e7a06546870ce124e9fe91,"return Results.success(""Added Camel component "" + dto.getScheme() + "" ("" + dto.getArtifactId() + "") to the project"");",1,2,0.2857142857142857,25
d752295c0b614743c2e7a06546870ce124e9fe91,// otherwise use the version from the dto,1,2,0.2857142857142857,26
d752295c0b614743c2e7a06546870ce124e9fe91,*  permissions and limitations under the License.,1,2,0.2857142857142857,27
d752295c0b614743c2e7a06546870ce124e9fe91,} else {,1,2,0.2857142857142857,28
d752295c0b614743c2e7a06546870ce124e9fe91,"*  Red Hat licenses this file to you under the Apache License, version",1,2,0.2857142857142857,29
d752295c0b614743c2e7a06546870ce124e9fe91,String description = component.getDescription();,1,2,0.2857142857142857,30
d752295c0b614743c2e7a06546870ce124e9fe91,private UIInput<String> filter;,1,2,0.2857142857142857,31
d752295c0b614743c2e7a06546870ce124e9fe91,// find all available component labels,0,2,0.2857142857142857,32
d752295c0b614743c2e7a06546870ce124e9fe91,// use callbable so we can live update the filter,0,2,0.2857142857142857,33
d752295c0b614743c2e7a06546870ce124e9fe91,*  permissions and limitations under the License.,1,2,0.2857142857142857,34
d752295c0b614743c2e7a06546870ce124e9fe91,".description(""Adds a Camel component to your project dependencies"");",1,2,0.2857142857142857,35
d752295c0b614743c2e7a06546870ce124e9fe91,// we want to use same version as camel-core if its a camel component,1,1,0.14285714285714285,36
d752295c0b614743c2e7a06546870ce124e9fe91,"*  2.0 (the ""License""); you may not use this file except in compliance",1,1,0.14285714285714285,37
d752295c0b614743c2e7a06546870ce124e9fe91,*,1,1,0.14285714285714285,38
d752295c0b614743c2e7a06546870ce124e9fe91,"*  Copyright 2005-2015 Red Hat, Inc.",1,1,0.14285714285714285,39
d752295c0b614743c2e7a06546870ce124e9fe91,"return Results.fail(""Unknown Camel component"");",1,1,0.14285714285714285,40
d752295c0b614743c2e7a06546870ce124e9fe91,// install the component,1,1,0.14285714285714285,41
d752295c0b614743c2e7a06546870ce124e9fe91,DependencyBuilder component = DependencyBuilder.create().setGroupId(dto.getGroupId()),1,1,0.14285714285714285,42
d752295c0b614743c2e7a06546870ce124e9fe91,version = dto.getVersion();,1,1,0.14285714285714285,43
d752295c0b614743c2e7a06546870ce124e9fe91,version = core.getCoordinate().getVersion();,1,1,0.14285714285714285,44
d752295c0b614743c2e7a06546870ce124e9fe91,"if (""org.apache.camel"".equals(dto.getGroupId())) {",1,1,0.14285714285714285,45
d752295c0b614743c2e7a06546870ce124e9fe91,String version;,1,1,0.14285714285714285,46
d752295c0b614743c2e7a06546870ce124e9fe91,if (dto != null) {,1,1,0.14285714285714285,47
d752295c0b614743c2e7a06546870ce124e9fe91,"*  Unless required by applicable law or agreed to in writing, software",1,1,0.14285714285714285,48
d752295c0b614743c2e7a06546870ce124e9fe91,ComponentDto dto = name.getValue();,1,1,0.14285714285714285,49
d752295c0b614743c2e7a06546870ce124e9fe91,"return Results.fail(""The project does not include camel-core"");",1,1,0.14285714285714285,50
d752295c0b614743c2e7a06546870ce124e9fe91,if (core == null) {,1,1,0.14285714285714285,51
d752295c0b614743c2e7a06546870ce124e9fe91,public Result execute(UIExecutionContext context) throws Exception {,1,1,0.14285714285714285,52
d752295c0b614743c2e7a06546870ce124e9fe91,if (component != null) {,1,1,0.14285714285714285,53
d752295c0b614743c2e7a06546870ce124e9fe91,ComponentDto component = (ComponentDto) event.getNewValue();,1,1,0.14285714285714285,54
d752295c0b614743c2e7a06546870ce124e9fe91,public void valueChanged(ValueChangeEvent event) {,1,1,0.14285714285714285,55
d752295c0b614743c2e7a06546870ce124e9fe91,name.addValueChangeListener(new ValueChangeListener() {,1,1,0.14285714285714285,56
d752295c0b614743c2e7a06546870ce124e9fe91,// show note about the chosen component,1,1,0.14285714285714285,57
d752295c0b614743c2e7a06546870ce124e9fe91,*     http://www.apache.org/licenses/LICENSE-2.0,1,1,0.14285714285714285,58
d752295c0b614743c2e7a06546870ce124e9fe91,this.core = CamelProjectHelper.findCamelCoreDependency(project);,1,1,0.14285714285714285,59
d752295c0b614743c2e7a06546870ce124e9fe91,"*  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or",1,1,0.14285714285714285,60
d752295c0b614743c2e7a06546870ce124e9fe91,private final Dependency core;,1,1,0.14285714285714285,61
d752295c0b614743c2e7a06546870ce124e9fe91,Set<String> names = camelCatalog.findComponentLabels();,1,1,0.14285714285714285,62
d752295c0b614743c2e7a06546870ce124e9fe91,public Iterable<String> getValueChoices() {,1,1,0.14285714285714285,63
d752295c0b614743c2e7a06546870ce124e9fe91,if (value == null || name.startsWith(value)) {,1,1,0.14285714285714285,64
d752295c0b614743c2e7a06546870ce124e9fe91,for (String name : names) {,1,1,0.14285714285714285,65
d752295c0b614743c2e7a06546870ce124e9fe91,Iterable<String> names = getValueChoices();,1,1,0.14285714285714285,66
d752295c0b614743c2e7a06546870ce124e9fe91,if (core == null) {,1,1,0.14285714285714285,67
d752295c0b614743c2e7a06546870ce124e9fe91,"name.setValueConverter(new Converter<String, ComponentDto>() {",1,1,0.14285714285714285,68
d752295c0b614743c2e7a06546870ce124e9fe91,this.camelCatalog = camelCatalog;,1,1,0.14285714285714285,69
d752295c0b614743c2e7a06546870ce124e9fe91,"public CamelComponentsLabelCompleter(Project project, CamelCatalog camelCatalog) {",1,1,0.14285714285714285,70
d752295c0b614743c2e7a06546870ce124e9fe91,public class CamelComponentsLabelCompleter implements UICompleter<String> {,1,1,0.14285714285714285,71
d752295c0b614743c2e7a06546870ce124e9fe91,import java.util.ArrayList;,1,1,0.14285714285714285,72
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.ui.input.UICompleter;,1,1,0.14285714285714285,73
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.ui.input.InputComponent;,1,1,0.14285714285714285,74
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.ui.context.UIContext;,1,1,0.14285714285714285,75
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.projects.Project;,1,1,0.14285714285714285,76
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.dependencies.Dependency;,1,1,0.14285714285714285,77
d752295c0b614743c2e7a06546870ce124e9fe91,import org.apache.camel.catalog.CamelCatalog;,1,1,0.14285714285714285,78
d752295c0b614743c2e7a06546870ce124e9fe91,import io.fabric8.forge.addon.utils.CamelProjectHelper;,1,1,0.14285714285714285,79
d752295c0b614743c2e7a06546870ce124e9fe91,import java.util.Set;,1,1,0.14285714285714285,80
d752295c0b614743c2e7a06546870ce124e9fe91,import java.util.List;,1,1,0.14285714285714285,81
d752295c0b614743c2e7a06546870ce124e9fe91,},1,1,0.14285714285714285,82
d752295c0b614743c2e7a06546870ce124e9fe91,public ComponentDto convert(String text) {,1,1,0.14285714285714285,83
d752295c0b614743c2e7a06546870ce124e9fe91,public void initializeUI(UIBuilder builder) throws Exception {,1,1,0.14285714285714285,84
d752295c0b614743c2e7a06546870ce124e9fe91,import io.fabric8.forge.camel.commands.project.dto.ComponentDto;,1,1,0.14285714285714285,85
d752295c0b614743c2e7a06546870ce124e9fe91,"*  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or",1,1,0.14285714285714285,86
d752295c0b614743c2e7a06546870ce124e9fe91,"*  Unless required by applicable law or agreed to in writing, software",1,1,0.14285714285714285,87
d752295c0b614743c2e7a06546870ce124e9fe91,*     http://www.apache.org/licenses/LICENSE-2.0,1,1,0.14285714285714285,88
d752295c0b614743c2e7a06546870ce124e9fe91,"*  2.0 (the ""License""); you may not use this file except in compliance",1,1,0.14285714285714285,89
d752295c0b614743c2e7a06546870ce124e9fe91,*,1,1,0.14285714285714285,90
d752295c0b614743c2e7a06546870ce124e9fe91,"*  Copyright 2005-2015 Red Hat, Inc.",1,1,0.14285714285714285,91
d752295c0b614743c2e7a06546870ce124e9fe91,Set<String> names = catalog.findComponentLabels();,1,1,0.14285714285714285,92
d752295c0b614743c2e7a06546870ce124e9fe91,},0,1,0.14285714285714285,93
d752295c0b614743c2e7a06546870ce124e9fe91,Set<String> names = catalog.findComponentLabels();,0,1,0.14285714285714285,94
d752295c0b614743c2e7a06546870ce124e9fe91,public Iterable<String> getValueChoices() {,0,1,0.14285714285714285,95
d752295c0b614743c2e7a06546870ce124e9fe91,Iterable<String> names = getValueChoices();,0,1,0.14285714285714285,96
d752295c0b614743c2e7a06546870ce124e9fe91,"name.setCompleter(new CamelComponentsCompleter(project, filter));",1,1,0.14285714285714285,97
d752295c0b614743c2e7a06546870ce124e9fe91,private UIInput<String> name;,1,1,0.14285714285714285,98
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.ui.input.UIInput;,1,1,0.14285714285714285,99
d752295c0b614743c2e7a06546870ce124e9fe91,},0,1,0.14285714285714285,100
d752295c0b614743c2e7a06546870ce124e9fe91,},1,1,0.14285714285714285,101
d752295c0b614743c2e7a06546870ce124e9fe91,public Iterable<String> call() throws Exception {,0,1,0.14285714285714285,102
d752295c0b614743c2e7a06546870ce124e9fe91,name.setValueChoices(new Callable<Iterable<String>>() {,0,1,0.14285714285714285,103
d752295c0b614743c2e7a06546870ce124e9fe91,private UISelectOne<String> filter;,0,1,0.14285714285714285,104
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.ui.input.UISelectOne;,0,1,0.14285714285714285,105
d752295c0b614743c2e7a06546870ce124e9fe91,import java.util.concurrent.Callable;,0,1,0.14285714285714285,106
d752295c0b614743c2e7a06546870ce124e9fe91,import javax.inject.Inject;,1,1,0.14285714285714285,107
d752295c0b614743c2e7a06546870ce124e9fe91,"return new CamelComponentsCompleter(project, null).getValueChoices(label);",0,1,0.14285714285714285,108
d752295c0b614743c2e7a06546870ce124e9fe91,import io.fabric8.forge.camel.commands.project.helper.CamelCommandsHelper;,1,1,0.14285714285714285,109
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.ui.metadata.UICommandMetadata;,1,1,0.14285714285714285,110
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.convert.Converter;,1,1,0.14285714285714285,111
d752295c0b614743c2e7a06546870ce124e9fe91,public UICommandMetadata getMetadata(UIContext context) {,1,1,0.14285714285714285,112
d752295c0b614743c2e7a06546870ce124e9fe91,private UISelectOne<String> filter;,1,1,0.14285714285714285,113
d752295c0b614743c2e7a06546870ce124e9fe91,public class CamelAddComponentCommand extends AbstractCamelProjectCommand {,1,1,0.14285714285714285,114
d752295c0b614743c2e7a06546870ce124e9fe91,import static io.fabric8.forge.camel.commands.project.helper.CamelCatalogHelper.createComponentDto;,1,1,0.14285714285714285,115
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.ui.util.Metadata;,1,1,0.14285714285714285,116
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.ui.util.Categories;,1,1,0.14285714285714285,117
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.ui.result.Results;,1,1,0.14285714285714285,118
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.ui.result.Result;,1,1,0.14285714285714285,119
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.ui.metadata.WithAttributes;,1,1,0.14285714285714285,120
d752295c0b614743c2e7a06546870ce124e9fe91,@Inject,1,1,0.14285714285714285,121
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.ui.input.events.ValueChangeEvent;,1,1,0.14285714285714285,122
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.ui.context.UIBuilder;,1,1,0.14285714285714285,123
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.ui.input.ValueChangeListener;,1,1,0.14285714285714285,124
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.projects.Project;,1,1,0.14285714285714285,125
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.projects.dependencies.DependencyInstaller;,1,1,0.14285714285714285,126
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.dependencies.builder.DependencyBuilder;,1,1,0.14285714285714285,127
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.ui.context.UIContext;,1,1,0.14285714285714285,128
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.ui.context.UIExecutionContext;,1,1,0.14285714285714285,129
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.ui.input.UISelectOne;,1,1,0.14285714285714285,130
d752295c0b614743c2e7a06546870ce124e9fe91,import org.jboss.forge.addon.dependencies.Dependency;,1,1,0.14285714285714285,131
d752295c0b614743c2e7a06546870ce124e9fe91,"return createComponentDto(getCamelCatalog(), text);",1,0,0.0,132
d752295c0b614743c2e7a06546870ce124e9fe91,/**,1,0,0.0,133
d752295c0b614743c2e7a06546870ce124e9fe91,});,1,0,0.0,134
d752295c0b614743c2e7a06546870ce124e9fe91,"name.setNote(description != null ? description : """");",1,0,0.0,135
d752295c0b614743c2e7a06546870ce124e9fe91,"name.setNote("""");",1,0,0.0,136
d752295c0b614743c2e7a06546870ce124e9fe91,builder.add(filter).add(name);,1,0,0.0,137
d752295c0b614743c2e7a06546870ce124e9fe91,.setArtifactId(dto.getArtifactId()).setVersion(version);,1,0,0.0,138
d752295c0b614743c2e7a06546870ce124e9fe91,"dependencyInstaller.install(project, component);",1,0,0.0,139
d752295c0b614743c2e7a06546870ce124e9fe91,@Override,1,0,0.0,140
d752295c0b614743c2e7a06546870ce124e9fe91,*/,1,0,0.0,141
d752295c0b614743c2e7a06546870ce124e9fe91,package io.fabric8.forge.camel.commands.project.completer;,1,0,0.0,142
d752295c0b614743c2e7a06546870ce124e9fe91,private final CamelCatalog camelCatalog;,1,0,0.0,143
d752295c0b614743c2e7a06546870ce124e9fe91,return null;,1,0,0.0,144
d752295c0b614743c2e7a06546870ce124e9fe91,filtered.add(name);,1,0,0.0,145
d752295c0b614743c2e7a06546870ce124e9fe91,return filtered;,1,0,0.0,146
d752295c0b614743c2e7a06546870ce124e9fe91,"names.add(""<all>"");",1,0,0.0,147
d752295c0b614743c2e7a06546870ce124e9fe91,"name.setValueChoices(CamelCommandsHelper.createComponentDtoValues(project, getCamelCatalog(), filter, false));",1,0,0.0,148
d752295c0b614743c2e7a06546870ce124e9fe91,// include converter from string->dto,1,0,0.0,149
d752295c0b614743c2e7a06546870ce124e9fe91,return names;,0,0,0.0,150
d752295c0b614743c2e7a06546870ce124e9fe91,"filter.setDefaultValue(""<all>"");",1,0,0.0,151
d752295c0b614743c2e7a06546870ce124e9fe91,"filter.setValueChoices(CamelCommandsHelper.createComponentLabelValues(project, getCamelCatalog()));",1,0,0.0,152
d752295c0b614743c2e7a06546870ce124e9fe91,private UISelectOne<String> name;,0,0,0.0,153
d752295c0b614743c2e7a06546870ce124e9fe91,filter.setValueChoices(new CamelComponentsLabelCompleter(project).getValueChoices());,0,0,0.0,154
d752295c0b614743c2e7a06546870ce124e9fe91,"filter.setDefaultValue(""<all>"");",0,0,0.0,155
d752295c0b614743c2e7a06546870ce124e9fe91,@Override,0,0,0.0,156
d752295c0b614743c2e7a06546870ce124e9fe91,});,0,0,0.0,157
d752295c0b614743c2e7a06546870ce124e9fe91,filter.setCompleter(new CamelComponentsLabelCompleter(project));,1,0,0.0,158
d752295c0b614743c2e7a06546870ce124e9fe91,"names.add(""<all>"");",0,0,0.0,159
d752295c0b614743c2e7a06546870ce124e9fe91,/**,1,0,0.0,160
d752295c0b614743c2e7a06546870ce124e9fe91,*/,1,0,0.0,161
d752295c0b614743c2e7a06546870ce124e9fe91,package io.fabric8.forge.camel.commands.project;,1,0,0.0,162
d752295c0b614743c2e7a06546870ce124e9fe91,private UISelectOne<ComponentDto> name;,1,0,0.0,163
d752295c0b614743c2e7a06546870ce124e9fe91,private DependencyInstaller dependencyInstaller;,1,0,0.0,164
d752295c0b614743c2e7a06546870ce124e9fe91,@Override,1,0,0.0,165
d752295c0b614743c2e7a06546870ce124e9fe91,return Metadata.forCommand(CamelAddComponentCommand.class).name(,1,0,0.0,166
d752295c0b614743c2e7a06546870ce124e9fe91,"""Camel: Add Component"").category(Categories.create(CATEGORY))",1,0,0.0,167
d752295c0b614743c2e7a06546870ce124e9fe91,return names;,1,0,0.0,168
