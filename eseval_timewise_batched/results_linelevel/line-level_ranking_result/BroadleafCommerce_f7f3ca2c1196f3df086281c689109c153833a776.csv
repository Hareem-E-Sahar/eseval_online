commit_id,line,line_level_label,count,line_score,row
f7f3ca2c1196f3df086281c689109c153833a776,"LOG.warn(""Could not find field "" + fieldName + "" within the dynamic form "" + fieldInfo[0]);",0,7,1.0,1
f7f3ca2c1196f3df086281c689109c153833a776,"LOG.warn(""Could not find field "" + fieldName + "" within the dynamic form "" + fieldInfo[0]);",1,7,1.0,2
f7f3ca2c1196f3df086281c689109c153833a776,"String fieldName = fieldExpression.substring(fieldExpression.indexOf('[') + 1, fieldExpression.lastIndexOf(']'));",1,4,0.5714285714285714,3
f7f3ca2c1196f3df086281c689109c153833a776,"LOG.warn(""Could not find field "" + err.getField() + "" within the main form"");",0,4,0.5714285714285714,4
f7f3ca2c1196f3df086281c689109c153833a776,"LOG.warn(""Could not find field "" + err.getField() + "" within the main form"");",1,4,0.5714285714285714,5
f7f3ca2c1196f3df086281c689109c153833a776,String fieldName = extractFieldName(err);,0,3,0.42857142857142855,6
f7f3ca2c1196f3df086281c689109c153833a776,"public void populateModelVariables(String tagName, Map<String, String> tagAttributes, String attributeName, String attributeValue, Map<String, Object> newLocalVariables, BroadleafThymeleafContext context) {",0,3,0.42857142857142855,7
f7f3ca2c1196f3df086281c689109c153833a776,String fieldName = extractFieldName(err);,1,3,0.42857142857142855,8
f7f3ca2c1196f3df086281c689109c153833a776,"//attempt to look up which tab the field error is on. If it can't be found, just use",1,3,0.42857142857142855,9
f7f3ca2c1196f3df086281c689109c153833a776,"//attempt to look up which tab the field error is on. If it can't be found, just use",0,3,0.42857142857142855,10
f7f3ca2c1196f3df086281c689109c153833a776,String fieldName = extractFieldName(err);,1,3,0.42857142857142855,11
f7f3ca2c1196f3df086281c689109c153833a776,String fieldName = StringUtil.extractFieldNameFromExpression(fieldExpression);,0,3,0.42857142857142855,12
f7f3ca2c1196f3df086281c689109c153833a776,//this is the code that is executed when a Translations add action contains errors,1,2,0.2857142857142857,13
f7f3ca2c1196f3df086281c689109c153833a776,//at this point the field name actually occurs within some array syntax,1,2,0.2857142857142857,14
f7f3ca2c1196f3df086281c689109c153833a776,"String[] fieldInfo = fieldName.split(""\\"" + DynamicEntityFormInfo.FIELD_SEPARATOR);",1,2,0.2857142857142857,15
f7f3ca2c1196f3df086281c689109c153833a776,"addFieldError(formField.getFriendlyName(), err.getCode(), tabErrors);",1,2,0.2857142857142857,16
f7f3ca2c1196f3df086281c689109c153833a776,"addFieldError(fieldName, err.getCode(), tabErrors);",1,2,0.2857142857142857,17
f7f3ca2c1196f3df086281c689109c153833a776,Field formField = form.findField(err.getField());,1,2,0.2857142857142857,18
f7f3ca2c1196f3df086281c689109c153833a776,"addFieldError(err.getField(), err.getCode(), tabErrors);",1,2,0.2857142857142857,19
f7f3ca2c1196f3df086281c689109c153833a776,"Map<String, Object> localVariables = new HashMap<String, Object>();",1,2,0.2857142857142857,20
f7f3ca2c1196f3df086281c689109c153833a776,"Map<String, Object> localVariables = new HashMap<String, Object>();",1,2,0.2857142857142857,21
f7f3ca2c1196f3df086281c689109c153833a776,"localVariables.put(""tabErrors"", tabErrors);",1,2,0.2857142857142857,22
f7f3ca2c1196f3df086281c689109c153833a776,public String getName() {,0,2,0.2857142857142857,23
f7f3ca2c1196f3df086281c689109c153833a776,"protected ProcessorResult processAttribute(Arguments arguments, Element element, String attributeName) {",1,2,0.2857142857142857,24
f7f3ca2c1196f3df086281c689109c153833a776,String attributeValue = element.getAttributeValue(attributeName);,1,2,0.2857142857142857,25
f7f3ca2c1196f3df086281c689109c153833a776,String tabName = EntityForm.DEFAULT_TAB_NAME;,1,2,0.2857142857142857,26
f7f3ca2c1196f3df086281c689109c153833a776,"localVariables.put(""tabErrors"", tabErrors);",1,2,0.2857142857142857,27
f7f3ca2c1196f3df086281c689109c153833a776,Tab tab = form.findTabForField(err.getField());,1,2,0.2857142857142857,28
f7f3ca2c1196f3df086281c689109c153833a776,Field formField = form.getDynamicForm(fieldInfo[0]).getFields().get(fieldName);,1,2,0.2857142857142857,29
f7f3ca2c1196f3df086281c689109c153833a776,//the default tab for the group,1,2,0.2857142857142857,30
f7f3ca2c1196f3df086281c689109c153833a776,"addFieldError(fieldName, err.getCode(), tabErrors);",0,2,0.2857142857142857,31
f7f3ca2c1196f3df086281c689109c153833a776,for (FieldError err : bindStatus.getErrors().getFieldErrors()) {,0,2,0.2857142857142857,32
f7f3ca2c1196f3df086281c689109c153833a776,for (FieldError err : bindStatus.getErrors().getFieldErrors()) {,1,2,0.2857142857142857,33
f7f3ca2c1196f3df086281c689109c153833a776,//the default tab for the group,0,2,0.2857142857142857,34
f7f3ca2c1196f3df086281c689109c153833a776,String tabName = EntityForm.DEFAULT_TAB_NAME;,0,2,0.2857142857142857,35
f7f3ca2c1196f3df086281c689109c153833a776,Tab tab = form.findTabForField(err.getField());,0,2,0.2857142857142857,36
f7f3ca2c1196f3df086281c689109c153833a776,"String[] fieldInfo = fieldName.split(""\\"" + DynamicEntityFormInfo.FIELD_SEPARATOR);",0,2,0.2857142857142857,37
f7f3ca2c1196f3df086281c689109c153833a776,Field formField = form.getDynamicForm(fieldInfo[0]).getFields().get(fieldName);,0,2,0.2857142857142857,38
f7f3ca2c1196f3df086281c689109c153833a776,//at this point the field name actually occurs within some array syntax,0,2,0.2857142857142857,39
f7f3ca2c1196f3df086281c689109c153833a776,Field formField = form.findField(err.getField());,0,2,0.2857142857142857,40
f7f3ca2c1196f3df086281c689109c153833a776,"addFieldError(formField.getFriendlyName(), err.getCode(), tabErrors);",0,2,0.2857142857142857,41
f7f3ca2c1196f3df086281c689109c153833a776,"addFieldError(err.getField(), err.getCode(), tabErrors);",0,2,0.2857142857142857,42
f7f3ca2c1196f3df086281c689109c153833a776,//this is the code that is executed when a Translations add action contains errors,0,2,0.2857142857142857,43
f7f3ca2c1196f3df086281c689109c153833a776,"Map<String, Object> localVariables = new HashMap<String, Object>();",0,2,0.2857142857142857,44
f7f3ca2c1196f3df086281c689109c153833a776,"localVariables.put(""tabErrors"", tabErrors);",0,2,0.2857142857142857,45
f7f3ca2c1196f3df086281c689109c153833a776,if (blcContext != null && blcContext.getMessageSource() != null) {,0,1,0.14285714285714285,46
f7f3ca2c1196f3df086281c689109c153833a776,"//this branch of the code just puts a placeholder ""tabErrors"", to avoid errprProcessor parsing errors, and",1,1,0.14285714285714285,47
f7f3ca2c1196f3df086281c689109c153833a776,return ProcessorResult.setLocalVariables(localVariables);,1,1,0.14285714285714285,48
f7f3ca2c1196f3df086281c689109c153833a776,if (form.getTabs().size() > 0) {,1,1,0.14285714285714285,49
f7f3ca2c1196f3df086281c689109c153833a776,public class ErrorsProcessor extends AbstractBroadleafAttributeModelVariableModifierProcessor {,0,1,0.14285714285714285,50
f7f3ca2c1196f3df086281c689109c153833a776,public BroadleafDialectPrefix getPrefix() {,0,1,0.14285714285714285,51
f7f3ca2c1196f3df086281c689109c153833a776,BindStatus bindStatus = context.getBindStatus(attributeValue);,0,1,0.14285714285714285,52
f7f3ca2c1196f3df086281c689109c153833a776,"newLocalVariables.put(""tabErrors"", tabErrors);",0,1,0.14285714285714285,53
f7f3ca2c1196f3df086281c689109c153833a776,BroadleafRequestContext blcContext = BroadleafRequestContext.getBroadleafRequestContext();,0,1,0.14285714285714285,54
f7f3ca2c1196f3df086281c689109c153833a776,if (context != null && context.getMessageSource() != null) {,1,1,0.14285714285714285,55
f7f3ca2c1196f3df086281c689109c153833a776,"translatedGeneralTab = blcContext.getMessageSource().getMessage(translatedGeneralTab, null, translatedGeneralTab, blcContext.getJavaLocale());",0,1,0.14285714285714285,56
f7f3ca2c1196f3df086281c689109c153833a776,public class ErrorsProcessor extends AbstractAttrProcessor {,1,1,0.14285714285714285,57
f7f3ca2c1196f3df086281c689109c153833a776,public ErrorsProcessor() {,1,1,0.14285714285714285,58
f7f3ca2c1196f3df086281c689109c153833a776,"BindStatus bindStatus = FieldUtils.getBindStatus(arguments.getConfiguration(), arguments, attributeValue);",1,1,0.14285714285714285,59
f7f3ca2c1196f3df086281c689109c153833a776,return ProcessorResult.setLocalVariables(localVariables);,1,1,0.14285714285714285,60
f7f3ca2c1196f3df086281c689109c153833a776,BroadleafRequestContext context = BroadleafRequestContext.getBroadleafRequestContext();,1,1,0.14285714285714285,61
f7f3ca2c1196f3df086281c689109c153833a776,"translatedGeneralTab = context.getMessageSource().getMessage(translatedGeneralTab, null, translatedGeneralTab, context.getJavaLocale());",1,1,0.14285714285714285,62
f7f3ca2c1196f3df086281c689109c153833a776,"localVariables.put(""tabErrors"", result);",1,1,0.14285714285714285,63
f7f3ca2c1196f3df086281c689109c153833a776,if (formField != null) {,1,1,0.14285714285714285,64
f7f3ca2c1196f3df086281c689109c153833a776,} else {,1,1,0.14285714285714285,65
f7f3ca2c1196f3df086281c689109c153833a776,} else {,0,1,0.14285714285714285,66
f7f3ca2c1196f3df086281c689109c153833a776,if (err.getField().contains(DynamicEntityFormInfo.FIELD_SEPARATOR)) {,1,1,0.14285714285714285,67
f7f3ca2c1196f3df086281c689109c153833a776,if (err.getField().contains(DynamicEntityFormInfo.FIELD_SEPARATOR)) {,0,1,0.14285714285714285,68
f7f3ca2c1196f3df086281c689109c153833a776,"result.put(tabName, tabErrors);",1,1,0.14285714285714285,69
f7f3ca2c1196f3df086281c689109c153833a776,"//this branch of the code just puts a placeholder ""tabErrors"", to avoid errprProcessor parsing errors, and",0,1,0.14285714285714285,70
f7f3ca2c1196f3df086281c689109c153833a776,if (!hideTopLevelFieldErrors) {,0,1,0.14285714285714285,71
f7f3ca2c1196f3df086281c689109c153833a776,if (tab != null) {,0,1,0.14285714285714285,72
f7f3ca2c1196f3df086281c689109c153833a776,"Map<String, List<String>> tabErrors = result.get(tabName);",0,1,0.14285714285714285,73
f7f3ca2c1196f3df086281c689109c153833a776,if (tabErrors == null) {,0,1,0.14285714285714285,74
f7f3ca2c1196f3df086281c689109c153833a776,"tabErrors = new HashMap<String, List<String>>();",0,1,0.14285714285714285,75
f7f3ca2c1196f3df086281c689109c153833a776,"result.put(tabName, tabErrors);",0,1,0.14285714285714285,76
f7f3ca2c1196f3df086281c689109c153833a776,tabName = tab.getTitle();,0,1,0.14285714285714285,77
f7f3ca2c1196f3df086281c689109c153833a776,if (form.getTabs().size() > 0) {,0,1,0.14285714285714285,78
f7f3ca2c1196f3df086281c689109c153833a776,"//this branch of the code just puts a placeholder ""tabErrors"", to avoid errprProcessor parsing errors, and",0,1,0.14285714285714285,79
f7f3ca2c1196f3df086281c689109c153833a776,return ProcessorResult.setLocalVariables(localVariables);,0,1,0.14285714285714285,80
f7f3ca2c1196f3df086281c689109c153833a776,if (tab != null) {,1,1,0.14285714285714285,81
f7f3ca2c1196f3df086281c689109c153833a776,tabName = tab.getTitle();,1,1,0.14285714285714285,82
f7f3ca2c1196f3df086281c689109c153833a776,"Map<String, List<String>> tabErrors = result.get(tabName);",1,1,0.14285714285714285,83
f7f3ca2c1196f3df086281c689109c153833a776,if (tabErrors == null) {,1,1,0.14285714285714285,84
f7f3ca2c1196f3df086281c689109c153833a776,if (formField != null) {,0,1,0.14285714285714285,85
f7f3ca2c1196f3df086281c689109c153833a776,"tabErrors = new HashMap<String, List<String>>();",1,1,0.14285714285714285,86
f7f3ca2c1196f3df086281c689109c153833a776,import org.thymeleaf.Arguments;,1,0,0.0,87
f7f3ca2c1196f3df086281c689109c153833a776,return BroadleafDialectPrefix.BLC_ADMIN;,0,0,0.0,88
f7f3ca2c1196f3df086281c689109c153833a776,},0,0,0.0,89
f7f3ca2c1196f3df086281c689109c153833a776,return;,0,0,0.0,90
f7f3ca2c1196f3df086281c689109c153833a776,"newLocalVariables.put(""tabErrors"", result);",0,0,0.0,91
f7f3ca2c1196f3df086281c689109c153833a776,import org.thymeleaf.spring4.util.FieldUtils;,1,0,0.0,92
f7f3ca2c1196f3df086281c689109c153833a776,import org.thymeleaf.dom.Element;,1,0,0.0,93
f7f3ca2c1196f3df086281c689109c153833a776,import org.thymeleaf.processor.ProcessorResult;,1,0,0.0,94
f7f3ca2c1196f3df086281c689109c153833a776,import org.thymeleaf.processor.attr.AbstractAttrProcessor;,1,0,0.0,95
f7f3ca2c1196f3df086281c689109c153833a776,"super(""errors"");",1,0,0.0,96
f7f3ca2c1196f3df086281c689109c153833a776,@Override,0,0,0.0,97
f7f3ca2c1196f3df086281c689109c153833a776,"return ""errors"";",0,0,0.0,98
f7f3ca2c1196f3df086281c689109c153833a776,import org.springframework.beans.factory.annotation.Value;,0,0,0.0,99
f7f3ca2c1196f3df086281c689109c153833a776,import org.broadleafcommerce.common.web.domain.BroadleafThymeleafContext;,0,0,0.0,100
f7f3ca2c1196f3df086281c689109c153833a776,import org.broadleafcommerce.common.web.dialect.BroadleafDialectPrefix;,0,0,0.0,101
f7f3ca2c1196f3df086281c689109c153833a776,import org.broadleafcommerce.common.web.dialect.AbstractBroadleafAttributeModelVariableModifierProcessor;,0,0,0.0,102
f7f3ca2c1196f3df086281c689109c153833a776,"//avoids checking on tabs, fieldGroups or fields (which for translations are empty), thus skipping any warning",1,0,0.0,103
f7f3ca2c1196f3df086281c689109c153833a776,},1,0,0.0,104
f7f3ca2c1196f3df086281c689109c153833a776,"//avoids checking on tabs, fieldGroups or fields (which for translations are empty), thus skipping any warning",0,0,0.0,105
f7f3ca2c1196f3df086281c689109c153833a776,},0,0,0.0,106
f7f3ca2c1196f3df086281c689109c153833a776,protected boolean hideTopLevelFieldErrors;,0,0,0.0,107
f7f3ca2c1196f3df086281c689109c153833a776,"@Value(""${admin.form.validation.errors.hideTopLevelFieldErrors:false}"")",0,0,0.0,108
f7f3ca2c1196f3df086281c689109c153833a776,//TODO: research what else can be sent from this stage,1,0,0.0,109
f7f3ca2c1196f3df086281c689109c153833a776,"//avoids checking on tabs, fieldGroups or fields (which for translations are empty), thus skipping any warning",0,0,0.0,110
f7f3ca2c1196f3df086281c689109c153833a776,import org.broadleafcommerce.common.util.StringUtil;,0,0,0.0,111
f7f3ca2c1196f3df086281c689109c153833a776,return ProcessorResult.OK;,1,0,0.0,112
