commit_id,line,line_level_label,count,line_score,row
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,// use the camel catalog to load the archetypes,1,4,1.0,1
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,*  implied.  See the License for the specific language governing,1,3,0.75,2
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,*  with the License.  You may obtain a copy of the License at,1,3,0.75,3
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,"*  distributed under the License is distributed on an ""AS IS"" BASIS,",1,2,0.5,4
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,// load the archetype-catalog.xml from inside the JAR,1,2,0.5,5
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,* The Fabric8 archetypes,1,2,0.5,6
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,*  permissions and limitations under the License.,1,2,0.5,7
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,} catch (Exception e) {,1,2,0.5,8
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,"*  Red Hat licenses this file to you under the Apache License, version",1,2,0.5,9
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,} catch (Exception e) {,1,2,0.5,10
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,} catch (Exception e) {,0,2,0.5,11
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,// load the archetype-catalog.xml from inside the JAR,0,2,0.5,12
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,},1,1,0.25,13
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import org.jboss.forge.addon.dependencies.Coordinate;,1,1,0.25,14
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import org.jboss.forge.addon.dependencies.Dependency;,1,1,0.25,15
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import org.jboss.forge.addon.dependencies.DependencyResolver;,1,1,0.25,16
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import org.jboss.forge.addon.dependencies.builder.CoordinateBuilder;,1,1,0.25,17
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import org.jboss.forge.addon.dependencies.builder.DependencyQueryBuilder;,1,1,0.25,18
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import org.jboss.forge.addon.maven.archetype.ArchetypeCatalogFactory;,1,1,0.25,19
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import org.jboss.forge.furnace.services.Imported;,1,1,0.25,20
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,public class FabricArchetypeCatalogFactory implements ArchetypeCatalogFactory {,1,1,0.25,21
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,public String toString() {,1,1,0.25,22
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,if (dependency != null) {,1,1,0.25,23
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,public String getName() {,1,1,0.25,24
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,public ArchetypeCatalog getArchetypeCatalog() {,1,1,0.25,25
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,if (cachedArchetypes == null) {,1,1,0.25,26
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,Dependency dependency = resolver.get().resolveArtifact(DependencyQueryBuilder.create(coordinate));,1,1,0.25,27
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import org.apache.maven.archetype.catalog.ArchetypeCatalog;,1,1,0.25,28
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,try {,1,1,0.25,29
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,if (is != null) {,1,1,0.25,30
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,public boolean equals(Object o) {,1,1,0.25,31
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,public int hashCode() {,1,1,0.25,32
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import org.apache.maven.archetype.catalog.io.xpp3.ArchetypeCatalogXpp3Reader;,1,1,0.25,33
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,Coordinate coordinate = CoordinateBuilder.create(),1,1,0.25,34
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import io.fabric8.forge.addon.utils.VersionHelper;,1,1,0.25,35
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,*,1,1,0.25,36
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import javax.inject.Inject;,1,1,0.25,37
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import java.net.URLClassLoader;,0,1,0.25,38
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,try {,0,1,0.25,39
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,if (is != null) {,0,1,0.25,40
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import org.jboss.forge.addon.parser.xml.resources.XMLResource;,1,1,0.25,41
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,XMLResource xml = (XMLResource) dependency.getArtifact();,1,1,0.25,42
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,if (xml != null) {,1,1,0.25,43
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,try (InputStream is = xml.getResourceInputStream()) {,1,1,0.25,44
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,"*  Copyright 2005-2015 Red Hat, Inc.",1,1,0.25,45
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import java.net.URL;,0,1,0.25,46
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,"*  2.0 (the ""License""); you may not use this file except in compliance",1,1,0.25,47
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import java.net.URL;,1,1,0.25,48
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,*     http://www.apache.org/licenses/LICENSE-2.0,1,1,0.25,49
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import java.util.logging.Level;,1,1,0.25,50
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import java.net.URLClassLoader;,1,1,0.25,51
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import java.util.logging.Logger;,1,1,0.25,52
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,import java.io.InputStream;,1,1,0.25,53
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,"*  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or",1,1,0.25,54
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,"*  Unless required by applicable law or agreed to in writing, software",1,1,0.25,55
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,@Override,1,0,0.0,56
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,URLClassLoader loader = new URLClassLoader(new URL[]{url});,1,0,0.0,57
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,".setGroupId(""io.fabric8.archetypes"")",1,0,0.0,58
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,".setArtifactId(""archetypes-catalog"")",1,0,0.0,59
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,.setVersion(version),1,0,0.0,60
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,".setPackaging(""jar"");",1,0,0.0,61
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,String name = dependency.getArtifact().getFullyQualifiedName();,1,0,0.0,62
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,"URL url = new URL(""file"", null, name);",1,0,0.0,63
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,String version = VersionHelper.fabric8ArchetypesVersion();,1,0,0.0,64
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,return cachedArchetypes;,1,0,0.0,65
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,"InputStream is = loader.getResourceAsStream(""archetype-catalog.xml"");",1,0,0.0,66
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,cachedArchetypes = new ArchetypeCatalogXpp3Reader().read(is);,1,0,0.0,67
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,"logger.log(Level.SEVERE, ""Error while retrieving archetypes"", e);",1,0,0.0,68
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,if (this == o) return true;,1,0,0.0,69
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,if (o == null || getClass() != o.getClass()) return false;,1,0,0.0,70
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,FabricArchetypeCatalogFactory that = (FabricArchetypeCatalogFactory) o;,1,0,0.0,71
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,if (!NAME.equals(that.NAME)) return false;,1,0,0.0,72
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,return true;,1,0,0.0,73
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,private ArchetypeCatalog cachedArchetypes;,1,0,0.0,74
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,return NAME;,1,0,0.0,75
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,".setClassifier(""archetype-catalog"")",1,0,0.0,76
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,Imported<DependencyResolver> resolver;,1,0,0.0,77
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,@Inject,1,0,0.0,78
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,String version = VersionHelper.fabric8Version();,0,0,0.0,79
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,.setVersion(version),0,0,0.0,80
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,// TODO: version should be not hardcoded,1,0,0.0,81
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,".setVersion(""2.2-SNAPSHOT"")",1,0,0.0,82
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,".setPackaging(""jar"");",0,0,0.0,83
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,String name = dependency.getArtifact().getFullyQualifiedName();,0,0,0.0,84
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,"URL url = new URL(""file"", null, name);",0,0,0.0,85
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,URLClassLoader loader = new URLClassLoader(new URL[]{url});,0,0,0.0,86
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,"InputStream is = loader.getResourceAsStream(""archetype-catalog.xml"");",0,0,0.0,87
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,"logger.log(Level.SEVERE, ""Error while retrieving archetypes"", e);",0,0,0.0,88
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,".setPackaging(""xml"");",1,0,0.0,89
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,"logger.log(Level.SEVERE, ""Error while retrieving archetypes"", e);",1,0,0.0,90
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,/**,1,0,0.0,91
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,*/,1,0,0.0,92
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,package io.fabric8.forge.camel.commands.project.archetype;,1,0,0.0,93
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,private final Logger logger = Logger.getLogger(getClass().getName());,1,0,0.0,94
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,"private static final String NAME = ""fabric8"";",1,0,0.0,95
234baf2590bb43f07f2e87dc8d4e0bfe446e0ab5,return NAME.hashCode();,1,0,0.0,96
