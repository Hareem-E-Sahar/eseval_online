commit_id,line,line_level_label,count,line_score,row
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (reason == null && offer != null) {,0,5,1.0,1
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (reason == null && offer != null) {,1,5,1.0,2
62e9e329aac8eebda3431cd601360c9ffa46fc49,} else if (this.offerName != null) {,0,4,0.8,3
62e9e329aac8eebda3431cd601360c9ffa46fc49,} else if (this.offerName != null) {,0,4,0.8,4
62e9e329aac8eebda3431cd601360c9ffa46fc49,} else if (this.offerName != null) {,0,4,0.8,5
62e9e329aac8eebda3431cd601360c9ffa46fc49,"return value == null ? null : BroadleafCurrencyUtils.getMoney(value, getCurrency());",1,4,0.8,6
62e9e329aac8eebda3431cd601360c9ffa46fc49,// adjustments should only have more precision if the roundingScale was,0,4,0.8,7
62e9e329aac8eebda3431cd601360c9ffa46fc49,public Money getFutureCreditTotalAdjustmentValue() {,0,3,0.6000000000000001,8
62e9e329aac8eebda3431cd601360c9ffa46fc49,} else if (offer instanceof HibernateProxy) {,0,3,0.6000000000000001,9
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (reason != null) {,0,3,0.6000000000000001,10
62e9e329aac8eebda3431cd601360c9ffa46fc49,public Money getFutureCreditAdjustmentValue() {,0,3,0.6000000000000001,11
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (ctx != null) {,0,3,0.6000000000000001,12
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (value == null) {,0,3,0.6000000000000001,13
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (currency == null) {,0,3,0.6000000000000001,14
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (_roundingMode == null) {,0,3,0.6000000000000001,15
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (reason == null) {,1,3,0.6000000000000001,16
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (deproxiedOffer == null) {,0,3,0.6000000000000001,17
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (postLoaderDao != null) {,0,3,0.6000000000000001,18
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (reason != null) {,0,3,0.6000000000000001,19
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (reason != null) {,0,3,0.6000000000000001,20
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (deproxiedOffer == null) {,0,3,0.6000000000000001,21
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (postLoaderDao != null) {,0,3,0.6000000000000001,22
62e9e329aac8eebda3431cd601360c9ffa46fc49,} else if (offer instanceof HibernateProxy) {,0,3,0.6000000000000001,23
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (reason == null) {,1,3,0.6000000000000001,24
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (reason == null) {,1,3,0.6000000000000001,25
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (deproxiedOffer == null) {,0,3,0.6000000000000001,26
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (postLoaderDao != null) {,0,3,0.6000000000000001,27
62e9e329aac8eebda3431cd601360c9ffa46fc49,} else if (offer instanceof HibernateProxy) {,0,3,0.6000000000000001,28
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (adjustment.isFutureCredit()) {,0,2,0.4,29
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (!adjustment.isFutureCredit()) {,1,2,0.4,30
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (StringUtils.isNotEmpty(modeStr)) {,0,2,0.4,31
62e9e329aac8eebda3431cd601360c9ffa46fc49,public RoundingMode getRoundingModeForAdj() {,0,2,0.4,32
62e9e329aac8eebda3431cd601360c9ffa46fc49,} else {,0,2,0.4,33
62e9e329aac8eebda3431cd601360c9ffa46fc49,// preserve highest scale / allows adjustments to maintain more precision,0,2,0.4,34
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (! adjustment.isFutureCredit()) {,0,2,0.4,35
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.broadleafcommerce.common.web.BroadleafRequestContext;,0,2,0.4,36
62e9e329aac8eebda3431cd601360c9ffa46fc49,// handle null currency by setting to system default,0,2,0.4,37
62e9e329aac8eebda3431cd601360c9ffa46fc49,"Money adjustmentValue = BroadleafCurrencyUtils.getMoney(BigDecimal.ZERO, getCurrency());",0,2,0.4,38
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (!adjustment.isFutureCredit()) {,0,2,0.4,39
62e9e329aac8eebda3431cd601360c9ffa46fc49,} catch (Exception e) {,0,2,0.4,40
62e9e329aac8eebda3431cd601360c9ffa46fc49,for (OrderItemPriceDetailAdjustment adjustment : orderItemPriceDetailAdjustments) {,0,2,0.4,41
62e9e329aac8eebda3431cd601360c9ffa46fc49,} else {,0,2,0.4,42
62e9e329aac8eebda3431cd601360c9ffa46fc49,public List<OrderItemPriceDetailAdjustment> getFutureCreditOrderItemPriceDetailAdjustments() {,0,2,0.4,43
62e9e329aac8eebda3431cd601360c9ffa46fc49,} else {,0,2,0.4,44
62e9e329aac8eebda3431cd601360c9ffa46fc49,"@ManyToOne(targetEntity = OrderItemImpl.class, cascade = {CascadeType.REFRESH})",0,2,0.4,45
62e9e329aac8eebda3431cd601360c9ffa46fc49,} else {,0,2,0.4,46
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (getClass() != obj.getClass()) {,1,2,0.4,47
62e9e329aac8eebda3431cd601360c9ffa46fc49,* Copyright (C) 2009 - 2013 Broadleaf Commerce,0,2,0.4,48
62e9e329aac8eebda3431cd601360c9ffa46fc49,} else {,0,2,0.4,49
62e9e329aac8eebda3431cd601360c9ffa46fc49,* Copyright (C) 2009 - 2016 Broadleaf Commerce,1,2,0.4,50
62e9e329aac8eebda3431cd601360c9ffa46fc49,} else {,1,2,0.4,51
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (!(obj instanceof OrderItemPriceDetailAdjustmentImpl)) {,0,2,0.4,52
62e9e329aac8eebda3431cd601360c9ffa46fc49,},0,1,0.2,53
62e9e329aac8eebda3431cd601360c9ffa46fc49,List<OrderItemPriceDetailAdjustment> orderDiscountAdjustments = new ArrayList<>();,0,1,0.2,54
62e9e329aac8eebda3431cd601360c9ffa46fc49,return null;,0,1,0.2,55
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.broadleafcommerce.common.currency.domain.BroadleafCurrencyImpl;,0,1,0.2,56
62e9e329aac8eebda3431cd601360c9ffa46fc49,adjustmentValue = adjustmentValue.add(adjustment.getValue());,1,1,0.2,57
62e9e329aac8eebda3431cd601360c9ffa46fc49,return getFutureCreditAdjustmentValue().multiply(quantity);,0,1,0.2,58
62e9e329aac8eebda3431cd601360c9ffa46fc49,return adjustmentValue;,0,1,0.2,59
62e9e329aac8eebda3431cd601360c9ffa46fc49,adjustmentValue = adjustmentValue.add(adjustment.getValue());,0,1,0.2,60
62e9e329aac8eebda3431cd601360c9ffa46fc49,return orderDiscountAdjustments;,0,1,0.2,61
62e9e329aac8eebda3431cd601360c9ffa46fc49,},0,1,0.2,62
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.reason = offer.getName();,1,1,0.2,63
62e9e329aac8eebda3431cd601360c9ffa46fc49,@Override,0,1,0.2,64
62e9e329aac8eebda3431cd601360c9ffa46fc49,return offer;,1,1,0.2,65
62e9e329aac8eebda3431cd601360c9ffa46fc49,},1,1,0.2,66
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.reason = reason;,1,1,0.2,67
62e9e329aac8eebda3431cd601360c9ffa46fc49,currency = new BroadleafCurrencyImpl();,0,1,0.2,68
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.orderItemPriceDetail = orderItemPriceDetail;,1,1,0.2,69
62e9e329aac8eebda3431cd601360c9ffa46fc49,deproxiedOffer = null;,0,1,0.2,70
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.reason = this.offerName;,0,1,0.2,71
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.reason = reason;,0,1,0.2,72
62e9e329aac8eebda3431cd601360c9ffa46fc49,return deproxiedOffer;,0,1,0.2,73
62e9e329aac8eebda3431cd601360c9ffa46fc49,},0,1,0.2,74
62e9e329aac8eebda3431cd601360c9ffa46fc49,BroadleafCurrency currency = getCurrency();,0,1,0.2,75
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.springframework.context.ApplicationContext;,0,1,0.2,76
62e9e329aac8eebda3431cd601360c9ffa46fc49,"return new Money(value, currency, value.scale());",0,1,0.2,77
62e9e329aac8eebda3431cd601360c9ffa46fc49,String modeStr = ctx.getEnvironment().getProperty(,0,1,0.2,78
62e9e329aac8eebda3431cd601360c9ffa46fc49,deproxiedOffer = HibernateUtils.deproxy(offer);,0,1,0.2,79
62e9e329aac8eebda3431cd601360c9ffa46fc49,return getFutureCreditAdjustmentValue().multiply(quantity);,1,1,0.2,80
62e9e329aac8eebda3431cd601360c9ffa46fc49,return getAdjustmentValue().multiply(quantity);,1,1,0.2,81
62e9e329aac8eebda3431cd601360c9ffa46fc49,adjustmentValue = adjustmentValue.add(adjustment.getValue());,1,1,0.2,82
62e9e329aac8eebda3431cd601360c9ffa46fc49,"return getFutureCreditAdjustmentValue().multiplyWithRounding(quantity,",0,1,0.2,83
62e9e329aac8eebda3431cd601360c9ffa46fc49,"return getAdjustmentValue().multiplyWithRounding(quantity,",0,1,0.2,84
62e9e329aac8eebda3431cd601360c9ffa46fc49,return _roundingMode;,0,1,0.2,85
62e9e329aac8eebda3431cd601360c9ffa46fc49,_roundingMode = mode;,0,1,0.2,86
62e9e329aac8eebda3431cd601360c9ffa46fc49,mode = RoundingMode.valueOf(modeStr);,0,1,0.2,87
62e9e329aac8eebda3431cd601360c9ffa46fc49,try {,0,1,0.2,88
62e9e329aac8eebda3431cd601360c9ffa46fc49,ApplicationContext ctx = ApplicationContextHolder.getApplicationContext();,0,1,0.2,89
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.apache.commons.lang3.StringUtils;,0,1,0.2,90
62e9e329aac8eebda3431cd601360c9ffa46fc49,RoundingMode mode = RoundingMode.HALF_EVEN;,0,1,0.2,91
62e9e329aac8eebda3431cd601360c9ffa46fc49,},0,1,0.2,92
62e9e329aac8eebda3431cd601360c9ffa46fc49,adjustmentValue = adjustmentValue.add(adjustment.getValue());,0,1,0.2,93
62e9e329aac8eebda3431cd601360c9ffa46fc49,adjustmentValue = adjustment.getValue().add(adjustmentValue);,0,1,0.2,94
62e9e329aac8eebda3431cd601360c9ffa46fc49,adjustmentValue.getAmount().scale()) {,0,1,0.2,95
62e9e329aac8eebda3431cd601360c9ffa46fc49,if (adjustment.getValue().getAmount().scale() >,0,1,0.2,96
62e9e329aac8eebda3431cd601360c9ffa46fc49,import java.math.RoundingMode;,0,1,0.2,97
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.broadleafcommerce.core.payment.service.OrderPaymentStatusService;,0,1,0.2,98
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.broadleafcommerce.common.util.ApplicationContextHolder;,0,1,0.2,99
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.broadleafcommerce.common.money.BankersRounding;,0,1,0.2,100
62e9e329aac8eebda3431cd601360c9ffa46fc49,deproxiedOffer = offer;,0,1,0.2,101
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.reason = reason;,0,1,0.2,102
62e9e329aac8eebda3431cd601360c9ffa46fc49,"deproxiedOffer = postLoaderDao.find(OfferImpl.class, id);",0,1,0.2,103
62e9e329aac8eebda3431cd601360c9ffa46fc49,"deproxiedOffer = postLoaderDao.find(OfferImpl.class, id);",0,1,0.2,104
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.reason = offer.getName();,1,1,0.2,105
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.reason = reason;,1,1,0.2,106
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.orderItemPriceDetail = orderItemPriceDetail;,1,1,0.2,107
62e9e329aac8eebda3431cd601360c9ffa46fc49,deproxiedOffer = null;,0,1,0.2,108
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.reason = this.offerName;,0,1,0.2,109
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.reason = reason;,0,1,0.2,110
62e9e329aac8eebda3431cd601360c9ffa46fc49,return deproxiedOffer;,0,1,0.2,111
62e9e329aac8eebda3431cd601360c9ffa46fc49,},0,1,0.2,112
62e9e329aac8eebda3431cd601360c9ffa46fc49,deproxiedOffer = offer;,0,1,0.2,113
62e9e329aac8eebda3431cd601360c9ffa46fc49,Long id = offer.getId();,0,1,0.2,114
62e9e329aac8eebda3431cd601360c9ffa46fc49,Long id = offer.getId();,0,1,0.2,115
62e9e329aac8eebda3431cd601360c9ffa46fc49,return offer;,1,1,0.2,116
62e9e329aac8eebda3431cd601360c9ffa46fc49,PostLoaderDao postLoaderDao = DefaultPostLoaderDao.getPostLoaderDao();,0,1,0.2,117
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.hibernate.proxy.HibernateProxy;,0,1,0.2,118
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.broadleafcommerce.common.util.HibernateUtils;,0,1,0.2,119
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.broadleafcommerce.common.persistence.PostLoaderDao;,0,1,0.2,120
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.broadleafcommerce.common.persistence.DefaultPostLoaderDao;,0,1,0.2,121
62e9e329aac8eebda3431cd601360c9ffa46fc49,@ManyToOne(targetEntity = OrderItemImpl.class),1,1,0.2,122
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.offerName = offer.getName();,1,1,0.2,123
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.reason = reason;,1,1,0.2,124
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.offerName = offerName;,0,1,0.2,125
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.reason = reason;,0,1,0.2,126
62e9e329aac8eebda3431cd601360c9ffa46fc49,},1,1,0.2,127
62e9e329aac8eebda3431cd601360c9ffa46fc49,deproxiedOffer = HibernateUtils.deproxy(offer);,0,1,0.2,128
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.broadleafcommerce.common.persistence.DefaultPostLoaderDao;,0,1,0.2,129
62e9e329aac8eebda3431cd601360c9ffa46fc49,deproxiedOffer = null;,0,1,0.2,130
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.broadleafcommerce.common.persistence.PostLoaderDao;,0,1,0.2,131
62e9e329aac8eebda3431cd601360c9ffa46fc49,PostLoaderDao postLoaderDao = DefaultPostLoaderDao.getPostLoaderDao();,0,1,0.2,132
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.hibernate.proxy.HibernateProxy;,0,1,0.2,133
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.broadleafcommerce.common.util.HibernateUtils;,0,1,0.2,134
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.broadleafcommerce.common.persistence.PostLoaderDao;,0,1,0.2,135
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.broadleafcommerce.common.persistence.DefaultPostLoaderDao;,0,1,0.2,136
62e9e329aac8eebda3431cd601360c9ffa46fc49,},1,1,0.2,137
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.reason = offer.getName();,1,1,0.2,138
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.reason = reason;,1,1,0.2,139
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.orderItemPriceDetail = orderItemPriceDetail;,1,1,0.2,140
62e9e329aac8eebda3431cd601360c9ffa46fc49,return offer;,1,1,0.2,141
62e9e329aac8eebda3431cd601360c9ffa46fc49,this.reason = this.offerName;,0,1,0.2,142
62e9e329aac8eebda3431cd601360c9ffa46fc49,"deproxiedOffer = postLoaderDao.find(OfferImpl.class, id);",0,1,0.2,143
62e9e329aac8eebda3431cd601360c9ffa46fc49,return deproxiedOffer;,0,1,0.2,144
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.hibernate.proxy.HibernateProxy;,0,1,0.2,145
62e9e329aac8eebda3431cd601360c9ffa46fc49,PostLoaderDao postLoaderDao = DefaultPostLoaderDao.getPostLoaderDao();,0,1,0.2,146
62e9e329aac8eebda3431cd601360c9ffa46fc49,Long id = offer.getId();,0,1,0.2,147
62e9e329aac8eebda3431cd601360c9ffa46fc49,import org.broadleafcommerce.common.util.HibernateUtils;,0,1,0.2,148
62e9e329aac8eebda3431cd601360c9ffa46fc49,deproxiedOffer = HibernateUtils.deproxy(offer);,0,1,0.2,149
62e9e329aac8eebda3431cd601360c9ffa46fc49,deproxiedOffer = offer;,0,1,0.2,150
62e9e329aac8eebda3431cd601360c9ffa46fc49,},0,1,0.2,151
62e9e329aac8eebda3431cd601360c9ffa46fc49,setReason(reason);,0,0,0.0,152
62e9e329aac8eebda3431cd601360c9ffa46fc49,e.printStackTrace();,0,0,0.0,153
62e9e329aac8eebda3431cd601360c9ffa46fc49,"""item.offer.percent.rounding.mode"");",0,0,0.0,154
62e9e329aac8eebda3431cd601360c9ffa46fc49,// overridden,0,0,0.0,155
62e9e329aac8eebda3431cd601360c9ffa46fc49,private static RoundingMode _roundingMode;,0,0,0.0,156
62e9e329aac8eebda3431cd601360c9ffa46fc49,currency.setCurrencyCode(Money.defaultCurrency().getCurrencyCode());,0,0,0.0,157
62e9e329aac8eebda3431cd601360c9ffa46fc49,orderDiscountAdjustments.add(adjustment);,0,0,0.0,158
62e9e329aac8eebda3431cd601360c9ffa46fc49,setReason(reason);,0,0,0.0,159
62e9e329aac8eebda3431cd601360c9ffa46fc49,setOrderItemPriceDetail(orderItemPriceDetail);,0,0,0.0,160
62e9e329aac8eebda3431cd601360c9ffa46fc49,protected Offer deproxiedOffer;,0,0,0.0,161
62e9e329aac8eebda3431cd601360c9ffa46fc49,@Transient,0,0,0.0,162
62e9e329aac8eebda3431cd601360c9ffa46fc49,"cloned.init(orderItemPriceDetail, offer, reason);",0,0,0.0,163
62e9e329aac8eebda3431cd601360c9ffa46fc49,setOrderItemPriceDetail(orderItemPriceDetail);,0,0,0.0,164
62e9e329aac8eebda3431cd601360c9ffa46fc49,protected Offer deproxiedOffer;,0,0,0.0,165
62e9e329aac8eebda3431cd601360c9ffa46fc49,@Transient,0,0,0.0,166
62e9e329aac8eebda3431cd601360c9ffa46fc49,setReason(reason);,0,0,0.0,167
62e9e329aac8eebda3431cd601360c9ffa46fc49,setOrderItemPriceDetail(orderItemPriceDetail);,0,0,0.0,168
62e9e329aac8eebda3431cd601360c9ffa46fc49,protected Offer deproxiedOffer;,0,0,0.0,169
62e9e329aac8eebda3431cd601360c9ffa46fc49,@Transient,0,0,0.0,170
62e9e329aac8eebda3431cd601360c9ffa46fc49,cloned.setReason(reason);,1,0,0.0,171
62e9e329aac8eebda3431cd601360c9ffa46fc49,cloned.setOrderItemPriceDetail(orderItemPriceDetail);,1,0,0.0,172
62e9e329aac8eebda3431cd601360c9ffa46fc49,// dont clone,1,0,0.0,173
62e9e329aac8eebda3431cd601360c9ffa46fc49,getRoundingModeForAdj());,0,0,0.0,174
