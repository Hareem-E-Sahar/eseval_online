commit_id,line,line_level_label,count,line_score,row
b077563265697866b9ea39306d56e5f302739d07,"LOG.error(""Failed to trigger job "" + jenkinsSeedJob + "" on "" + jobUrl + "". Status: "" + status + "" message: "" + message);",0,14,1.0,1
b077563265697866b9ea39306d56e5f302739d07,"+ "" on "" + clazz.getName() + "" "" + config + "". "" + e, e);",1,11,0.7857142857142857,2
b077563265697866b9ea39306d56e5f302739d07,"""                  \""uri\"":\"""" + gitAddress + ""/"" + user + ""/"" + buildName + "".git\""\n"" +",1,9,0.6428571428571428,3
b077563265697866b9ea39306d56e5f302739d07,"LOG.warn(""Could not find service "" + gitServiceName + "" for namespace "" + namespace);",1,8,0.5714285714285714,4
b077563265697866b9ea39306d56e5f302739d07,"onApplyError(""Failed to create BuildConfig from "" + sourceName + "". "" + e, e);",0,7,0.5,5
b077563265697866b9ea39306d56e5f302739d07,"LOG.info(""Looking up service "" + serviceName + "" for namespace: "" + namespace);",0,7,0.5,6
b077563265697866b9ea39306d56e5f302739d07,"LOG.info(""Commiting and pushing to: "" + remoteUrl + "" and remote name "" + origin);",0,7,0.5,7
b077563265697866b9ea39306d56e5f302739d07,"String remoteUrl = internalAddress + user + ""/"" + named + "".git"";",1,7,0.5,8
b077563265697866b9ea39306d56e5f302739d07,"//results.appendOut(""Created git repository "" + fullName + "" at: "" + htmlUrl);",1,7,0.5,9
b077563265697866b9ea39306d56e5f302739d07,"LOG.info(""Using remoteUrl: "" + remoteUrl + "" and remote name "" + origin);",1,7,0.5,10
b077563265697866b9ea39306d56e5f302739d07,"LOG.info(""Commiting and pushing to: "" + remoteUrl + "" and remote name "" + origin);",1,7,0.5,11
b077563265697866b9ea39306d56e5f302739d07,"LOG.info(""Creating a BuildConfig for namespace: "" + namespace + "" project: "" + projectName);",1,7,0.5,12
b077563265697866b9ea39306d56e5f302739d07,"LOG.error(""Failed to trigger jenkins on "" + jobUrl + "". "" + e, e);",0,6,0.42857142857142855,13
b077563265697866b9ea39306d56e5f302739d07,"String htmlUrl = address + user + ""/"" + named;",1,6,0.42857142857142855,14
b077563265697866b9ea39306d56e5f302739d07,"LOG.info(""Got response code from Jenkins: "" + status + "" message: "" + message);",0,6,0.42857142857142855,15
b077563265697866b9ea39306d56e5f302739d07,} else if (dto instanceof Entity) {,1,6,0.42857142857142855,16
b077563265697866b9ea39306d56e5f302739d07,} else if (dto instanceof Route) {,0,6,0.42857142857142855,17
b077563265697866b9ea39306d56e5f302739d07,} else if (dto instanceof Config) {,0,6,0.42857142857142855,18
b077563265697866b9ea39306d56e5f302739d07,"} else if (Objects.equal(""ImageRepository"", kind)) {",1,5,0.3571428571428571,19
b077563265697866b9ea39306d56e5f302739d07,"LOG.warn(""Failed to write file "" + dummyFile + "". "" + e, e);",1,5,0.3571428571428571,20
b077563265697866b9ea39306d56e5f302739d07,"""                  \""user\"":\"""" + user + ""\""\n"" +",1,5,0.3571428571428571,21
b077563265697866b9ea39306d56e5f302739d07,"""                     \""user\"":\"""" + user + ""\""\n"" +",1,5,0.3571428571428571,22
b077563265697866b9ea39306d56e5f302739d07,"""               \""user\"":\"""" + user + ""\""\n"" +",1,5,0.3571428571428571,23
b077563265697866b9ea39306d56e5f302739d07,"protected void createKubernetesResources(String user, String buildName, String remote, String branch, GitRepoClient repoClient, String address) throws Exception {",1,5,0.3571428571428571,24
b077563265697866b9ea39306d56e5f302739d07,"LOG.warn(""Could not introspect "" + clazz.getName() + "". "" + e, e);",1,5,0.3571428571428571,25
b077563265697866b9ea39306d56e5f302739d07,"String key = kind + "":"" + id;",1,5,0.3571428571428571,26
b077563265697866b9ea39306d56e5f302739d07,"} else if (Objects.equal(""Config"", kind) || Objects.equal(""List"", kind)) {",1,5,0.3571428571428571,27
b077563265697866b9ea39306d56e5f302739d07,"} else if (Objects.equal(""Template"", kind)) {",1,5,0.3571428571428571,28
b077563265697866b9ea39306d56e5f302739d07,"} else if (Objects.equal(""DeploymentConfig"", kind)) {",1,5,0.3571428571428571,29
b077563265697866b9ea39306d56e5f302739d07,"public void applyRoute(Route entity, String sourceName) {",0,5,0.3571428571428571,30
b077563265697866b9ea39306d56e5f302739d07,"} else if (Objects.equal(""BuildConfig"", kind)) {",1,5,0.3571428571428571,31
b077563265697866b9ea39306d56e5f302739d07,"} else if (Objects.equal(""Service"", kind)) {",1,5,0.3571428571428571,32
b077563265697866b9ea39306d56e5f302739d07,"} else if (Objects.equal(""ReplicationController"", kind)) {",1,5,0.3571428571428571,33
b077563265697866b9ea39306d56e5f302739d07,} else if (object instanceof Collection) {,0,5,0.3571428571428571,34
b077563265697866b9ea39306d56e5f302739d07,"String key = kind + "":"" + id;",0,5,0.3571428571428571,35
b077563265697866b9ea39306d56e5f302739d07,} else if (entity instanceof KubernetesList) {,0,5,0.3571428571428571,36
b077563265697866b9ea39306d56e5f302739d07,"LOG.info(""Creating route "" + namespace + "":"" + id);",0,5,0.3571428571428571,37
b077563265697866b9ea39306d56e5f302739d07,} else if (dto != null) {,0,5,0.3571428571428571,38
b077563265697866b9ea39306d56e5f302739d07,"""                     \""name\"":\"""" + buildName + ""\"",\n"" +",1,4,0.2857142857142857,39
b077563265697866b9ea39306d56e5f302739d07,"""                        \""version\"":\"""" + imageTag + ""\""\n"" +",1,4,0.2857142857142857,40
b077563265697866b9ea39306d56e5f302739d07,"""                              \""name\"":\"""" + buildName + ""\"",\n"" +",1,4,0.2857142857142857,41
b077563265697866b9ea39306d56e5f302739d07,"""                  \""image\"":\"""" + builderImage + ""\""\n"" +",1,4,0.2857142857142857,42
b077563265697866b9ea39306d56e5f302739d07,"""                              \""image\"":\"""" + buildName + ""\"",\n"" +",1,4,0.2857142857142857,43
b077563265697866b9ea39306d56e5f302739d07,"""            \""name\"":\"""" + buildName + ""-deploy\""\n"" +",1,4,0.2857142857142857,44
b077563265697866b9ea39306d56e5f302739d07,"""                     \"""" + buildName + ""\""\n"" +",1,4,0.2857142857142857,45
b077563265697866b9ea39306d56e5f302739d07,"""                  \""name\"":\"""" + buildName + ""\"",\n"" +",1,4,0.2857142857142857,46
b077563265697866b9ea39306d56e5f302739d07,} else if (Strings.isNullOrEmpty(named)) {,1,4,0.2857142857142857,47
b077563265697866b9ea39306d56e5f302739d07,"""                     \""name\"":\"""" + buildName + ""\""\n"" +",1,4,0.2857142857142857,48
b077563265697866b9ea39306d56e5f302739d07,"""                  \""tag\"":\"""" + imageTag + ""\""\n"" +",1,4,0.2857142857142857,49
b077563265697866b9ea39306d56e5f302739d07,"LOG.warn(""Failed to create web hook in git repo: "" + e, e);",1,4,0.2857142857142857,50
b077563265697866b9ea39306d56e5f302739d07,"* For new projects; lets git add, git commit, git push otherwise lets git add/commit/push any new/udpated changes",1,4,0.2857142857142857,51
b077563265697866b9ea39306d56e5f302739d07,"fullName = user + ""/"" + named;",1,4,0.2857142857142857,52
b077563265697866b9ea39306d56e5f302739d07,"protected void createBuildConfig(RestUIContext context, String namespace, String projectName, String cloneUrl) throws Exception {",1,4,0.2857142857142857,53
b077563265697866b9ea39306d56e5f302739d07,"""                  \""secret\"":\"""" + secret + ""\""\n"" +",1,4,0.2857142857142857,54
b077563265697866b9ea39306d56e5f302739d07,"+ "" with value "" + value",1,4,0.2857142857142857,55
b077563265697866b9ea39306d56e5f302739d07,"""                  \""builderImage\"":\"""" + builderImage + ""\"",\n"" +",1,4,0.2857142857142857,56
b077563265697866b9ea39306d56e5f302739d07,"LOG.warn(""Failed to create web hook in git repo: "" + e, e);",1,4,0.2857142857142857,57
b077563265697866b9ea39306d56e5f302739d07,"""                  \""name\"":\"""" + buildName + ""\""\n"" +",1,4,0.2857142857142857,58
b077563265697866b9ea39306d56e5f302739d07,if (dto instanceof List) {,0,4,0.2857142857142857,59
b077563265697866b9ea39306d56e5f302739d07,if (dto instanceof Config) {,1,4,0.2857142857142857,60
b077563265697866b9ea39306d56e5f302739d07,} if (entity instanceof List) {,1,4,0.2857142857142857,61
b077563265697866b9ea39306d56e5f302739d07,"throw new IllegalArgumentException(""config "" + template + "" is not a ObjectNode"");",1,4,0.2857142857142857,62
b077563265697866b9ea39306d56e5f302739d07,} else if (object == null) {,1,4,0.2857142857142857,63
b077563265697866b9ea39306d56e5f302739d07,"LOG.warn(""Failed to create web hook in git repo: "" + e, e);",0,4,0.2857142857142857,64
b077563265697866b9ea39306d56e5f302739d07,"throw new IllegalArgumentException(""config "" + config + "" is not a ObjectNode"");",1,4,0.2857142857142857,65
b077563265697866b9ea39306d56e5f302739d07,"LOG.warn(""Failed to set property "" + name",1,4,0.2857142857142857,66
b077563265697866b9ea39306d56e5f302739d07,"String json = ""\n"" +",1,4,0.2857142857142857,67
b077563265697866b9ea39306d56e5f302739d07,"""   \""apiVersion\"":\"""" + osapiVersion + ""\"",\n"" +",1,4,0.2857142857142857,68
b077563265697866b9ea39306d56e5f302739d07,"""         \""apiVersion\"":\"""" + osapiVersion + ""\"",\n"" +",1,4,0.2857142857142857,69
b077563265697866b9ea39306d56e5f302739d07,"""               \""name\"":\"""" + buildName + ""\"",\n"" +",1,4,0.2857142857142857,70
b077563265697866b9ea39306d56e5f302739d07,"""            \""name\"":\"""" + buildName + ""\""\n"" +",1,4,0.2857142857142857,71
b077563265697866b9ea39306d56e5f302739d07,"LOG.warn(""failed to find fabric8 console service URL: "" + e, e);",1,3,0.21428571428571427,72
b077563265697866b9ea39306d56e5f302739d07,"public static final String TARGET_LOCATION_PROPERTY = ""targetLocation"";",1,3,0.21428571428571427,73
b077563265697866b9ea39306d56e5f302739d07,"public static final String PROJECT_NEW_COMMAND = ""project-new"";",1,3,0.21428571428571427,74
b077563265697866b9ea39306d56e5f302739d07,public class GitCommandCompletePostProcessor implements CommandCompletePostProcessor {,1,3,0.21428571428571427,75
b077563265697866b9ea39306d56e5f302739d07,// TODO should be to: { labels },1,3,0.21428571428571427,76
b077563265697866b9ea39306d56e5f302739d07,String namespace = KubernetesHelper.defaultNamespace();,1,3,0.21428571428571427,77
b077563265697866b9ea39306d56e5f302739d07,"String gitAddress = getServiceAddress(gitServiceName, namespace);",1,3,0.21428571428571427,78
b077563265697866b9ea39306d56e5f302739d07,"String namespace = ""default"";",1,3,0.21428571428571427,79
b077563265697866b9ea39306d56e5f302739d07,String name = descriptor.getName();,1,3,0.21428571428571427,80
b077563265697866b9ea39306d56e5f302739d07,"@ConfigProperty(name = ""JENKINS_SEED_JOB"", defaultValue = DEFAULT_JENKINS_SEED_JOB) String jenkinsSeedJob,",1,3,0.21428571428571427,81
b077563265697866b9ea39306d56e5f302739d07,"public static final String DEFAULT_JENKINS_SEED_JOB = ""seed"";",1,3,0.21428571428571427,82
b077563265697866b9ea39306d56e5f302739d07,public static String firstNotBlank(String... texts) {,1,3,0.21428571428571427,83
b077563265697866b9ea39306d56e5f302739d07,"@ConfigProperty(name = ""OPENSHIFT_CREATE_BUILD_ON_PROJECT_CREATE"", defaultValue = ""false"") boolean createOpenShiftBuildResources) {",1,3,0.21428571428571427,84
b077563265697866b9ea39306d56e5f302739d07,"public UserDetails preprocessRequest(String name, ExecutionRequest executionRequest, HttpServletRequest request) {",1,3,0.21428571428571427,85
b077563265697866b9ea39306d56e5f302739d07,"public void firePostCompleteActions(String name, ExecutionRequest executionRequest, RestUIContext context, CommandController controller, ExecutionResult results, HttpServletRequest request) {",1,3,0.21428571428571427,86
b077563265697866b9ea39306d56e5f302739d07,String user = userDetails.getUser();,1,3,0.21428571428571427,87
b077563265697866b9ea39306d56e5f302739d07,} else {,1,3,0.21428571428571427,88
b077563265697866b9ea39306d56e5f302739d07,Git git = initCommand.call();,1,3,0.21428571428571427,89
b077563265697866b9ea39306d56e5f302739d07,"String cloneUrl =  htmlUrl + "".git"";",1,3,0.21428571428571427,90
b077563265697866b9ea39306d56e5f302739d07,protected String getJenkinsServiceUrl(String namespace) {,1,3,0.21428571428571427,91
b077563265697866b9ea39306d56e5f302739d07,if (registerWebHooksValue instanceof Runnable) {,1,3,0.21428571428571427,92
b077563265697866b9ea39306d56e5f302739d07,"String json = ""{}"";",0,3,0.21428571428571427,93
b077563265697866b9ea39306d56e5f302739d07,String namespace = kubernetes.getNamespace();,0,3,0.21428571428571427,94
b077563265697866b9ea39306d56e5f302739d07,"String namespace = firstNotBlank(context.getProjectName(), executionRequest.getNamespace());",1,3,0.21428571428571427,95
b077563265697866b9ea39306d56e5f302739d07,"LOG.info(""Attempting to trigger the jenkins seed build on: "" + jobUrl);",0,3,0.21428571428571427,96
b077563265697866b9ea39306d56e5f302739d07,if (entity instanceof JsonNode) {,1,3,0.21428571428571427,97
b077563265697866b9ea39306d56e5f302739d07,"@ConfigProperty(name = ""OPENSHIFT_CREATE_BUILD_ON_PROJECT_CREATE"", defaultValue = ""false"") boolean createOpenShiftBuildResources) {",0,3,0.21428571428571427,98
b077563265697866b9ea39306d56e5f302739d07,String namespace = KubernetesHelper.getNamespace(entity);,0,3,0.21428571428571427,99
b077563265697866b9ea39306d56e5f302739d07,if (entity instanceof List) {,0,3,0.21428571428571427,100
b077563265697866b9ea39306d56e5f302739d07,if (item instanceof Service) {,0,3,0.21428571428571427,101
b077563265697866b9ea39306d56e5f302739d07,} else {,0,3,0.21428571428571427,102
b077563265697866b9ea39306d56e5f302739d07,String kind = item.getClass().getSimpleName();,0,3,0.21428571428571427,103
b077563265697866b9ea39306d56e5f302739d07,public static String getId(JsonNode entity) {,1,3,0.21428571428571427,104
b077563265697866b9ea39306d56e5f302739d07,} else {,1,3,0.21428571428571427,105
b077563265697866b9ea39306d56e5f302739d07,public static String getKind(JsonNode entity) {,1,3,0.21428571428571427,106
b077563265697866b9ea39306d56e5f302739d07,String kind = kindNode.asText();,1,3,0.21428571428571427,107
b077563265697866b9ea39306d56e5f302739d07,if (object instanceof KubernetesList) {,0,3,0.21428571428571427,108
b077563265697866b9ea39306d56e5f302739d07,"if (Objects.equal(""Pod"", kind)) {",1,3,0.21428571428571427,109
b077563265697866b9ea39306d56e5f302739d07,"String kind = Strings.defaultIfEmpty(getKind(jsonNode), """");",1,3,0.21428571428571427,110
b077563265697866b9ea39306d56e5f302739d07,"@ConfigProperty(name = ""JENKINS_SEED_JOB"", defaultValue = DEFAULT_JENKINS_SEED_JOB) String jenkinsSeedJob,",0,3,0.21428571428571427,111
b077563265697866b9ea39306d56e5f302739d07,String kind = kindObject.asText();,1,3,0.21428571428571427,112
b077563265697866b9ea39306d56e5f302739d07,String json = toJson(object);,1,3,0.21428571428571427,113
b077563265697866b9ea39306d56e5f302739d07,if (object instanceof JsonNode) {,1,3,0.21428571428571427,114
b077563265697866b9ea39306d56e5f302739d07,"public static final String DEFAULT_JENKINS_SEED_JOB = ""seed"";",0,3,0.21428571428571427,115
b077563265697866b9ea39306d56e5f302739d07,if (template instanceof ObjectNode) {,1,3,0.21428571428571427,116
b077563265697866b9ea39306d56e5f302739d07,if (config instanceof ObjectNode) {,1,3,0.21428571428571427,117
b077563265697866b9ea39306d56e5f302739d07,if (items instanceof ArrayNode) {,1,3,0.21428571428571427,118
b077563265697866b9ea39306d56e5f302739d07,String json = toJson(item);,1,3,0.21428571428571427,119
b077563265697866b9ea39306d56e5f302739d07,"""                  \""desiredState\"":{\n"" +",1,2,0.14285714285714285,120
b077563265697866b9ea39306d56e5f302739d07,"""                     }\n"" +",1,2,0.14285714285714285,121
b077563265697866b9ea39306d56e5f302739d07,"""                     \""manifest\"":{\n"" +",1,2,0.14285714285714285,122
b077563265697866b9ea39306d56e5f302739d07,"""                        \""containers\"":[\n"" +",1,2,0.14285714285714285,123
b077563265697866b9ea39306d56e5f302739d07,"""                           {\n"" +",1,2,0.14285714285714285,124
b077563265697866b9ea39306d56e5f302739d07,"""                              \""ports\"":[\n"" +",1,2,0.14285714285714285,125
b077563265697866b9ea39306d56e5f302739d07,"""                                 {\n"" +",1,2,0.14285714285714285,126
b077563265697866b9ea39306d56e5f302739d07,"""                                    \""containerPort\"":8778\n"" +",1,2,0.14285714285714285,127
b077563265697866b9ea39306d56e5f302739d07,"""                                 }\n"" +",1,2,0.14285714285714285,128
b077563265697866b9ea39306d56e5f302739d07,"""                              ]\n"" +",1,2,0.14285714285714285,129
b077563265697866b9ea39306d56e5f302739d07,"""                           }\n"" +",1,2,0.14285714285714285,130
b077563265697866b9ea39306d56e5f302739d07,"""                        ],\n"" +",1,2,0.14285714285714285,131
b077563265697866b9ea39306d56e5f302739d07,"""                  ],\n"" +",1,2,0.14285714285714285,132
b077563265697866b9ea39306d56e5f302739d07,"""                  },\n"" +",1,2,0.14285714285714285,133
b077563265697866b9ea39306d56e5f302739d07,"""                  \""labels\"":{\n"" +",1,2,0.14285714285714285,134
b077563265697866b9ea39306d56e5f302739d07,"""                  }\n"" +",1,2,0.14285714285714285,135
b077563265697866b9ea39306d56e5f302739d07,"""               \""replicaSelector\"":{\n"" +",1,2,0.14285714285714285,136
b077563265697866b9ea39306d56e5f302739d07,"""               \""replicas\"":1\n"" +",1,2,0.14285714285714285,137
b077563265697866b9ea39306d56e5f302739d07,"""               \""type\"":\""Recreate\""\n"" +",1,2,0.14285714285714285,138
b077563265697866b9ea39306d56e5f302739d07,"""               \""type\"":\""ImageChange\"",\n"" +",1,2,0.14285714285714285,139
b077563265697866b9ea39306d56e5f302739d07,"""               \""imageChangeParams\"":{\n"" +",1,2,0.14285714285714285,140
b077563265697866b9ea39306d56e5f302739d07,"""                  \""automatic\"":true,\n"" +",1,2,0.14285714285714285,141
b077563265697866b9ea39306d56e5f302739d07,"""                  \""containerNames\"":[\n"" +",1,2,0.14285714285714285,142
b077563265697866b9ea39306d56e5f302739d07,"""            \""controllerTemplate\"":{\n"" +",1,2,0.14285714285714285,143
b077563265697866b9ea39306d56e5f302739d07,"""                  \""from\"":{\n"" +",1,2,0.14285714285714285,144
b077563265697866b9ea39306d56e5f302739d07,"""               \""podTemplate\"":{\n"" +",1,2,0.14285714285714285,145
b077563265697866b9ea39306d56e5f302739d07,"""               \""stiStrategy\"":{\n"" +",1,2,0.14285714285714285,146
b077563265697866b9ea39306d56e5f302739d07,"""         \""template\"":{\n"" +",1,2,0.14285714285714285,147
b077563265697866b9ea39306d56e5f302739d07,"""         \""kind\"":\""DeploymentConfig\"",\n"" +",1,2,0.14285714285714285,148
b077563265697866b9ea39306d56e5f302739d07,"""            \""labels\"":{\n"" +",1,2,0.14285714285714285,149
b077563265697866b9ea39306d56e5f302739d07,"""            },\n"" +",1,2,0.14285714285714285,150
b077563265697866b9ea39306d56e5f302739d07,"""         }\n"" +",1,2,0.14285714285714285,151
b077563265697866b9ea39306d56e5f302739d07,"""      },\n"" +",1,2,0.14285714285714285,152
b077563265697866b9ea39306d56e5f302739d07,"""         \""kind\"":\""BuildConfig\"",\n"" +",1,2,0.14285714285714285,153
b077563265697866b9ea39306d56e5f302739d07,"""         },\n"" +",1,2,0.14285714285714285,154
b077563265697866b9ea39306d56e5f302739d07,"""         \""parameters\"":{\n"" +",1,2,0.14285714285714285,155
b077563265697866b9ea39306d56e5f302739d07,"""            \""output\"":{\n"" +",1,2,0.14285714285714285,156
b077563265697866b9ea39306d56e5f302739d07,"""               \""to\"":{\n"" +",1,2,0.14285714285714285,157
b077563265697866b9ea39306d56e5f302739d07,"""               },\n"" +",1,2,0.14285714285714285,158
b077563265697866b9ea39306d56e5f302739d07,"""               \""tag\"":\""test\""\n"" +",1,2,0.14285714285714285,159
b077563265697866b9ea39306d56e5f302739d07,"""            \""source\"":{\n"" +",1,2,0.14285714285714285,160
b077563265697866b9ea39306d56e5f302739d07,"""               \""git\"":{\n"" +",1,2,0.14285714285714285,161
b077563265697866b9ea39306d56e5f302739d07,"""               \""type\"":\""Git\""\n"" +",1,2,0.14285714285714285,162
b077563265697866b9ea39306d56e5f302739d07,"""            \""strategy\"":{\n"" +",1,2,0.14285714285714285,163
b077563265697866b9ea39306d56e5f302739d07,"""      }"" +",1,2,0.14285714285714285,164
b077563265697866b9ea39306d56e5f302739d07,"""               \""type\"":\""STI\""\n"" +",1,2,0.14285714285714285,165
b077563265697866b9ea39306d56e5f302739d07,"""            }\n"" +",1,2,0.14285714285714285,166
b077563265697866b9ea39306d56e5f302739d07,"""         \""triggers\"":[\n"" +",1,2,0.14285714285714285,167
b077563265697866b9ea39306d56e5f302739d07,"""            {\n"" +",1,2,0.14285714285714285,168
b077563265697866b9ea39306d56e5f302739d07,"""               \""github\"":{\n"" +",1,2,0.14285714285714285,169
b077563265697866b9ea39306d56e5f302739d07,"""               \""type\"":\""github\""\n"" +",1,2,0.14285714285714285,170
b077563265697866b9ea39306d56e5f302739d07,"""               \""generic\"":{\n"" +",1,2,0.14285714285714285,171
b077563265697866b9ea39306d56e5f302739d07,"""               \""type\"":\""generic\""\n"" +",1,2,0.14285714285714285,172
b077563265697866b9ea39306d56e5f302739d07,"""         ]\n"" +",1,2,0.14285714285714285,173
b077563265697866b9ea39306d56e5f302739d07,"""               }\n"" +",1,2,0.14285714285714285,174
b077563265697866b9ea39306d56e5f302739d07,if (webhookUrl == null) {,1,2,0.14285714285714285,175
b077563265697866b9ea39306d56e5f302739d07,"""   ]\n"" +",1,2,0.14285714285714285,176
b077563265697866b9ea39306d56e5f302739d07,"String message = ExecutionRequest.createCommitMessage(name, executionRequest);",1,2,0.14285714285714285,177
b077563265697866b9ea39306d56e5f302739d07,String named = null;,1,2,0.14285714285714285,178
b077563265697866b9ea39306d56e5f302739d07,if (Strings.isNullOrEmpty(targetLocation)) {,1,2,0.14285714285714285,179
b077563265697866b9ea39306d56e5f302739d07,if (Strings.isNullOrEmpty(named)) {,1,2,0.14285714285714285,180
b077563265697866b9ea39306d56e5f302739d07,"File basedir = new File(targetLocation, named);",1,2,0.14285714285714285,181
b077563265697866b9ea39306d56e5f302739d07,if (!basedir.isDirectory() || !basedir.exists()) {,1,2,0.14285714285714285,182
b077563265697866b9ea39306d56e5f302739d07,"LOG.warn(""Generated project folder does not exist: "" + basedir.getAbsolutePath());",1,2,0.14285714285714285,183
b077563265697866b9ea39306d56e5f302739d07,String fullName = null;,1,2,0.14285714285714285,184
b077563265697866b9ea39306d56e5f302739d07,if (repository != null) {,1,2,0.14285714285714285,185
b077563265697866b9ea39306d56e5f302739d07,if (LOG.isDebugEnabled()) {,1,2,0.14285714285714285,186
b077563265697866b9ea39306d56e5f302739d07,"LOG.debug(""Got repository: "" + toJson(repository));",1,2,0.14285714285714285,187
b077563265697866b9ea39306d56e5f302739d07,if (Strings.isNullOrEmpty(fullName)) {,1,2,0.14285714285714285,188
b077563265697866b9ea39306d56e5f302739d07,"String projectName = firstNotBlank(named, context.getProjectName(), executionRequest.getProjectName());",1,2,0.14285714285714285,189
b077563265697866b9ea39306d56e5f302739d07,if (name.equals(PROJECT_NEW_COMMAND)) {,1,2,0.14285714285714285,190
b077563265697866b9ea39306d56e5f302739d07,} catch (Exception e) {,1,2,0.14285714285714285,191
b077563265697866b9ea39306d56e5f302739d07,if (!Strings.isNullOrEmpty(text)) {,1,2,0.14285714285714285,192
b077563265697866b9ea39306d56e5f302739d07,String jenkinsUrl = getJenkinsServiceUrl(namespace);,1,2,0.14285714285714285,193
b077563265697866b9ea39306d56e5f302739d07,"controller.applyBuildConfig(buildConfig, ""from project "" + projectName);",1,2,0.14285714285714285,194
b077563265697866b9ea39306d56e5f302739d07,* Git tends to ignore empty directories so lets add a dummy file to empty folders to keep them in git,1,2,0.14285714285714285,195
b077563265697866b9ea39306d56e5f302739d07,if (dir != null && dir.isDirectory()) {,1,2,0.14285714285714285,196
b077563265697866b9ea39306d56e5f302739d07,if (children == null || children.length == 0) {,1,2,0.14285714285714285,197
b077563265697866b9ea39306d56e5f302739d07,} catch (IOException e) {,1,2,0.14285714285714285,198
b077563265697866b9ea39306d56e5f302739d07,if (child.isDirectory()) {,1,2,0.14285714285714285,199
b077563265697866b9ea39306d56e5f302739d07,"LOG.warn(""Caught: "" + e, e);",1,2,0.14285714285714285,200
b077563265697866b9ea39306d56e5f302739d07,"""         \""kind\"":\""ImageStream\"",\n"" +",1,2,0.14285714285714285,201
b077563265697866b9ea39306d56e5f302739d07,String targetLocation = null;,1,2,0.14285714285714285,202
b077563265697866b9ea39306d56e5f302739d07,String origin = projectFileSystem.getRemote();,1,2,0.14285714285714285,203
b077563265697866b9ea39306d56e5f302739d07,if (createOpenShiftBuildResources) {,1,2,0.14285714285714285,204
b077563265697866b9ea39306d56e5f302739d07,if (LOG.isDebugEnabled()) {,1,2,0.14285714285714285,205
b077563265697866b9ea39306d56e5f302739d07,"String type = ""generic"";",1,2,0.14285714285714285,206
b077563265697866b9ea39306d56e5f302739d07,String webhookUrl = null;,1,2,0.14285714285714285,207
b077563265697866b9ea39306d56e5f302739d07,String kubeAddress = null;,1,2,0.14285714285714285,208
b077563265697866b9ea39306d56e5f302739d07,if (kubeAddress == null) {,1,2,0.14285714285714285,209
b077563265697866b9ea39306d56e5f302739d07,} catch (Exception e) {,1,2,0.14285714285714285,210
b077563265697866b9ea39306d56e5f302739d07,"LOG.warn(""failed to find cdelivery service URL: "" + e, e);",1,2,0.14285714285714285,211
b077563265697866b9ea39306d56e5f302739d07,"String namespacePath = """";",1,2,0.14285714285714285,212
b077563265697866b9ea39306d56e5f302739d07,if (appendNamespaceQuery && !Strings.isNullOrEmpty(namespace)) {,1,2,0.14285714285714285,213
b077563265697866b9ea39306d56e5f302739d07,"namespacePath = ""/namespace="" + namespace;",1,2,0.14285714285714285,214
b077563265697866b9ea39306d56e5f302739d07,"webhookUrl = URLUtils.pathJoin(kubeAddress, ""oapi"", KubernetesHelper.defaultOsApiVersion + namespacePath, ""buildConfigHooks"", buildName, secret, type);",1,2,0.14285714285714285,215
b077563265697866b9ea39306d56e5f302739d07,"LOG.info(""creating a web hook at: "" + webhookUrl);",1,2,0.14285714285714285,216
b077563265697866b9ea39306d56e5f302739d07,"LOG.debug(""Got web hook: "" + toJson(webhook));",1,2,0.14285714285714285,217
b077563265697866b9ea39306d56e5f302739d07,String branch = userDetails.getBranch();,1,2,0.14285714285714285,218
b077563265697866b9ea39306d56e5f302739d07,"/*        Map<String,String> labels = new LinkedHashMap<>();",1,2,0.14285714285714285,219
b077563265697866b9ea39306d56e5f302739d07,BuildSource source = new BuildSource();,1,2,0.14285714285714285,220
b077563265697866b9ea39306d56e5f302739d07,GitBuildSource git = new GitBuildSource();,1,2,0.14285714285714285,221
b077563265697866b9ea39306d56e5f302739d07,// TODO this isn't really required if there's a secret associated with the BuildConfig source,1,2,0.14285714285714285,222
b077563265697866b9ea39306d56e5f302739d07,if (Strings.isNullOrEmpty(userDetails.getUser()) || Strings.isNullOrEmpty(userDetails.getUser())) {,1,2,0.14285714285714285,223
b077563265697866b9ea39306d56e5f302739d07,"if (Objects.equals(name, PROJECT_NEW_COMMAND)) {",1,2,0.14285714285714285,224
b077563265697866b9ea39306d56e5f302739d07,if (inputList != null) {,1,2,0.14285714285714285,225
b077563265697866b9ea39306d56e5f302739d07,if (page1 != null) {,1,2,0.14285714285714285,226
b077563265697866b9ea39306d56e5f302739d07,if (page1.containsKey(TARGET_LOCATION_PROPERTY)) {,1,2,0.14285714285714285,227
b077563265697866b9ea39306d56e5f302739d07,String address = userDetails.getAddress();,1,2,0.14285714285714285,228
b077563265697866b9ea39306d56e5f302739d07,String internalAddress = userDetails.getInternalAddress();,1,2,0.14285714285714285,229
b077563265697866b9ea39306d56e5f302739d07,"""         \""metadata\"":{\n"" +",1,2,0.14285714285714285,230
b077563265697866b9ea39306d56e5f302739d07,"""   \""kind\"":\""List\"",\n"" +",1,2,0.14285714285714285,231
b077563265697866b9ea39306d56e5f302739d07,"""      {\n"" +",1,2,0.14285714285714285,232
b077563265697866b9ea39306d56e5f302739d07,"String namespacePath = """";",0,2,0.14285714285714285,233
b077563265697866b9ea39306d56e5f302739d07,"Object entity = loadEntity(bytes, kind, null);",1,2,0.14285714285714285,234
b077563265697866b9ea39306d56e5f302739d07,if (kind != null) {,1,2,0.14285714285714285,235
b077563265697866b9ea39306d56e5f302739d07,public static JsonNode combineJson(Object... objects) throws IOException {,1,2,0.14285714285714285,236
b077563265697866b9ea39306d56e5f302739d07,if (object != config) {,1,2,0.14285714285714285,237
b077563265697866b9ea39306d56e5f302739d07,if (isTemplate(jsonNode)) {,1,2,0.14285714285714285,238
b077563265697866b9ea39306d56e5f302739d07,if (template == null) {,1,2,0.14285714285714285,239
b077563265697866b9ea39306d56e5f302739d07,if (template != null) {,1,2,0.14285714285714285,240
b077563265697866b9ea39306d56e5f302739d07,if (!isTemplate(jsonNode)) {,1,2,0.14285714285714285,241
b077563265697866b9ea39306d56e5f302739d07,if (isService(jsonNode)) {,1,2,0.14285714285714285,242
b077563265697866b9ea39306d56e5f302739d07,String id = getId(jsonNode);,1,2,0.14285714285714285,243
b077563265697866b9ea39306d56e5f302739d07,if (Strings.isNotBlank(id)) {,1,2,0.14285714285714285,244
b077563265697866b9ea39306d56e5f302739d07,if (!keys.add(key)) {,1,2,0.14285714285714285,245
b077563265697866b9ea39306d56e5f302739d07,if (jsonNode != null) {,1,2,0.14285714285714285,246
b077563265697866b9ea39306d56e5f302739d07,"JsonNode kind = jsonNode.get(""kind"");",1,2,0.14285714285714285,247
b077563265697866b9ea39306d56e5f302739d07,"return kind != null && Objects.equal(""Service"", kind.textValue());",1,2,0.14285714285714285,248
b077563265697866b9ea39306d56e5f302739d07,"return kind != null && Objects.equal(""Template"", kind.textValue());",1,2,0.14285714285714285,249
b077563265697866b9ea39306d56e5f302739d07,if (items != null && items.isArray()) {,1,2,0.14285714285714285,250
b077563265697866b9ea39306d56e5f302739d07,public static JsonNode toJsonNode(Object object) throws IOException {,1,2,0.14285714285714285,251
b077563265697866b9ea39306d56e5f302739d07,"@ConfigProperty(name = ""OPENSHIFT_CREATE_BUILD_ON_PROJECT_CREATE"") boolean createOpenShiftBuildResources) {",0,2,0.14285714285714285,252
b077563265697866b9ea39306d56e5f302739d07,if (createOpenShiftBuildResources) {,0,2,0.14285714285714285,253
b077563265697866b9ea39306d56e5f302739d07,"String type = ""generic"";",0,2,0.14285714285714285,254
b077563265697866b9ea39306d56e5f302739d07,String webhookUrl = null;,0,2,0.14285714285714285,255
b077563265697866b9ea39306d56e5f302739d07,String kubeAddress = null;,0,2,0.14285714285714285,256
b077563265697866b9ea39306d56e5f302739d07,if (kubeAddress == null) {,0,2,0.14285714285714285,257
b077563265697866b9ea39306d56e5f302739d07,} catch (Exception e) {,0,2,0.14285714285714285,258
b077563265697866b9ea39306d56e5f302739d07,if (kindObject != null && kindObject.isTextual()) {,1,2,0.14285714285714285,259
b077563265697866b9ea39306d56e5f302739d07,if (item != null) {,1,2,0.14285714285714285,260
b077563265697866b9ea39306d56e5f302739d07,Config config = new Config();,1,2,0.14285714285714285,261
b077563265697866b9ea39306d56e5f302739d07,if (Strings.isNotBlank(id)) {,0,2,0.14285714285714285,262
b077563265697866b9ea39306d56e5f302739d07,"applyRoute((Route) dto, sourceName);",0,2,0.14285714285714285,263
b077563265697866b9ea39306d56e5f302739d07,"""   \""items\"":[\n"" +",1,2,0.14285714285714285,264
b077563265697866b9ea39306d56e5f302739d07,String id = KubernetesHelper.getId(entity);,0,2,0.14285714285714285,265
b077563265697866b9ea39306d56e5f302739d07,"Route route = kubernetes.findRoute(id, namespace);",0,2,0.14285714285714285,266
b077563265697866b9ea39306d56e5f302739d07,if (route == null) {,0,2,0.14285714285714285,267
b077563265697866b9ea39306d56e5f302739d07,} catch (Exception e) {,0,2,0.14285714285714285,268
b077563265697866b9ea39306d56e5f302739d07,public static Object combineJson(Object... objects) throws IOException {,0,2,0.14285714285714285,269
b077563265697866b9ea39306d56e5f302739d07,if (items == null) {,0,2,0.14285714285714285,270
b077563265697866b9ea39306d56e5f302739d07,if (object != list) {,0,2,0.14285714285714285,271
b077563265697866b9ea39306d56e5f302739d07,if (item == null) {,0,2,0.14285714285714285,272
b077563265697866b9ea39306d56e5f302739d07,String id = getObjectId(item);,0,2,0.14285714285714285,273
b077563265697866b9ea39306d56e5f302739d07,if (!keys.add(key)) {,0,2,0.14285714285714285,274
b077563265697866b9ea39306d56e5f302739d07,protected static Config loadList(byte[] data) throws IOException {,1,2,0.14285714285714285,275
b077563265697866b9ea39306d56e5f302739d07,if (items != null) {,0,2,0.14285714285714285,276
b077563265697866b9ea39306d56e5f302739d07,if (list == null) {,0,2,0.14285714285714285,277
b077563265697866b9ea39306d56e5f302739d07,if (entity != null) {,1,2,0.14285714285714285,278
b077563265697866b9ea39306d56e5f302739d07,"protected static String getJsonTextProperty(JsonNode node, String... names) {",1,2,0.14285714285714285,279
b077563265697866b9ea39306d56e5f302739d07,for (String name : names) {,1,2,0.14285714285714285,280
b077563265697866b9ea39306d56e5f302739d07,if (current == null) {,1,2,0.14285714285714285,281
b077563265697866b9ea39306d56e5f302739d07,ObjectReader reader = objectMapper.reader();,1,2,0.14285714285714285,282
b077563265697866b9ea39306d56e5f302739d07,if (tree != null) {,1,2,0.14285714285714285,283
b077563265697866b9ea39306d56e5f302739d07,if (kindNode != null) {,1,2,0.14285714285714285,284
b077563265697866b9ea39306d56e5f302739d07,"LOG.warn(""No JSON type for: "" + tree);",1,2,0.14285714285714285,285
b077563265697866b9ea39306d56e5f302739d07,"protected static Object loadEntity(byte[] json, String kind, Object defaultValue) throws IOException {",1,2,0.14285714285714285,286
b077563265697866b9ea39306d56e5f302739d07,"LOG.warn(""failed to find cdelivery service URL: "" + e, e);",0,2,0.14285714285714285,287
b077563265697866b9ea39306d56e5f302739d07,public static Object getEntity(JsonNode item) throws IOException {,1,2,0.14285714285714285,288
b077563265697866b9ea39306d56e5f302739d07,if (appendNamespaceQuery && !Strings.isNullOrEmpty(namespace)) {,0,2,0.14285714285714285,289
b077563265697866b9ea39306d56e5f302739d07,if (value != null) {,1,2,0.14285714285714285,290
b077563265697866b9ea39306d56e5f302739d07,if (status != 200) {,0,2,0.14285714285714285,291
b077563265697866b9ea39306d56e5f302739d07,if (Strings.isNullOrEmpty(namespace)) {,0,2,0.14285714285714285,292
b077563265697866b9ea39306d56e5f302739d07,namespace = KubernetesClient.defaultNamespace();,0,2,0.14285714285714285,293
b077563265697866b9ea39306d56e5f302739d07,"String gitServiceName = ""gogs"";",0,2,0.14285714285714285,294
b077563265697866b9ea39306d56e5f302739d07,"String address = kubernetes.getServiceURL(""cdelivery"", kubernetes.getNamespace(), ""http"", false);",1,2,0.14285714285714285,295
b077563265697866b9ea39306d56e5f302739d07,"String jobUrl = URLUtils.pathJoin(address, ""/job/"", jenkinsSeedJob);",1,2,0.14285714285714285,296
b077563265697866b9ea39306d56e5f302739d07,"String gitServiceName = ""gogs-http-service"";",1,2,0.14285714285714285,297
b077563265697866b9ea39306d56e5f302739d07,} catch (IntrospectionException e) {,1,2,0.14285714285714285,298
b077563265697866b9ea39306d56e5f302739d07,if (beanInfo != null) {,1,2,0.14285714285714285,299
b077563265697866b9ea39306d56e5f302739d07,if (writeMethod != null) {,1,2,0.14285714285714285,300
b077563265697866b9ea39306d56e5f302739d07,String value = map.get(name);,1,2,0.14285714285714285,301
b077563265697866b9ea39306d56e5f302739d07,} catch (Exception e) {,1,2,0.14285714285714285,302
b077563265697866b9ea39306d56e5f302739d07,"String jobUrl = URLUtils.pathJoin(address, ""/job/"", jenkinsSeedJob, ""/build"");",0,2,0.14285714285714285,303
b077563265697866b9ea39306d56e5f302739d07,"String flow = map.get(""flow"");",1,2,0.14285714285714285,304
b077563265697866b9ea39306d56e5f302739d07,if (!Strings.isNullOrEmpty(flow)) {,1,2,0.14285714285714285,305
b077563265697866b9ea39306d56e5f302739d07,"String imageTag = ""test"";",1,2,0.14285714285714285,306
b077563265697866b9ea39306d56e5f302739d07,"String secret = ""secret101"";",1,2,0.14285714285714285,307
b077563265697866b9ea39306d56e5f302739d07,"String builderImage = ""fabric8/java-main"";",1,2,0.14285714285714285,308
b077563265697866b9ea39306d56e5f302739d07,"String osapiVersion = ""v1"";",1,2,0.14285714285714285,309
b077563265697866b9ea39306d56e5f302739d07,"String gitServiceName = ""gogs"";",1,2,0.14285714285714285,310
b077563265697866b9ea39306d56e5f302739d07,if (gitAddress == null) {,1,2,0.14285714285714285,311
b077563265697866b9ea39306d56e5f302739d07,"""   \""annotations\"":{\n"" +",1,2,0.14285714285714285,312
b077563265697866b9ea39306d56e5f302739d07,"""      \""description\"":\""This is an end to end example of a Continuous Delivery pipeline running on OpenShift v3\""\n"" +",1,2,0.14285714285714285,313
b077563265697866b9ea39306d56e5f302739d07,"namespacePath = ""/namespace="" + namespace;",0,2,0.14285714285714285,314
b077563265697866b9ea39306d56e5f302739d07,String message = connection.getResponseMessage();,0,2,0.14285714285714285,315
b077563265697866b9ea39306d56e5f302739d07,"""   },\n"" +",1,2,0.14285714285714285,316
b077563265697866b9ea39306d56e5f302739d07,"String address = kubernetes.getServiceURL(ServiceNames.JENKINS, kubernetes.getNamespace(), ""http"", false);",0,2,0.14285714285714285,317
b077563265697866b9ea39306d56e5f302739d07,if (webhookUrl == null) {,1,2,0.14285714285714285,318
b077563265697866b9ea39306d56e5f302739d07,"@ConfigProperty(name = ""OPENSHIFT_CREATE_BUILD_ON_PROJECT_CREATE"") boolean createOpenShiftBuildResources) {",1,2,0.14285714285714285,319
b077563265697866b9ea39306d56e5f302739d07,"webhookUrl = URLUtils.pathJoin(kubeAddress, ""osapi"", KubernetesHelper.defaultOsApiVersion + namespacePath, ""buildConfigHooks"", buildName, secret, type);",0,2,0.14285714285714285,320
b077563265697866b9ea39306d56e5f302739d07,"LOG.info(""creating a web hook at: "" + webhookUrl);",0,2,0.14285714285714285,321
b077563265697866b9ea39306d56e5f302739d07,if (LOG.isDebugEnabled()) {,0,2,0.14285714285714285,322
b077563265697866b9ea39306d56e5f302739d07,"LOG.debug(""Got web hook: "" + toJson(webhook));",0,2,0.14285714285714285,323
b077563265697866b9ea39306d56e5f302739d07,"String type = ""generic"";",1,2,0.14285714285714285,324
b077563265697866b9ea39306d56e5f302739d07,String webhookUrl = null;,1,2,0.14285714285714285,325
b077563265697866b9ea39306d56e5f302739d07,String kubeAddress = null;,1,2,0.14285714285714285,326
b077563265697866b9ea39306d56e5f302739d07,if (kubeAddress == null) {,1,2,0.14285714285714285,327
b077563265697866b9ea39306d56e5f302739d07,} catch (Exception e) {,1,2,0.14285714285714285,328
b077563265697866b9ea39306d56e5f302739d07,"LOG.warn(""failed to find cdelivery service URL: "" + e, e);",1,2,0.14285714285714285,329
b077563265697866b9ea39306d56e5f302739d07,if (webhookUrl == null) {,0,2,0.14285714285714285,330
b077563265697866b9ea39306d56e5f302739d07,if (appendNamespaceQuery && !Strings.isNullOrEmpty(namespace)) {,1,2,0.14285714285714285,331
b077563265697866b9ea39306d56e5f302739d07,if (LOG.isDebugEnabled()) {,1,2,0.14285714285714285,332
b077563265697866b9ea39306d56e5f302739d07,"LOG.debug(""Got web hook: "" + toJson(webhook));",1,2,0.14285714285714285,333
b077563265697866b9ea39306d56e5f302739d07,if (!Strings.isNullOrEmpty(jenkinsSeedJob)) {,0,2,0.14285714285714285,334
b077563265697866b9ea39306d56e5f302739d07,"String address = kubernetes.getServiceURL(""cdelivery"", kubernetes.getNamespace(), ""http"", false);",0,2,0.14285714285714285,335
b077563265697866b9ea39306d56e5f302739d07,if (!Strings.isNullOrEmpty(address)) {,0,2,0.14285714285714285,336
b077563265697866b9ea39306d56e5f302739d07,"String jobUrl = URLUtils.pathJoin(address, ""/job/"", jenkinsSeedJob);",0,2,0.14285714285714285,337
b077563265697866b9ea39306d56e5f302739d07,} catch (Exception e) {,0,2,0.14285714285714285,338
b077563265697866b9ea39306d56e5f302739d07,} finally {,0,2,0.14285714285714285,339
b077563265697866b9ea39306d56e5f302739d07,if (connection != null) {,0,2,0.14285714285714285,340
b077563265697866b9ea39306d56e5f302739d07,"LOG.info(""creating a web hook at: "" + webhookUrl);",1,2,0.14285714285714285,341
b077563265697866b9ea39306d56e5f302739d07,PropertyDescriptor[] propertyDescriptors = beanInfo.getPropertyDescriptors();,1,1,0.07142857142857142,342
b077563265697866b9ea39306d56e5f302739d07,CreateWebhookDTO createWebhook = new CreateWebhookDTO();,1,1,0.07142857142857142,343
b077563265697866b9ea39306d56e5f302739d07,"* Lets create an ImageRegistry, BuildConfig and DeploymentConfig for the new project",1,1,0.07142857142857142,344
b077563265697866b9ea39306d56e5f302739d07,Method writeMethod = descriptor.getWriteMethod();,1,1,0.07142857142857142,345
b077563265697866b9ea39306d56e5f302739d07,for (PropertyDescriptor descriptor : propertyDescriptors) {,1,1,0.07142857142857142,346
b077563265697866b9ea39306d56e5f302739d07,Class<? extends ProjectConfig> clazz = config.getClass();,1,1,0.07142857142857142,347
b077563265697866b9ea39306d56e5f302739d07,},1,1,0.07142857142857142,348
b077563265697866b9ea39306d56e5f302739d07,beanInfo = Introspector.getBeanInfo(clazz);,1,1,0.07142857142857142,349
b077563265697866b9ea39306d56e5f302739d07,try {,1,1,0.07142857142857142,350
b077563265697866b9ea39306d56e5f302739d07,BeanInfo beanInfo = null;,1,1,0.07142857142857142,351
b077563265697866b9ea39306d56e5f302739d07,},1,1,0.07142857142857142,352
b077563265697866b9ea39306d56e5f302739d07,"protected void configureProperties(ProjectConfig config, Map<String, String> map) {",1,1,0.07142857142857142,353
b077563265697866b9ea39306d56e5f302739d07,gitAddress = address;,1,1,0.07142857142857142,354
b077563265697866b9ea39306d56e5f302739d07,try {,1,1,0.07142857142857142,355
b077563265697866b9ea39306d56e5f302739d07,"""{\n"" +",1,1,0.07142857142857142,356
b077563265697866b9ea39306d56e5f302739d07,Controller controller = new Controller(kubernetes);,1,1,0.07142857142857142,357
b077563265697866b9ea39306d56e5f302739d07,// so we need to use a workaround using the fabric8 console service's proxy which hides the payload for us,1,1,0.07142857142857142,358
b077563265697866b9ea39306d56e5f302739d07,boolean appendNamespaceQuery = true;,1,1,0.07142857142857142,359
b077563265697866b9ea39306d56e5f302739d07,"kubeAddress = KubernetesHelper.getServiceURL(kubernetes,ServiceNames.CDELIVERY_API, namespace, ""http"", false);",1,1,0.07142857142857142,360
b077563265697866b9ea39306d56e5f302739d07,"webhookUrl = URLUtils.pathJoin(kubeAddress, ""buildConfigHooks"", namespace, buildName);",1,1,0.07142857142857142,361
b077563265697866b9ea39306d56e5f302739d07,appendNamespaceQuery = false;,1,1,0.07142857142857142,362
b077563265697866b9ea39306d56e5f302739d07,Controller controller = new Controller(kubernetes);,1,1,0.07142857142857142,363
b077563265697866b9ea39306d56e5f302739d07,"kubeAddress = kubernetes.getServiceURL(""fabric8"", namespace, ""http"", false);",1,1,0.07142857142857142,364
b077563265697866b9ea39306d56e5f302739d07,"webhookUrl = URLUtils.pathJoin(kubeAddress, ""oapi"", KubernetesHelper.defaultOsApiVersion, ""buildConfigHooks"", buildName, secret, type);",1,1,0.07142857142857142,365
b077563265697866b9ea39306d56e5f302739d07,"kubeAddress = kubernetes.getServiceURL(ServiceNames.CDELIVERY_API, namespace, ""http"", false);",0,1,0.07142857142857142,366
b077563265697866b9ea39306d56e5f302739d07,kubeAddress = kubernetes.getMasterUrl().toString();,1,1,0.07142857142857142,367
b077563265697866b9ea39306d56e5f302739d07,"kubeAddress = kubernetes.getServiceURL(""cdelivery"", namespace, ""http"", false);",1,1,0.07142857142857142,368
b077563265697866b9ea39306d56e5f302739d07,private final String jenkinsSeedJob;,0,1,0.07142857142857142,369
b077563265697866b9ea39306d56e5f302739d07,},0,1,0.07142857142857142,370
b077563265697866b9ea39306d56e5f302739d07,"webhookUrl += ""?namespace="" + namespace;",1,1,0.07142857142857142,371
b077563265697866b9ea39306d56e5f302739d07,"WebHookDTO webhook = repoClient.createWebhook(user, buildName, createWebhook);",1,1,0.07142857142857142,372
b077563265697866b9ea39306d56e5f302739d07,// so we need to use a workaround using the fabric8 console service's proxy which hides the payload for us,1,1,0.07142857142857142,373
b077563265697866b9ea39306d56e5f302739d07,boolean appendNamespaceQuery = true;,1,1,0.07142857142857142,374
b077563265697866b9ea39306d56e5f302739d07,try {,1,1,0.07142857142857142,375
b077563265697866b9ea39306d56e5f302739d07,"kubeAddress = kubernetes.getServiceURL(""cdelivery"", namespace, ""http"", false);",1,1,0.07142857142857142,376
b077563265697866b9ea39306d56e5f302739d07,"webhookUrl = URLUtils.pathJoin(kubeAddress, ""buildConfigHooks"", namespace, buildName);",1,1,0.07142857142857142,377
b077563265697866b9ea39306d56e5f302739d07,appendNamespaceQuery = false;,1,1,0.07142857142857142,378
b077563265697866b9ea39306d56e5f302739d07,},1,1,0.07142857142857142,379
b077563265697866b9ea39306d56e5f302739d07,"webhookUrl = URLUtils.pathJoin(kubeAddress, ""kubernetes"", ""osapi"", KubernetesHelper.defaultOsApiVersion, ""buildConfigHooks"", buildName, secret, type);",1,1,0.07142857142857142,380
b077563265697866b9ea39306d56e5f302739d07,kubeAddress = kubernetes.getAddress();,1,1,0.07142857142857142,381
b077563265697866b9ea39306d56e5f302739d07,"webhookUrl = URLUtils.pathJoin(kubeAddress, ""osapi"", KubernetesHelper.defaultOsApiVersion, ""buildConfigHooks"", buildName, secret, type);",1,1,0.07142857142857142,382
b077563265697866b9ea39306d56e5f302739d07,CreateWebhookDTO createWebhook = new CreateWebhookDTO();,1,1,0.07142857142857142,383
b077563265697866b9ea39306d56e5f302739d07,int status = connection.getResponseCode();,0,1,0.07142857142857142,384
b077563265697866b9ea39306d56e5f302739d07,WebhookConfig config = createWebhook.getConfig();,1,1,0.07142857142857142,385
b077563265697866b9ea39306d56e5f302739d07,"WebHookDTO webhook = repoClient.createWebhook(user, buildName, createWebhook);",1,1,0.07142857142857142,386
b077563265697866b9ea39306d56e5f302739d07,this.jenkinsSeedJob = jenkinsSeedJob;,0,1,0.07142857142857142,387
b077563265697866b9ea39306d56e5f302739d07,* We've created a project so lets try trigger a jenkins seed build,0,1,0.07142857142857142,388
b077563265697866b9ea39306d56e5f302739d07,protected void triggerJenkinsSeedBuild() {,0,1,0.07142857142857142,389
b077563265697866b9ea39306d56e5f302739d07,HttpURLConnection connection = null;,0,1,0.07142857142857142,390
b077563265697866b9ea39306d56e5f302739d07,try {,0,1,0.07142857142857142,391
b077563265697866b9ea39306d56e5f302739d07,URL url = new URL(jobUrl);,0,1,0.07142857142857142,392
b077563265697866b9ea39306d56e5f302739d07,connection = (HttpURLConnection) url.openConnection();,0,1,0.07142857142857142,393
b077563265697866b9ea39306d56e5f302739d07,OutputStreamWriter out = new OutputStreamWriter(,0,1,0.07142857142857142,394
b077563265697866b9ea39306d56e5f302739d07,},0,1,0.07142857142857142,395
b077563265697866b9ea39306d56e5f302739d07,WebhookConfig config = createWebhook.getConfig();,1,1,0.07142857142857142,396
b077563265697866b9ea39306d56e5f302739d07,return true;,1,1,0.07142857142857142,397
b077563265697866b9ea39306d56e5f302739d07,"Map<String,String> to = new LinkedHashMap<>();",1,1,0.07142857142857142,398
b077563265697866b9ea39306d56e5f302739d07,"targetLocation = map.get(""targetLocation"");",1,1,0.07142857142857142,399
b077563265697866b9ea39306d56e5f302739d07,InitCommand initCommand = Git.init();,1,1,0.07142857142857142,400
b077563265697866b9ea39306d56e5f302739d07,"LOG.info(""Initialised an empty git configuration repo at {}"", basedir.getAbsolutePath());",1,1,0.07142857142857142,401
b077563265697866b9ea39306d56e5f302739d07,// lets create the repository,1,1,0.07142857142857142,402
b077563265697866b9ea39306d56e5f302739d07,GitRepoClient repoClient = userDetails.createRepoClient();,1,1,0.07142857142857142,403
b077563265697866b9ea39306d56e5f302739d07,CreateRepositoryDTO createRepository = new CreateRepositoryDTO();,1,1,0.07142857142857142,404
b077563265697866b9ea39306d56e5f302739d07,RepositoryDTO repository = repoClient.createRepository(createRepository);,1,1,0.07142857142857142,405
b077563265697866b9ea39306d56e5f302739d07,fullName = repository.getFullName();,1,1,0.07142857142857142,406
b077563265697866b9ea39306d56e5f302739d07,for (String text : texts) {,1,1,0.07142857142857142,407
b077563265697866b9ea39306d56e5f302739d07,return text;,1,1,0.07142857142857142,408
b077563265697866b9ea39306d56e5f302739d07,return null;,1,1,0.07142857142857142,409
b077563265697866b9ea39306d56e5f302739d07,"BuildConfig buildConfig = Builds.createDefaultBuildConfig(projectName, cloneUrl, jenkinsUrl);",1,1,0.07142857142857142,410
b077563265697866b9ea39306d56e5f302739d07,Controller controller = new Controller(kubernetes);,1,1,0.07142857142857142,411
b077563265697866b9ea39306d56e5f302739d07,"return KubernetesHelper.getServiceURL(kubernetes, ServiceNames.JENKINS, namespace, ""http"", true);",1,1,0.07142857142857142,412
b077563265697866b9ea39306d56e5f302739d07,protected void addDummyFileToEmptyFolders(File dir) {,1,1,0.07142857142857142,413
b077563265697866b9ea39306d56e5f302739d07,File[] children = dir.listFiles();,1,1,0.07142857142857142,414
b077563265697866b9ea39306d56e5f302739d07,"File dummyFile = new File(dir, "".gitkeep"");",1,1,0.07142857142857142,415
b077563265697866b9ea39306d56e5f302739d07,"IOHelpers.writeFully(dummyFile, ""This file is only here to avoid git removing empty folders\nOnce there are files in this folder feel free to delete this file!"");",1,1,0.07142857142857142,416
b077563265697866b9ea39306d56e5f302739d07,for (File child : children) {,1,1,0.07142857142857142,417
b077563265697866b9ea39306d56e5f302739d07,protected void registerWebHooks(RestUIContext context) {,1,1,0.07142857142857142,418
b077563265697866b9ea39306d56e5f302739d07,"Map<Object, Object> attributeMap = context.getAttributeMap();",1,1,0.07142857142857142,419
b077563265697866b9ea39306d56e5f302739d07,"Object registerWebHooksValue = attributeMap.get(""registerWebHooks"");",1,1,0.07142857142857142,420
b077563265697866b9ea39306d56e5f302739d07,Runnable runnable = (Runnable) registerWebHooksValue;,1,1,0.07142857142857142,421
b077563265697866b9ea39306d56e5f302739d07,protected boolean isPushOnCommit() {,1,1,0.07142857142857142,422
b077563265697866b9ea39306d56e5f302739d07,protected void handleException(Throwable e) {,1,1,0.07142857142857142,423
b077563265697866b9ea39306d56e5f302739d07,"WebHookDTO webhook = repoClient.createWebhook(user, buildName, createWebhook);",0,1,0.07142857142857142,424
b077563265697866b9ea39306d56e5f302739d07,"named = map.get(""named"");",1,1,0.07142857142857142,425
b077563265697866b9ea39306d56e5f302739d07,"for (Map<String, String> map : inputList) {",1,1,0.07142857142857142,426
b077563265697866b9ea39306d56e5f302739d07,ImageStream imageRepository = new ImageStream();,1,1,0.07142857142857142,427
b077563265697866b9ea39306d56e5f302739d07,PersonIdent personIdent = userDetails.createPersonIdent();,1,1,0.07142857142857142,428
b077563265697866b9ea39306d56e5f302739d07,BuildConfig buildConfig = new BuildConfig();,1,1,0.07142857142857142,429
b077563265697866b9ea39306d56e5f302739d07,BuildOutput output = new BuildOutput();,1,1,0.07142857142857142,430
b077563265697866b9ea39306d56e5f302739d07,BuildStrategy strategy = new BuildStrategy();,1,1,0.07142857142857142,431
b077563265697866b9ea39306d56e5f302739d07,STIBuildStrategy stiStrategy = new STIBuildStrategy();,1,1,0.07142857142857142,432
b077563265697866b9ea39306d56e5f302739d07,BuildParameters parameters = new BuildParameters();,1,1,0.07142857142857142,433
b077563265697866b9ea39306d56e5f302739d07,BuildTriggerPolicy github = new BuildTriggerPolicy();,1,1,0.07142857142857142,434
b077563265697866b9ea39306d56e5f302739d07,WebHookTrigger githubTrigger = new WebHookTrigger();,1,1,0.07142857142857142,435
b077563265697866b9ea39306d56e5f302739d07,BuildTriggerPolicy generic = new BuildTriggerPolicy();,1,1,0.07142857142857142,436
b077563265697866b9ea39306d56e5f302739d07,WebHookTrigger genericTrigger = new WebHookTrigger();,1,1,0.07142857142857142,437
b077563265697866b9ea39306d56e5f302739d07,List<BuildTriggerPolicy> triggers = new ArrayList<>();,1,1,0.07142857142857142,438
b077563265697866b9ea39306d56e5f302739d07,private static final transient Logger LOG = LoggerFactory.getLogger(GitCommandCompletePostProcessor.class);,1,1,0.07142857142857142,439
b077563265697866b9ea39306d56e5f302739d07,private final String jenkinsSeedJob;,1,1,0.07142857142857142,440
b077563265697866b9ea39306d56e5f302739d07,"public GitCommandCompletePostProcessor(KubernetesClient kubernetes,",1,1,0.07142857142857142,441
b077563265697866b9ea39306d56e5f302739d07,this.kubernetes = kubernetes;,1,1,0.07142857142857142,442
b077563265697866b9ea39306d56e5f302739d07,this.gitUserHelper = gitUserHelper;,1,1,0.07142857142857142,443
b077563265697866b9ea39306d56e5f302739d07,this.projectFileSystem = projectFileSystem;,1,1,0.07142857142857142,444
b077563265697866b9ea39306d56e5f302739d07,this.jenkinsSeedJob = jenkinsSeedJob;,1,1,0.07142857142857142,445
b077563265697866b9ea39306d56e5f302739d07,this.createOpenShiftBuildResources = createOpenShiftBuildResources;,1,1,0.07142857142857142,446
b077563265697866b9ea39306d56e5f302739d07,},1,1,0.07142857142857142,447
b077563265697866b9ea39306d56e5f302739d07,@Override,1,1,0.07142857142857142,448
b077563265697866b9ea39306d56e5f302739d07,UserDetails userDetails = gitUserHelper.createUserDetails(request);,1,1,0.07142857142857142,449
b077563265697866b9ea39306d56e5f302739d07,"List<Map<String, String>> inputList = executionRequest.getInputList();",1,1,0.07142857142857142,450
b077563265697866b9ea39306d56e5f302739d07,"Map<String, String> page1 = inputList.get(0);",1,1,0.07142857142857142,451
b077563265697866b9ea39306d56e5f302739d07,return userDetails;,1,1,0.07142857142857142,452
b077563265697866b9ea39306d56e5f302739d07,try {,1,1,0.07142857142857142,453
b077563265697866b9ea39306d56e5f302739d07,ProjectFileSystem projectFileSystem) {,1,1,0.07142857142857142,454
b077563265697866b9ea39306d56e5f302739d07,* Loads the entity for the given item,1,1,0.07142857142857142,455
b077563265697866b9ea39306d56e5f302739d07,WebhookConfig config = createWebhook.getConfig();,0,1,0.07142857142857142,456
b077563265697866b9ea39306d56e5f302739d07,KubernetesList list = null;,0,1,0.07142857142857142,457
b077563265697866b9ea39306d56e5f302739d07,return list;,0,1,0.07142857142857142,458
b077563265697866b9ea39306d56e5f302739d07,TODO Config,1,1,0.07142857142857142,459
b077563265697866b9ea39306d56e5f302739d07,return Strings.firstNonBlank(,1,1,0.07142857142857142,460
b077563265697866b9ea39306d56e5f302739d07,return null;,1,1,0.07142857142857142,461
b077563265697866b9ea39306d56e5f302739d07,},1,1,0.07142857142857142,462
b077563265697866b9ea39306d56e5f302739d07,"return getJsonTextProperty(entity, ""kind"");",1,1,0.07142857142857142,463
b077563265697866b9ea39306d56e5f302739d07,JsonNode current = node;,1,1,0.07142857142857142,464
b077563265697866b9ea39306d56e5f302739d07,current = current.get(name);,1,1,0.07142857142857142,465
b077563265697866b9ea39306d56e5f302739d07,return current != null ? current.textValue() : null;,1,1,0.07142857142857142,466
b077563265697866b9ea39306d56e5f302739d07,* from the Kubernetes REST API or,1,1,0.07142857142857142,467
b077563265697866b9ea39306d56e5f302739d07,* {@link JsonNode} if it cannot be recognised.,1,1,0.07142857142857142,468
b077563265697866b9ea39306d56e5f302739d07,JsonNode tree = reader.readTree(new ByteArrayInputStream(json));,1,1,0.07142857142857142,469
b077563265697866b9ea39306d56e5f302739d07,"JsonNode kindNode = tree.get(""kind"");",1,1,0.07142857142857142,470
b077563265697866b9ea39306d56e5f302739d07,"return loadEntity(json, kind, tree);",1,1,0.07142857142857142,471
b077563265697866b9ea39306d56e5f302739d07,return tree;,1,1,0.07142857142857142,472
b077563265697866b9ea39306d56e5f302739d07,JsonNode jsonNode = (JsonNode) entity;,1,1,0.07142857142857142,473
b077563265697866b9ea39306d56e5f302739d07,return toItemList(getEntity(jsonNode));,1,1,0.07142857142857142,474
b077563265697866b9ea39306d56e5f302739d07,return objectMapper.reader(Pod.class).readValue(json);,1,1,0.07142857142857142,475
b077563265697866b9ea39306d56e5f302739d07,return objectMapper.reader(ReplicationController.class).readValue(json);,1,1,0.07142857142857142,476
b077563265697866b9ea39306d56e5f302739d07,return objectMapper.reader(Service.class).readValue(json);,1,1,0.07142857142857142,477
b077563265697866b9ea39306d56e5f302739d07,return objectMapper.reader(BuildConfig.class).readValue(json);,1,1,0.07142857142857142,478
b077563265697866b9ea39306d56e5f302739d07,return objectMapper.reader(DeploymentConfig.class).readValue(json);,1,1,0.07142857142857142,479
b077563265697866b9ea39306d56e5f302739d07,return objectMapper.reader(ImageRepository.class).readValue(json);,1,1,0.07142857142857142,480
b077563265697866b9ea39306d56e5f302739d07,return objectMapper.reader(Template.class).readValue(json);,1,1,0.07142857142857142,481
b077563265697866b9ea39306d56e5f302739d07,return loadList(json);,1,1,0.07142857142857142,482
b077563265697866b9ea39306d56e5f302739d07,list = new KubernetesList();,0,1,0.07142857142857142,483
b077563265697866b9ea39306d56e5f302739d07,protected static KubernetesList findOrCreateList(Object[] objects) {,0,1,0.07142857142857142,484
b077563265697866b9ea39306d56e5f302739d07,List<Object> itemList = new ArrayList<>();,1,1,0.07142857142857142,485
b077563265697866b9ea39306d56e5f302739d07,Collection collection = (Collection) object;,0,1,0.07142857142857142,486
b077563265697866b9ea39306d56e5f302739d07,CreateWebhookDTO createWebhook = new CreateWebhookDTO();,0,1,0.07142857142857142,487
b077563265697866b9ea39306d56e5f302739d07,List list = (List) dto;,0,1,0.07142857142857142,488
b077563265697866b9ea39306d56e5f302739d07,for (Object element : list) {,0,1,0.07142857142857142,489
b077563265697866b9ea39306d56e5f302739d07,"apply(element, sourceName);",0,1,0.07142857142857142,490
b077563265697866b9ea39306d56e5f302739d07,},0,1,0.07142857142857142,491
b077563265697866b9ea39306d56e5f302739d07,try {,0,1,0.07142857142857142,492
b077563265697866b9ea39306d56e5f302739d07,"kubernetes.createRoute(entity, namespace);",0,1,0.07142857142857142,493
b077563265697866b9ea39306d56e5f302739d07,* from the Kubernetes REST API,0,1,0.07142857142857142,494
b077563265697866b9ea39306d56e5f302739d07,return objectMapper.reader(Object.class).readValue(json);,0,1,0.07142857142857142,495
b077563265697866b9ea39306d56e5f302739d07,KubernetesList config = (KubernetesList) entity;,0,1,0.07142857142857142,496
b077563265697866b9ea39306d56e5f302739d07,return config.getItems();,0,1,0.07142857142857142,497
b077563265697866b9ea39306d56e5f302739d07,KubernetesList list = findOrCreateList(objects);,0,1,0.07142857142857142,498
b077563265697866b9ea39306d56e5f302739d07,List<Object> items = list.getItems();,0,1,0.07142857142857142,499
b077563265697866b9ea39306d56e5f302739d07,items = new ArrayList<>();,0,1,0.07142857142857142,500
b077563265697866b9ea39306d56e5f302739d07,"return Templates.combineTemplates(list, items);",0,1,0.07142857142857142,501
b077563265697866b9ea39306d56e5f302739d07,protected static void moveServicesToFrontOfArray(List<Object> list) {,0,1,0.07142857142857142,502
b077563265697866b9ea39306d56e5f302739d07,int size = list.size();,0,1,0.07142857142857142,503
b077563265697866b9ea39306d56e5f302739d07,Object item = list.get(i);,0,1,0.07142857142857142,504
b077563265697866b9ea39306d56e5f302739d07,Object nonService = list.get(lastNonService);,0,1,0.07142857142857142,505
b077563265697866b9ea39306d56e5f302739d07,protected static void removeDuplicates(List<Object> itemArray) {,0,1,0.07142857142857142,506
b077563265697866b9ea39306d56e5f302739d07,Object item = itemArray.get(i);,0,1,0.07142857142857142,507
b077563265697866b9ea39306d56e5f302739d07,},0,1,0.07142857142857142,508
b077563265697866b9ea39306d56e5f302739d07,"protected static void addObjectsToItemArray(List destinationList, Object object) throws IOException {",0,1,0.07142857142857142,509
b077563265697866b9ea39306d56e5f302739d07,KubernetesList kubernetesList = (KubernetesList) object;,0,1,0.07142857142857142,510
b077563265697866b9ea39306d56e5f302739d07,List<Object> items = kubernetesList.getItems();,0,1,0.07142857142857142,511
b077563265697866b9ea39306d56e5f302739d07,return defaultValue;,1,1,0.07142857142857142,512
b077563265697866b9ea39306d56e5f302739d07,list = (KubernetesList) object;,0,1,0.07142857142857142,513
b077563265697866b9ea39306d56e5f302739d07,JsonNode jsonNode = objectMapper.readTree(data);,1,1,0.07142857142857142,514
b077563265697866b9ea39306d56e5f302739d07,return false;,1,1,0.07142857142857142,515
b077563265697866b9ea39306d56e5f302739d07,"protected static void addObjectsToItemArray(ArrayNode itemArray, Object object) throws IOException {",1,1,0.07142857142857142,516
b077563265697866b9ea39306d56e5f302739d07,JsonNode node = toJsonNode(object);,1,1,0.07142857142857142,517
b077563265697866b9ea39306d56e5f302739d07,"JsonNode items = node.get(""items"");",1,1,0.07142857142857142,518
b077563265697866b9ea39306d56e5f302739d07,Iterator<JsonNode> iter = items.iterator();,1,1,0.07142857142857142,519
b077563265697866b9ea39306d56e5f302739d07,protected static JsonNodeFactory createNodeFactory() {,1,1,0.07142857142857142,520
b077563265697866b9ea39306d56e5f302739d07,return new JsonNodeFactory(false);,1,1,0.07142857142857142,521
b077563265697866b9ea39306d56e5f302739d07,protected static JsonNode findOrCreateConfig(Object[] objects) {,1,1,0.07142857142857142,522
b077563265697866b9ea39306d56e5f302739d07,JsonNode jsonNode = (JsonNode) object;,1,1,0.07142857142857142,523
b077563265697866b9ea39306d56e5f302739d07,return jsonNode;,1,1,0.07142857142857142,524
b077563265697866b9ea39306d56e5f302739d07,// lets create a new list,1,1,0.07142857142857142,525
b077563265697866b9ea39306d56e5f302739d07,ObjectNode config = factory.objectNode();,1,1,0.07142857142857142,526
b077563265697866b9ea39306d56e5f302739d07,return (JsonNode) object;,1,1,0.07142857142857142,527
b077563265697866b9ea39306d56e5f302739d07,return objectMapper.reader().readTree(json);,1,1,0.07142857142857142,528
b077563265697866b9ea39306d56e5f302739d07,this.createOpenShiftBuildResources = createOpenShiftBuildResources;,0,1,0.07142857142857142,529
b077563265697866b9ea39306d56e5f302739d07,Controller controller = new Controller(kubernetes);,0,1,0.07142857142857142,530
b077563265697866b9ea39306d56e5f302739d07,// so we need to use a workaround using the fabric8 console service's proxy which hides the payload for us,0,1,0.07142857142857142,531
b077563265697866b9ea39306d56e5f302739d07,boolean appendNamespaceQuery = true;,0,1,0.07142857142857142,532
b077563265697866b9ea39306d56e5f302739d07,try {,0,1,0.07142857142857142,533
b077563265697866b9ea39306d56e5f302739d07,"kubeAddress = kubernetes.getServiceURL(""cdelivery"", namespace, ""http"", false);",0,1,0.07142857142857142,534
b077563265697866b9ea39306d56e5f302739d07,"webhookUrl = URLUtils.pathJoin(kubeAddress, ""buildConfigHooks"", namespace, buildName);",0,1,0.07142857142857142,535
b077563265697866b9ea39306d56e5f302739d07,appendNamespaceQuery = false;,0,1,0.07142857142857142,536
b077563265697866b9ea39306d56e5f302739d07,},0,1,0.07142857142857142,537
b077563265697866b9ea39306d56e5f302739d07,"webhookUrl = URLUtils.pathJoin(kubeAddress, ""osapi"", KubernetesHelper.defaultOsApiVersion, ""buildConfigHooks"", buildName, secret, type);",0,1,0.07142857142857142,538
b077563265697866b9ea39306d56e5f302739d07,"JsonNode items = jsonNode.get(""items"");",1,1,0.07142857142857142,539
b077563265697866b9ea39306d56e5f302739d07,kubeAddress = kubernetes.getAddress();,0,1,0.07142857142857142,540
b077563265697866b9ea39306d56e5f302739d07,protected static boolean isTemplate(JsonNode jsonNode) {,1,1,0.07142857142857142,541
b077563265697866b9ea39306d56e5f302739d07,JsonNodeFactory factory = createNodeFactory();,1,1,0.07142857142857142,542
b077563265697866b9ea39306d56e5f302739d07,protected static boolean isService(JsonNode jsonNode) {,1,1,0.07142857142857142,543
b077563265697866b9ea39306d56e5f302739d07,for (JsonNode jsonNode : config) {,1,1,0.07142857142857142,544
b077563265697866b9ea39306d56e5f302739d07,for (JsonNode item : items) {,1,1,0.07142857142857142,545
b077563265697866b9ea39306d56e5f302739d07,byte[] bytes = json.getBytes();,1,1,0.07142857142857142,546
b077563265697866b9ea39306d56e5f302739d07,return config;,1,1,0.07142857142857142,547
b077563265697866b9ea39306d56e5f302739d07,return entity;,1,1,0.07142857142857142,548
b077563265697866b9ea39306d56e5f302739d07,JsonNode config = findOrCreateConfig(objects);,1,1,0.07142857142857142,549
b077563265697866b9ea39306d56e5f302739d07,"JsonNode items = config.get(""items"");",1,1,0.07142857142857142,550
b077563265697866b9ea39306d56e5f302739d07,itemArray = (ArrayNode) items;,1,1,0.07142857142857142,551
b077563265697866b9ea39306d56e5f302739d07,itemArray = new ArrayNode(createNodeFactory());,1,1,0.07142857142857142,552
b077563265697866b9ea39306d56e5f302739d07,ObjectNode objectNode = (ObjectNode) config;,1,1,0.07142857142857142,553
b077563265697866b9ea39306d56e5f302739d07,"return combineTemplates(config, itemArray);",1,1,0.07142857142857142,554
b077563265697866b9ea39306d56e5f302739d07,"protected static JsonNode combineTemplates(JsonNode config, ArrayNode itemArray) {",1,1,0.07142857142857142,555
b077563265697866b9ea39306d56e5f302739d07,JsonNode template = null;,1,1,0.07142857142857142,556
b077563265697866b9ea39306d56e5f302739d07,"JsonNode kindObject = item.get(""kind"");",1,1,0.07142857142857142,557
b077563265697866b9ea39306d56e5f302739d07,template = jsonNode;,1,1,0.07142857142857142,558
b077563265697866b9ea39306d56e5f302739d07,return template;,1,1,0.07142857142857142,559
b077563265697866b9ea39306d56e5f302739d07,protected static void removeDuplicates(ArrayNode itemArray) {,1,1,0.07142857142857142,560
b077563265697866b9ea39306d56e5f302739d07,JsonNode nonService = itemArray.get(lastNonService);,1,1,0.07142857142857142,561
b077563265697866b9ea39306d56e5f302739d07,JsonNode jsonNode = itemArray.get(i);,1,1,0.07142857142857142,562
b077563265697866b9ea39306d56e5f302739d07,protected static void moveServicesToFrontOfArray(ArrayNode itemArray) {,1,1,0.07142857142857142,563
b077563265697866b9ea39306d56e5f302739d07,int size = itemArray.size();,1,1,0.07142857142857142,564
b077563265697866b9ea39306d56e5f302739d07,ObjectNode objectNode = (ObjectNode) template;,1,1,0.07142857142857142,565
b077563265697866b9ea39306d56e5f302739d07,objects = new ArrayNode(createNodeFactory());,1,1,0.07142857142857142,566
b077563265697866b9ea39306d56e5f302739d07,objects = (ArrayNode) items;,1,1,0.07142857142857142,567
b077563265697866b9ea39306d56e5f302739d07,"JsonNode items = config.get(""objects"");",1,1,0.07142857142857142,568
b077563265697866b9ea39306d56e5f302739d07,generic.setGeneric(genericTrigger);,1,0,0.0,569
b077563265697866b9ea39306d56e5f302739d07,/**,1,0,0.0,570
b077563265697866b9ea39306d56e5f302739d07,"handleKubernetesResourceCreation(buildConfig.getKind(), buildConfig, kubernetes.createBuildConfig(buildConfig));*/",1,0,0.0,571
b077563265697866b9ea39306d56e5f302739d07,buildConfig.setTriggers(triggers);,1,0,0.0,572
b077563265697866b9ea39306d56e5f302739d07,triggers.add(generic);,1,0,0.0,573
b077563265697866b9ea39306d56e5f302739d07,triggers.add(github);,1,0,0.0,574
b077563265697866b9ea39306d56e5f302739d07,githubTrigger.setSecret(secret);,1,0,0.0,575
b077563265697866b9ea39306d56e5f302739d07,genericTrigger.setSecret(secret);,1,0,0.0,576
b077563265697866b9ea39306d56e5f302739d07,"generic.setType(""generic"");",1,0,0.0,577
b077563265697866b9ea39306d56e5f302739d07,github.setGithub(githubTrigger);,1,0,0.0,578
b077563265697866b9ea39306d56e5f302739d07,*,1,0,0.0,579
b077563265697866b9ea39306d56e5f302739d07,"github.setType(""github"");",1,0,0.0,580
b077563265697866b9ea39306d56e5f302739d07,"*  Copyright 2005-2015 Red Hat, Inc.",1,0,0.0,581
b077563265697866b9ea39306d56e5f302739d07,"*  distributed under the License is distributed on an ""AS IS"" BASIS,",1,0,0.0,582
b077563265697866b9ea39306d56e5f302739d07,"*  Red Hat licenses this file to you under the Apache License, version",1,0,0.0,583
b077563265697866b9ea39306d56e5f302739d07,"*  2.0 (the ""License""); you may not use this file except in compliance",1,0,0.0,584
b077563265697866b9ea39306d56e5f302739d07,*  with the License.  You may obtain a copy of the License at,1,0,0.0,585
b077563265697866b9ea39306d56e5f302739d07,*     http://www.apache.org/licenses/LICENSE-2.0,1,0,0.0,586
b077563265697866b9ea39306d56e5f302739d07,"*  Unless required by applicable law or agreed to in writing, software",1,0,0.0,587
b077563265697866b9ea39306d56e5f302739d07,parameters.setStrategy(strategy);,1,0,0.0,588
b077563265697866b9ea39306d56e5f302739d07,"*  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or",1,0,0.0,589
b077563265697866b9ea39306d56e5f302739d07,*  implied.  See the License for the specific language governing,1,0,0.0,590
b077563265697866b9ea39306d56e5f302739d07,*  permissions and limitations under the License.,1,0,0.0,591
b077563265697866b9ea39306d56e5f302739d07,*/,1,0,0.0,592
b077563265697866b9ea39306d56e5f302739d07,package io.fabric8.forge.rest.main;,1,0,0.0,593
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.forge.rest.dto.ExecutionResult;,1,0,0.0,594
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.forge.rest.dto.ExecutionRequest;,1,0,0.0,595
b077563265697866b9ea39306d56e5f302739d07,buildConfig.setParameters(parameters);,1,0,0.0,596
b077563265697866b9ea39306d56e5f302739d07,config.setSecret(secret);,1,0,0.0,597
b077563265697866b9ea39306d56e5f302739d07,parameters.setSource(source);,1,0,0.0,598
b077563265697866b9ea39306d56e5f302739d07,buildConfig.setName(buildName);,1,0,0.0,599
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.forge.rest.ui.RestUIContext;,1,0,0.0,600
b077563265697866b9ea39306d56e5f302739d07,config.setUrl(webhookUrl);,1,0,0.0,601
b077563265697866b9ea39306d56e5f302739d07,"labels.put(""name"", buildName);",1,0,0.0,602
b077563265697866b9ea39306d56e5f302739d07,"labels.put(""user"", user);",1,0,0.0,603
b077563265697866b9ea39306d56e5f302739d07,"to.put(""name"", buildName);",1,0,0.0,604
b077563265697866b9ea39306d56e5f302739d07,"imageRepository.setKind(""ImageStream"");",1,0,0.0,605
b077563265697866b9ea39306d56e5f302739d07,imageRepository.setApiVersion(osapiVersion);,1,0,0.0,606
b077563265697866b9ea39306d56e5f302739d07,imageRepository.setName(buildName);,1,0,0.0,607
b077563265697866b9ea39306d56e5f302739d07,imageRepository.setLabels(labels);,1,0,0.0,608
b077563265697866b9ea39306d56e5f302739d07,"handleKubernetesResourceCreation(imageRepository.getKind(), imageRepository, kubernetes.createImageStream(imageRepository));",1,0,0.0,609
b077563265697866b9ea39306d56e5f302739d07,"buildConfig.setKind(""BuildConfig"");",1,0,0.0,610
b077563265697866b9ea39306d56e5f302739d07,buildConfig.setApiVersion(osapiVersion);,1,0,0.0,611
b077563265697866b9ea39306d56e5f302739d07,buildConfig.setLabels(labels);,1,0,0.0,612
b077563265697866b9ea39306d56e5f302739d07,parameters.setOutput(output);,1,0,0.0,613
b077563265697866b9ea39306d56e5f302739d07,//output.setRegistry(buildName);,1,0,0.0,614
b077563265697866b9ea39306d56e5f302739d07,"output.getAdditionalProperties().put(""to"", to);",1,0,0.0,615
b077563265697866b9ea39306d56e5f302739d07,output.setImageTag(imageTag);,1,0,0.0,616
b077563265697866b9ea39306d56e5f302739d07,"source.setType(""Git"");",1,0,0.0,617
b077563265697866b9ea39306d56e5f302739d07,git.setUri(remote);,1,0,0.0,618
b077563265697866b9ea39306d56e5f302739d07,source.setGit(git);,1,0,0.0,619
b077563265697866b9ea39306d56e5f302739d07,"strategy.setType(""STI"");",1,0,0.0,620
b077563265697866b9ea39306d56e5f302739d07,stiStrategy.setImage(builderImage);,1,0,0.0,621
b077563265697866b9ea39306d56e5f302739d07,// TODO,1,0,0.0,622
b077563265697866b9ea39306d56e5f302739d07,//stiStrategy.setBuilderImage(builderImage);,1,0,0.0,623
b077563265697866b9ea39306d56e5f302739d07,"stiStrategy.getAdditionalProperties().put(""builderImage"", builderImage);",1,0,0.0,624
b077563265697866b9ea39306d56e5f302739d07,strategy.setStiStrategy(stiStrategy);,1,0,0.0,625
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.forge.rest.hooks.CommandCompletePostProcessor;,1,0,0.0,626
b077563265697866b9ea39306d56e5f302739d07,handleException(e);,1,0,0.0,627
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.kubernetes.api.Controller;,1,0,0.0,628
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.kubernetes.api.KubernetesHelper;,1,0,0.0,629
b077563265697866b9ea39306d56e5f302739d07,@Inject,1,0,0.0,630
b077563265697866b9ea39306d56e5f302739d07,"GitUserHelper gitUserHelper,",1,0,0.0,631
b077563265697866b9ea39306d56e5f302739d07,"ProjectFileSystem projectFileSystem,",1,0,0.0,632
b077563265697866b9ea39306d56e5f302739d07,"throw new NotAuthorizedException(""You must authenticate to be able to perform this command"");",1,0,0.0,633
b077563265697866b9ea39306d56e5f302739d07,"page1.put(TARGET_LOCATION_PROPERTY, projectFileSystem.getUserProjectFolderLocation(userDetails));",1,0,0.0,634
b077563265697866b9ea39306d56e5f302739d07,/*,1,0,0.0,635
b077563265697866b9ea39306d56e5f302739d07,GitHelpers.disableSslCertificateChecks();,1,0,0.0,636
b077563265697866b9ea39306d56e5f302739d07,"LOG.warn(""No targetLocation could be found!"");",1,0,0.0,637
b077563265697866b9ea39306d56e5f302739d07,"LOG.warn(""No named could be found!"");",1,0,0.0,638
b077563265697866b9ea39306d56e5f302739d07,initCommand.setDirectory(basedir);,1,0,0.0,639
b077563265697866b9ea39306d56e5f302739d07,createRepository.setName(named);,1,0,0.0,640
b077563265697866b9ea39306d56e5f302739d07,"results.setOutputProperty(""fullName"", fullName);",1,0,0.0,641
b077563265697866b9ea39306d56e5f302739d07,"results.setOutputProperty(""cloneUrl"", remoteUrl);",1,0,0.0,642
b077563265697866b9ea39306d56e5f302739d07,"results.setOutputProperty(""htmlUrl"", htmlUrl);",1,0,0.0,643
b077563265697866b9ea39306d56e5f302739d07,// now lets import the code and publish,1,0,0.0,644
b077563265697866b9ea39306d56e5f302739d07,"GitHelpers.configureBranch(git, branch, origin, remoteUrl);",1,0,0.0,645
b077563265697866b9ea39306d56e5f302739d07,addDummyFileToEmptyFolders(basedir);,1,0,0.0,646
b077563265697866b9ea39306d56e5f302739d07,"GitHelpers.doAddCommitAndPushFiles(git, userDetails, personIdent, branch, origin, message, isPushOnCommit());",1,0,0.0,647
b077563265697866b9ea39306d56e5f302739d07,results.setProjectName(projectName);,1,0,0.0,648
b077563265697866b9ea39306d56e5f302739d07,"createBuildConfig(context, namespace, projectName, cloneUrl);",1,0,0.0,649
b077563265697866b9ea39306d56e5f302739d07,"LOG.info(""Creating any pending webhooks"");",1,0,0.0,650
b077563265697866b9ea39306d56e5f302739d07,registerWebHooks(context);,1,0,0.0,651
b077563265697866b9ea39306d56e5f302739d07,"LOG.info(""Done creating webhooks!"");",1,0,0.0,652
b077563265697866b9ea39306d56e5f302739d07,/*,1,0,0.0,653
b077563265697866b9ea39306d56e5f302739d07,controller.setNamespace(namespace);,1,0,0.0,654
b077563265697866b9ea39306d56e5f302739d07,addDummyFileToEmptyFolders(child);,1,0,0.0,655
b077563265697866b9ea39306d56e5f302739d07,"projectFileSystem.invokeLater(runnable, 1000L);",1,0,0.0,656
b077563265697866b9ea39306d56e5f302739d07,private final boolean createOpenShiftBuildResources;,1,0,0.0,657
b077563265697866b9ea39306d56e5f302739d07,private final ProjectFileSystem projectFileSystem;,1,0,0.0,658
b077563265697866b9ea39306d56e5f302739d07,private final GitUserHelper gitUserHelper;,1,0,0.0,659
b077563265697866b9ea39306d56e5f302739d07,import org.jboss.forge.addon.ui.controller.CommandController;,1,0,0.0,660
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.kubernetes.api.ServiceNames;,1,0,0.0,661
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.kubernetes.api.builds.Builds;,1,0,0.0,662
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.kubernetes.client.KubernetesClient;,1,0,0.0,663
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.openshift.api.model.BuildConfig;,1,0,0.0,664
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.repo.git.CreateRepositoryDTO;,1,0,0.0,665
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.repo.git.GitRepoClient;,1,0,0.0,666
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.repo.git.RepositoryDTO;,1,0,0.0,667
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.utils.IOHelpers;,1,0,0.0,668
b077563265697866b9ea39306d56e5f302739d07,import org.apache.deltaspike.core.api.config.ConfigProperty;,1,0,0.0,669
b077563265697866b9ea39306d56e5f302739d07,import org.eclipse.jgit.api.Git;,1,0,0.0,670
b077563265697866b9ea39306d56e5f302739d07,import org.eclipse.jgit.api.InitCommand;,1,0,0.0,671
b077563265697866b9ea39306d56e5f302739d07,import org.eclipse.jgit.lib.PersonIdent;,1,0,0.0,672
b077563265697866b9ea39306d56e5f302739d07,import org.jboss.forge.furnace.util.Strings;,1,0,0.0,673
b077563265697866b9ea39306d56e5f302739d07,private final KubernetesClient kubernetes;,1,0,0.0,674
b077563265697866b9ea39306d56e5f302739d07,import org.slf4j.Logger;,1,0,0.0,675
b077563265697866b9ea39306d56e5f302739d07,import org.slf4j.LoggerFactory;,1,0,0.0,676
b077563265697866b9ea39306d56e5f302739d07,import javax.inject.Inject;,1,0,0.0,677
b077563265697866b9ea39306d56e5f302739d07,import javax.servlet.http.HttpServletRequest;,1,0,0.0,678
b077563265697866b9ea39306d56e5f302739d07,import javax.ws.rs.NotAuthorizedException;,1,0,0.0,679
b077563265697866b9ea39306d56e5f302739d07,import java.io.File;,1,0,0.0,680
b077563265697866b9ea39306d56e5f302739d07,import java.io.IOException;,1,0,0.0,681
b077563265697866b9ea39306d56e5f302739d07,import java.util.List;,1,0,0.0,682
b077563265697866b9ea39306d56e5f302739d07,import java.util.Map;,1,0,0.0,683
b077563265697866b9ea39306d56e5f302739d07,import java.util.Objects;,1,0,0.0,684
b077563265697866b9ea39306d56e5f302739d07,import static io.fabric8.utils.cxf.JsonHelper.toJson;,1,0,0.0,685
b077563265697866b9ea39306d56e5f302739d07,// TODO we should try add this into the ConfigureDevOpsStep.execute() block instead!,1,0,0.0,686
b077563265697866b9ea39306d56e5f302739d07,"createWebhook.setType(""gogs"");",1,0,0.0,687
b077563265697866b9ea39306d56e5f302739d07,import org.apache.deltaspike.core.api.config.ConfigProperty;,0,0,0.0,688
b077563265697866b9ea39306d56e5f302739d07,// lets try the cdelivery first,1,0,0.0,689
b077563265697866b9ea39306d56e5f302739d07,"addObjectsToItemArray(itemArray, object);",1,0,0.0,690
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.kubernetes.api.model.Item;,1,0,0.0,691
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.kubernetes.api.model.Template;,1,0,0.0,692
b077563265697866b9ea39306d56e5f302739d07,*/,1,0,0.0,693
b077563265697866b9ea39306d56e5f302739d07,"getJsonTextProperty(entity, ""metadata"", ""name""),",1,0,0.0,694
b077563265697866b9ea39306d56e5f302739d07,"getJsonTextProperty(entity, ""metadata"", ""id""),",1,0,0.0,695
b077563265697866b9ea39306d56e5f302739d07,"getJsonTextProperty(entity, ""name""),",1,0,0.0,696
b077563265697866b9ea39306d56e5f302739d07,"getJsonTextProperty(entity, ""id""));",1,0,0.0,697
b077563265697866b9ea39306d56e5f302739d07,config.setItems(itemList);,1,0,0.0,698
b077563265697866b9ea39306d56e5f302739d07,itemList.add(entity);,1,0,0.0,699
b077563265697866b9ea39306d56e5f302739d07,/**,1,0,0.0,700
b077563265697866b9ea39306d56e5f302739d07,ArrayNode itemArray;,1,0,0.0,701
b077563265697866b9ea39306d56e5f302739d07,"objectNode.set(""items"", itemArray);",1,0,0.0,702
b077563265697866b9ea39306d56e5f302739d07,moveServicesToFrontOfArray(itemArray);,1,0,0.0,703
b077563265697866b9ea39306d56e5f302739d07,import java.util.Iterator;,1,0,0.0,704
b077563265697866b9ea39306d56e5f302739d07,removeDuplicates(itemArray);,1,0,0.0,705
b077563265697866b9ea39306d56e5f302739d07,* If we have any templates inside the itemArray then lets unpack them and combine any parameters,1,0,0.0,706
b077563265697866b9ea39306d56e5f302739d07,// TODO combine templates...,1,0,0.0,707
b077563265697866b9ea39306d56e5f302739d07,// lets move all the content into the template,1,0,0.0,708
b077563265697866b9ea39306d56e5f302739d07,ArrayNode objects;,1,0,0.0,709
b077563265697866b9ea39306d56e5f302739d07,"objectNode.set(""objects"", itemArray);",1,0,0.0,710
b077563265697866b9ea39306d56e5f302739d07,objects.add(jsonNode);,1,0,0.0,711
b077563265697866b9ea39306d56e5f302739d07,"itemArray.set(i, nonService);",1,0,0.0,712
b077563265697866b9ea39306d56e5f302739d07,"itemArray.set(lastNonService, jsonNode);",1,0,0.0,713
b077563265697866b9ea39306d56e5f302739d07,// lets remove this one,1,0,0.0,714
b077563265697866b9ea39306d56e5f302739d07,itemArray.remove(i);,1,0,0.0,715
b077563265697866b9ea39306d56e5f302739d07,i--;,1,0,0.0,716
b077563265697866b9ea39306d56e5f302739d07,/*,1,0,0.0,717
b077563265697866b9ea39306d56e5f302739d07,import java.io.ByteArrayInputStream;,1,0,0.0,718
b077563265697866b9ea39306d56e5f302739d07,itemArray.add(item);,1,0,0.0,719
b077563265697866b9ea39306d56e5f302739d07,i--;,0,0,0.0,720
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.openshift.api.model.Route;,0,0,0.0,721
b077563265697866b9ea39306d56e5f302739d07,import javax.ws.rs.WebApplicationException;,0,0,0.0,722
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.kubernetes.api.extensions.Templates;,0,0,0.0,723
b077563265697866b9ea39306d56e5f302739d07,import java.util.Collection;,0,0,0.0,724
b077563265697866b9ea39306d56e5f302739d07,list.setItems(items);,0,0,0.0,725
b077563265697866b9ea39306d56e5f302739d07,"addObjectsToItemArray(items, object);",0,0,0.0,726
b077563265697866b9ea39306d56e5f302739d07,moveServicesToFrontOfArray(items);,0,0,0.0,727
b077563265697866b9ea39306d56e5f302739d07,removeDuplicates(items);,0,0,0.0,728
b077563265697866b9ea39306d56e5f302739d07,"list.set(i, nonService);",0,0,0.0,729
b077563265697866b9ea39306d56e5f302739d07,"list.set(lastNonService, item);",0,0,0.0,730
b077563265697866b9ea39306d56e5f302739d07,* @param itemArray,0,0,0.0,731
b077563265697866b9ea39306d56e5f302739d07,itemArray.remove(i);,0,0,0.0,732
b077563265697866b9ea39306d56e5f302739d07,size--;,0,0,0.0,733
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.openshift.api.model.ImageRepository;,1,0,0.0,734
b077563265697866b9ea39306d56e5f302739d07,// lets remove this one,0,0,0.0,735
b077563265697866b9ea39306d56e5f302739d07,destinationList.addAll(items);,0,0,0.0,736
b077563265697866b9ea39306d56e5f302739d07,destinationList.addAll(collection);,0,0,0.0,737
b077563265697866b9ea39306d56e5f302739d07,destinationList.add(object);,0,0,0.0,738
b077563265697866b9ea39306d56e5f302739d07,break;,0,0,0.0,739
b077563265697866b9ea39306d56e5f302739d07,import com.fasterxml.jackson.databind.JsonNode;,1,0,0.0,740
b077563265697866b9ea39306d56e5f302739d07,import com.fasterxml.jackson.databind.ObjectReader;,1,0,0.0,741
b077563265697866b9ea39306d56e5f302739d07,import com.fasterxml.jackson.databind.node.ArrayNode;,1,0,0.0,742
b077563265697866b9ea39306d56e5f302739d07,import com.fasterxml.jackson.databind.node.JsonNodeFactory;,1,0,0.0,743
b077563265697866b9ea39306d56e5f302739d07,import com.fasterxml.jackson.databind.node.ObjectNode;,1,0,0.0,744
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.openshift.api.model.BuildConfig;,1,0,0.0,745
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.openshift.api.model.DeploymentConfig;,1,0,0.0,746
b077563265697866b9ea39306d56e5f302739d07,size--;,1,0,0.0,747
b077563265697866b9ea39306d56e5f302739d07,itemArray.add(node);,1,0,0.0,748
b077563265697866b9ea39306d56e5f302739d07,// TODO due to https://github.com/openshift/origin/issues/1317 we can't use the direct kube REST API,1,0,0.0,749
b077563265697866b9ea39306d56e5f302739d07,"writeMethod.invoke(config, value);",1,0,0.0,750
b077563265697866b9ea39306d56e5f302739d07,out.close();,0,0,0.0,751
b077563265697866b9ea39306d56e5f302739d07,connection.disconnect();,0,0,0.0,752
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.kubernetes.api.ServiceNames;,0,0,0.0,753
b077563265697866b9ea39306d56e5f302739d07,import javax.ws.rs.WebApplicationException;,0,0,0.0,754
b077563265697866b9ea39306d56e5f302739d07,kubernetes.setNamespace(namespace);,0,0,0.0,755
b077563265697866b9ea39306d56e5f302739d07,"ProjectConfigs.configureProperties(config, map);",0,0,0.0,756
b077563265697866b9ea39306d56e5f302739d07,import java.beans.BeanInfo;,1,0,0.0,757
b077563265697866b9ea39306d56e5f302739d07,import java.beans.IntrospectionException;,1,0,0.0,758
b077563265697866b9ea39306d56e5f302739d07,import java.beans.Introspector;,1,0,0.0,759
b077563265697866b9ea39306d56e5f302739d07,import java.beans.PropertyDescriptor;,1,0,0.0,760
b077563265697866b9ea39306d56e5f302739d07,import java.lang.reflect.Method;,1,0,0.0,761
b077563265697866b9ea39306d56e5f302739d07,"configureProperties(config, map);",1,0,0.0,762
b077563265697866b9ea39306d56e5f302739d07,config.addFlow(flow);,1,0,0.0,763
b077563265697866b9ea39306d56e5f302739d07,connection.getOutputStream());,0,0,0.0,764
b077563265697866b9ea39306d56e5f302739d07,"LOG.info(""Creating any pending webhooks"");",0,0,0.0,765
b077563265697866b9ea39306d56e5f302739d07,"LOG.info(""Done creating webhooks!"");",0,0,0.0,766
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.kubernetes.api.Controller;,1,0,0.0,767
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.repo.git.CreateWebhookDTO;,1,0,0.0,768
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.repo.git.WebHookDTO;,1,0,0.0,769
b077563265697866b9ea39306d56e5f302739d07,import io.fabric8.repo.git.WebhookConfig;,1,0,0.0,770
b077563265697866b9ea39306d56e5f302739d07,"createKubernetesResources(user, named, remoteUrl, branch, repoClient, address);",1,0,0.0,771
b077563265697866b9ea39306d56e5f302739d07,/**,1,0,0.0,772
b077563265697866b9ea39306d56e5f302739d07,*/,1,0,0.0,773
b077563265697866b9ea39306d56e5f302739d07,// TODO we should replace the remote with the actual service IP address???,1,0,0.0,774
b077563265697866b9ea39306d56e5f302739d07,"""}"";",1,0,0.0,775
b077563265697866b9ea39306d56e5f302739d07,controller.applyJson(json);,1,0,0.0,776
b077563265697866b9ea39306d56e5f302739d07,out.write(json);,0,0,0.0,777
b077563265697866b9ea39306d56e5f302739d07,connection.setDoOutput(true);,0,0,0.0,778
b077563265697866b9ea39306d56e5f302739d07,"config.set(""apiVersion"", factory.textNode(defaultApiVersion));",1,0,0.0,779
b077563265697866b9ea39306d56e5f302739d07,config.setSecret(secret);,0,0,0.0,780
b077563265697866b9ea39306d56e5f302739d07,"config.set(""kind"", factory.textNode(""List""));",1,0,0.0,781
b077563265697866b9ea39306d56e5f302739d07,"config.set(""items"", factory.arrayNode());",1,0,0.0,782
b077563265697866b9ea39306d56e5f302739d07,* Converts the DTO to a JsonNode,1,0,0.0,783
b077563265697866b9ea39306d56e5f302739d07,private final boolean createOpenShiftBuildResources;,0,0,0.0,784
b077563265697866b9ea39306d56e5f302739d07,"ProjectFileSystem projectFileSystem,",0,0,0.0,785
b077563265697866b9ea39306d56e5f302739d07,controller.applyJson(json);,0,0,0.0,786
b077563265697866b9ea39306d56e5f302739d07,// TODO due to https://github.com/openshift/origin/issues/1317 we can't use the direct kube REST API,0,0,0.0,787
b077563265697866b9ea39306d56e5f302739d07,// lets try the cdelivery first,0,0,0.0,788
b077563265697866b9ea39306d56e5f302739d07,/*,0,0,0.0,789
b077563265697866b9ea39306d56e5f302739d07,*/,0,0,0.0,790
b077563265697866b9ea39306d56e5f302739d07,"createWebhook.setType(""gogs"");",0,0,0.0,791
b077563265697866b9ea39306d56e5f302739d07,config.setUrl(webhookUrl);,0,0,0.0,792
b077563265697866b9ea39306d56e5f302739d07,controller.applyJson(json);,1,0,0.0,793
b077563265697866b9ea39306d56e5f302739d07,"connection.setRequestProperty(""Content-Type"", ""application/json"");",0,0,0.0,794
b077563265697866b9ea39306d56e5f302739d07,// TODO due to https://github.com/openshift/origin/issues/1317 we can't use the direct kube REST API,1,0,0.0,795
b077563265697866b9ea39306d56e5f302739d07,// lets try the cdelivery first,1,0,0.0,796
b077563265697866b9ea39306d56e5f302739d07,"createWebhook.setType(""gogs"");",1,0,0.0,797
b077563265697866b9ea39306d56e5f302739d07,config.setUrl(webhookUrl);,1,0,0.0,798
b077563265697866b9ea39306d56e5f302739d07,config.setSecret(secret);,1,0,0.0,799
b077563265697866b9ea39306d56e5f302739d07,import java.io.OutputStreamWriter;,0,0,0.0,800
b077563265697866b9ea39306d56e5f302739d07,import java.net.HttpURLConnection;,0,0,0.0,801
b077563265697866b9ea39306d56e5f302739d07,import java.net.URL;,0,0,0.0,802
b077563265697866b9ea39306d56e5f302739d07,triggerJenkinsSeedBuild();,0,0,0.0,803
b077563265697866b9ea39306d56e5f302739d07,/**,0,0,0.0,804
b077563265697866b9ea39306d56e5f302739d07,*/,0,0,0.0,805
b077563265697866b9ea39306d56e5f302739d07,"connection.setRequestMethod(""POST"");",0,0,0.0,806
b077563265697866b9ea39306d56e5f302739d07,throw new RuntimeException(e);,1,0,0.0,807
