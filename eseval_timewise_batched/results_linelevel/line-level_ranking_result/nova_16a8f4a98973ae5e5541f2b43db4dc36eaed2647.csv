commit_id,line,line_level_label,count,line_score,row
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Used for paste app factories in paste.deploy config files.",0,5,1.0,1
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Used for paste app factories in paste.deploy config files.",1,5,1.0,2
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,section of the paste config) will be passed into the `__init__` method,1,4,0.8,3
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,WSGI app to call.  You'll probably want to specify an 'action' as,1,4,0.8,4
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,which would result in a call to the `Analytics` class as,1,4,0.8,5
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,which would result in a call to the `Wadl` class as,1,4,0.8,6
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"# Option 5: you can get a Response object for a wsgi app, too, to",1,4,0.8,7
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,WSGI app to call.  You'll probably want to specify an 'action' as,0,4,0.8,8
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,which would result in a call to the `Analytics` class as,0,4,0.8,9
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"# Option 5: you can get a Response object for a wsgi app, too, to",0,4,0.8,10
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,which would result in a call to the `Wadl` class as,0,4,0.8,11
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,section of the paste config) will be passed into the `__init__` method,0,4,0.8,12
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# Pointing to an arbitrary WSGI app.  You can specify the,1,3,0.6000000000000001,13
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# Option 4: any wsgi app to be run next,1,3,0.6000000000000001,14
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,These classes require an application to be,1,3,0.6000000000000001,15
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"If this returns None, the next application down the stack will be",1,3,0.6000000000000001,16
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Create a router for the given routes.Mapper.",1,3,0.6000000000000001,17
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"Each route in `mapper` must specify a 'controller', which is a",1,3,0.6000000000000001,18
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,:param config_path: Full or relative path to the paste config.,1,3,0.6000000000000001,19
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# {path_info:.*} parameter so the target app can be handed just that,1,3,0.6000000000000001,20
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Route the incoming request to a controller based on self.map.",1,3,0.6000000000000001,21
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Dispatch the request to the appropriate controller.",1,3,0.6000000000000001,22
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,Called by self._router after matching the incoming request to a route,1,3,0.6000000000000001,23
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Initialize the loader, and attempt to find the config.",1,3,0.6000000000000001,24
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,:param config_path: Full or relative path to the paste config.,0,3,0.6000000000000001,25
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"# headers, or you want to be treated like an iterable, or ...)",1,3,0.6000000000000001,26
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,the request to the action-specific method.,1,3,0.6000000000000001,27
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Initialize the loader, and attempt to find the config.",0,3,0.6000000000000001,28
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"Each route in `mapper` must specify a 'controller', which is a",0,3,0.6000000000000001,29
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,Called by self._router after matching the incoming request to a route,0,3,0.6000000000000001,30
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,#    not use this file except in compliance with the License. You may obtain,0,3,0.6000000000000001,31
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# Option 4: any wsgi app to be run next,0,3,0.6000000000000001,32
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,These classes require an application to be,0,3,0.6000000000000001,33
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"If this returns None, the next application down the stack will be",0,3,0.6000000000000001,34
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Create a router for the given routes.Mapper.",0,3,0.6000000000000001,35
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"# headers, or you want to be treated like an iterable, or ...)",0,3,0.6000000000000001,36
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,the request to the action-specific method.,0,3,0.6000000000000001,37
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Dispatch the request to the appropriate controller.",0,3,0.6000000000000001,38
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# Pointing to an arbitrary WSGI app.  You can specify the,0,3,0.6000000000000001,39
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# {path_info:.*} parameter so the target app can be handed just that,0,3,0.6000000000000001,40
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Route the incoming request to a controller based on self.map.",0,3,0.6000000000000001,41
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,Can be inserted into any WSGI application chain to get information,1,2,0.4,42
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Helper class for debugging a WSGI application.",1,2,0.4,43
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Do whatever you'd like to the response.""""""",1,2,0.4,44
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,executed. If it returns a response then that response will be returned,1,2,0.4,45
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,initialized that will be called next.  By default the middleware will,1,2,0.4,46
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,but using the kwarg passing it shouldn't be necessary.,1,2,0.4,47
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# Option 3: a webob Response object (in case you need to play with,1,2,0.4,48
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,except LookupError:,0,2,0.4,49
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"You could of course re-implement the `factory` method in subclasses,",1,2,0.4,50
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"for hdr, value in self._headers.items():",1,2,0.4,51
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"for (key, value) in resp.headers.items():",1,2,0.4,52
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"for key, value in req.environ.items():",1,2,0.4,53
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Used to load WSGI applications from paste configurations.""""""",1,2,0.4,54
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,for part in app_iter:,1,2,0.4,55
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,well and have your controller be an object that can route,1,2,0.4,56
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# Explicit mapping of one route to a controller+action,1,2,0.4,57
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"If no match, return a 404.",1,2,0.4,58
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,app = match['controller'],1,2,0.4,59
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return app,1,2,0.4,60
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Return the paste URLMap wrapped WSGI application.",1,2,0.4,61
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,:param name: Name of the application to load.,1,2,0.4,62
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"return deploy.loadapp(""config:%s"" % self.config_path, name=name)",1,2,0.4,63
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,except LookupError:,1,2,0.4,64
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,:param name: Name of the application to load.,0,2,0.4,65
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"return deploy.loadapp(""config:%s"" % self.config_path, name=name)",0,2,0.4,66
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Iterator that prints the contents of a wrapper string.""""""",1,2,0.4,67
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Return the paste URLMap wrapped WSGI application.",0,2,0.4,68
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"for hdr, val in self._headers.items():",0,2,0.4,69
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Used to load WSGI applications from paste configurations.""""""",0,2,0.4,70
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,#    a copy of the License at,0,2,0.4,71
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"#    Unless required by applicable law or agreed to in writing, software",0,2,0.4,72
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"#    distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",0,2,0.4,73
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,#    License for the specific language governing permissions and limitations,0,2,0.4,74
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"You could of course re-implement the `factory` method in subclasses,",0,2,0.4,75
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,but using the kwarg passing it shouldn't be necessary.,0,2,0.4,76
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# Option 3: a webob Response object (in case you need to play with,0,2,0.4,77
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,initialized that will be called next.  By default the middleware will,0,2,0.4,78
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,executed. If it returns a response then that response will be returned,0,2,0.4,79
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Do whatever you'd like to the response.""""""",0,2,0.4,80
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""WSGI primitives used throughout the nova WSGI apps.""""""",0,2,0.4,81
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Helper class for debugging a WSGI application.",0,2,0.4,82
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,well and have your controller be an object that can route,0,2,0.4,83
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,Can be inserted into any WSGI application chain to get information,0,2,0.4,84
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,app = match['controller'],0,2,0.4,85
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"If no match, return a 404.",0,2,0.4,86
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# Explicit mapping of one route to a controller+action,0,2,0.4,87
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,for part in app_iter:,0,2,0.4,88
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Iterator that prints the contents of a wrapper string.""""""",0,2,0.4,89
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"for (key, value) in resp.headers.items():",0,2,0.4,90
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"for key, value in req.environ.items():",0,2,0.4,91
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return app,0,2,0.4,92
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# Option 1: simple string,1,1,0.2,93
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,res.app_iter = open('somefile'),1,1,0.2,94
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,res = 'message\n',1,1,0.2,95
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# Option 2: a nicely formatted HTTP exception page,1,1,0.2,96
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,res = exc.HTTPForbidden(explanation='Nice try'),1,1,0.2,97
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,res = Response(),1,1,0.2,98
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# ... or set req.response and return None.,1,1,0.2,99
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,res = self.application,1,1,0.2,100
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,res = req.get_response(self.application),1,1,0.2,101
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# You can then just return your response...,1,1,0.2,102
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return res,1,1,0.2,103
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,req.response = res,1,1,0.2,104
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,See the end of http://pythonpaste.org/webob/modules/dec.html,1,1,0.2,105
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"r""""""Subclasses will probably want to implement __call__ like this:",1,1,0.2,106
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# Any of the following objects work as responses:,1,1,0.2,107
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,response.headers[hdr] = utils.utf8(value),1,1,0.2,108
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return cls(**local_config),1,1,0.2,109
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,response.headers['Content-Type'] = utils.utf8(content_type),1,1,0.2,110
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,self.config_path = config_path,0,1,0.2,111
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,:returns: Paste URLMap object wrapping the requested application.,0,1,0.2,112
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"LOG.debug(""Loading app %(name)s from %(path)s"",",0,1,0.2,113
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"# NOTE(andreykurilin): we need to encode 'Content-Length' header,",1,1,0.2,114
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,response.headers['Content-Length'] = utils.utf8(,1,1,0.2,115
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"Any local configuration (that is, values under the [filter:APPNAME]",1,1,0.2,116
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,response.headers[hdr] = utils.utf8(val),1,1,0.2,117
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,paste.app_factory = nova.api.fancy_api:Wadl.factory,1,1,0.2,118
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,from paste import deploy,1,1,0.2,119
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,scheme = environ.get(CONF.wsgi.secure_proxy_ssl_header),1,1,0.2,120
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,environ['wsgi.url_scheme'] = scheme,1,1,0.2,121
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Base WSGI application wrapper. Subclasses need to implement __call__.""""""",1,1,0.2,122
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"Any local configuration (that is, values under the [app:APPNAME]",1,1,0.2,123
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,latest_version = 1.3,1,1,0.2,124
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"simply call its wrapped app, or you can override __call__ to customize its",1,1,0.2,125
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,print(('*' * 40) + ' REQUEST ENVIRON'),1,1,0.2,126
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,redis_host = 127.0.0.1,1,1,0.2,127
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return webob.exc.HTTPNotFound(),1,1,0.2,128
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,self.map = mapper,1,1,0.2,129
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"self._router = routes.middleware.RoutesMiddleware(self._dispatch,",1,1,0.2,130
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return self._router,1,1,0.2,131
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,and putting the information into req.environ.  Either returns 404,1,1,0.2,132
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,or the routed WSGI app's response.,1,1,0.2,133
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,match = req.environ['wsgiorg.routing_args'][1],1,1,0.2,134
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,self.config_path = None,1,1,0.2,135
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,sc = ServerController(),1,1,0.2,136
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,config_path = config_path or CONF.wsgi.api_paste_config,1,1,0.2,137
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,self.config_path = CONF.find_file(config_path),1,1,0.2,138
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,self.config_path = config_path,1,1,0.2,139
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,:returns: Paste URLMap object wrapping the requested application.,1,1,0.2,140
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"LOG.debug(""Loading app %(name)s from %(path)s"",",1,1,0.2,141
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,config_path = config_path or CONF.wsgi.api_paste_config,0,1,0.2,142
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# section of the URL.,1,1,0.2,143
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,mapper = routes.Mapper(),1,1,0.2,144
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,paste.filter_factory = nova.api.analytics:Analytics.factory,1,1,0.2,145
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,response = req.get_response(self.application),1,1,0.2,146
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"return cls(app, **local_config)",1,1,0.2,147
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return _factory,1,1,0.2,148
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,self.application = application,1,1,0.2,149
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return None,1,1,0.2,150
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return response,1,1,0.2,151
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,response = self.process_request(req),1,1,0.2,152
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return self.process_response(response),1,1,0.2,153
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""WSGI middleware that maps incoming requests to WSGI apps.""""""",1,1,0.2,154
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,about the request and response.,1,1,0.2,155
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,resp = req.get_response(self.application),1,1,0.2,156
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,print(('*' * 40) + ' RESPONSE HEADERS'),1,1,0.2,157
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,resp.app_iter = self.print_generator(resp.app_iter),1,1,0.2,158
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return resp,1,1,0.2,159
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,print(('*' * 40) + ' BODY'),1,1,0.2,160
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,self.config_path = CONF.find_file(config_path),0,1,0.2,161
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,for more info.,1,1,0.2,162
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,self.config_path = None,0,1,0.2,163
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# Option 1: simple string,0,1,0.2,164
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"Any local configuration (that is, values under the [app:APPNAME]",0,1,0.2,165
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,latest_version = 1.3,0,1,0.2,166
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,paste.app_factory = nova.api.fancy_api:Wadl.factory,0,1,0.2,167
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return cls(**local_config),0,1,0.2,168
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"r""""""Subclasses will probably want to implement __call__ like this:",0,1,0.2,169
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# Any of the following objects work as responses:,0,1,0.2,170
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,res = 'message\n',0,1,0.2,171
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,environ['wsgi.url_scheme'] = scheme,0,1,0.2,172
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# Option 2: a nicely formatted HTTP exception page,0,1,0.2,173
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,res = exc.HTTPForbidden(explanation='Nice try'),0,1,0.2,174
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,res = Response(),0,1,0.2,175
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,res.app_iter = open('somefile'),0,1,0.2,176
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,res = self.application,0,1,0.2,177
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,res = req.get_response(self.application),0,1,0.2,178
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Base WSGI application wrapper. Subclasses need to implement __call__.""""""",0,1,0.2,179
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,LOG = logging.getLogger(__name__),0,1,0.2,180
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return res,0,1,0.2,181
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,response.headers[hdr] = encodeutils.safe_decode(,0,1,0.2,182
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return webob.exc.HTTPNotFound(),0,1,0.2,183
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,val = six.text_type(val),0,1,0.2,184
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# In Py2.X Headers must be byte strings,0,1,0.2,185
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,response.headers[hdr] = encodeutils.safe_encode(val),0,1,0.2,186
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,else:,0,1,0.2,187
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# In Py3.X Headers must be utf-8 strings,0,1,0.2,188
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,content_type = six.text_type(content_type),0,1,0.2,189
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,CONF = nova.conf.CONF,0,1,0.2,190
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,response.headers['Content-Type'] = encodeutils.safe_encode(,0,1,0.2,191
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,response.headers['Content-Type'] = encodeutils.safe_decode(,0,1,0.2,192
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"#    Licensed under the Apache License, Version 2.0 (the ""License""); you may",0,1,0.2,193
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",0,1,0.2,194
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,#    under the License.,0,1,0.2,195
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,from paste import deploy,0,1,0.2,196
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# You can then just return your response...,0,1,0.2,197
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,scheme = environ.get(CONF.wsgi.secure_proxy_ssl_header),0,1,0.2,198
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# ... or set req.response and return None.,0,1,0.2,199
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# section of the URL.,0,1,0.2,200
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,print(('*' * 40) + ' RESPONSE HEADERS'),0,1,0.2,201
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,resp.app_iter = self.print_generator(resp.app_iter),0,1,0.2,202
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return resp,0,1,0.2,203
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,print(('*' * 40) + ' BODY'),0,1,0.2,204
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""WSGI middleware that maps incoming requests to WSGI apps.""""""",0,1,0.2,205
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,sc = ServerController(),0,1,0.2,206
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,self.map = mapper,0,1,0.2,207
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,print(('*' * 40) + ' REQUEST ENVIRON'),0,1,0.2,208
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"self._router = routes.middleware.RoutesMiddleware(self._dispatch,",0,1,0.2,209
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return self._router,0,1,0.2,210
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,and putting the information into req.environ.  Either returns 404,0,1,0.2,211
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,or the routed WSGI app's response.,0,1,0.2,212
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,req.response = res,0,1,0.2,213
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,match = req.environ['wsgiorg.routing_args'][1],0,1,0.2,214
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,resp = req.get_response(self.application),0,1,0.2,215
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,mapper = routes.Mapper(),0,1,0.2,216
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,redis_host = 127.0.0.1,0,1,0.2,217
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,self.application = application,0,1,0.2,218
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,about the request and response.,0,1,0.2,219
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"simply call its wrapped app, or you can override __call__ to customize its",0,1,0.2,220
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"Any local configuration (that is, values under the [filter:APPNAME]",0,1,0.2,221
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,paste.filter_factory = nova.api.analytics:Analytics.factory,0,1,0.2,222
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"return cls(app, **local_config)",0,1,0.2,223
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,See the end of http://pythonpaste.org/webob/modules/dec.html,0,1,0.2,224
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return _factory,0,1,0.2,225
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return None,0,1,0.2,226
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return response,0,1,0.2,227
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,response = self.process_request(req),0,1,0.2,228
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,response = req.get_response(self.application),0,1,0.2,229
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,return self.process_response(response),0,1,0.2,230
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,for more info.,0,1,0.2,231
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,import nova.api.fancy_api,1,0,0.0,232
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,[app:wadl],1,0,0.0,233
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,A hypothetical configuration would look like:,1,0,0.0,234
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,behavior.,1,0,0.0,235
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,as kwargs.,1,0,0.0,236
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def factory(cls, global_config, **local_config):",1,0,0.0,237
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""",1,0,0.0,238
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,@classmethod,1,0,0.0,239
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,fancy_api.Wadl(latest_version='1.3'),1,0,0.0,240
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,class Middleware(Application):,1,0,0.0,241
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def __call__(self, environ, start_response):",1,0,0.0,242
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,@webob.dec.wsgify(RequestClass=Request),1,0,0.0,243
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def __call__(self, req):",1,0,0.0,244
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# play with headers etc,1,0,0.0,245
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,raise NotImplementedError(_('You must implement __call__')),1,0,0.0,246
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Base WSGI middleware.",1,0,0.0,247
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"super(Request, self).__init__(environ, *args, **kwargs)",1,0,0.0,248
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,class Application(object):,1,0,0.0,249
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,from nova import utils,1,0,0.0,250
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,if scheme:,1,0,0.0,251
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,response.headers['Content-Length']),1,0,0.0,252
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,import nova.api.analytics,1,0,0.0,253
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"LOG.exception(_LE(""Couldn't lookup app: %s""), name)",0,0,0.0,254
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"raise exception.PasteAppNotFound(name=name, path=self.config_path)",0,0,0.0,255
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,from nova import wsgi,1,0,0.0,256
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,if response.headers.get('Content-Length'):,1,0,0.0,257
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"# since webob.Response auto sets it if ""body"" attr is presented.",1,0,0.0,258
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# https://github.com/Pylons/webob/blob/1.5.0b0/webob/response.py#L147,1,0,0.0,259
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,utils.utf8(val)),1,0,0.0,260
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,if CONF.wsgi.secure_proxy_ssl_header:,1,0,0.0,261
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,import sys,1,0,0.0,262
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,import routes.middleware,1,0,0.0,263
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,import six,1,0,0.0,264
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,import webob.dec,1,0,0.0,265
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,import webob.exc,1,0,0.0,266
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,class Request(webob.Request):,1,0,0.0,267
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def __init__(self, environ, *args, **kwargs):",1,0,0.0,268
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,[filter:analytics],1,0,0.0,269
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def load_app(self, name):",1,0,0.0,270
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"analytics.Analytics(app_from_paste, redis_host='127.0.0.1')",1,0,0.0,271
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,if not os.path.isabs(config_path):,1,0,0.0,272
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"mapper.connect(None, '/v1.0/{path_info:.*}', controller=BlogApp())",1,0,0.0,273
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,self.map),1,0,0.0,274
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,def _dispatch(req):,1,0,0.0,275
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,if not match:,1,0,0.0,276
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,class Loader(object):,1,0,0.0,277
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def __init__(self, config_path=None):",1,0,0.0,278
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,:returns: None,1,0,0.0,279
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,elif os.path.exists(config_path):,1,0,0.0,280
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# Actions are all implicitly defined,1,0,0.0,281
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,if not self.config_path:,1,0,0.0,282
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,raise exception.ConfigNotFound(path=config_path),1,0,0.0,283
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,try:,0,0,0.0,284
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,:raises: `nova.exception.PasteAppNotFound`,1,0,0.0,285
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,try:,1,0,0.0,286
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"{'name': name, 'path': self.config_path})",1,0,0.0,287
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"LOG.exception(_LE(""Couldn't lookup app: %s""), name)",1,0,0.0,288
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"mapper.resource('server', 'servers', controller=sc)",1,0,0.0,289
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"mapper.connect(None, '/svrlist', controller=sc, action='list')",1,0,0.0,290
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,def _factory(app):,1,0,0.0,291
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"print(key, '=', value)",1,0,0.0,292
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def __init__(self, application):",1,0,0.0,293
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def process_request(self, req):",1,0,0.0,294
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Called on each request.",1,0,0.0,295
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,and execution will stop here.,1,0,0.0,296
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def process_response(self, response):",1,0,0.0,297
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,if response:,1,0,0.0,298
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,class Debug(Middleware):,1,0,0.0,299
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,print(),1,0,0.0,300
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,Examples:,1,0,0.0,301
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,@staticmethod,1,0,0.0,302
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,def print_generator(app_iter):,1,0,0.0,303
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,sys.stdout.write(six.text_type(part)),1,0,0.0,304
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,sys.stdout.flush(),1,0,0.0,305
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,yield part,1,0,0.0,306
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,class Router(object):,1,0,0.0,307
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def __init__(self, mapper):",1,0,0.0,308
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"{'name': name, 'path': self.config_path})",0,0,0.0,309
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,def _factory(app):,0,0,0.0,310
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,:raises: `nova.exception.PasteAppNotFound`,0,0,0.0,311
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,as kwargs.,0,0,0.0,312
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def __init__(self, environ, *args, **kwargs):",0,0,0.0,313
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,if CONF.wsgi.secure_proxy_ssl_header:,0,0,0.0,314
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,if scheme:,0,0,0.0,315
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"super(Request, self).__init__(environ, *args, **kwargs)",0,0,0.0,316
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,class Application(object):,0,0,0.0,317
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,@classmethod,0,0,0.0,318
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def factory(cls, global_config, **local_config):",0,0,0.0,319
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,A hypothetical configuration would look like:,0,0,0.0,320
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"from nova.i18n import _, _LE",0,0,0.0,321
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,[app:wadl],0,0,0.0,322
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,import nova.api.fancy_api,0,0,0.0,323
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,fancy_api.Wadl(latest_version='1.3'),0,0,0.0,324
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""",0,0,0.0,325
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def __call__(self, environ, start_response):",0,0,0.0,326
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,@webob.dec.wsgify(RequestClass=Request),0,0,0.0,327
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def __call__(self, req):",0,0,0.0,328
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,class Request(webob.Request):,0,0,0.0,329
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,from nova import exception,0,0,0.0,330
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def load_app(self, name):",0,0,0.0,331
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,encodeutils.safe_encode(content_type)),0,0,0.0,332
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,from nova.api import wsgi,0,0,0.0,333
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"if not isinstance(val, six.text_type):",0,0,0.0,334
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,if six.PY2:,0,0,0.0,335
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,encodeutils.safe_encode(val)),0,0,0.0,336
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# Deal with content_type,0,0,0.0,337
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"if not isinstance(content_type, six.text_type):",0,0,0.0,338
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,content_type),0,0,0.0,339
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,#,0,0,0.0,340
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,import nova.conf,0,0,0.0,341
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,#         http://www.apache.org/licenses/LICENSE-2.0,0,0,0.0,342
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,import os,0,0,0.0,343
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,import sys,0,0,0.0,344
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,from oslo_log import log as logging,0,0,0.0,345
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,import routes.middleware,0,0,0.0,346
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,import six,0,0,0.0,347
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,import webob,0,0,0.0,348
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# play with headers etc,0,0,0.0,349
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,raise NotImplementedError(_('You must implement __call__')),0,0,0.0,350
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,class Middleware(Application):,0,0,0.0,351
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,def _dispatch(req):,0,0,0.0,352
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def __init__(self, mapper):",0,0,0.0,353
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,Examples:,0,0,0.0,354
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"mapper.connect(None, '/svrlist', controller=sc, action='list')",0,0,0.0,355
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,# Actions are all implicitly defined,0,0,0.0,356
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"mapper.resource('server', 'servers', controller=sc)",0,0,0.0,357
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"mapper.connect(None, '/v1.0/{path_info:.*}', controller=BlogApp())",0,0,0.0,358
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,self.map),0,0,0.0,359
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,if not match:,0,0,0.0,360
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Base WSGI middleware.",0,0,0.0,361
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,class Loader(object):,0,0,0.0,362
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def __init__(self, config_path=None):",0,0,0.0,363
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,:returns: None,0,0,0.0,364
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,if not os.path.isabs(config_path):,0,0,0.0,365
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,elif os.path.exists(config_path):,0,0,0.0,366
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,if not self.config_path:,0,0,0.0,367
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,raise exception.ConfigNotFound(path=config_path),0,0,0.0,368
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,class Router(object):,0,0,0.0,369
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,yield part,0,0,0.0,370
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,sys.stdout.flush(),0,0,0.0,371
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,sys.stdout.write(six.text_type(part)),0,0,0.0,372
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,behavior.,0,0,0.0,373
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,[filter:analytics],0,0,0.0,374
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,import nova.api.analytics,0,0,0.0,375
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"analytics.Analytics(app_from_paste, redis_host='127.0.0.1')",0,0,0.0,376
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def __init__(self, application):",0,0,0.0,377
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def process_request(self, req):",0,0,0.0,378
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"""""""Called on each request.",0,0,0.0,379
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,and execution will stop here.,0,0,0.0,380
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"def process_response(self, response):",0,0,0.0,381
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,if response:,0,0,0.0,382
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,class Debug(Middleware):,0,0,0.0,383
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"print(key, '=', value)",0,0,0.0,384
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,print(),0,0,0.0,385
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,@staticmethod,0,0,0.0,386
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,def print_generator(app_iter):,0,0,0.0,387
16a8f4a98973ae5e5541f2b43db4dc36eaed2647,"raise exception.PasteAppNotFound(name=name, path=self.config_path)",1,0,0.0,388
